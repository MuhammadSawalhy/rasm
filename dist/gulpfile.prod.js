"use strict";function ownKeys(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),t.push.apply(t,s)}return t}function _objectSpread(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(t,!0).forEach(function(e){_defineProperty(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ownKeys(t).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))})}return r}function _defineProperty(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var mapsIncludeContent=!0,gulp=require("gulp"),sourcemaps=require("gulp-sourcemaps"),browserSync=require("browser-sync").create();function pugCompile(e,r){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},s=require("gulp-pug");"string"==typeof e&&(e=gulp.src(e));var l,p=t=_objectSpread({},{fileName:"all",outputStyle:"expanded"},{},t),n=(p.fileName,p.outputStyle);Array.isArray(n)||(n=[n]);var o=!0,i=!1,u=void 0;try{for(var a,c=n[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){a.value;l=e.pipe(sourcemaps.init({largeFile:!0,loadMaps:!1})).pipe(s()).pipe(sourcemaps.write(".",{includeContent:mapsIncludeContent})).pipe(gulp.dest(r))}}catch(e){i=!0,u=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw u}}return l}function pugDoAll(){return pugCompile("./src/pugjs/index.pug","./dist",{outputStyle:["compressed"]})}function stylesCompileAll(e,r){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},s=require("gulp-sass"),l=require("gulp-autoprefixer");"string"==typeof e&&(e=gulp.src(e));var p,n=t=_objectSpread({},{fileName:"all",outputStyle:"expanded"},{},t),o=n.fileName,i=n.outputStyle;Array.isArray(i)||(i=[i]);var u=!0,a=!1,c=void 0;try{for(var y,d=i[Symbol.iterator]();!(u=(y=d.next()).done);u=!0){var g=y.value,f=o+("expanded"!==g?"compressed"===g?".min":"."+g:"")+".css";p=e.pipe(sourcemaps.init({largeFile:!0,loadMaps:!1})).pipe(s({outputStyle:g})).pipe(concat(f)).pipe(l("last 2 versions")).pipe(sourcemaps.write(".",{includeContent:mapsIncludeContent})).pipe(gulp.dest(r)).pipe(browserSync.stream())}}catch(e){a=!0,c=e}finally{try{u||null==d.return||d.return()}finally{if(a)throw c}}return p}function stylesDoAll(){return stylesCompileAll("./src/styles/style.scss","./dist/styles",{outputStyle:["compressed"]})}function jsCompile(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"./dist/js",t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};"string"==typeof e&&(e=gulp.src(e));var s=t=_objectSpread({},{fileName:"all",outputStyle:"expanded"},{},t),l=s.fileName,p=s.outputStyle;Array.isArray(p)||(p=[p]);var n,o=require("gulp-minify"),i=(require("gulp-babel"),require("gulp-terser")),u=!0,a=!1,c=void 0;try{for(var y,d=p[Symbol.iterator]();!(u=(y=d.next()).done);u=!0){var g=y.value;if("compressed"===g){var f=l+".js";e.pipe(sourcemaps.init()).pipe(concat(f)).pipe(o({ext:{src:".js",min:".min.js"},ignoreFiles:[".min.js"]})).pipe(sourcemaps.write(".",{includeContent:mapsIncludeContent})).pipe(gulp.dest(r))}else if("expanded"===g){n=e.pipe(sourcemaps.init()).pipe(i()).pipe(sourcemaps.write(".",{includeContent:mapsIncludeContent})).pipe(gulp.dest(r))}}}catch(e){a=!0,c=e}finally{try{u||null==d.return||d.return()}finally{if(a)throw c}}return n}function jsDoApp(){return jsCompile("./src/js/app.js","./dist/js",{fileName:"app",outputStyle:["compressed"]})}function jsDoAll(){return jsDoApp()}gulp.task("pug",pugDoAll),gulp.task("sass",stylesDoAll),gulp.task("js",jsDoAll),gulp.task("all",function(){return stylesDoAll(),pugDoAll(),jsDoAll()});var watchMyProject=function(){return gulp.watch(["./dist/**/*.html","./dist/**/*.js"],browserSync.relode),gulp.watch(["./src/pugjs/**/*.pug"],pugDoAll),gulp.watch(["./src/js/**/*.js"],jsDoAll),gulp.watch(["./src/styles/**/*.scss"],stylesDoAll)};gulp.task("watch",watchMyProject);var serveMyProject=function(){return browserSync.init({server:{baseDir:"."}}),watchMyProject()};gulp.task("live-server",serveMyProject),gulp.task("default",serveMyProject);