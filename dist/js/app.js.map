{"version":3,"file":"app.js","sources":["../../src/js/PLOTTO/Errors/ExistBefore.js","../../src/js/PLOTTO/Errors/UndefError.js","../../src/js/PLOTTO/global.js","../../src/js/PLOTTO/GraphChildren/GraphChild.js","../../src/js/PLOTTO/Canvas.js","../../src/js/PLOTTO/drawing/drawing.js","../../src/js/PLOTTO/GraphChildren/functions/Xfunction.js","../../src/js/PLOTTO/GraphChildren/Point.js","../../src/js/PLOTTO/GraphChildren/EvalExpr.js","../../src/js/PLOTTO/GraphChildren/Variable.js","../../src/js/PLOTTO/GraphChildren/Func.js","../../src/js/PLOTTO/GraphChildren/Empty.js","../../src/js/PLOTTO/GraphChildren/Slider.js","../../src/js/app/ChildControl.js","../../src/js/app/global.js","../../src/js/PLOTTO/GraphSetting/Transform.js","../../src/js/PLOTTO/GraphSetting/CoorManager.js","../../src/js/PLOTTO/GraphSetting/GraphSettings.js","../../src/js/PLOTTO/Coordinates.js","../../src/js/PLOTTO/Sketch.js","../../src/js/app/events/canvasEvents.js","../../src/js/app/events/index.js","../../src/js/app/events/toolsEvents.js","../../src/js/app/keypad/index.js","../../src/js/app/keypad/events.js","../../src/js/app/app.js"],"sourcesContent":["export default class ExistBefore extends Error{\r\n   constructor(id) {\r\n      super('\"' + id + '\" has been defined before.');\r\n      this.id = id;\r\n   }\r\n}","export default class UndefError extends Error{\r\n   constructor(undef) {\r\n      super(\"\");\r\n      this.undef = undef;\r\n   }\r\n}","import { UndefError } from './Errors/index.js';\r\nexport function generateName() {\r\n   return (Date.now() + generateName.randomNameNum++).toString(36);\r\n}\r\ngenerateName.randomNameNum = 0;\r\n\r\n// let mathFunc = {\r\n//    sin: x => Math.sin(x),\r\n//    cos: x => Math.cos(x),\r\n//    tan: x => Math.tan(x),\r\n//    asin: x => Math.asin(x),\r\n//    acos: x => Math.acos(x),\r\n//    atan: x => Math.atan(x),\r\n//    exp: x => Math.exp(x),\r\n//    ln: x => Math.log(x),\r\n//    log: function (x) {\r\n//       let base = arguments[1] || 10;\r\n//       return Math.log10(x) / Math.log(base);\r\n//    },\r\n//    sqrt: x => Math.sqrt(x),\r\n//    max: (...values) => Math.max(...values),\r\n//    min: (...values) => Math.min(...values),\r\n//    round: x => Math.round(x),\r\n//    abs: x => Math.abs(x),\r\n//    floor: x => Math.floor(x),\r\n//    ceil: x => Math.ceil(x),\r\n// };\r\n\r\nlet mathFunc = {\r\n   log: function (x, base = 10) {\r\n      return Math.log10(x) / Math.log10(base);\r\n   },\r\n   ln: x => Math.log(x, Math.E),\r\n\r\n   sec: x => 1 / Math.cos(x),\r\n   csc: x => 1 / Math.sin(x),\r\n   cot: x => 1 / Math.tan(x),\r\n   asec: x => Math.acos(1/x),\r\n   acsc: x => Math.asin(1/x),\r\n   acot: x => Math.atan(1/x),\r\n\r\n   sinh: x => (Math.exp(x) - Math.exp(-x)) / 2,\r\n   cosh: x => (Math.exp(x) + Math.exp(-x)) / 2,\r\n   tanh: x => Math.sinh(x) / Math.cosh(-x),\r\n   asinh: x => Math.ln(x + Math.sqrt(x ** 2 + 1)),\r\n   acosh: x => Math.ln(x + Math.sqrt(x ** 2 - 1)),\r\n   atanh: x => 0.5 * Math.ln((1 + x)/(1 - x)),\r\n\r\n   sech: x => 1 / Math.cosh(x),\r\n   csch: x => 1 / Math.sinh(x),\r\n   coth: x => 1 / Math.tanh(x),\r\n   asech: x => Math.acosh(1 / x),\r\n   acsch: x => Math.asinh(1 / x),\r\n   acoth: x => Math.atanh(1 / x),\r\n\r\n   fact: x => (x % 1 !== 0 || x < 0) ? NaN : Math.__fact(x), \r\n   __fact: x => x === 0 ? 1 : (x * Math.__fact(x - 1)),\r\n\r\n   gcd: (...values)=>{\r\n      let gcd_ = Math.abs(values[0]);\r\n      let a = Math.abs(values[1]);\r\n      if (gcd_ % 1 != 0 || a % 1 != 0)\r\n         return NaN;\r\n      gcd_ = a > gcd_ ? Math.gcd2(a, gcd_) : Math.gcd2(gcd_, a);\r\n\r\n      for (let i = 2; i < values.length; i++) {\r\n         a = Math.abs(values[i]);\r\n         if (a % 1 != 0)\r\n            return NaN;\r\n         gcd_ = a > gcd_ ? Math.gcd2(a, gcd_) : Math.gcd2(gcd_, a);\r\n      }\r\n\r\n      return gcd_;\r\n   },\r\n   gcd2(a, b) {\r\n      if (b == 0)\r\n         return a;\r\n      return Math.gcd(b, a % b);\r\n   },\r\n   lcm: (...values) => {\r\n      let product = 1;\r\n      let a;\r\n      for (let i = 0; i < values.length; i++) {\r\n         a = values[i];\r\n         if (a % 1 !== 0)\r\n            return NaN;\r\n         product *= a;\r\n      }\r\n      return Math.abs(product) / Math.pow(Math.gcd(...values), values.length - 1);\r\n   },\r\n   \r\n   mod: (a, b) =>{\r\n      return a % b;\r\n   }\r\n};\r\n\r\nObject.assign(Math, mathFunc);\r\n\r\nlet vars = {\r\n   pi: Math.PI,\r\n   e: Math.E,\r\n   \r\n};\r\n\r\nObject.assign(Math, vars);\r\n\r\nexport function getJSfunction(input, params, usestrict = true, undefThrowError = true) {\r\n   let result;\r\n   if (input instanceof MagicalParser.Node) {\r\n      result = MathPackage.Parser.parsedTOjsFunction(input, params, 'Math', usestrict);\r\n   } else if ((typeof input).toLowerCase() === 'object') {\r\n      result = MathPackage.Parser.maximaTOjsFunction(MathPackage.Parser.latexTOmaxima(input.value), params, 'Math', usestrict);\r\n   } else {\r\n      result = MathPackage.Parser.maximaTOjsFunction(input, params, 'Math', usestrict);\r\n   }\r\n   if (undefThrowError) {\r\n      if (result.undef.vars.length > 0 || result.undef.funcs.length > 0) throw new UndefError(result.undef);\r\n      return result.func;\r\n   } else {\r\n      return result.func;\r\n   }\r\n}\r\n","import { generateName } from './../global.js';\r\nexport default class GraphChild {\r\n\r\n    /**\r\n     * @param {*} options \r\n     * include these ptoperties: \r\n     * 1. sketch\r\n     * 2. id\r\n     * 3. [pen] ::: for drawable children that will be drawn in the canvas\r\n     * 4. [handlers] ::: { \r\n     *      onchange ::: for the silder,\r\n     *      onupdate :: updating the drawing object that will be useing in the rendering process,\r\n     *      ondrender::: rendering the graphics object coming from the latest finished updating process,\r\n     *      onerror,\r\n     *      onremove\r\n     *  }\r\n     * 5. [renderable] ::: boolean that indecate wheather or not you want to make this graphChild updated and renderd, if it is false so the this is deactivated\r\n     *\r\n     * \r\n     */\r\n    constructor(options, callback) {\r\n\r\n        this.handlers = options.handlers || {};\r\n        this.renderable = options.hasOwnProperty('renderable') ? options.renderable : true;\r\n        if (options.hasOwnProperty('handlers')) delete options.handlers;\r\n        if (options.hasOwnProperty('renderable')) delete options.renderable;\r\n\r\n        if (!options.sketch) {\r\n            throw new Error('Your options passed to the shetchChild is not valid, it doesn\\'t has ' + 'sketch' + ' property, or it is falsy value');\r\n        } else {\r\n            this.sketch = options.sketch;\r\n            this.gs = this.sketch.gs;\r\n            this.coorManager = this.gs.coorManager;\r\n            delete options.sketch;\r\n        }\r\n\r\n        options.id = options.id || generateName();\r\n        Object.assign(this, options);\r\n\r\n        if(callback) callback(this);\r\n\r\n        this.sketch.children.set(this.id, this); /// this must be at the bottom so that if an error occured, no new graphChild is added\r\n    }\r\n    get id() {\r\n        return this._id;\r\n    }\r\n    set id(value) {\r\n        this._id = this.sketch.gs.checkId(value);\r\n    }\r\n\r\n    /**\r\n     * methods are here\r\n     */\r\n\r\n    update(handlerArgs = []) {\r\n        if (this.renderable) {\r\n            try {\r\n                this._update(this.sketch.childrenCanvas, handlerArgs);\r\n            } catch (e) {\r\n                this.error(e);\r\n            }\r\n        }\r\n        if (this.handlers.onupdate) {\r\n            this.handlers.onupdate(...handlerArgs);\r\n        }\r\n    }\r\n\r\n    draw() {\r\n        if (this.renderable) {\r\n            this._draw(this.sketch.childrenCanvas);\r\n        }\r\n    }\r\n\r\n    _update(canvas) {\r\n\r\n    }\r\n\r\n    _draw(canvas) {\r\n\r\n    }\r\n\r\n    remove(handlerArgs = []) {\r\n        this._remove();\r\n        this.sketch.children.delete(this.id);\r\n        if (this.handlers.onremove) this.handlers.onremove(...handlerArgs);\r\n    }\r\n\r\n    _remove() {\r\n\r\n    }\r\n\r\n    error(e) {\r\n        this.handlers.onerror(e);\r\n    }\r\n}\r\n","export default class Canvas{\r\n\r\n   /**\r\n    * to create an instance of Canvas class, this offer some good methods and propeties.\r\n    * @param {Objetc} options \r\n    * you can set parent, canvas, attributes which contains any attribute of html. \r\n    */\r\n   constructor(options = {}) {\r\n      this.elt = options.canvas || document.createElement(\"canvas\");\r\n      if (options.parent) {\r\n         options.parent.appendChild(this.elt);\r\n         this.elt.width = options.parent.clientWidth;\r\n         this.elt.height = options.parent.clientHeight;\r\n      }\r\n      if (options.attributes) {\r\n         for (let name in options.attributes) {\r\n            this.elt.setAttribute(name, options.attributes[name]);\r\n         }\r\n      }\r\n      this.font = { width: 15, family: 'Arial' };\r\n\r\n      this.ctx = this.elt.getContext('2d');\r\n      this.ctx.textBaseline = 'top';\r\n   }\r\n\r\n\r\n   get width() {\r\n      return this.elt.width;\r\n   }\r\n\r\n   get height() {\r\n      return this.elt.height;\r\n   }\r\n\r\n   resize(width, height) {\r\n      let names = ['lineJoin', 'textBaseline', 'miterLimit', 'lineWidth'];\r\n      let props = {};\r\n      for (let p of names) {\r\n         props[p] = this.ctx[p];\r\n      }\r\n      this.elt.width = width;\r\n      this.elt.height = height;\r\n      Object.assign(this.ctx, props);\r\n   }\r\n\r\n   clear(fillStyle, viewport) {\r\n      if (fillStyle) {\r\n         viewport = viewport || [0, 0, this.elt.clientWidth, this.elt.clientHeight];\r\n         this.ctx.fillStyle = fillStyle;\r\n         this.ctx.fillRect(...viewport);\r\n      } else {\r\n         viewport = viewport || [0, 0, this.elt.clientWidth, this.elt.clientHeight];\r\n         this.ctx.clearRect(...viewport);\r\n      }\r\n   }\r\n\r\n   setFont(font) {\r\n      if (font.size) this.font.size = font.size;\r\n      if (font.family) this.font.family = font.family;\r\n      this.ctx.font = `${this.font.size}px ${this.font.family}`;\r\n   }\r\n\r\n   measureString(txt) {\r\n      let size = this.ctx.measureText(txt);\r\n      size.height = this.font.size;\r\n      return size;\r\n   }\r\n\r\n   get transform() {\r\n      return this._trans;\r\n   }\r\n   /**\r\n    * @param {Array} trans : [a, b, c, d, e, f]\r\n    */\r\n   set transform(trans) {\r\n      this._trans = trans;\r\n      let mag2 = ((this._trans[0] + this._trans[2]) ** 2 + (this._trans[1] + this._trans[3]) ** 2) ** 0.5;\r\n   }\r\n\r\n   setTransform(...params) {\r\n      this.transform = params;\r\n      this.ctx.setTransform(...params);\r\n   }\r\n\r\n   getTransform() {\r\n      return this.transform;\r\n   }\r\n\r\n   get lineWidth() {\r\n      return this.lw;\r\n   }\r\n\r\n   set lineWidth(lw) {\r\n      let mag = ((this._trans[0] + this._trans[2]) ** 2 + (this._trans[1] + this._trans[3]) ** 2) ** 0.5;\r\n      this.ctx.lineWidth = lw / mag;\r\n      this.lw = lw;\r\n   }\r\n\r\n   //#region shapes\r\n\r\n   line(x1, y1, x2, y2) {\r\n      this.ctx.moveTo(x1, y1);\r\n      this.ctx.lineTo(x2, y2);\r\n   }\r\n\r\n   ellipse(x, y, radius1, radius2, rotation = 0, startAngle = 0, endAngle = Math.PI*2, counterClockWise = false) {\r\n      radius2 = radius2 || radius1;\r\n      this.ctx.beginPath();\r\n      this.ctx.ellipse(x, y, radius1, radius2 || radius1, rotation, startAngle, endAngle, counterClockWise);\r\n      this.ctx.fill();\r\n      this.ctx.stroke();\r\n   }\r\n\r\n   //#endregion\r\n\r\n}","import Canvas from './../Canvas.js';\r\nexport class pen{\r\n    constructor(color, weight = 1, style = 'solid'){\r\n        this.color = color;\r\n        this.weight = weight;\r\n        this.style = style;\r\n    }\r\n    setup(canvasORctx) {\r\n        canvasORctx = canvasORctx instanceof Canvas ? canvasORctx.ctx : canvasORctx;\r\n        canvasORctx.strokeStyle = this.color.toString();\r\n        canvasORctx.lineWidth = this.weight;\r\n    }\r\n}\r\n\r\nexport class color{\r\n    constructor(r, g, b, a) {\r\n        this.r = r;\r\n        this.g = g;\r\n        this.b = b;\r\n        this.a = a;\r\n    }\r\n\r\n    get brightness() {\r\n        let num = this.r / 255;\r\n        let num2 = this.g / 255;\r\n        let num3 = this.b / 255;\r\n        let num4 = num;\r\n        let num5 = num;\r\n        if (num2 > num4)\r\n            num4 = num2;\r\n        if (num3 > num4)\r\n            num4 = num3;\r\n        if (num2 < num5)\r\n            num5 = num2;\r\n        if (num3 < num5)\r\n            num5 = num3;\r\n        return ((num4 + num5) / 2);\r\n    }\r\n\r\n    get hue() {\r\n        if ((this.r == this.g) && (this.g == this.b))\r\n            return 0;\r\n        let num = this.r / 255;\r\n        let num2 = this.g / 255;\r\n        let num3 = this.b / 255;\r\n        let num7 = 0;\r\n        let num4 = num;\r\n        let num5 = num;\r\n        if (num2 > num4)\r\n            num4 = num2;\r\n        if (num3 > num4)\r\n            num4 = num3;\r\n        if (num2 < num5)\r\n            num5 = num2;\r\n        if (num3 < num5)\r\n            num5 = num3;\r\n        let num6 = num4 - num5;\r\n        if (num == num4)\r\n            num7 = (num2 - num3) / num6;\r\n        else if (num2 == num4)\r\n            num7 = 2 + ((num3 - num) / num6);\r\n        else if (num3 == num4)\r\n            num7 = 4 + ((num - num2) / num6);\r\n        num7 *= 60;\r\n        if (num7 < 0)\r\n            num7 += 360;\r\n        return num7;\r\n    }\r\n\r\n    get saturation() {\r\n        let num = this.r / 255;\r\n        let num2 = this.g / 255;\r\n        let num3 = this.b / 255;\r\n        let num7 = 0;\r\n        let num4 = num;\r\n        let num5 = num;\r\n        if (num2 > num4)\r\n            num4 = num2;\r\n        if (num3 > num4)\r\n            num4 = num3;\r\n        if (num2 < num5)\r\n            num5 = num2;\r\n        if (num3 < num5)\r\n            num5 = num3;\r\n        if (num4 == num5)\r\n            return num7;\r\n        let num6 = (num4 + num5) / 2;\r\n        if (num6 <= 0.5)\r\n            return ((num4 - num5) / (num4 + num5));\r\n        return ((num4 - num5) / ((2 - num4) - num5));\r\n    }\r\n\r\n    isDark() {\r\n        if (this.brightness > 0.40) {\r\n            return false;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    toArray(override = {}) {\r\n        return [\r\n            override.r || override.r === 0 ? override.r : this.r,\r\n            override.g || override.g === 0 ? override.g : this.g,\r\n            override.b || override.b === 0 ? override.b : this.b,\r\n            override.a || override.a === 0 ? override.a : this.a\r\n        ];\r\n    }\r\n\r\n    toString(override = {}) { \r\n        return `rgba(${this.toArray(override).join(', ')})`;\r\n    }\r\n}\r\n\r\n/**\r\n * our color is an object has r g b as properties. {r: num, g: num, b: num}\r\n */\r\nexport class colorPackage{\r\n    static brightness(color) {\r\n        let num = color.r / 255;\r\n        let num2 = color.g / 255;\r\n        let num3 = color.b / 255;\r\n        let num4 = num;\r\n        let num5 = num;\r\n        if (num2 > num4)\r\n            num4 = num2;\r\n        if (num3 > num4)\r\n            num4 = num3;\r\n        if (num2 < num5)\r\n            num5 = num2;\r\n        if (num3 < num5)\r\n            num5 = num3;\r\n        return ((num4 + num5) / 2);\r\n    }\r\n\r\n    static hue(color) {\r\n        if ((color.r == color.g) && (color.g == color.b))\r\n            return 0;\r\n        let num = color.r / 255;\r\n        let num2 = color.g / 255;\r\n        let num3 = color.b / 255;\r\n        let num7 = 0;\r\n        let num4 = num;\r\n        let num5 = num;\r\n        if (num2 > num4)\r\n            num4 = num2;\r\n        if (num3 > num4)\r\n            num4 = num3;\r\n        if (num2 < num5)\r\n            num5 = num2;\r\n        if (num3 < num5)\r\n            num5 = num3;\r\n        let num6 = num4 - num5;\r\n        if (num == num4)\r\n            num7 = (num2 - num3) / num6;\r\n        else if (num2 == num4)\r\n            num7 = 2 + ((num3 - num) / num6);\r\n        else if (num3 == num4)\r\n            num7 = 4 + ((num - num2) / num6);\r\n        num7 *= 60;\r\n        if (num7 < 0)\r\n        num7 += 360;\r\n        return num7;\r\n    }\r\n\r\n    static saturation(color) {\r\n        let num = color.r / 255;\r\n        let num2 = color.g / 255;\r\n        let num3 = color.b / 255;\r\n        let num7 = 0;\r\n        let num4 = num;\r\n        let num5 = num;\r\n        if (num2 > num4)\r\n            num4 = num2;\r\n        if (num3 > num4)\r\n            num4 = num3;\r\n        if (num2 < num5)\r\n            num5 = num2;\r\n        if (num3 < num5)\r\n            num5 = num3;\r\n        if (num4 == num5)\r\n            return num7;\r\n        let num6 = (num4 + num5) / 2;\r\n        if (num6 <= 0.5)\r\n            return ((num4 - num5) / (num4 + num5));\r\n        return ((num4 - num5) / ((2 - num4) - num5));\r\n    }\r\n    static isDark(color) {\r\n        if (colorPackage.brightness(color) > 0.35) {\r\n            return false;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    static randomColor() {\r\n        return new color(MathPackage.Core.random(255), MathPackage.Core.random(255),  MathPackage.Core.random(255));\r\n    }\r\n\r\n    static randomDarkColor() {\r\n        let c = colorPackage.randomColor();\r\n        do { c = colorPackage.randomColor(); } while (!c.isDark());\r\n        return c;\r\n    }\r\n\r\n    static randomLightColor() {\r\n        let c = colorPackage.randomColor();\r\n        do { c = colorPackage.randomColor(); } while (c.isDark());\r\n        return c;\r\n    }\r\n}\r\n\r\nexport function measureString(txt) {\r\n    return canvas.elt.getContext(\"2d\").measureText(txt);\r\n}","/****************************************************************/\r\n/****************************************************************/\r\n/****************************************************************/\r\nimport GraphChild from '../GraphChild.js';\r\nimport drawing from '../../drawing/index.js';\r\nimport { getJSfunction } from '../../global.js';\r\n\r\nexport default class Xfunction extends GraphChild {\r\n   /** \r\n    * gs stands for graphSetting.\r\n   */\r\n   constructor(options) {\r\n      //#region \r\n      let idExists = options.id;\r\n      if (!options.expr) {\r\n         throw new Error('Your options passed to the shetchChild is not valid, it doesn\\'t has ' + propName + ' property, or it is falsy value');\r\n      }\r\n      if (!options.pen) {\r\n         let c = options.sketch.coor.coorSettings.background.isDark() ? drawing.colorPackage.randomLightColor() : drawing.colorPackage.randomDarkColor();\r\n         c.a = 155;\r\n         options.pen = new drawing.pen(c, 2);\r\n      }\r\n      //#endregion\r\n      \r\n      super(options, (me) => {\r\n         me.expression = getJSfunction(me.expr, ['x'], true);\r\n         me.path = new Path2D();\r\n\r\n         if (idExists) {\r\n            Math[me.id] = me.expression;\r\n         }\r\n      });\r\n      \r\n   }\r\n\r\n   static fromString(expr, sketch) {\r\n      if (str.replace(/==+/, '').indexOf('=') > -1) throw new Error('there is \"=\" opertor!');\r\n      return new Xfunction({ expr, sketch });\r\n   }\r\n\r\n   async _update(canvas) {\r\n\r\n      let p, previousP, midP, continous;\r\n      let path = new Path2D();\r\n      for (let x = this.gs.viewport.xmin; x <= this.gs.viewport.xmax; x += this.gs.drawingStep) {\r\n         p = this.coorManager.coorTOpx(x, this.expression(x));\r\n         midP = this.coorManager.coorTOpx(x - this.gs.drawingStep / 2, this.expression(x - this.gs.drawingStep / 2));\r\n         // if valid add new point, unless add the array of point if has more than point\r\n         let valid = !isNaN(p.x) && !isNaN(p.y) &&\r\n            Math.abs(p.x) < 100000 && Math.abs(p.y) < 100000 &&\r\n            ((continous && (Math.sign(p.y - midP.y) === Math.sign(midP.y - previousP.y) || Math.abs(p.y - previousP.y) / this.gs.drawingStep < 20)) || !continous);\r\n         if (!valid) {\r\n            if (continous) {\r\n               continous = false;\r\n            }\r\n         }\r\n         else {\r\n            if (continous)\r\n               path.lineTo(p.x, p.y);\r\n            else\r\n               path.moveTo(p.x, p.y);\r\n\r\n            previousP = { x: p.x, y: p.y };\r\n            continous = true;\r\n         }\r\n      }\r\n\r\n      this.path = path;\r\n   }\r\n\r\n   _draw(canvas) {\r\n      let ctx = canvas.ctx;\r\n      ctx.strokeStyle = this.pen.color.toString();\r\n      ctx.lineWidth = this.pen.weight;\r\n      ctx.stroke(this.path);\r\n   }\r\n\r\n   _remove() {\r\n      delete Math[this.id];\r\n   }\r\n\r\n   toString() {\r\n      return this.expression;\r\n   }\r\n\r\n}\r\n","\r\nimport GraphChild from './GraphChild.js';\r\nimport { getJSfunction } from '../global.js';\r\nexport default class Point extends GraphChild {\r\n\r\n    constructor(options) {\r\n        \r\n        //#region \r\n        options.pen = options.pen || new drawing.pen(new drawing.color(0, 0, 255), 10);\r\n        let propName;\r\n\r\n        propName = 'x';\r\n        if (!options[propName]) {\r\n            throw new Error('Your options passed to the shetchChild is not valid, it doesn\\'t has ' + propName + ' property, or it is falsy value');\r\n        }\r\n\r\n        propName = 'y';\r\n        if (!options[propName]) {\r\n            throw new Error('Your options passed to the shetchChild is not valid, it doesn\\'t has ' + propName + ' property, or it is falsy value');\r\n        }\r\n        //#endregion\r\n\r\n        super(options, (me) => {\r\n            me.x = getJSfunction(me.x);\r\n            me.y = getJSfunction(me.y);\r\n        });\r\n\r\n    }\r\n\r\n    static fromString(str, sketch) {\r\n        if (str) {\r\n            let p;\r\n            let regex = /^\\s*\\(\\s*(.+?)\\s*,\\s*(.+?)\\s*\\)\\s*$/;\r\n            str.replace(regex, (match, x, y) => {\r\n                p = new Point({ sketch, x, y });\r\n            });\r\n            if (!p)\r\n                throw new Error('error while trying to add a point: ' + str);\r\n            else\r\n                return p;\r\n        }\r\n        else\r\n            throw new Error('your str is empty :\\'(');\r\n    }\r\n\r\n    draw(canvas, handlerArgs = []) {\r\n\r\n        if (this.renderable) {\r\n            switch (this.pen.style) {\r\n                case 'solid':\r\n                    canvas.strokeWeight(2);\r\n                    canvas.stroke(200);\r\n                    canvas.fill(...(this.pen.color.toArray().splice(0, 3)), 150);\r\n                    break;\r\n                case 'shallow':\r\n                    canvas.ctx.lineWidth = 3;\r\n                    canvas.ctx.strokeStyle(this.pen.color.toString());\r\n                    canvas.ctx.fillStyle(this.sketch.coor.coorSettings.background.toString());\r\n                    break;\r\n            }\r\n            let p = this.coorManager.coorTOpx(this.x.eval(), this.y.eval());\r\n            canvas.ellipse(p.x, p.y, this.pen.weight, this.pen.weight);\r\n        }\r\n\r\n        if (this.handlers.onupdate) {\r\n            this.handlers.onupdate(...handlerArgs);\r\n        }\r\n\r\n    }\r\n\r\n    toString() {\r\n        return `(${this.x}, ${this.y})`;\r\n    }\r\n\r\n}\r\n","import GraphChild from \"./GraphChild.js\";\r\nimport { getJSfunction } from '../global.js';\r\n\r\nexport default class EvalExpr extends GraphChild {\r\n   constructor(options) {\r\n      //#region \r\n      let propName;\r\n      propName = 'expr';\r\n      if (!options[propName]) {\r\n         throw new Error('Your options passed to the shetchChild is not valid, it doesn\\'t has ' + propName + ' property, or it is falsy value');\r\n      }\r\n      //#endregion\r\n\r\n      super(options, (me) => {\r\n         me.evalFunc = getJSfunction(me.expr);\r\n      });\r\n   }\r\n\r\n   static fromString(str, sketch) {\r\n      if (str) {\r\n         // TODO: getting it from \"a = 1+2/4\"\r\n         return new EvalExpr({ expr: expr });\r\n      }\r\n      else\r\n         throw new Error('your expression is empty :\\'(');\r\n   }\r\n\r\n   eval() {\r\n      return this.evalFunc();\r\n   }\r\n\r\n}","import GraphChild from \"./GraphChild.js\";\r\nimport { getJSfunction } from '../global.js';\r\n\r\nexport default class Variable /** or slider */ extends GraphChild {\r\n\r\n   constructor(options) {\r\n      //#region\r\n      let propName;\r\n      propName = 'id';\r\n      if (!options[propName]) {\r\n         throw new Error('Your options passed to the shetchChild is not valid, it doesn\\'t has ' + 'name' + ' property, or it is falsy value');\r\n      }\r\n      propName = 'value';\r\n      if (!options[propName]) {\r\n         throw new Error('Your options passed to the shetchChild is not valid, it doesn\\'t has ' + 'name' + ' property, or it is falsy value');\r\n      }\r\n      //#endregion\r\n      super(options, (me) => {\r\n         if (!me.id.match(/[a-zA-Z_]+\\d*/)) throw new Error(`${me.id} is invalid.`);\r\n         me.value = { valueOf: getJSfunction(me.value) };\r\n         Math[me.id] = me.value;\r\n      });\r\n   }\r\n\r\n   setValue(value, handlerOptions = []) {\r\n      Math[this.id] = value;\r\n      if (this.handlers.onchange) this.handlers.onchange(...handlerOptions);\r\n   }\r\n\r\n   getValue() {\r\n      return Math[this.id];\r\n   }\r\n\r\n   _remove() {\r\n      delete Math[this.id];\r\n   }\r\n\r\n}","import GraphChild from \"./GraphChild.js\";\r\nimport { getJSfunction } from '../global.js';\r\n\r\nexport default class Func /** or slider */ extends GraphChild {\r\n\r\n   constructor(options) {\r\n      //#region \r\n      let propName;\r\n      propName = 'id';\r\n      if (!options[propName]) {\r\n         throw new Error('Your options passed to the shetchChild is not valid, it doesn\\'t has ' + 'name' + ' property, or it is falsy value');\r\n      }\r\n      propName = 'expr';\r\n      if (!options[propName]) {\r\n         throw new Error('Your options passed to the shetchChild is not valid, it doesn\\'t has ' + 'name' + ' property, or it is falsy value');\r\n      }\r\n      propName = 'params';\r\n      if (!options[propName]) {\r\n         throw new Error('Your options passed to the shetchChild is not valid, it doesn\\'t has ' + 'name' + ' property, or it is falsy value');\r\n      }\r\n      //#endregion\r\n\r\n      super(options, (me) => {\r\n         if (!me.id.match(/[a-zA-Z_]+\\d*/)) throw new Error(`${me.id} is invalid.`);\r\n         me.func = getJSfunction(options.expr, options.params);\r\n         Math[me.id] = me.func;\r\n      });\r\n\r\n   }\r\n\r\n   _remove() {\r\n      delete Math[this.id];\r\n   }\r\n\r\n}","import GraphChild from \"./GraphChild.js\";\r\n\r\nexport default class Empty extends GraphChild {\r\n   constructor(options) {\r\n      super(options);\r\n   }\r\n}","import GraphChild from \"./GraphChild.js\";\r\nimport { getJSfunction } from '../global.js';\r\n\r\nexport default class Slider /** or slider */ extends GraphChild {\r\n   \r\n   constructor(options) {\r\n      //#region \r\n      let propName;\r\n      propName = 'id';\r\n      if (!options[propName]) {\r\n         throw new Error('Your options passed to the shetchChild is not valid, it doesn\\'t has ' + propName + ' property, or it is falsy value');\r\n      }\r\n      propName = 'value';\r\n      if (!options[propName]) {\r\n         throw new Error('Your options passed to the shetchChild is not valid, it doesn\\'t has ' + propName + ' property, or it is falsy value');\r\n      }\r\n      //#endregion\r\n      super(options, (me) => {\r\n         if (!me.id.match(/[a-zA-Z_]+\\d*/)) throw new Error(`${me.id} is invalid.`);\r\n         Math[me.id] = me.value;\r\n      });\r\n\r\n   }\r\n\r\n   setValue(value, handlerOptions = []) {\r\n      Math[this.id] = value;\r\n      if (this.handlers.onchange) this.handlers.onchange(...handlerOptions);\r\n   }\r\n\r\n   getValue() {\r\n      return Math[this.id];\r\n   }\r\n\r\n   _remove() {\r\n      delete Math[this.id];\r\n   }\r\n\r\n}","\r\nimport { addControl, removeControl, genRandomName, keypadSettings, slidersController } from './global.js';\r\nimport { Xfunction, XYfunction, Point, EvalExpr, Variable, Empty, Slider, Func } from '../PLOTTO/GraphChildren/index.js';\r\nimport { UndefError, ExistBefore } from '../PLOTTO/Errors/index.js';\r\nimport { getJSfunction } from '../PLOTTO/global.js';\r\nexport default class ChildControl {\r\n   constructor(graphChild) {\r\n      this.elt = document.createElement('div');\r\n      this.elt.innerHTML = `\r\n      <li class=\"control\" id=\"${this.id}\">\r\n         <div class=\"side-status\" cancel-move>\r\n            <div class=\"order-container\">\r\n               <span class='order'>12</span>\r\n            </div>\r\n         </div>\r\n         <div class='main' cancel-move>\r\n            <div class=script-container>\r\n               <span type=\"text\" class=\"script\"></span>\r\n            </div>\r\n         </div>\r\n         <div class=\"side-ctrl\">\r\n            <button class=\"closebtn-2 remove\" cancel-move><div class=\"inner\"></div></button>\r\n            <span class=\"move\">\r\n               <div>\r\n                  <span>..</span>\r\n                  <span>..</span>\r\n                  <span>..</span>\r\n               </div>\r\n            </span>\r\n         </div>\r\n      </li>\r\n      `;\r\n      this.elt = (this.elt.childNodes[1]);\r\n\r\n      this.status = 'ready';\r\n      this.graphChild = graphChild || new Empty({ sketch: mySketch, control: this });\r\n      this.__updateElts(null, this.graphChild);\r\n\r\n      this.setEvents();\r\n   }\r\n\r\n   get id() {\r\n      return this._id;\r\n   }\r\n\r\n   set id(newid) {\r\n      this._id = newid;\r\n      this.elt.id = newid;\r\n   }\r\n\r\n   get graphChild() {\r\n      return this._graphChild;\r\n   }\r\n\r\n   set graphChild(value) {\r\n      if (value instanceof EvalExpr) {\r\n         value.handlers.onupdate = () => {\r\n            this.__updateEvalExpr();\r\n         };\r\n      } else if (value instanceof Slider) {\r\n         value.handlers.onchange = (updateSlider = true, updateSketch = true) => {\r\n            if (updateSlider) this.specialProps.$slider[0].value = this._graphChild.getValue();\r\n            if (updateSketch) mySketch.update(true, false);\r\n         };\r\n      }\r\n      \r\n      this._graphChild = value;\r\n      this.id = value.id;\r\n   }\r\n\r\n   setEvents() {\r\n      let scriptELT = this.elt.querySelector('.script');\r\n      this.removeELT = this.elt.querySelector('.remove');\r\n      this.orderELT = this.elt.querySelector('.order');\r\n\r\n      //#region math, script field\r\n      let mathField = MQ.MathField(scriptELT, {\r\n         handlers: {\r\n            edit: () => {\r\n               this.update(mathField.latex());\r\n            },\r\n\r\n            enter: () => {\r\n               this.enter();\r\n            },\r\n         }\r\n      });\r\n      this.mathField = mathField;\r\n      //#endregion \r\n\r\n      this.elt.querySelector('.main').addEventListener('focusin', (e) => {\r\n         this.focus(false);\r\n      });\r\n\r\n      this.elt.querySelector('.main').addEventListener('focusout', (e) => {\r\n         this.blur(false);\r\n      });\r\n\r\n      this.removeELT.addEventListener('click', (e) => {\r\n         this.remove();\r\n      });\r\n\r\n   }\r\n\r\n   async update(latex) {\r\n      if (!this.disableHandling) {\r\n         if (this.status === 'ready') {\r\n            if (this._graphChild instanceof Slider) {\r\n               if ($('.slider-outer', this.elt).hasClass('play')) {\r\n                  $('.play-pause', this.elt).trigger('click');\r\n               }\r\n            }\r\n            this.status = 'updating';\r\n            this._graphChild.remove();\r\n            this.id = undefined;\r\n            try {\r\n               let prev = this._graphChild;\r\n               if (latex === '') {\r\n                  this.parsedScript = new MagicalParser.Node('');\r\n                  this.graphChild = new Empty({ sketch: mySketch });\r\n               } else {\r\n                  if (latex) {\r\n                     this.parsedScript = null; /// so when an error occur in the next code, in the necxt time the parsed script will be null.\r\n                     this.parsedScript = mySketch.scriptParser.parse(MathPackage.Parser.latexTOmaxima(latex));\r\n                     this.vars = this.__getAll(this.parsedScript, { type: 'variable' }).map(a => a.name);\r\n                     this.funcs = this.__getAll(this.parsedScript, { type: 'functionCalling' }).map(a => a.name);\r\n                  }\r\n   \r\n                  if (!this.parsedScript) return; /// syntax error ocurred, no possible update exist, this error happen before and now the parsedString is null, the error elt exists and stop updating all is done\r\n   \r\n                  let props = {\r\n                     handlers: {\r\n                        onremove: (removeElt) => {\r\n                           if (removeElt) this.remove(false);\r\n                        },\r\n                        onerror: (e) => {\r\n                           this.error(e);\r\n                        }\r\n                     },\r\n                     control: this,\r\n                  };\r\n   \r\n                  if (this.graphChild && this.graphChild.pen) props.pen = this.graphChild.pen;\r\n                  this.graphChild = mySketch.childFromParsed(this.parsedScript, props); /// the parsed string is valid, no error are predicted on fetching the gc\r\n               }\r\n               this.__updateElts(\r\n                  prev,\r\n                  this.graphChild\r\n               );\r\n            } catch (e) {\r\n               this.error(e);\r\n            }\r\n            if (!this.id) {\r\n               /// consequently, am error occured, before assigning the new gc, after deleting the preious one.\r\n               /// reverse the effect\r\n               if (this._graphChild) {\r\n                  this.id = this._graphChild.id;\r\n                  mySketch.children.set(this.id, this.graphChild);\r\n               }\r\n            }\r\n            this.__updateDependants();\r\n            mySketch.update();\r\n            if (this.status === 're-update') {\r\n               this.status = 'ready';\r\n               this.update(this.mathField.latex());\r\n            } else if (this.status === 'updating') {\r\n               this.status = 'ready';\r\n            }\r\n         } else {\r\n            this.status = 're-update'; \r\n         }\r\n      }\r\n   }\r\n\r\n   __getAll(parsed, check = {}) {\r\n      let vars = [];\r\n      if (parsed.check(check)) {\r\n         return [parsed];\r\n      } else {\r\n         for (let i = 0; i < parsed.args.length; i++) {\r\n            vars = vars.concat(this.__getAll(parsed.args[i], check));\r\n         }\r\n      }\r\n      return vars;\r\n   }\r\n\r\n   __updateDependants(prev) {\r\n      if (this._graphChild instanceof Variable || this._graphChild instanceof Slider) {\r\n         let size = mySketch.children.size;\r\n         mySketch.children.forEach(gc => {\r\n            size--;\r\n            if (size < 0) return;\r\n            if (gc && gc !== this._graphChild && gc.control.vars) {\r\n               if (gc.control.vars.find(a => this._graphChild.id === a || (prev && a === prev.id)))\r\n                  gc.control.update();\r\n            }\r\n         });\r\n      }\r\n      if (this._graphChild instanceof Func) {\r\n         let size = mySketch.children.size;\r\n         mySketch.children.forEach(gc => {\r\n            size--;\r\n            if (size < 0) return;\r\n            if (gc && gc.control !== this && gc.control.vars) {\r\n               if (gc.control.funcs.find(a => this._graphChild.id === a || (prev && a === prev.id)))\r\n                  gc.control.update();\r\n            }\r\n         });\r\n      }\r\n   }\r\n\r\n   setScript(script, handle = true) {\r\n      if (!handle) {\r\n         this.disableHandling = true;\r\n      }\r\n      this.mathField.latex(script);\r\n      if (!handle) {\r\n         this.disableHandling = false;\r\n      }\r\n   }\r\n\r\n   focus(focusTheField = true) {\r\n      if (this._graphChild instanceof Slider) {\r\n         if ($('.slider-outer', this.elt).hasClass('play')) {\r\n            $('.play-pause', this.elt).trigger('click');\r\n         }\r\n      }\r\n      if (keypadSettings.focusedControl && keypadSettings.focusedControl !== this) keypadSettings.focusedControl.blur();\r\n      // setting this to be focuses\r\n      keypadSettings.focusedControl = this;\r\n      keypadSettings.mathField = this.mathField;\r\n      if (focusTheField) this.mathField.focus();\r\n      this.elt.classList.add('focus');\r\n   }\r\n\r\n   blur(blurTheField = true) {\r\n      // keypadSettings.focusedControl = undefined;\r\n      if (blurTheField) this.mathField.blur();\r\n      this.elt.classList.remove('focus');\r\n   }\r\n\r\n   enter() {\r\n      let index = parseInt(this.orderELT.textContent);\r\n      if (this.isError === 1) {\r\n         this.blur();\r\n         /// adding undefined\r\n         let vars = this.elt.querySelectorAll('.not-exist .var');\r\n         for (let v of vars) {\r\n            v.click();\r\n            index++;\r\n         }\r\n\r\n         let funcs = this.elt.querySelectorAll('.not-exist .func');\r\n         for (let f of funcs) {\r\n            f.click();\r\n            index++;\r\n         }\r\n      }\r\n      let newChild = new ChildControl();\r\n      addControl(newChild, index);\r\n   }\r\n\r\n   error(e) {\r\n      if (e instanceof UndefError) {\r\n         let undef = e.undef;\r\n         let undefVars = undef.vars.reduce((b, a) => b + a + ', ', '').slice(0, -2);\r\n         let undefFuncs = undef.funcs.reduce((b, a) => b + a + ', ', '').slice(0, -2);\r\n         let errorText = (undefVars ? `undefined vars [${undefVars}]` : '') + (undefFuncs ? `, undefined funcs [${undefFuncs}]` : '');\r\n         this.error(new Error(errorText + ', click the button to add.'));\r\n\r\n         if (this.isError === 1) { // this.isError is 1 when vars or funcs are not exists\r\n            /// remove the previous elts\r\n            this.elt.querySelector('.main .not-exist').remove();\r\n         }\r\n\r\n         let buttonsVars = '', buttonsFuncs = '';\r\n\r\n         if (undef.vars.length > 0) {\r\n            buttonsVars = '<div><span>vars: </span>';\r\n            buttonsVars += undef.vars.reduce((b, a) => { return b + `<button class=\"var btn-3\">${a}</button>`; }, '') || '';\r\n            buttonsVars += undef.vars.length > 1 ? '<button class=\"all-vars btn-1\">all</button>' : '';\r\n            buttonsVars += '</div>';\r\n         }\r\n\r\n         if (undef.funcs.length > 0) {\r\n            buttonsFuncs = '<div><span>funcs: </span>';\r\n            buttonsFuncs += undef.funcs.reduce((b, a) => { return b + `<button class=\"func btn-3\">${a}</button>`; }, '') || '';\r\n            buttonsFuncs += undef.funcs.length > 1 ? '<button class=\"all-funcs btn-1\">all</button>' : '';\r\n            buttonsFuncs += '</div>';\r\n         }\r\n\r\n         let notExistElt = $(`<div class='not-exist'>${buttonsVars + buttonsFuncs}</div>`);\r\n\r\n         let me = this;\r\n         $('.var', notExistElt).bind('click', function () {\r\n            let id = this.innerText;\r\n            // let gc = new ChildControl(new Slider({ id, value: 1, sketch: mySketch }));\r\n            addControl(`${id} = 1`, parseInt(me.orderELT.textContent));\r\n         });\r\n\r\n         $('.func', notExistElt).bind('click', function () {\r\n            /// choosing a param\r\n            let param = 'a';\r\n            let counter = 0;\r\n            let end;\r\n            while (Math.hasOwnProperty(param) && !end) {\r\n               if (counter > 300) {\r\n                  param = 'a';\r\n                  end = 1;\r\n               } else if (counter > 100) {\r\n                  param = String.fromCharCode(math.random(65, 90));\r\n               } else {\r\n                  param = String.fromCharCode(math.random(97, 122));\r\n               }\r\n               counter++;\r\n            }\r\n            let id = this.textContent;\r\n            // let newChild = new ChildControl(new Func({ id, expr: new MagicalParser.Node('variable', [], { name: param }), params: [param], sketch: mySketch }));\r\n            addControl(`${id}\\\\left(${param}\\\\right) = ${param}`, parseInt(me.orderELT.textContent));\r\n         });\r\n\r\n         $('.all-vars', notExistElt).bind('click', () => {\r\n            let vars = this.elt.querySelectorAll('.not-exist .var');\r\n            for (let v of vars) {\r\n               v.click();\r\n            }\r\n         });\r\n\r\n         $('.all-funcs', notExistElt).bind('click', () => {\r\n            let funcs = this.elt.querySelectorAll('.not-exist .func');\r\n            for (let f of funcs) {\r\n               f.click();\r\n            }\r\n         });\r\n\r\n         this.elt.querySelector('.main').append(notExistElt[0]);\r\n         this.isError = 1;\r\n\r\n      } else {\r\n         if (this.isError) {\r\n            let errorELT = this.elt.querySelector('.error-elt');\r\n            errorELT.setAttribute('aria-label', e.message);\r\n         } else {\r\n            this.elt.classList.add('error');\r\n            this.isError = true;\r\n            this.graphChild.renderable = false;\r\n            let errorELT = $(`\r\n            <div class=\"error-elt\">\r\n               <i class=\"fas fa-bug\"></i>\r\n            </div>\r\n            `);\r\n            errorELT[0].setAttribute('data-balloon-pos', 'right');\r\n            errorELT[0].setAttribute('aria-label', e.message);\r\n            errorELT.hide();\r\n            this.elt.querySelector('.side-status').append(errorELT[0]);\r\n            errorELT.fadeOut(0).delay(200).fadeIn(500);\r\n         }\r\n         console.log(e);\r\n      }\r\n   }\r\n\r\n   remove(removeGraphChild = true) {\r\n      if (this._graphChild instanceof Slider) {\r\n         if ($('.slider-outer', this.elt).hasClass('play')) {\r\n            $('.play-pause', this.elt).trigger('click');\r\n         }\r\n      }\r\n      removeControl(this);\r\n      if (removeGraphChild) {\r\n         if (this.graphChild) this.graphChild.remove();\r\n         this.__updateDependants();\r\n      }\r\n      mySketch.update();\r\n   }\r\n\r\n   //#region updatingElt\r\n\r\n   __updateElts(from, to) {\r\n      //#region reset the current elts\r\n      if (from && to && from.constructor !== to.constructor) {\r\n         let eltsTOremove = this.elt.querySelectorAll('.special-elt');\r\n         eltsTOremove.forEach(elt => { elt.remove(); });\r\n      }\r\n      if (this.isError === 1) {\r\n         this.elt.querySelector('.not-exist').remove();\r\n      }\r\n      if (this.isError) {\r\n         this.elt.classList.remove('error');\r\n         this.elt.querySelector('.error-elt').remove();\r\n         this.isError = false;\r\n      }\r\n      //#endregion\r\n\r\n      if (to) {\r\n         if (to instanceof Empty) {\r\n            this.__toEmpty();\r\n         } else if (to instanceof Xfunction) {\r\n            if (from instanceof Xfunction) {\r\n               this.__updateXfunction();\r\n            } else {\r\n               this.__toXfunction();\r\n            }\r\n         } else if (to instanceof EvalExpr) {\r\n            if (from instanceof EvalExpr) {\r\n               this.__updateEvalExpr();\r\n            } else {\r\n               this.__toEvalExpr();\r\n            }\r\n         } else if (to instanceof Variable) {\r\n            if (from instanceof Variable) {\r\n               this.__updateVariable();\r\n            } else {\r\n               this.__toVariable();\r\n            }\r\n         } else if (to instanceof Slider) {\r\n            if (from instanceof Slider) {\r\n               this.__updateSlider();\r\n            } else {\r\n               this.__toSlider();\r\n            }\r\n         }\r\n      }\r\n   }\r\n\r\n   __toEmpty() {\r\n      let sideStatus = this.elt.querySelector('.side-status');\r\n   }\r\n\r\n   __toXfunction() {\r\n      let sideStatus = this.elt.querySelector('.side-status');\r\n      let $visibleElt = $(`<div class=\"visible-elt special-elt visible\"><div class=\"inner\"></div></div>`);\r\n      $visibleElt.bind('click', ()=> {\r\n         $visibleElt.toggleClass('visible');\r\n         this.graphChild.renderable = $visibleElt.hasClass('visible');\r\n         this.graphChild.update();\r\n         mySketch.draw();\r\n      });\r\n      sideStatus.append($visibleElt[0]);\r\n      this.__updateXfunction();\r\n   }\r\n\r\n   __updateXfunction() {\r\n      let visibleELt = this.elt.querySelector('.side-status').querySelector('.visible');\r\n      visibleELt.setAttribute('style', `--color: ${this.graphChild.pen.color.toString()}`);\r\n   }\r\n\r\n   __toEvalExpr() {\r\n      let value = $(`<div class=\"value special-elt\"><span></span></div>`);\r\n      value.hide();\r\n      this.elt.querySelector('.main').append(value[0]);\r\n      value.fadeIn();\r\n      let valueType = $(\r\n         `<div class=\"value-type special-elt\" type=decimal>\r\n            <span><i class=\"fas fa-divide\"></i></span>\r\n         </div>`\r\n      );\r\n      this.elt.querySelector('.side-status').append(valueType[0]);\r\n      valueType.click(() => {\r\n         switch (valueType.attr('type')) {\r\n            case 'decimal':\r\n               valueType.attr('type', 'fract');\r\n               value.height(56);\r\n               break;\r\n            case 'fract':\r\n               valueType.attr('type', 'quotient');\r\n               value.height(56);\r\n               break;\r\n            case 'quotient':\r\n               valueType.attr('type', 'decimal');\r\n               value.height(33);\r\n               break;\r\n         }\r\n         this.__updateEvalExpr();\r\n      });\r\n\r\n      this.specialProps = {\r\n         valueType: valueType[0],\r\n         valueElt: value[0]\r\n      };\r\n      // this.__updateEvalExpr(); /// will be done on updating the sktech\r\n   }\r\n\r\n   __updateEvalExpr() {\r\n      try {\r\n         let value = this.graphChild.eval();\r\n         if (!isNaN(value)) {\r\n            value += 0; /// +0 is here to convert the object (representing the valueOf a variable) into a number \r\n            value = parseFloat(value.toFixed(10));\r\n            switch (this.specialProps.valueType.getAttribute('type')) {\r\n               case 'decimal':\r\n                  {\r\n                     this.specialProps.valueElt.innerHTML = `<span>${value}</span>`;\r\n                  }\r\n                  break;\r\n               case 'fract':\r\n                  {\r\n                     if (value.indexOf('.') > -1 && value.split('.')[1].length < 5) {    \r\n                        let fraction = MathPackage.Core.fraction(value);\r\n                        if (fraction.denominator === 1) {\r\n                           this.specialProps.valueElt.innerHTML = `<span>${fraction.numerator}</span>`;\r\n                        } else {\r\n                           this.specialProps.valueElt.innerHTML = `<span>\\\\frac{${fraction.numerator}}{${fraction.denominator}}</span>`;\r\n                           MQ.StaticMath(this.specialProps.valueElt.children[0]);\r\n                        }\r\n                     } else {\r\n                        this.specialProps.valueElt.innerHTML = `<span>${value}</span>`;\r\n                     }\r\n                  }\r\n                  break;\r\n               case 'quotient':\r\n                  {\r\n                     if (value.indexOf('.') > -1 && value.split('.')[1].length < 5) {\r\n                        let fraction = MathPackage.Core.quotientRemainder(value);\r\n                        if (fraction.numerator === 0) {\r\n                           this.specialProps.valueElt.innerHTML = `<span>${fraction.quotient}</span>`;\r\n                        } else {\r\n                           if (fraction.quotient == 0) {\r\n                              this.specialProps.valueElt.innerHTML = `<span>\\\\frac{${fraction.numerator}}{${fraction.denominator}}</span>`;\r\n                           } else {\r\n                              this.specialProps.valueElt.innerHTML = `<span>${fraction.quotient}\\\\frac{${fraction.numerator}}{${fraction.denominator}}</span>`;\r\n                           }\r\n                           MQ.StaticMath(this.specialProps.valueElt.children[0]);\r\n                        }\r\n                     } else {\r\n                        this.specialProps.valueElt.innerHTML = `<span>${value}</span>`;\r\n                     }\r\n                  }\r\n                  break;\r\n            }\r\n         } else {\r\n            this.specialProps.valueElt.innerHTML = '<span>NaN</span>';\r\n         }\r\n      } catch (e) {\r\n         this.specialProps.valueElt.innerHTML = '<span>NaN</span>';\r\n         this.error(e);\r\n      }\r\n   }\r\n\r\n   __toSlider() {\r\n      /// adding slider\r\n      let $sliderOuter = $(`\r\n      <div class=\"slider-outer special-elt\">\r\n         <div class='range-container'>\r\n            <span class='slider-controller-toggle'>\r\n               <i class=\"fas fa-angle-right right\"></i>\r\n            </span>\r\n            <input type=range class=slider min=-5 max=5 step=0.01 />\r\n            <span class='play-pause'>\r\n               <svg role=\"img\" width=15 xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\">\r\n                  <path class=\"path\"></path>\r\n               </sbg>\r\n            </span>\r\n         </div>\r\n         <div class='slider-controller'>\r\n            <label>min</label>:<span class=\"math-field min\">-5</span>\r\n            <label>max</label>:<span class=\"math-field max\">5</span>\r\n            <label>step</label>:<span class=\"math-field step\">0.01</span>\r\n         </div>\r\n      </div>`);\r\n      this.elt.querySelector('.main').append($sliderOuter[0]);\r\n      let $slider = $('.slider', $sliderOuter);\r\n\r\n      // sliderControllerMathFields\r\n      let attrs = {\r\n         min: MQ.MathField($sliderOuter[0].querySelector('.slider-controller .math-field.min'), {\r\n            handlers: {\r\n               edit: function () {\r\n                  if ($sliderOuter.hasClass('play')) {\r\n                     $('.play-pause', $sliderOuter).trigger('click');\r\n                  }\r\n                  $slider[0].min = (getJSfunction(attrs.min.latex()))();\r\n               }\r\n            }\r\n         }),\r\n         max: MQ.MathField($sliderOuter[0].querySelector('.slider-controller .math-field.max'), {\r\n            handlers: {\r\n               edit: function () {\r\n                  if ($sliderOuter.hasClass('play')) {\r\n                     $('.play-pause', $sliderOuter).trigger('click');\r\n                  }\r\n                  $slider[0].max = (getJSfunction(attrs.max.latex()))();\r\n               }\r\n            }\r\n         }),\r\n         step: MQ.MathField($sliderOuter[0].querySelector('.slider-controller .math-field.step'), {\r\n            handlers: {\r\n               edit: function () {\r\n                  if ($sliderOuter.hasClass('play')) {\r\n                     $('.play-pause', $sliderOuter).trigger('click');\r\n                  }\r\n                  $slider[0].step = (getJSfunction(attrs.step.latex()))();\r\n               }\r\n            }\r\n         }),\r\n         /** oscillate, forwards, backwards*/\r\n         dir: 'oscillate',\r\n         // positive int number represents the steps per second (the unit: sps)\r\n         speed: 400,\r\n         // to change the direction of the slider will working (the play button has been pressed)\r\n         speedModifier: 1\r\n      };\r\n\r\n      /// the special properties for this specific type of GraphChild\r\n      this.specialProps = {\r\n         $slider,\r\n         attrs,\r\n         invokeOnchange: true,\r\n      };\r\n\r\n      {\r\n         $slider\r\n            .on('change', (event, ...handlerParams) => {\r\n               if (this.specialProps.invokeOnchange) {\r\n                  this.graphChild.setValue(parseFloat($slider[0].value), handlerParams);\r\n                  this.setScript(this.graphChild.id + ' = ' + $slider[0].value, false);\r\n               }\r\n            })\r\n            .on('mousemove touchmove', () => {\r\n               if ($slider[0].ismousedown) {\r\n                  $slider.trigger('change', false);\r\n               }\r\n            })\r\n            .on('mousedown touchstart', () => {\r\n               if ($sliderOuter.hasClass('play')) {\r\n                  $('.play-pause', $sliderOuter).trigger('click');\r\n               }\r\n               $slider[0].ismousedown = true;\r\n            })\r\n            .on('mouseup touchend', () => {\r\n               $slider[0].ismousedown = false;\r\n            });\r\n\r\n         $('.slider-controller-toggle', $sliderOuter).bind('click', () => {\r\n            $sliderOuter.toggleClass('controller-opended');\r\n         });\r\n\r\n         let speedModifier = 1;\r\n\r\n         $('.play-pause', $sliderOuter).bind('click', () => {\r\n            $sliderOuter.toggleClass('play');\r\n            if ($sliderOuter.hasClass('play')) {\r\n               slidersController.push(this);\r\n            } else {\r\n               slidersController.pop(this);\r\n            }\r\n         });\r\n      }\r\n\r\n\r\n      this.__updateSlider();\r\n   }\r\n\r\n   __updateSlider() {\r\n      let slider = this.specialProps.$slider[0];\r\n      let value = this.graphChild.getValue();\r\n\r\n      this.specialProps.attrs.min.latex(Math.min(parseFloat(slider.min), parseFloat(value)));\r\n      this.specialProps.attrs.max.latex(Math.max(parseFloat(slider.max), parseFloat(value)));\r\n\r\n      this.specialProps.invokeOnchange = false;\r\n      slider.value = value;\r\n      this.specialProps.invokeOnchange = true;\r\n\r\n      // this.setScript(this.graphChild.id + ' = ' + slider.value, false);\r\n   }\r\n\r\n   __toVariable() {\r\n      this.specialProps = {};\r\n\r\n      // this.__updateEvalExpr(); /// will be done on updating the sktech\r\n   }\r\n\r\n   __updateVariable() {\r\n\r\n   }\r\n   //#endregion\r\n\r\n}","import ChildControl from './ChildControl.js';\r\nimport Sketch from '../PLOTTO/Sketch.js';\r\n\r\n//#region variables\r\nexport var subTools = {\r\n   details: SUI.TempMessege({\r\n      layer: false,\r\n      toolsbar: true,\r\n      onhoverFix: true,\r\n      position: { bottom: 20, left: 20 },\r\n      duration: 2500, // to make it fixed\r\n      content: '<p style=\"background: green; color:white;\">There is no god but Allah',\r\n      parent: document.querySelector('#canvas-parent').parentElement,\r\n   })\r\n};\r\nexport var mouse = { x: undefined, y: undefined };\r\n\r\nexport var keypadSettings = {\r\n   backspaceInterval: undefined,\r\n   mouseDownForInterval: false,\r\n   showHideKeyBtn: document.querySelector(\".sh-keypad\"),\r\n   mathField: document.querySelector('.script')\r\n};\r\n\r\nexport var sidebar = document.querySelector('.sidebar-container');\r\n\r\n//#endregion\r\n\r\n//#region methods\r\n\r\nexport function updateObjsOrder() {\r\n   let objs = document.querySelectorAll('.controls li');\r\n   let order = 1;\r\n   for (let obj of objs) {\r\n      obj.setAttribute('index', order - 1);\r\n      obj.querySelector('.order').textContent = order++;\r\n   }\r\n}\r\n\r\nexport function addControl(input, index = 'last', autoFocus = true) {\r\n   let control = input;\r\n   if ((typeof input).toLowerCase() === 'string') {\r\n      control = new ChildControl();\r\n      control.mathField.latex(input);\r\n   }\r\n   var controls = document.querySelector('.controls');\r\n   index = (math.isNumeric(index) && index > controls.childElementCount - 1) ? 'last' : index;\r\n   let i = index === 'last' ? controls.childElementCount - 1 : index;\r\n   if (i > -1 && index !== 'last') {\r\n      control.elt.querySelector('.order').textContent = i + 1;\r\n      controls.insertBefore(control.elt, controls.children[i]);\r\n      updateObjsOrder();\r\n   } else {\r\n      control.elt.setAttribute('index', controls.childElementCount);\r\n      control.elt.querySelector('.order').textContent = controls.childElementCount + 1;\r\n      controls.appendChild(control.elt);\r\n   }\r\n   if (autoFocus) control.focus();\r\n\r\n}\r\n\r\nexport function removeControl(control) {\r\n   if (control === keypadSettings.focusedControl) {\r\n      let alter = control.elt.previousElementSibling || control.elt.nextElementSibling;\r\n      if (alter) {\r\n         mySketch.children.get(alter.getAttribute('id')).control.focus();\r\n      }\r\n   }\r\n   control.elt.remove();\r\n   var controls = document.querySelector('.controls');\r\n   var newControlBtn = controls.parentElement.querySelector('#add-new-control');\r\n   if (controls.childElementCount === 0) {\r\n      newControlBtn.classList.add('animate-shake');\r\n      controls.parentElement.classList.add('blink-error');\r\n      setTimeout(() => {\r\n         newControlBtn.classList.remove('animate-shake');\r\n         controls.parentElement.classList.remove('blink-error');\r\n         addControl(new ChildControl());\r\n      }, 400);\r\n   }\r\n}\r\n\r\nexport function addTOsketch(child, controlIndex = 'last' /* the index */) {\r\n   if ((controlIndex || controlIndex === 0) && !child.control) {\r\n      let control = new ChildControl(child);\r\n      addControl(control, controlIndex);\r\n   }\r\n   mySketch.appendChild(child);\r\n}\r\n\r\nexport function resize(setContainment = true) {\r\n   checkSM();\r\n\r\n   mySketch.canvas.resize(canvasParent.clientWidth, canvasParent.clientHeight);\r\n   mySketch.childrenCanvas.resize(canvasParent.clientWidth, canvasParent.clientHeight);\r\n\r\n   mySketch.gs.transform.invokeOnchange = false;\r\n\r\n   mySketch.gs.width = canvasParent.clientWidth;\r\n   mySketch.gs.height = canvasParent.clientHeight;\r\n\r\n   let vp = mySketch.gs.viewport;\r\n   mySketch.gs.transform.onchange(true);\r\n   // if (angles.minAngle(new vector(1, 0), vector.fromAngle(mySketch.gs.transform.xAngle)).toFixed(3) === (0).toFixed(3) && angles.minAngle(new vector(1, 0), vector.fromAngle(mySketch.gs.transform.yAngle)).toFixed(3) === (Math.PI / 2).toFixed(3)) {\r\n   mySketch.gs.transform.transformOrigin = undefined;\r\n   mySketch.gs.transform.setViewport(vp, true);\r\n   mySketch.gs.transform.invokeOnchange = true;\r\n   mySketch.gs.transform.onchange();\r\n   // }\r\n\r\n   if (setContainment) {\r\n      $(\".resizer\", sidebar)\r\n         .draggable('option', 'containment', getContainment(sidebar));\r\n      // .css({ left: document.querySelector('.sidebar-container').clientWidth + 'px' });\r\n   }\r\n\r\n   mySketch.update();\r\n   resize.prevSize = { width: window.innerWidth, height: window.innerHeight };\r\n}\r\nexport function checkSM() {\r\n   if (window.innerWidth <= 600 && resize.prevSize.width > 600) {\r\n      /// changing the element layout\r\n      document.body.querySelector('.app-container').classList.remove('large-screen');\r\n      document.body.querySelector('.app-container').classList.add('small-screen');\r\n   } else if (window.innerWidth > 600 && resize.prevSize.width <= 600) {\r\n      /// changing the element layout\r\n      document.body.querySelector('.app-container').classList.add('large-screen');\r\n      document.body.querySelector('.app-container').classList.remove('small-screen');\r\n   }\r\n}\r\ncheckSM.prevSize = { width: window.innerWidth, height: window.innerHeight };\r\n\r\nexport function getContainment(elt) {\r\n   let sidebarStyle = window.getComputedStyle(elt);\r\n   let min = parseInt(sidebarStyle.minWidth.replace('px', '')),\r\n      max = parseInt(sidebarStyle.maxWidth.replace('px', ''));\r\n   /// this is for solving the problem when the max width 30%vw is lower than the min width 300px,\r\n   ///   - which cuase a problem with the position (style.left) of the resizer. \r\n   if (min > max) {\r\n      return [\r\n         min, 0,\r\n         min,\r\n         parseInt(sidebarStyle.height.replace('px', ''))\r\n      ];\r\n   } else {\r\n      return [\r\n         min, 0,\r\n         max,\r\n         parseInt(sidebarStyle.height.replace('px', ''))\r\n      ];\r\n   }\r\n\r\n}\r\nexport function genRandomName() {\r\n   let num = 0;\r\n   /// randomNameNum is here to avoid getting the same random name if the code is implemented so fast\r\n\r\n   return (Date.now() + genRandomName.randomNameNum++)\r\n      .toString(36)\r\n      .replace(/\\d/g, (num) => {\r\n         return String.fromCharCode(97 + parseInt(num));\r\n      });\r\n}\r\ngenRandomName.randomNameNum = 0;\r\n\r\nexport function hassClass(elt, c) {\r\n   for (let _c of elt.classList) {\r\n      if (c === _c) return true;\r\n   }\r\n   return false;\r\n}\r\n\r\n\r\nexport var slidersController = {\r\n\r\n   workingSliders: [],\r\n   interval: 0,\r\n   status: 'all-stoped',\r\n\r\n   /**\r\n    * @param {ChildControl} sliderControl \r\n    */\r\n   push: function (sliderControl) {\r\n\r\n      let $slider = sliderControl.specialProps.$slider;\r\n      let slider = $slider[0];\r\n      let attrs = sliderControl.specialProps.attrs;\r\n      let sliderConfig = {\r\n         min: parseFloat(slider.min),\r\n         max: parseFloat(slider.max),\r\n         step: parseFloat(slider.step),\r\n         value: sliderControl.graphChild.getValue(),\r\n      };\r\n      let stepConfig = {\r\n         current: (sliderConfig.value - sliderConfig.min) / sliderConfig.step,\r\n         prev: (sliderConfig.value - sliderConfig.min) / sliderConfig.step,\r\n         max: (sliderConfig.max - sliderConfig.min) / sliderConfig.step,\r\n      };\r\n\r\n      this.workingSliders.push({ sliderControl, stepConfig, sliderConfig, attrs, $slider });\r\n\r\n      if (this.status === 'all-stoped') {\r\n         this.status = 'working';\r\n         this.startSlidersInterval();\r\n      }\r\n   },\r\n\r\n   /**\r\n    * @param {ChildControl} sliderControl\r\n    */\r\n   pop: function (sliderControl) {\r\n      for (let i = 0; i < this.workingSliders.length; i++) {\r\n         if (sliderControl === this.workingSliders[i].sliderControl) {\r\n            this.workingSliders.splice(i, 1);\r\n         }\r\n      }\r\n      if (this.workingSliders.length === 0) {\r\n         this.status = 'all-stoped';\r\n         clearInterval(this.interval);\r\n      }\r\n   },\r\n\r\n   startSlidersInterval: function () {\r\n      let intervalSleepDur = 15; /// in ms\r\n      // let setNew = true;\r\n      // let times = 0; \r\n      this.interval = setInterval(() => {\r\n         // if (setNew) {\r\n         //    setNew = false;\r\n         //    setTimeout(() => {\r\n         //       console.log((times * 15), 'fps');\r\n         //       times = 0;\r\n         //       setNew = true;\r\n         //    }, 1000);\r\n         // }\r\n         // times++;\r\n         // updating all working slliders\r\n         for (let slider of this.workingSliders) {\r\n            let stepConfig = slider.stepConfig;\r\n            let sliderConfig = slider.sliderConfig;\r\n            let $slider = slider.$slider;\r\n            //#region stepConfig.current\r\n            /**\r\n             * the attrs.speed is in (step per second),\r\n             * so let devide it bty 1000 to get the speed in (ms),\r\n             * then multiply by the duration of sleeping of the interval,\r\n             * with this computation, the slider will give an illusion of the given speed,\r\n             * moreover, users eyes won't recognize what is happening.\r\n             */\r\n            stepConfig.current += (slider.attrs.speed * slider.attrs.speedModifier / 1000 * intervalSleepDur);\r\n            //#endregion\r\n            if (Math.abs(stepConfig.current - stepConfig.prev) > 1) {\r\n               switch (slider.attrs.dir) {\r\n                  case 'oscillate': {\r\n                     let value = sliderConfig.min + (stepConfig.current * sliderConfig.step);\r\n                     if (stepConfig.current < 0 || stepConfig.current > stepConfig.max) slider.attrs.speedModifier *= -1;\r\n                     else {\r\n                        $slider[0].value = value;\r\n                        $slider.trigger('change', true, false);\r\n                     }\r\n                     break;\r\n                  }\r\n                  case 'forwards': {\r\n                     let value = sliderConfig.min + (stepConfig.current * sliderConfig.step);\r\n                     if (stepConfig.current > stepConfig.max) stepConfig.current = 0;\r\n                     else {\r\n                        $slider[0].value = value;\r\n                        $slider.trigger('change', true, false);\r\n                     }\r\n                     break;\r\n                  }\r\n                  case 'backwards': {\r\n                     let value = sliderConfig.min + (stepConfig.current * sliderConfig.step);\r\n                     if (stepConfig.current < 0) stepConfig.current = stepConfig.max;\r\n                     else {\r\n                        $slider[0].value = value;\r\n                        $slider.trigger('change', true, false);\r\n                     }\r\n                     break;\r\n                  }\r\n               }\r\n               stepConfig.prev = stepConfig.current;\r\n            }\r\n         }\r\n         mySketch.update(true, false);\r\n      }, intervalSleepDur);\r\n   }\r\n};\r\n\r\n\r\n//#endregion\r\n","export default class {\r\n\r\n   constructor(gs) {\r\n      this.gs = gs;\r\n      this.coorManager = gs.coorManager;\r\n      this.handlers = {};\r\n      \r\n      this.angleMargin = angles.deg(20);\r\n      this.zoomLimits = [80, 180];\r\n      this.zoomLimits[1] = (this.zoomLimits[1] * 2 / 5) < this.zoomLimits[0] ? this.zoomLimits[0] * 5 / 2 + 1 : this.zoomLimits[0];\r\n      this.zoomRatio = 1.1;\r\n\r\n      this.invokeOnchange = true;\r\n      this.reset();\r\n   }\r\n\r\n   /**\r\n    * @returns the i vector of the cartesian coordinates relative to (with respect to) the pixel coordinates\r\n    */\r\n   get iVector() {\r\n      return vector.fromAngle(-this.xAngle).mult(this.xScale);\r\n   }\r\n   /**\r\n   * @returns the j vector of the cartesian coordinates relative to (with respect to) the pixel coordinates\r\n   */\r\n   get jVector() {\r\n      return vector.fromAngle(-this.yAngle).mult(this.yScale);\r\n   }\r\n\r\n   getTransform() {\r\n      let i = this.iVector;\r\n      let j = this.jVector;\r\n      let c = this.center;\r\n      return { a: i.x, b: i.y, c: j.x, d: j.y, e: c.x, f: c.y };\r\n   }\r\n\r\n   //#region transformation's origin\r\n\r\n   get transformOrigin() {\r\n      return this._transformOrigin;\r\n   }\r\n\r\n   set transformOrigin(pxVector) {\r\n      if (pxVector && pxVector instanceof vector) {\r\n         this._transformOrigin = {\r\n            pxVector: pxVector\r\n         };\r\n         let coor = this.coorManager.pxTOcoor(pxVector.x, pxVector.y);\r\n         this._transformOrigin.coorVector = new vector(coor.x, coor.y);\r\n      } else {\r\n         this._transformOrigin = undefined;\r\n      }\r\n   }\r\n\r\n   //#endregion\r\n\r\n   //#region {rotation, angles}\r\n\r\n   get xAngle() { return this._xAngle; }\r\n   set xAngle(v) {\r\n      let a = angles.constrainAngle(v);\r\n      if (angles.minAngle(vector.fromAngle(a), vector.fromAngle(this._yAngle), { type: 'lines' }) < this.angleMargin) {\r\n         let b = angles.angle(vector.fromAngle(a), vector.fromAngle(this._yAngle), { dir: 'clockwise' });\r\n         if (b < this.angleMargin && b > 0) {\r\n            a = angles.constrainAngle(this._yAngle + this.angleMargin);\r\n         }\r\n         else {\r\n            b = angles.angle(vector.fromAngle(a), vector.fromAngle(this._yAngle));\r\n            if (b < this.angleMargin && b > 0) {\r\n               a = angles.constrainAngle(this._yAngle - this.angleMargin);\r\n            }\r\n            else {\r\n               b = angles.angle(vector.fromAngle(a), vector.fromAngle(this._yAngle).mult(-1), { dir: 'clockwise' });\r\n               if (b < this.angleMargin && b > 0) {\r\n                  a = angles.constrainAngle(this._yAngle + Math.PI + this.angleMargin);\r\n               }\r\n               else {\r\n                  b = angles.angle(vector.fromAngle(a), vector.fromAngle(this._yAngle).mult(-1));\r\n                  if (b < this.angleMargin && b > 0) {\r\n                     a = angles.constrainAngle(this._yAngle + Math.PI - this.angleMargin);\r\n                  }\r\n               }\r\n            }\r\n         }\r\n      }\r\n      this._xAngle = a;\r\n   }\r\n\r\n   get yAngle() { return this._yAngle; }\r\n   set yAngle(v) {\r\n      let a = angles.constrainAngle(v);\r\n      if (angles.minAngle(vector.fromAngle(a), vector.fromAngle(this._xAngle), { type: 'lines' }) < this.angleMargin) {\r\n         let b = angles.angle(vector.fromAngle(a), vector.fromAngle(this._xAngle), { dir: 'clockwise' });\r\n         if (b < this.angleMargin && b > 0) {\r\n            a = angles.constrainAngle(this._xAngle + this.angleMargin);\r\n         }\r\n         else {\r\n            b = angles.angle(vector.fromAngle(a), vector.fromAngle(this._xAngle));\r\n            if (b < this.angleMargin && b > 0) {\r\n               a = angles.constrainAngle(this._xAngle - this.angleMargin);\r\n            }\r\n            else {\r\n               b = angles.angle(vector.fromAngle(a), vector.fromAngle(this._xAngle).mult(-1), { dir: 'clockwise' });\r\n               if (b < this.angleMargin && b > 0) {\r\n                  a = angles.constrainAngle(this._xAngle + Math.PI + this.angleMargin);\r\n               }\r\n               else {\r\n                  b = angles.angle(vector.fromAngle(a), vector.fromAngle(this._xAngle).mult(-1));\r\n                  if (b < this.angleMargin && b > 0) {\r\n                     a = angles.constrainAngle(this._xAngle + Math.PI - this.angleMargin);\r\n                  }\r\n               }\r\n            }\r\n         }\r\n      }\r\n      this._yAngle = a;\r\n   }\r\n\r\n   /**\r\n * @param {*} type, is 'deg' or 'rad'\r\n */\r\n   rotate(a, type = 'rad') {\r\n      if (!isNaN(a)) {\r\n         if (type === 'deg') {\r\n            a = a / 180 * Math.PI;\r\n         }\r\n         let i = this.invokeOnchange;\r\n         this.invokeOnchange = false;\r\n         this.xAngle += a;\r\n         this.yAngle += a;\r\n         this.invokeOnchange = i;\r\n         this.onchange();\r\n      }\r\n   }\r\n\r\n   /**\r\n  * @param {*} type, is 'deg' or 'rad'\r\n  */\r\n   rotateX(a, type = 'rad') {\r\n      if (!isNaN(a)) {\r\n         if (type === 'deg') {\r\n            a = a / 180 * Math.PI;\r\n         }\r\n         let i = this.invokeOnchange;\r\n         this.invokeOnchange = false;\r\n         this.xAngle += a;\r\n         this.invokeOnchange = i;\r\n         this.onchange();\r\n      }\r\n   }\r\n\r\n   /**\r\n    * @param {*} type, is 'deg' or 'rad'\r\n    */\r\n   rotateY(a, type = 'rad') {\r\n      if (!isNaN(a)) {\r\n         this.invokeOnchange = false;\r\n         if (type === 'deg') {\r\n            a = a / 180 * Math.PI;\r\n         }\r\n         let i = this.invokeOnchange;\r\n         this.invokeOnchange = false;\r\n         this.yAngle += a;\r\n         this.invokeOnchange = i;\r\n         this.onchange();\r\n      }\r\n   }\r\n\r\n   //#endregion\r\n\r\n   //#region translate\r\n\r\n   get center() { return this._center; }\r\n\r\n   set center(vec) {\r\n      this._center = vec;\r\n      this.onchange(this.invokeOnchange, false);\r\n   }\r\n\r\n   translate(value) {\r\n      this.center = new vector(this._center.x + value.x, this._center.y + value.y);\r\n   }\r\n\r\n   //#endregion\r\n\r\n   //#region zoom\r\n\r\n   zoomIn(centerOfZoom) {\r\n\r\n      centerOfZoom = centerOfZoom || new vector(this.gs.width / 2, this.gs.height / 2);\r\n      this.transformOrigin = centerOfZoom;\r\n\r\n      let a = this.invokeOnchange;\r\n      this.invokeOnchange = false;\r\n      this.xZoomIn(); this.yZoomIn();\r\n      this.invokeOnchange = a;\r\n      this.onchange();\r\n\r\n   }\r\n   zoomOut(centerOfZoom) {\r\n\r\n      centerOfZoom = centerOfZoom || new vector(this.gs.width / 2, this.gs.height / 2);\r\n      this.transformOrigin = centerOfZoom;\r\n\r\n      let a = this.invokeOnchange;\r\n      this.invokeOnchange = false;\r\n      this.xZoomOut(); this.yZoomOut();\r\n      this.invokeOnchange = a;\r\n      this.onchange();\r\n\r\n   }\r\n   xZoomIn() {\r\n      // #region X\r\n      if (this.xSpace <= this.zoomLimits[1]) this.xSpace *= this.zoomRatio;\r\n\r\n      this.reformXspace();\r\n      this.onchange();\r\n      //#endregion\r\n   }\r\n   xZoomOut() {\r\n      // #region X\r\n      if (this.xSpace >= this.zoomLimits[0]) this.xSpace /= this.zoomRatio;\r\n\r\n      this.reformXspace();\r\n      this.onchange();\r\n      //#endregion\r\n\r\n   }\r\n   yZoomIn() {\r\n      // #region Y\r\n      if (this.ySpace <= this.zoomLimits[1]) this.ySpace *= this.zoomRatio;\r\n\r\n      this.reformYspace();\r\n      this.onchange();\r\n      //#endregion\r\n   }\r\n   yZoomOut() {\r\n      // #region Y\r\n      if (this.ySpace >= this.zoomLimits[0]) this.ySpace /= this.zoomRatio;\r\n\r\n      this.reformYspace();\r\n      this.onchange();\r\n      //#endregion\r\n   }\r\n\r\n   //#endregion\r\n\r\n   //#region viewport managment\r\n\r\n   /**\r\n    * setting new viewport form the cartesian coordinates.\r\n    * @param {Object} viewport \r\n    * an object has: 1. xmin, xmax, ymin, ymax representing the edges of the cartesian coordinates not the pixels in the canvas\r\n    * @param {Object} keepRatio \r\n    */\r\n   setViewport(viewport, keepRatio) {\r\n      //#region precalculations\r\n      // the top left corner\r\n      viewport.xmin = viewport.xmin === 0 ? 0 : (viewport.xmin || this.gs.viewport.xmin);\r\n      viewport.xmax = viewport.xmax === 0 ? 0 : (viewport.xmax || this.gs.viewport.xmax);\r\n      viewport.ymin = viewport.ymin === 0 ? 0 : (viewport.ymin || this.gs.viewport.ymin);\r\n      viewport.ymax = viewport.ymax === 0 ? 0 : (viewport.ymax || this.gs.viewport.ymax);\r\n      let a = this.invokeOnchange; this.invokeOnchange = false;\r\n      let p = this.coorManager.pxTOcoor(this.gs.width / 2, this.gs.height / 2);\r\n\r\n      //#endregion\r\n\r\n      //#region maincalculations\r\n      let xs = this.xSpace, ys = this.ySpace;\r\n\r\n      this.xSpace = this.xSpace / ((viewport.xmax - viewport.xmin) / (this.gs.viewport.xmax - this.gs.viewport.xmin));\r\n      if (keepRatio) {\r\n         this.ySpace *= this.xSpace / xs;\r\n      } else {\r\n         this.ySpace = this.ySpace / ((viewport.ymax - viewport.ymin) / (this.gs.viewport.ymax - this.gs.viewport.ymin));\r\n      }\r\n\r\n      if (this.ySpace <= 0 || this.xSpace <= 0 || isNaN(this.xSpace) || !isFinite(this.xSpace) || isNaN(this.ySpace) || !isFinite(this.ySpace)) {\r\n         this.xSpace = xs;\r\n         this.ySpace = ys;\r\n      }\r\n\r\n      this.reformXspace();\r\n      this.reformYspace();\r\n\r\n      //#endregion\r\n\r\n      //#region aftercalulations\r\n\r\n      this.onchange(true);\r\n      let tfCorner = this.coorManager.coorTOpx(viewport.xmin, viewport.ymax);\r\n      tfCorner = new vector(tfCorner.x, tfCorner.y);\r\n      /// translation::: put the top left corner as pixels after transformations on top of the one before transformation \r\n      this.translate(tfCorner.mult(-1));\r\n      this.onchange(true);\r\n      if (keepRatio) {\r\n         let p_ = this.coorManager.coorTOpx(p.x, (viewport.ymax + viewport.ymin) / 2);\r\n         this.translate(new vector(0, this.gs.height / 2 - p_.y));\r\n      }\r\n      this.onchange(); this.invokeOnchange = a;\r\n      //#endregion\r\n   }\r\n\r\n   getViewport(pxViewport) {\r\n      pxViewport.xmin = pxViewport.xmin || 0;\r\n      pxViewport.xmax = pxViewport.xmax || this.gs.width;\r\n      pxViewport.ymin = pxViewport.ymin || 0;\r\n      pxViewport.ymax = pxViewport.ymax || this.gs.height;\r\n\r\n      let xStart = this.coorManager.xTOcoor(pxViewport.xmin, Math.tan(this.yAngle) > 0 ? pxViewport.ymin : pxViewport.ymax);\r\n      let xEnd = this.coorManager.xTOcoor(pxViewport.xmax, Math.tan(this.yAngle) <= 0 ? pxViewport.ymin : pxViewport.ymax);\r\n      let yStart = this.coorManager.yTOcoor(Math.tan(this.xAngle) > 0 ? pxViewport.xmax : pxViewport.xmin, pxViewport.ymax);\r\n      let yEnd = this.coorManager.yTOcoor(Math.tan(this.xAngle) <= 0 ? pxViewport.xmax : pxViewport.xmin, pxViewport.ymin);\r\n\r\n      return {\r\n         xmin: xEnd < xStart ? xEnd : xStart,\r\n         xmax: xEnd > xStart ? xEnd : xStart,\r\n         ymin: yEnd < yStart ? yEnd : yStart,\r\n         ymax: yEnd > yStart ? yEnd : yStart\r\n      };\r\n   }\r\n\r\n   //#endregion\r\n\r\n   //#region general\r\n\r\n   reformXspace() {\r\n      let done = false;\r\n      while (this.xSpace > this.zoomLimits[1]) {\r\n         if (this.xZoomingState == 5) {\r\n            this.xZoomingState = 2;\r\n            let ratio = 2 / 5;\r\n            this.xSpaceValue = this.xSpaceValue * ratio;\r\n            this.xSpace = this.xSpace * ratio;\r\n         }\r\n         else if (this.xZoomingState == 2) {\r\n            this.xZoomingState = 1;\r\n            let ratio = 1 / 2;\r\n            this.xSpaceValue = this.xSpaceValue * ratio;\r\n            this.xSpace = this.xSpace * ratio;\r\n         }\r\n         else if (this.xZoomingState == 1) {\r\n            this.xZoomingState = 5;\r\n            let ratio = 0.5 / 1;\r\n            this.xSpaceValue = this.xSpaceValue * ratio;\r\n            this.xSpace = this.xSpace * ratio;\r\n         }\r\n         done = true;\r\n      }\r\n      if (done) return;\r\n      while (this.xSpace < this.zoomLimits[0]) {\r\n         if (this.xZoomingState == 1) {\r\n            this.xZoomingState = 2;\r\n            let ratio = 2 / 1;\r\n            this.xSpaceValue = this.xSpaceValue * ratio;\r\n            this.xSpace = this.xSpace * ratio;\r\n         }\r\n         else if (this.xZoomingState == 2) {\r\n            this.xZoomingState = 5;\r\n            let ratio = 5 / 2;\r\n            this.xSpaceValue = this.xSpaceValue * ratio;\r\n            this.xSpace = this.xSpace * ratio;\r\n         }\r\n         else if (this.xZoomingState == 5) {\r\n            this.xZoomingState = 1;\r\n            let ratio = 10 / 5;\r\n            this.xSpaceValue = this.xSpaceValue * ratio;\r\n            this.xSpace = this.xSpace * ratio;\r\n         }\r\n      }\r\n   }\r\n   reformYspace() {\r\n      let done = false;\r\n      while (this.ySpace > this.zoomLimits[1]) {\r\n         if (this.yZoomingState == 5) {\r\n            this.yZoomingState = 2;\r\n            let ratio = 2 / 5;\r\n            this.ySpaceValue = this.ySpaceValue * ratio;\r\n            this.ySpace = this.ySpace * ratio;\r\n         }\r\n         else if (this.yZoomingState == 2) {\r\n            this.yZoomingState = 1;\r\n            let ratio = 1 / 2;\r\n            this.ySpaceValue = this.ySpaceValue * ratio;\r\n            this.ySpace = this.ySpace * ratio;\r\n         }\r\n         else if (this.yZoomingState == 1) {\r\n            this.yZoomingState = 5;\r\n            let ratio = 0.5 / 1;\r\n            this.ySpaceValue = this.ySpaceValue * ratio;\r\n            this.ySpace = this.ySpace * ratio;\r\n         }\r\n         done = true;\r\n      }\r\n      if (done) return;\r\n      while (this.ySpace < this.zoomLimits[0]) {\r\n         if (this.yZoomingState == 1) {\r\n            this.yZoomingState = 2;\r\n            let ratio = 2 / 1;\r\n            this.ySpaceValue = this.ySpaceValue * ratio;\r\n            this.ySpace = this.ySpace * ratio;\r\n         }\r\n         else if (this.yZoomingState == 2) {\r\n            this.yZoomingState = 5;\r\n            let ratio = 5 / 2;\r\n            this.ySpaceValue = this.ySpaceValue * ratio;\r\n            this.ySpace = this.ySpace * ratio;\r\n         }\r\n         else if (this.yZoomingState == 5) {\r\n            this.yZoomingState = 1;\r\n            let ratio = 10 / 5;\r\n            this.ySpaceValue = this.ySpaceValue * ratio;\r\n            this.ySpace = this.ySpace * ratio;\r\n         }\r\n      }\r\n   }\r\n\r\n   reset() {\r\n      this.transformOrigin = undefined;\r\n\r\n      this.xSpace = 120;\r\n      this.xSpaceValue = 2;\r\n      this.xSpaceModifier = 1;\r\n      this.xZoomingState = 2;\r\n\r\n      this.ySpace = 120;\r\n      this.ySpaceValue = 2;\r\n      this.ySpaceModifier = 1;\r\n      this.yZoomingState = 2;\r\n\r\n      this._xAngle = 0;\r\n      this._yAngle = Math.PI / 2;\r\n\r\n      this._center = new vector(this.gs.width / 2, this.gs.height / 2);\r\n\r\n      this.onchange();\r\n   }\r\n\r\n   assign(target, src) {\r\n      // target._transformOrigin = src._transformOrigin;\r\n\r\n      target.xSpace = src.xSpace;\r\n      target.xSpaceValue = src.xSpaceValue;\r\n      target.xSpaceModifier = src.xSpaceModifier;\r\n      target.xZoomingState = src.xZoomingState;\r\n\r\n      target.ySpace = src.ySpace;\r\n      target.ySpaceValue = src.ySpaceValue;\r\n      target.ySpaceModifier = src.ySpaceModifier;\r\n      target.yZoomingState = src.yZoomingState;\r\n\r\n      target._xAngle = src._xAngle;\r\n      target._yAngle = src._yAngle;\r\n\r\n      target._center = src._center;\r\n   }\r\n\r\n   onchange(change = this.invokeOnchange, transToOrigin = true) {\r\n      /// updating\r\n      if (change) {\r\n\r\n         let ysm = this.xSpaceModifier + Math.abs(Math.cos(this.xAngle - this.yAngle));\r\n         let xsm = this.ySpaceModifier + Math.abs(Math.cos(this.xAngle - this.yAngle));\r\n         this.xScale = (this.xSpace * ysm / this.xSpaceValue);\r\n         this.yScale = (this.ySpace * xsm / this.ySpaceValue);\r\n\r\n         let invalid =\r\n            !math.isNumeric(this.xScale) || !math.isNumeric(this.yScale) ||\r\n            !math.isNumeric(this.center.x) || !math.isNumeric(this.center.y) ||\r\n            (this.transformOrigin && transToOrigin &&\r\n               (!math.isNumeric(this.transformOrigin.coorVector.x) || !math.isNumeric(this.transformOrigin.coorVector.y) ||\r\n                  !math.isNumeric(this.transformOrigin.pxVector.x) || !math.isNumeric(this.transformOrigin.pxVector.y)));\r\n\r\n         if (invalid) {\r\n            let a = this.invokeOnchange;\r\n            this.invokeOnchange = false;\r\n            try {\r\n               this.assign(this, this.lastVersion.transform);\r\n            } catch (e) {\r\n               this.reset();\r\n            }\r\n            this.invokeOnchange = a;\r\n            this.onchange(true);\r\n            return;\r\n         }\r\n\r\n         this.coorManager.transform = this.getTransform();\r\n\r\n         let vp = this.getViewport({\r\n            xmin: 0, xmax: this.gs.width,\r\n            ymin: 0, ymax: this.gs.height\r\n         });\r\n\r\n         vp.width = vp.xmax - vp.xmin;\r\n         vp.height = vp.ymax - vp.ymin;\r\n         this.gs.viewport = vp;\r\n\r\n         this.gs.drawingStep = (this.gs.viewport.xmax - this.gs.viewport.xmin) / 10000;\r\n\r\n         invalid = !math.isNumeric(this.gs.viewport.xmin) || !math.isNumeric(this.gs.viewport.xmax) ||\r\n            !math.isNumeric(this.gs.viewport.ymin) || !math.isNumeric(this.gs.viewport.ymax) ||\r\n            !math.isNumeric(this.gs.drawingStep) ||\r\n            (this.gs.viewport.xmax - this.gs.viewport.xmin) > 10 ** 12 ||\r\n            (this.gs.viewport.ymax - this.gs.viewport.ymin) > 10 ** 12 ||\r\n            (this.gs.viewport.xmax - this.gs.viewport.xmin) < 10 ** -12 ||\r\n            (this.gs.viewport.ymax - this.gs.viewport.ymin) < 10 ** -12 ||\r\n            (this.gs.viewport.xmin + this.gs.drawingStep / 2 <= this.gs.viewport.xmin) ||\r\n            this.gs.viewport.xmax - this.gs.drawingStep / 2 >= this.gs.viewport.xmax;\r\n\r\n         if (invalid && this.lastVersion) {\r\n            let a = this.invokeOnchange;\r\n            this.invokeOnchange = false;\r\n            try {\r\n               this.assign(this, this.lastVersion.transform);\r\n            } catch (e) {\r\n               this.reset();\r\n            }\r\n            this.invokeOnchange = a;\r\n            this.onchange(true);\r\n            return;\r\n         } else {\r\n\r\n            if (this.transformOrigin && transToOrigin) {\r\n               let a = this.invokeOnchange;\r\n               this.invokeOnchange = false;\r\n               let p = this.coorManager.coorTOpx(...this.transformOrigin.coorVector.toArray());\r\n               this.translate(this.transformOrigin.pxVector.subtract(p));\r\n               this.onchange(true, false);\r\n               this.invokeOnchange = a;\r\n               return;\r\n            }\r\n\r\n            if (this.handlers.onchange) {\r\n               this.handlers.onchange();\r\n            }\r\n            let trans = {};\r\n            this.assign(trans, this);\r\n            this.lastVersion = {\r\n               transform: trans,\r\n            };\r\n         }\r\n\r\n      }\r\n   }\r\n\r\n   //#endregion\r\n\r\n}\r\n","export default class CoorManager {\r\n\r\n   constructor(transform) {\r\n      this.transform = transform || {a: 1, b: 0, c: 0, d: 1, e: 0, f: 0};\r\n   }\r\n\r\n   get transform() {\r\n      return this.trans;\r\n   }\r\n\r\n   set transform(trans) {\r\n\r\n      this.e = trans.e;\r\n      this.f = trans.f;\r\n\r\n      this.a = trans.a;\r\n      this.b = trans.b;\r\n      this.c = trans.c;\r\n      this.d = trans.d;\r\n\r\n      let matrixInverse = (m) => {\r\n         let i = {};\r\n         let det = m.a * m.d - m.c * m.b;\r\n         i.a = m.d / det;\r\n         i.d = m.a / det;\r\n         i.c = -m.c / det;\r\n         i.b = -m.b / det;\r\n         return i;\r\n      };\r\n\r\n      let inverse = matrixInverse(trans);\r\n\r\n      this.ia = inverse.a;\r\n      this.ib = inverse.b;\r\n      this.ic = inverse.c;\r\n      this.id = inverse.d;\r\n   }\r\n\r\n   coorTOpx(x, y) {\r\n      return { x: this.xToPixel(x, y), y: this.yToPixel(x, y) };\r\n   }\r\n   \r\n   pxTOcoor(x, y) {\r\n      return { x: this.xTOcoor(x, y), y: this.yTOcoor(x, y) };\r\n   }\r\n\r\n   xToPixel(x, y) {\r\n      /// x and y are cartesian coordiantes\r\n      return (this.a * x + this.c * y + this.e);\r\n   }\r\n\r\n   yToPixel(x, y) {\r\n      /// x and y are cartesian coordiantes\r\n      return (this.b * x + this.d * y + this.f);\r\n   }\r\n\r\n   xTOcoor(x, y) {\r\n      x = x - this.e;\r\n      y = y - this.f;\r\n      return this.ia * x + this.ic * y;\r\n   }\r\n\r\n   yTOcoor(x, y) {\r\n      x = x - this.e;\r\n      y = y - this.f;\r\n      return this.ib * x + this.id * y;\r\n   }\r\n   \r\n}","import Transform from './Transform.js';\r\nimport CoorManager from './CoorManager.js';\r\nimport { ExistBefore } from '../Errors/index.js';\r\n\r\nexport default class {\r\n\r\n  constructor(sketch, width, height) {\r\n    this.sketch = sketch;\r\n    this._width = width;\r\n    this._height = height;\r\n\r\n    this.coorManager = new CoorManager();\r\n    this.transform = new Transform(this);\r\n\r\n    this.center = new vector(this.width / 2, this.height / 2);\r\n\r\n    this.physicsRun = false;\r\n\r\n  }\r\n\r\n  get coor() { return this.sketch.coor; }\r\n\r\n  get width() { return this._width || 0; }\r\n  set width(value) {\r\n    this._width = value; /** to update the boundaries */\r\n    this.transform.onchange();\r\n  }\r\n  get height() { return this._height || 0; }\r\n  set height(value) {\r\n    this._height = value; /** to update the boundaries */\r\n    this.transform.onchange();\r\n  }\r\n\r\n  get center() {\r\n    return this.transform.center;\r\n  }\r\n\r\n  set center(vec) {\r\n    this.transform.center = vec;\r\n  }\r\n\r\n  get iVector() {\r\n    return this.transform.iVector;\r\n  }\r\n\r\n  get jVector() {\r\n    return this.transform.jVector;\r\n  }\r\n\r\n  centrate() {\r\n    this.transform.center = new vector(this.width / 2, this.height / 2);\r\n  }\r\n\r\n  reset() {\r\n    this.transform.reset();\r\n  }\r\n\r\n  checkId(id) {\r\n    if (!id) throw new Error('can\\'t set a falsy value to the name of this sketch child.');\r\n    let __id = id.replace(/^\\s*([_a-zA-z]+\\d*)\\s*$/, '$1');\r\n    if (!__id)\r\n      throw new Error(`\"${id}\" is not valid to use.`);\r\n    else {\r\n      if (this.sketch.children.has(id)) {\r\n        throw new ExistBefore(id);\r\n      }\r\n    }\r\n    if (Math.hasOwnProperty(id)) throw new ExistBefore(id);\r\n    return __id;\r\n  }\r\n\r\n}\r\n\r\n\r\n","\r\nexport default class {\r\n\r\n   constructor(gs, coorSettings) {\r\n      this.gs = gs;\r\n      this.coorManager = this.gs.coorManager;\r\n      let defaultCoorSettings = {\r\n         type: 'default',\r\n         xUnit: '',\r\n         yUnit: '',\r\n\r\n         background: new drawing.color(255, 255, 255, 255),\r\n         font: 'Georgia',\r\n\r\n         drawDecimalLines: true,\r\n         drawMainLines: true,\r\n         drawAxisesLines: true,\r\n         drawPolarCircles: false,\r\n         drawPolarLines: false,\r\n         drawPolarAngles: false,\r\n         drawNumbers: true,\r\n\r\n         decimalLinesSpace: 5,\r\n         polarCirclesSpace: 5,\r\n         polarLinesAnglesSpace: 6,\r\n\r\n         penDecimalLines: null,\r\n         penMainLines: null,\r\n         penXaxis: null,\r\n         penYaxis: null,\r\n         penPolarCircles: null,\r\n         penPolarLines: null,\r\n\r\n         autoRefiningOnZoomimg: true\r\n      };\r\n\r\n      Object.assign(defaultCoorSettings, {\r\n         color: defaultCoorSettings.background.isDark() ? new drawing.color(200, 200, 200, 255) : new drawing.color(50, 50, 50, 1),\r\n         antiBackground: defaultCoorSettings.background.isDark() ? new drawing.color(200, 200, 200, 255) : new drawing.color(50, 50, 50, 1),\r\n         drawDecimalLines: !defaultCoorSettings.background.isDark(),\r\n         penDecimalLines: new drawing.pen(defaultCoorSettings.background.isDark() ? new drawing.color(200, 200, 200, 30 / 255) : new drawing.color(50, 50, 50, 30 / 255), 1),\r\n         penMainLines: new drawing.pen(defaultCoorSettings.background.isDark() ? new drawing.color(200, 200, 200, 100 / 255) : new drawing.color(50, 50, 50, 100 / 255), 1),\r\n         penXaxis: new drawing.pen(defaultCoorSettings.background.isDark() ? new drawing.color(255, 255, 255, 150 / 255) : new drawing.color(0, 0, 0, 150 / 255), 2),\r\n         penYaxis: new drawing.pen(defaultCoorSettings.background.isDark() ? new drawing.color(255, 255, 255, 150 / 255) : new drawing.color(0, 0, 0, 150 / 255), 2),\r\n         penPolarCircles: new drawing.pen(defaultCoorSettings.background.isDark() ? new drawing.color(200, 200, 200, 100 / 255) : new drawing.color(50, 50, 50, 50 / 255), 1),\r\n         penPolarLines: new drawing.pen(defaultCoorSettings.background.isDark() ? new drawing.color(200, 200, 200, 100 / 255) : new drawing.color(50, 50, 50, 50 / 255), 1)\r\n      });\r\n      Object.assign(defaultCoorSettings, {\r\n         fillColor: defaultCoorSettings.color.toString(),\r\n         fillColorDim: defaultCoorSettings.color.toString({ a: 0.5 }),\r\n      });\r\n      if (coorSettings) {\r\n         this.coorSettings = {};\r\n         Object.assign(this.coorSettings, defaultCoorSettings);\r\n         Object.assign(this.coorSettings, coorSettings);\r\n      } else {\r\n         this.coorSettings = defaultCoorSettings;\r\n      }\r\n\r\n   }\r\n\r\n   draw(ctx) {\r\n      switch (this.coorSettings.type) {\r\n         case 'default':\r\n            this.custom(ctx);\r\n            break;\r\n         case 'rad':\r\n            this.radian(ctx);\r\n            break;\r\n      }\r\n   }\r\n\r\n   custom(canvas, a = 1) {\r\n\r\n      let start_x, start_y, end_x, end_y;\r\n      start_x = Math.floor(this.gs.viewport.xmin / this.gs.transform.xSpaceValue / a) * a * this.gs.transform.xSpaceValue;\r\n      end_x = Math.ceil(this.gs.viewport.xmax / this.gs.transform.xSpaceValue / a) * a * this.gs.transform.xSpaceValue;\r\n      start_y = Math.floor(this.gs.viewport.ymin / this.gs.transform.ySpaceValue) * this.gs.transform.ySpaceValue;\r\n      end_y = Math.ceil(this.gs.viewport.ymax / this.gs.transform.ySpaceValue) * this.gs.transform.ySpaceValue;\r\n\r\n      if (this.coorSettings.drawDecimalLines) {\r\n         canvas.ctx.beginPath();\r\n         this.coorSettings.penDecimalLines.setup(canvas);\r\n         // x\r\n         for (let i = start_x; i <= end_x; i += this.gs.transform.xSpaceValue * a / this.coorSettings.decimalLinesSpace)\r\n            canvas.line(this.coorManager.xToPixel(i, start_y), this.coorManager.yToPixel(i, start_y),\r\n               this.coorManager.xToPixel(i, end_y), this.coorManager.yToPixel(i, end_y));\r\n         // y\r\n         for (let i = start_y; i <= end_y; i += this.gs.transform.ySpaceValue / this.coorSettings.decimalLinesSpace)\r\n            canvas.line(this.coorManager.xToPixel(start_x, i), this.coorManager.yToPixel(start_x, i),\r\n               this.coorManager.xToPixel(end_x, i), this.coorManager.yToPixel(end_x, i));\r\n         canvas.ctx.stroke();\r\n      }\r\n\r\n      if (this.coorSettings.drawMainLines) {\r\n         canvas.ctx.beginPath();\r\n         this.coorSettings.penMainLines.setup(canvas);\r\n         // x\r\n         for (let i = start_x; i <= end_x; i += this.gs.transform.xSpaceValue * a)\r\n            canvas.line(this.coorManager.xToPixel(i, start_y), this.coorManager.yToPixel(i, start_y),\r\n               this.coorManager.xToPixel(i, end_y), this.coorManager.yToPixel(i, end_y));\r\n         // y\r\n         for (let i = start_y; i <= end_y; i += this.gs.transform.ySpaceValue)\r\n            canvas.line(this.coorManager.xToPixel(start_x, i), this.coorManager.yToPixel(start_x, i),\r\n               this.coorManager.xToPixel(end_x, i), this.coorManager.yToPixel(end_x, i));\r\n         canvas.ctx.stroke();\r\n      }\r\n\r\n      if (this.coorSettings.drawAxisesLines) {\r\n         canvas.ctx.beginPath();\r\n         this.coorSettings.penXaxis.setup(canvas);\r\n         canvas.line(this.coorManager.xToPixel(start_x, 0), this.coorManager.yToPixel(start_x, 0),\r\n            this.coorManager.xToPixel(end_x, 0), this.coorManager.yToPixel(end_x, 0));\r\n         canvas.ctx.stroke();\r\n         canvas.ctx.beginPath();\r\n         this.coorSettings.penYaxis.setup(canvas);\r\n         canvas.line(this.coorManager.xToPixel(0, start_y), this.coorManager.yToPixel(0, start_y),\r\n            this.coorManager.xToPixel(0, end_y), this.coorManager.yToPixel(0, end_y));\r\n         canvas.ctx.stroke();\r\n      }\r\n\r\n      if (this.coorSettings.drawNumbers) {\r\n         start_x = Math.floor(start_x / this.gs.transform.xSpaceValue / a);\r\n         end_x = Math.ceil(end_x / this.gs.transform.xSpaceValue / a);\r\n         start_y = Math.floor(start_y / this.gs.transform.ySpaceValue);\r\n         end_y = Math.ceil(end_y / this.gs.transform.ySpaceValue);\r\n\r\n         let y, x;\r\n         let num;\r\n         // label position x\r\n         canvas.ctx.fillStyle = this.coorSettings.fillColor;\r\n         canvas.ctx.strokeStyle = this.coorSettings.background.toString();\r\n         canvas.ctx.lineWidth = 3;\r\n         canvas.setFont({ size: 15 }); /// setting the label style.\r\n\r\n         let xD, yD;\r\n         if (Math.abs(Math.tan(this.gs.transform.yAngle)) > Math.abs(Math.tan(this.gs.transform.xAngle))) { // && Math.tan(Math.abs(this.gs.transform._xAngle - this.gs.transform._yAngle)) >= 1\r\n            // dealing horizetally when setting x labels vetically.\r\n            xD = 'v'; yD = 'h';\r\n         }\r\n         else {\r\n            xD = 'h'; yD = 'v';\r\n         }\r\n\r\n         for (let i = start_x; i <= end_x; i += 1) {\r\n            x = i * this.gs.transform.xSpaceValue;\r\n            num = (Math.abs(x) < 0.001 || Math.abs(x) >= 999999) ?\r\n               x.toExponential(3).replace(/\\.?0+e\\+?/, '×10^') :\r\n               x.toFixed(3).replace(/0+$/, \"\").replace(/\\.$/, ''); /// .toFixed(3) returns 32146.000 if you input an integer, so I want to remove all the zeros from the end, and if \".\" remians, then remove it too, other wise keep all thing such as 2343165.123 \r\n            if (x != 0) {\r\n               num += (a === Math.PI / 2 ? 'pi' : '') + this.coorSettings.xUnit;\r\n               let p = this.__getLabelPos(canvas, this.coorManager.coorTOpx(x, 0) , num, xD, this.gs.transform.jVector); /// position of the label of x which the line, which is parallel to yAxis, intersect xAxis;\r\n               canvas.ctx.strokeText(num, p.x, p.y);\r\n               canvas.ctx.fillText(num, p.x, p.y);\r\n            }\r\n         }\r\n         // label position y\r\n         for (let i = start_y; i <= end_y; i += 1) {\r\n            y = i * this.gs.transform.ySpaceValue;\r\n            num = (Math.abs(y) < 0.001 || Math.abs(y) >= 999999) ?\r\n               y.toExponential(3).replace(/\\.?0+e\\+?/, '×10^') :\r\n               y.toFixed(3).replace(/0+$/, \"\").replace(/\\.$/, '');\r\n            if (y != 0) {\r\n               num += this.coorSettings.yUnit;\r\n               let p = this.__getLabelPos(canvas, this.coorManager.coorTOpx(0, y), num, yD, this.gs.transform.iVector);\r\n               canvas.ctx.strokeText(num, p.x, p.y);\r\n               canvas.ctx.fillText(num, p.x, p.y);\r\n            }\r\n         }\r\n      }\r\n   }\r\n   radian(canvas) {\r\n      this.custom(canvas, Math.PI / 2);\r\n   }\r\n\r\n   /**\r\n    * \r\n    * @param {vector} pos the real position for the label on either of the two axes\r\n    * @param {string} number as string to measure its size.\r\n    * @param {string} dimension which is either 'h' or 'v', so the code will check if the label is out side the horizental view 'h', or the vertical view 'v';\r\n    */\r\n   __getLabelPos(canvas, pos, number, dimension, unitVec) {\r\n      let size = canvas.measureString(number);\r\n      size.height = 10; // as there is no properity called height in size, gotten from measureString(\"string\");\r\n      pos = new vector(pos.x +4, pos.y +4);\r\n\r\n      if (dimension === 'h') {\r\n         let bounds = [10, this.gs.width - size.width - 10];\r\n         if (pos.x < bounds[0]) {\r\n            // canvas.ctx.fillStyle = this.coorSettings.fillColorDim;\r\n            let n = (bounds[0] - pos.x) / unitVec.x;\r\n            return pos.add(unitVec.mult(n));\r\n         } else if (pos.x > bounds[1]) {\r\n            // canvas.ctx.fillStyle = this.coorSettings.fillColorDim;\r\n            let n = (bounds[1] - pos.x) / unitVec.x;\r\n            return pos.add(unitVec.mult(n));\r\n         } else {\r\n            // canvas.ctx.fillStyle = this.coorSettings.fillColor;\r\n            return pos;\r\n         }\r\n      } else {\r\n         /// if dimension is 'v' or even anything else.\r\n         let bounds = [10, this.gs.height - size.height - 10];\r\n         if (pos.y < bounds[0]) {\r\n            // canvas.ctx.fillStyle = this.coorSettings.fillColorDim;\r\n            let n = (bounds[0] - pos.y) / unitVec.y;\r\n            return pos.add(unitVec.mult(n));\r\n         } else if (pos.y > bounds[1]) {\r\n            // canvas.ctx.fillStyle = this.coorSettings.fillColorDim;\r\n            let n = (bounds[1] - pos.y) / unitVec.y;\r\n            return pos.add(unitVec.mult(n));\r\n         } else {\r\n            // canvas.ctx.fillStyle = this.coorSettings.fillColor;\r\n            return pos;\r\n         }\r\n      }\r\n   }\r\n\r\n}","import GraphSettings from './GraphSetting/GraphSettings.js';\r\nimport Coordinates from './Coordinates.js';\r\nimport Canvas from './Canvas.js';\r\nimport { Xfunction, EvalExpr, Point, Variable, Empty, Slider, Func } from './GraphChildren/index.js';\r\nexport default class Sketch {\r\n\r\n    constructor(canvasParent) {\r\n        this.canvas = new Canvas({ parent: canvasParent, attributes: { id: 'canvas' } });\r\n        this.childrenCanvas = new Canvas({ parent: canvasParent, attributes: { id: 'children-canvas' } });\r\n        this.gs = new GraphSettings(this, this.canvas.width, this.canvas.height);\r\n        // childrenTrans = this.gs.transform.getTransform();\r\n        // this.gs.transform.handlers.onchange = () => {\r\n        //     let { a, b, c, d, e, f } = this.gs.transform.getTransform();\r\n        //     a = a - childrenTrans.a; b = b - childrenTrans.b;\r\n        //     c = c - childrenTrans.c; d = d - childrenTrans.d;\r\n        //     e = e - childrenTrans.e; f = f - childrenTrans.f;\r\n        //     this.childrenCanvas.setTransform(a, b, c, d, e, f);\r\n        // };\r\n        this.coor = new Coordinates(this.gs);\r\n        this.children = new Map();\r\n        this.scriptParser = new MagicalParser.CustomParsers.Math();\r\n\r\n        this.childrenCanvas.ctx.miterLimit = 1;\r\n\r\n        // this.updator = { worker: new Worker('./updateChildren.js'), data: { status: 'ready' } };\r\n    }\r\n\r\n    childFromScript(script, propsTOset = {}) {\r\n        let parsedString = this.getChildParser.parse(script.replace(/\\^/g, '**'));\r\n        return childFromParsed(parsedString, propsTOset);\r\n    }\r\n\r\n    childFromParsed(parsedString, propsTOset = {}) {\r\n        propsTOset.sketch = this;\r\n        if (parsedString.type === '') {\r\n            return new Empty(propsTOset);\r\n        }\r\n        if (parsedString.name === '=') {\r\n            let left = parsedString.args[0], right = parsedString.args[1];\r\n\r\n            if (left.check({ type: 'variable', name: 'y' }) && !right.contains({ type: 'variable', name: 'y' })) {\r\n                return new Xfunction(Object.assign(propsTOset, { expr: right, }));\r\n            }\r\n\r\n            //such : area( h , b , theta ) = 0.5 * h * b * sin( theta )\r\n            //such : g(a) = a^2\r\n            else if (left.check({ type: 'functionCalling' })) {\r\n                // such : f(x) = x^2\r\n                if (left.args.length == 1 && left.args[0].check({ type: 'variable', name: 'x' }) && !right.contains({ type: 'variable', name: 'y' })) {\r\n                    return new Xfunction({ sketch: this, expr: right, id: left.name });\r\n                }\r\n\r\n                //such : area( h , b , theta) = 0.5 * h * b * sin( theta )\r\n                else {\r\n                    let params = [];\r\n                    let skip;\r\n                    if (left.args[0].check({ type: 'separator', name: ',' })) {\r\n                        for (let param of left.args[0].args) {\r\n                            if (param.type === 'variable') {\r\n                                params.push(param.name);\r\n                            } else {\r\n                                skip = true;\r\n                                continue;\r\n                            }\r\n                        }\r\n                    } else {\r\n                        if (left.args[0].type !== 'variable') skip = true;\r\n                        if (!skip) params.push(left.args[0].name);\r\n                    }\r\n                    if (!skip) {\r\n                        return new Func(Object.assign(propsTOset, { id: left.name, params, expr: right }));\r\n                    }\r\n                }\r\n            }\r\n\r\n            //such : a = 2\r\n            else if (left.type === 'variable' && right.type === 'number') {\r\n                return new Slider(Object.assign(propsTOset, { id: left.name, value: right.value }));\r\n            }\r\n            //such : a = -2\r\n            else if (left.type === 'variable' && right.check({ type: 'prefixOperator', name: '-' }) && right.args[0].type === 'number') {\r\n                return new Slider(Object.assign(propsTOset, { id: left.name, value: -right.args[0].value }));\r\n            }\r\n            //such : a = 2b+c\r\n            else if (left.type === 'variable') {\r\n                return new Variable(Object.assign(propsTOset, { id: left.name, value: right }));\r\n            }\r\n\r\n        }\r\n        // /// like 2+3*x = sin(y)^2\r\n        // else if ((IsBool(parsedString)) && (ContainsSymbol(parsedString, GraphSettings.sy_x) || ContainsSymbol(parsedString, GraphSettings.sy_y))) {\r\n        //    XYFunction f = new XYFunction(GraphSettings);\r\n        //    {\r\n        //       Expression = MathPackage.Transformer.GetNodeFromLoycNode(parsedString, GraphSettings.CalculationSettings);\r\n        //    };\r\n        //    if (selectName) {\r\n        //       if (enrollName) {\r\n        //          f.SetName(GraphSettings.selectName());\r\n        //       }\r\n        //       else {\r\n        //          f.Name = GraphSettings.selectName();\r\n        //       }\r\n        //    }\r\n        //    return f;\r\n        // }\r\n\r\n        /// to add function like : x^2\r\n        else if (parsedString.contains({ type: 'variable', name: 'x' })) {\r\n            return new Xfunction(Object.assign(propsTOset, { expr: parsedString, }));\r\n        }\r\n\r\n        /// to add a point like (1, 2)\r\n        else if (parsedString.check({ type: 'block', name: '()' }) && parsedString.args.length == 1 && parsedString.args[0].check({ type: 'separator', name: ',', length: 2 })) {\r\n            /// it is a parametricFunction\r\n            if (vars.contains('t')) {\r\n                //    let func = new ParametricFunc({\r\n                //       Parameter: \"t\",\r\n                //       Start: new MathPackage.Nodes.Constant(-10),\r\n                //       End: new MathPackage.Nodes.Constant(10),\r\n                //       x_Expression: MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[0], GraphSettings.CalculationSettings),\r\n                //       y_Expression: MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[1], GraphSettings.CalculationSettings),\r\n                //    });\r\n                //   ;\r\n                //    func.Step = null;\r\n                //    if (selectName) {\r\n                //       if (enrollName)\r\n                //          func.SetName(GraphSettings.selectName());\r\n                //       else\r\n                //          func.Name = GraphSettings.selectName();\r\n                //    }\r\n                //    return func;\r\n            }\r\n            /// it is a point\r\n            else {\r\n                return new Point(Object.assign({ x: parsedString.args[0].args[0], y: parsedString.args[0].args[1] }, propsTOset));\r\n            }\r\n        }\r\n\r\n        {\r\n            /*\r\n \r\n        else {\r\n            //#region \"Add PointsDependant\";\r\n            if (PDsTypes().Contains(parsedString.Target.Name.ToString())) {\r\n                PointsDependant pd = GetPD(parsedString, GraphSettings, selectName, enrollName);\r\n                if (pd != null) {\r\n                    return pd;\r\n                }\r\n            }\r\n            //#endregion\r\n            else if (parsedString.Target.Name.ToString() == \"Curve\") {\r\n                if (parsedString.Args.Count == 5) {\r\n                    // Checking for problems\r\n                    if (!parsedString.Args[0].IsId || !MathExpression(parsedString.Args[1]) || !MathExpression(parsedString.Args[2]) || !MathExpression(parsedString.Args[3]) || !MathExpression(parsedString.Args[4]))\r\n                        throw new Exception($\"the arguments is not valid.\\n{parsedString.ToString().Remove(0, parsedString.ToString().length - 1)}\");\r\n                    // Getting the object\r\n                    ParametricFunc func = new ParametricFunc(GraphSettings);\r\n                    {\r\n                        Parameter = parsedString.Args[0].Name.Name,\r\n                            Start = MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[1], GraphSettings.CalculationSettings),\r\n                            End = MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[2], GraphSettings.CalculationSettings),\r\n                            x_Expression = MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[3], GraphSettings.CalculationSettings),\r\n                            y_Expression = MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[4], GraphSettings.CalculationSettings),\r\n            };\r\n                    func.Step = null;\r\n                    if (selectName) {\r\n                        if (enrollName)\r\n                            func.SetName(GraphSettings.selectName());\r\n                        else\r\n                            func.Name = GraphSettings.selectName();\r\n                    }\r\n                    return func;\r\n                }\r\n                else if (parsedString.Args.Count == 6) {\r\n                    // Checking for problems\r\n                    if (!parsedString.Args[0].IsId || !MathExpression(parsedString.Args[1]) || !MathExpression(parsedString.Args[2]) || !MathExpression(parsedString.Args[3]) || !MathExpression(parsedString.Args[4]) || !MathExpression(parsedString.Args[5]))\r\n                        throw new Exception($\"the arguments is not valid.\\n{parsedString.ToString().Remove(0, parsedString.ToString().length - 1)}\");\r\n                    // Getting the object\r\n                    ParametricFunc func = new ParametricFunc(GraphSettings);\r\n                    {\r\n                        Parameter = parsedString.Args[0].Name.Name,\r\n                            Start = MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[1], GraphSettings.CalculationSettings),\r\n                            End = MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[2], GraphSettings.CalculationSettings),\r\n                            Step = MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[3], GraphSettings.CalculationSettings),\r\n                            x_Expression = MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[4], GraphSettings.CalculationSettings),\r\n                            y_Expression = MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[5], GraphSettings.CalculationSettings),\r\n                        };\r\n                    if (selectName) {\r\n                        if (enrollName)\r\n                            func.SetName(GraphSettings.selectName());\r\n                        else\r\n                            func.Name = GraphSettings.selectName();\r\n                    }\r\n                    return func;\r\n                }\r\n            }\r\n        }\r\n \r\n    */\r\n        }\r\n\r\n        return new EvalExpr(Object.assign(propsTOset, { expr: parsedString, drawable: false }));\r\n    }\r\n\r\n    getChildById(id) {\r\n        // for (let index = 0; index < this.children.length; index++) {\r\n        //     if (this.children[index].id === id) return { child, index };\r\n        //     continue;\r\n        // }\r\n        return this.children.get(id);\r\n    }\r\n\r\n    update(draw = true, coors = true) {\r\n        // this.updator.worker.onmessage = (msg) => {\r\n        // };\r\n        // this.updator.worker.postMessage('update');\r\n        if (this.status === 'updating' || this.status === 're-updating') {\r\n            this.status = 're-update';\r\n        } else {\r\n            this.status = 'updating';\r\n            for (let child of this.children.values()) {\r\n                if (child) {\r\n                    child.update();\r\n                }\r\n            }\r\n            if (draw) {\r\n                this.draw(coors);\r\n            }\r\n            if (this.status === 're-update') {\r\n                this.status = 'ready';\r\n                this.update(draw, coors);\r\n            } else {\r\n                this.status = 'ready';\r\n            }\r\n        }\r\n    }\r\n\r\n    draw(coors = true) {\r\n        if (coors) {\r\n            this.canvas.clear();\r\n            this.coor.draw(this.canvas);\r\n        }\r\n        // let vp = this.gs.viewport;\r\n        // this.childrenCanvas.clear(null, [vp.xmin, vp.ymin, vp.width, vp.height]);\r\n        this.childrenCanvas.clear();\r\n\r\n        for (let child of this.children.values()) {\r\n            if (child) {\r\n                child.draw(this.childrenCanvas);\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n","\r\n//#region canvas events\r\nimport { subTools, mouse } from '../global.js';\r\n\r\nexport default function canvasEvents() {\r\n   \r\n   let mousepressed;\r\n   let lines = MathPackage.Lines;\r\n   let dragInterval;\r\n\r\n   let startTransFunc = (e) => {\r\n\r\n      mousepressed = true;\r\n\r\n      /// the mouse position\r\n      let canvasPos = getPosittion(canvas.elt);\r\n      if (e.type === 'mousedown') {\r\n         mouse.x = e.clientX - canvasPos.left;\r\n         mouse.y = e.clientY - canvasPos.top;\r\n      } else {\r\n         //touchstart\r\n         let touch = e.touches[0];\r\n         mouse.x = touch.clientX - canvasPos.left;\r\n         mouse.y = touch.clientY - canvasPos.top;\r\n      }\r\n\r\n      Object.assign(subTools, {\r\n         type: subTools.type,\r\n         mouse: new vector(mouse.x, mouse.y),\r\n         iVector: mySketch.gs.transform.iVector,\r\n         jVector: mySketch.gs.transform.jVector\r\n      });\r\n\r\n      if (subTools.type === 'move') {\r\n         // canvasParent.style.cursor = 'grabbing';\r\n         // canvasParent.style.cursor = '-webkit-grabbing';\r\n         mouse.prev = { x: mouse.x, y: mouse.y };\r\n         mouse.vel = { x: 0, y: 0 };\r\n         clearInterval(dragInterval);\r\n         // dragInterval = setInterval(() => {\r\n         //    // mouse.prevVel = mouse.vel;\r\n         //    mouse.vel = { x: mouse.x - mouse.prev.x, y: mouse.y - mouse.prev.y };\r\n         //    // mouse.acc = { x: mouse.vel.x - mouse.prevVel.x, y: mouse.vel.y - mouse.prevVel.y };\r\n         //    mouse.prev = { x: mouse.x, y: mouse.y };\r\n         // }, 20);\r\n      }\r\n      else if (subTools.type.search('axises') > -1) {\r\n         // canvasParent.style.cursor = 'grabbing';\r\n         // canvasParent.style.cursor = '-webkit-grabbing';\r\n         let xEq = lines.lineEquation(-mySketch.gs.transform.xAngle, mySketch.gs.center),\r\n            yEq = lines.lineEquation(-mySketch.gs.transform.yAngle, mySketch.gs.center);\r\n         let d = 30;\r\n         let distTo = {\r\n            x: lines.distToLine(subTools.mouse, xEq),\r\n            y: lines.distToLine(subTools.mouse, yEq)\r\n         };\r\n         if (distTo.x < d && distTo.y < d) {\r\n            subTools.axis = 'xy';\r\n            subTools.xSpace = mySketch.gs.transform.xSapce;\r\n            subTools.ySpace = mySketch.gs.transform.ySapce;\r\n            subTools.xAngle = mySketch.gs.transform.xAngle;\r\n            subTools.yAngle = mySketch.gs.transform.yAngle;\r\n            subTools.transformOrigin = new vector(mySketch.gs.center.x, mySketch.gs.center.y);\r\n            subTools.xPenColor = Object.assign(new drawing.color(), mySketch.coor.coorSettings.penXaxis.color);\r\n            subTools.yPenColor = Object.assign(new drawing.color(), mySketch.coor.coorSettings.penYaxis.color);\r\n            mySketch.coor.coorSettings.penXaxis.color = new drawing.color(255, 0, 0, 155);\r\n            mySketch.coor.coorSettings.penYaxis.color = new drawing.color(255, 0, 0, 155);\r\n         }\r\n         else if (distTo.x < d) {\r\n            subTools.axis = 'x';\r\n            subTools.space = mySketch.gs.transform.xSapce;\r\n            subTools.angle = mySketch.gs.transform.xAngle;\r\n            let o = new vector(math.constrain(mySketch.gs.center.x, 0, mySketch.gs.width), math.constrain(mySketch.gs.center.y, 0, mySketch.gs.height));\r\n            if (o.x !== mySketch.gs.center.x) {\r\n               o = subTools.mouse;\r\n            }\r\n            subTools.transformOrigin = o;\r\n            subTools.penColor = [mySketch.coor.coorSettings.penXaxis.color].slice()[0];\r\n            mySketch.coor.coorSettings.penXaxis.color = new drawing.color(255, 0, 0, 155);\r\n         }\r\n         else if (distTo.y < d) {\r\n            subTools.axis = 'y';\r\n            subTools.space = mySketch.gs.transform.ySapce;\r\n            subTools.angle = mySketch.gs.transform.yAngle;\r\n            let o = new vector(math.constrain(mySketch.gs.center.x, 0, mySketch.gs.width), math.constrain(mySketch.gs.center.y, 0, mySketch.gs.height));\r\n            if (o.y !== mySketch.gs.center.y) {\r\n               o = subTools.mouse;\r\n            }\r\n            subTools.transformOrigin = o;\r\n            subTools.penColor = [mySketch.coor.coorSettings.penYaxis.color].slice()[0];\r\n            mySketch.coor.coorSettings.penYaxis.color = new drawing.color(255, 0, 0, 155);\r\n         }\r\n         else {\r\n            subTools.axis = undefined;\r\n         }\r\n         subTools.increment = 0;\r\n         mySketch.draw();\r\n      } else if (subTools.type === 'zoom') {\r\n         // canvasParent.style.cursor = 'grabbing';\r\n         /// setting the layer of zoomBox\r\n         let boxElt = document.createElement('div');\r\n         boxElt.classList.add('zoom-box');\r\n         // boxElt.setAttribute('style', `--top: 0;--left: 0;--width: 0;--height: 0;`);\r\n         canvasParent.append(boxElt);\r\n         subTools.boxElt = boxElt;\r\n         subTools.pxViewport = {};\r\n      }\r\n      e.preventDefault();\r\n   };\r\n\r\n   canvasParent.addEventListener('mousedown', startTransFunc);\r\n   canvasParent.addEventListener('touchstart', startTransFunc);\r\n\r\n   let updateTransFunc = (e) => {\r\n      //#region getting positions of mouse\r\n      \r\n      if (mousepressed) {\r\n\r\n         let canvasPos = getPosittion(canvas.elt);\r\n         if (e.type === 'mousemove') {\r\n            mouse.x = e.clientX - canvasPos.left;\r\n            mouse.y = e.clientY - canvasPos.top;\r\n         } else {\r\n            //touchstart\r\n            let touch = e.touches[0];\r\n            mouse.x = touch.clientX - canvasPos.left;\r\n            mouse.y = touch.clientY - canvasPos.top;\r\n         }\r\n\r\n         switch (subTools.type) {\r\n            case 'move':\r\n               {\r\n                  moveCoor(e);\r\n                  break;\r\n               }\r\n            case 'scale-axises':\r\n               {\r\n                  scaleAxises(e);\r\n                  break;\r\n               }\r\n            case 'rotate-axises':\r\n               {\r\n                  rotateAxises(e);\r\n                  break;\r\n               }\r\n            case 'zoom':\r\n               {\r\n                  zoomBox(e);\r\n                  break;\r\n               }\r\n         }\r\n         e.preventDefault();\r\n      }\r\n   };\r\n\r\n   window.addEventListener('mousemove', updateTransFunc, true);\r\n   window.addEventListener('touchmove', updateTransFunc, { passive: false, capture: true });\r\n\r\n   function getPosittion(elt) {\r\n      let parentPos = { left: 0, top: 0 };\r\n      if (elt.offsetParent) {\r\n         parentPos = getPosittion(elt.offsetParent);\r\n      }\r\n      return { left: elt.offsetLeft + parentPos.left, top: elt.offsetTop + parentPos.top };\r\n   }\r\n\r\n   let transEndFunc = (e) => {\r\n      if (mousepressed) {\r\n         mousepressed = false;\r\n         if (subTools.type === 'move') {\r\n            // canvasParent.style.cursor = 'grab';\r\n            // canvasParent.style.cursor = '-webkit-grab';\r\n            clearInterval(dragInterval);\r\n            mouse.vel = new vector(mouse.vel.x, mouse.vel.y);\r\n            while (mouse.vel.mag > 50) {\r\n               mouse.vel = mouse.vel.mult(0.9);\r\n            }\r\n            dragInterval = setInterval(() => {\r\n               if (mouse.vel.mag > 1) {\r\n                  mouse.vel = mouse.vel.mult(0.9);\r\n               }\r\n               mySketch.gs.transform.translate(mouse.vel);\r\n               mySketch.update();\r\n               if (mouse.vel.mag <= 1) clearInterval(dragInterval);\r\n            }, 10);\r\n         }\r\n         else if (subTools.type.search('axises') > -1) {\r\n            // canvasParent.style.cursor = 'grab';\r\n            // canvasParent.style.cursor = '-webkit-grab';\r\n            if (subTools.axis == 'x') {\r\n               mySketch.coor.coorSettings.penXaxis.color = subTools.penColor;\r\n            } else if (subTools.axis == 'y') {\r\n               mySketch.coor.coorSettings.penYaxis.color = subTools.penColor;\r\n            } else if (subTools.axis == 'xy') {\r\n               mySketch.coor.coorSettings.penXaxis.color = subTools.xPenColor;\r\n               mySketch.coor.coorSettings.penYaxis.color = subTools.yPenColor;\r\n            }\r\n            mySketch.draw();\r\n         }\r\n         else if (subTools.type === 'zoom') {\r\n            subTools.boxElt.remove();\r\n            if (subTools.pxViewport.width && subTools.pxViewport.height) {\r\n               mySketch.gs.transform.transformOrigin = undefined;\r\n               mySketch.gs.transform.setViewport(mySketch.gs.transform.getViewport(subTools.pxViewport));\r\n            }\r\n            showTransDetails([\r\n               'x: {',\r\n               `  xmin: ${mySketch.gs.viewport.xmin},`,\r\n               `  xmax: ${mySketch.gs.viewport.xmax}`,\r\n               '},',\r\n               'y: {',\r\n               `  ymin: ${mySketch.gs.viewport.ymin},`,\r\n               `  ymax: ${mySketch.gs.viewport.ymax}`,\r\n               '}',\r\n            ], 'zoom');\r\n            mySketch.update();\r\n         }\r\n      }\r\n   };\r\n\r\n   window.addEventListener('mouseup', transEndFunc);\r\n   window.addEventListener('touchend', transEndFunc);\r\n\r\n   canvasParent.addEventListener('mousewheel', (e) => {\r\n      e.preventDefault();\r\n\r\n      let canvasPos = getPosittion(canvas.elt);\r\n      mouse.x = e.clientX - canvasPos.left;\r\n      mouse.y = e.clientY - canvasPos.top;\r\n\r\n      let center = mySketch.gs.center;\r\n      let mousePos = mouse;\r\n      if (MathPackage.Core.dist(mouse.x, mouse.y, center.x, center.y) < 30) {\r\n         mousePos = center;\r\n      }\r\n      if (e.wheelDelta > 0) {\r\n         mySketch.gs.transform.zoomIn(new vector(mousePos.x, mousePos.y));\r\n         mySketch.update();\r\n      } else {\r\n         mySketch.gs.transform.zoomOut(new vector(mousePos.x, mousePos.y));\r\n         mySketch.update();\r\n      }\r\n   });\r\n\r\n   //#region mouse move (tools'-subtools') functions\r\n\r\n   function moveCoor(e) {\r\n      mySketch.gs.transform.translate(new vector(mouse.x, mouse.y).subtract(subTools.mouse));\r\n      mySketch.update();\r\n      // canvas.ellipse(mouse.x, mouse.y, 5);\r\n      subTools.mouse = new vector(mouse.x, mouse.y);\r\n   }\r\n\r\n   function scaleAxises(e) {\r\n      if (subTools.axis == 'x') {\r\n         let rotatedMouse = subTools.mouse;\r\n         let xEq = lines.lineEquation(-mySketch.gs.transform.xAngle, mySketch.gs.center);\r\n         let incre = (math.dist(mouse.x, mouse.y, rotatedMouse.x, rotatedMouse.y) ** 2 - lines.distToLine(new vector(mouse.x, mouse.y), xEq) ** 2) ** 0.5;\r\n\r\n         mySketch.gs.transform.transformOrigin = undefined;\r\n         if (!isNaN(incre)) {\r\n            let mina = angles.minAngle(vector.fromAngle(-mySketch.gs.transform.xAngle), new vector(mouse.x, mouse.y).subtract(rotatedMouse));\r\n            let dir = mina < Math.PI / 2 ? 1 : (mina > Math.PI / 2 ? -1 : 0);\r\n\r\n            mySketch.gs.transform.transformOrigin = subTools.transformOrigin;\r\n            mySketch.gs.transform.xSpace += (incre * dir - subTools.increment);\r\n            mySketch.gs.transform.reformXspace();\r\n            subTools.increment = incre * dir;\r\n         }\r\n\r\n         mySketch.gs.transform.onchange(true);\r\n         mySketch.update();\r\n         // canvas.ellipse(rotatedMouse.x, rotatedMouse.y, 5);\r\n         // canvas.ellipse(mouse.x, mouse.y, 5);\r\n\r\n         showTransDetails([\r\n            `*${(mySketch.gs.iVector.mag / subTools.iVector.mag).toFixed(2)}`\r\n         ]);\r\n\r\n      } else if (subTools.axis == 'y') {\r\n         let rotatedMouse = subTools.mouse;\r\n         let yEq = lines.lineEquation(-mySketch.gs.transform.yAngle, mySketch.gs.center);\r\n         let incre = (math.dist(mouse.x, mouse.y, rotatedMouse.x, rotatedMouse.y) ** 2 - lines.distToLine(new vector(mouse.x, mouse.y), yEq) ** 2) ** 0.5;\r\n\r\n         mySketch.gs.transform.transformOrigin = undefined;\r\n         if (!isNaN(incre)) {\r\n            let mina = angles.minAngle(vector.fromAngle(-mySketch.gs.transform.yAngle), new vector(mouse.x, mouse.y).subtract(rotatedMouse));\r\n            let dir = mina < Math.PI / 2 ? 1 : (mina > Math.PI / 2 ? -1 : 0);\r\n\r\n            mySketch.gs.transform.transformOrigin = subTools.transformOrigin;\r\n            mySketch.gs.transform.ySpace += (incre * dir - subTools.increment);\r\n            mySketch.gs.transform.reformYspace();\r\n            subTools.increment = incre * dir;\r\n         }\r\n\r\n         mySketch.gs.transform.onchange(true);\r\n         mySketch.update();\r\n         // canvas.ellipse(rotatedMouse.x, rotatedMouse.y, 5);\r\n         // canvas.ellipse(mouse.x, mouse.y, 5);\r\n         showTransDetails([\r\n            `*${(mySketch.gs.jVector.mag / subTools.jVector.mag).toFixed(2)}`\r\n         ]);\r\n      }\r\n      else if (subTools.axis == 'xy') {\r\n         let midEq = lines.lineEquation(-(mySketch.gs.transform.yAngle + mySketch.gs.transform.xAngle) / 2, mySketch.gs.center);\r\n         let rotatedMouse = lines.projectionToLine(subTools.mouse, midEq); // rotatedMouse here is the modified start point which sets on the line between x and y axises \r\n\r\n         let incre = (math.dist(mouse.x, mouse.y, rotatedMouse.x, rotatedMouse.y) ** 2 - lines.distToLine(new vector(mouse.x, mouse.y), midEq) ** 2) ** 0.5; // pathagorean's method \r\n\r\n         mySketch.gs.transform.transformOrigin = undefined;\r\n         if (!isNaN(incre)) {\r\n            let mina = angles.minAngle(vector.fromAngle(-mySketch.gs.transform.yAngle), new vector(mouse.x, mouse.y).subtract(rotatedMouse));\r\n            let dir = mina < Math.PI / 2 ? 1 : (mina > Math.PI / 2 ? -1 : 0);\r\n\r\n            mySketch.gs.transform.transformOrigin = subTools.transformOrigin;\r\n            let ratio = (mySketch.gs.transform.ySpace + (incre * dir - subTools.increment)) / mySketch.gs.transform.ySpace;\r\n            ratio = math.constrain(ratio, 0.9, 1.1);\r\n            mySketch.gs.transform.ySpace *= ratio;\r\n            mySketch.gs.transform.xSpace *= ratio;\r\n            mySketch.gs.transform.reformYspace();\r\n            mySketch.gs.transform.reformXspace();\r\n            subTools.increment = incre * dir;\r\n         }\r\n\r\n         mySketch.gs.transform.onchange(true);\r\n         mySketch.update();\r\n         // canvas.ellipse(rotatedMouse.x, rotatedMouse.y, 5);\r\n         // canvas.ellipse(mouse.x, mouse.y, 5);\r\n         showTransDetails([\r\n            `*${(mySketch.gs.jVector.mag / subTools.jVector.mag).toFixed(2)}`\r\n         ]);\r\n      }\r\n   }\r\n\r\n   function rotateAxises(e) {\r\n      if (subTools.axis == 'x') {\r\n         if (math.dist(mySketch.gs.center.x, mySketch.gs.center.y, mouse.x, mouse.y) > 10) {\r\n            let rotatedMouse = subTools.mouse;\r\n            let rotationAngle = angles.angle(subTools.mouse.subtract(new vector(mySketch.gs.center.x, mySketch.gs.center.y)), new vector(mouse.x, mouse.y).subtract(new vector(mySketch.gs.center.x, mySketch.gs.center.y)));\r\n            rotationAngle = angles.constrainAngle(rotationAngle);\r\n            if (!isNaN(rotationAngle)) {\r\n               // mySketch.gs.transform.xAngle = snapAngle(subTools.angle - rotationAngle);\r\n               mySketch.gs.transform.xAngle = angles.snapAngle(subTools.angle - rotationAngle, [0, Math.PI]);\r\n               let center = mySketch.gs.center;\r\n               rotatedMouse = center.add(subTools.mouse.subtract(center).rotate(rotationAngle));\r\n            }\r\n\r\n            mySketch.gs.transform.transformOrigin = undefined;\r\n            mySketch.gs.transform.invokeOnchange = true;\r\n            mySketch.gs.transform.onchange();\r\n            mySketch.update();\r\n\r\n            // canvas.ellipse(rotatedMouse.x, rotatedMouse.y, 5);\r\n            // canvas.ellipse(mouse.x, mouse.y, 5);\r\n            showTransDetails([\r\n               `xAngle: ${angles.stringDegAngle(mySketch.gs.transform.xAngle.toFixed(2))}`,\r\n               `rotationAngle: ${angles.stringDegAngle(-rotationAngle)}`\r\n            ]);\r\n         }\r\n      } else if (subTools.axis == 'y') {\r\n         if (math.dist(mySketch.gs.center.x, mySketch.gs.center.y, mouse.x, mouse.y) > 10) {\r\n\r\n            let rotatedMouse = subTools.mouse;\r\n            let rotationAngle = angles.angle(subTools.mouse.subtract(new vector(mySketch.gs.center.x, mySketch.gs.center.y)), new vector(mouse.x, mouse.y).subtract(new vector(mySketch.gs.center.x, mySketch.gs.center.y)));\r\n            rotationAngle = angles.constrainAngle(rotationAngle);\r\n            if (!isNaN(rotationAngle)) {\r\n               mySketch.gs.transform.yAngle = angles.snapAngle(subTools.angle - rotationAngle, [Math.PI / 2, 3*Math.PI/2]);\r\n               let center = mySketch.gs.center;\r\n               rotatedMouse = center.add(subTools.mouse.subtract(center).rotate(rotationAngle));\r\n            }\r\n\r\n            mySketch.gs.transform.invokeOnchange = true;\r\n            mySketch.gs.transform.onchange();\r\n            mySketch.update();\r\n            // canvas.ellipse(rotatedMouse.x, rotatedMouse.y, 5);\r\n            // canvas.ellipse(mouse.x, mouse.y, 5);\r\n            showTransDetails([\r\n               `yAngle: ${angles.stringDegAngle(mySketch.gs.transform.yAngle.toFixed(2))}`,\r\n               `rotationAngle: ${angles.stringDegAngle(-rotationAngle)}`\r\n            ]);\r\n         }\r\n      } else if (subTools.axis == 'xy') {\r\n         if (math.dist(mySketch.gs.center.x, mySketch.gs.center.y, mouse.x, mouse.y) > 10) {\r\n            let rotatedMouse = subTools.mouse;\r\n            let rotationAngle = angles.angle(subTools.mouse.subtract(new vector(mySketch.gs.center.x, mySketch.gs.center.y)), new vector(mouse.x, mouse.y).subtract(new vector(mySketch.gs.center.x, mySketch.gs.center.y)));\r\n            rotationAngle = angles.constrainAngle(rotationAngle);\r\n            if (!isNaN(rotationAngle)) {\r\n               mySketch.gs.transform.xAngle = subTools.xAngle - rotationAngle;\r\n               mySketch.gs.transform.yAngle = subTools.yAngle - rotationAngle;\r\n               let center = mySketch.gs.center;\r\n               rotatedMouse = center.add(subTools.mouse.subtract(center).rotate(rotationAngle));\r\n            }\r\n\r\n            mySketch.gs.transform.invokeOnchange = true;\r\n            mySketch.gs.transform.onchange();\r\n            mySketch.update();\r\n            // canvas.ellipse(rotatedMouse.x, rotatedMouse.y, 5);\r\n            // canvas.ellipse(mouse.x, mouse.y, 5);\r\n            showTransDetails([\r\n               `xAngle: ${angles.stringDegAngle(mySketch.gs.transform.xAngle)}`,\r\n               `yAngle: ${angles.stringDegAngle(mySketch.gs.transform.yAngle)}`,\r\n               `rotationAngle: ${angles.stringDegAngle(-rotationAngle)}`\r\n            ]);\r\n         }\r\n      }\r\n   }\r\n\r\n   function zoomBox(e) {\r\n\r\n      //#region calculating box\r\n      let s = { xmin: subTools.mouse.x, ymin: subTools.mouse.y, xmax: mouse.x, ymax: mouse.y };\r\n\r\n      subTools.pxViewport.xmin = Math.min(s.xmin, s.xmax); subTools.pxViewport.ymin = Math.min(s.ymin, s.ymax);\r\n      subTools.pxViewport.xmax = Math.max(s.xmin, s.xmax); subTools.pxViewport.ymax = Math.max(s.ymin, s.ymax);\r\n      subTools.pxViewport.width = subTools.pxViewport.xmax - subTools.pxViewport.xmin;\r\n      subTools.pxViewport.height = subTools.pxViewport.ymax - subTools.pxViewport.ymin;\r\n      s = subTools.pxViewport;\r\n      let slice;\r\n      if (s.width < 10 && s.height < 10) {\r\n         s.width = 0;\r\n         s.height = 0;\r\n      }\r\n      // reserved ratios\r\n      if (document.querySelector('#subtools-zoom-rr').checked || e.shiftKey) {\r\n         let a = angles.minAngle(vector.fromAngle(0), new vector(mySketch.gs.width, mySketch.gs.height));\r\n         let equ = lines.lineEquation(a, subTools.mouse);\r\n         let p = lines.projectionToLine(new vector(mouse.x, mouse.y), equ);\r\n         s = { xmin: subTools.mouse.x, ymin: subTools.mouse.y, xmax: Math.round(p.x), ymax: Math.round(p.y) };\r\n         subTools.pxViewport.xmin = Math.min(s.xmin, s.xmax); subTools.pxViewport.ymin = Math.min(s.ymin, s.ymax);\r\n         subTools.pxViewport.xmax = Math.max(s.xmin, s.xmax); subTools.pxViewport.ymax = Math.max(s.ymin, s.ymax);\r\n         subTools.pxViewport.width = subTools.pxViewport.xmax - subTools.pxViewport.xmin;\r\n         subTools.pxViewport.height = subTools.pxViewport.ymax - subTools.pxViewport.ymin;\r\n         s = subTools.pxViewport;\r\n      }\r\n      else {\r\n         subTools.boxElt.classList.remove('v');\r\n         subTools.boxElt.classList.remove('h');\r\n         if (s.height < 10 && s.width > 10) {\r\n            slice = { type: 'v' };\r\n            subTools.boxElt.classList.add('v');\r\n            s.ymin = 0;\r\n            s.ymax = mySketch.gs.height;\r\n            s.height = mySketch.gs.height;\r\n         }\r\n         else if (s.height > 10 && s.width < 10) {\r\n            slice = { type: 'h' };\r\n            subTools.boxElt.classList.add('h');\r\n            s.xmin = 0;\r\n            s.xmax = mySketch.gs.width;\r\n            s.width = mySketch.gs.width;\r\n         }\r\n      }\r\n      //#endregion\r\n\r\n      let fadeColor = mySketch.coor.coorSettings.background.isDark() ? '#fff5' : '#0005';\r\n      subTools.boxElt.setAttribute('style', `--left: ${s.xmin}px; --top: ${s.ymin}px; --width: ${s.width}px; --height: ${s.height}px; --background: ${fadeColor}`);\r\n\r\n   }\r\n\r\n   /**\r\n    * @param {Array} messeges ::: Array of string which will be converted into p html element\r\n    */\r\n   function showTransDetails(messeges) {\r\n      let html = '<div class=\"subtools-details\">';\r\n      for (let msg of messeges) {\r\n         html += '<p>' + msg + '</p>';\r\n      }\r\n      html += '</div>';\r\n      subTools.details.setContent(html);\r\n      subTools.details.show();\r\n   }\r\n\r\n   //#endregion\r\n\r\n}\r\n\r\n//#endregion\r\n\r\n","import canvasEvents from \"./canvasEvents.js\";\r\nimport toolsEvents from \"./toolsEvents.js\";\r\nimport ChildControl from \"../ChildControl.js\";\r\nimport { addControl, resize, keypadSettings, checkSM, sidebar } from \"../global.js\";\r\n\r\nexport default function setEvents () {\r\n   //#region window events\r\n   window.addEventListener('resize', resize);\r\n   window.addEventListener(\"mouseup\", function (event) {\r\n      //#region for backspace interval\r\n      if (keypadSettings.mouseDownForInterval) {\r\n         keypadSettings.mouseDownForInterval = false;\r\n         clearInterval(keypadSettings.backspaceInterval);\r\n      }\r\n      //#endregion\r\n      keypadSettings.hideKeyPad = true;\r\n   });\r\n   window.addEventListener(\"touchend\", function (event) {\r\n      //#region for backspace interval\r\n      if (keypadSettings.mouseDownForInterval) {\r\n         keypadSettings.mouseDownForInterval = false;\r\n         clearInterval(keypadSettings.backspaceInterval);\r\n      }\r\n      //#endregion\r\n      keypadSettings.hideKeyPad = true;\r\n   });\r\n   window.addEventListener('mousedown', function (e) {\r\n      //#region hide keybad\r\n      let keypadShown = /\\svisible\\s|^visible\\s|\\svisible$/.test(keypadSettings.showHideKeyBtn.className); // hasClass\r\n      if (keypadSettings.hideKeyPad && keypadShown) {\r\n         keypadSettings.showHideKeyBtn.click();\r\n      }\r\n      //#endregion\r\n   });\r\n   window.addEventListener('touchstart', function (e) {\r\n      //#region hide keybad\r\n      let keypadShown = /\\svisible\\s|^visible\\s|\\svisible$/.test(keypadSettings.showHideKeyBtn.className); // hasClass\r\n      if (keypadSettings.hideKeyPad && keypadShown) {\r\n         keypadSettings.showHideKeyBtn.click();\r\n      }\r\n      //#endregion\r\n   });\r\n   //#endregion\r\n\r\n   document.querySelector('#add-new-control').addEventListener('click', (e) => {\r\n      addControl(new ChildControl()); \r\n   });\r\n   \r\n   document.querySelector('#show-hide-sidebar').addEventListener('click',function (e) {\r\n      let $this = $(this);\r\n      let __visible = $this.hasClass(\"visible\");\r\n      let from = __visible ? \"visible\" : \"unvisible\",\r\n         to = __visible ? \"unvisible\" : \"visible\";\r\n     \r\n         // let path = this.querySelector('path');\r\n      if (__visible) {\r\n         document.body.querySelector('.app-container').appendChild(this);\r\n      } else {\r\n         sidebar.querySelector('.header').append(this);\r\n      }\r\n\r\n      $this.removeClass(from);\r\n      $this.addClass(to);\r\n\r\n      sidebar.classList.remove(from);\r\n      sidebar.classList.add(to);\r\n\r\n      resize();\r\n   });\r\n\r\n   canvasEvents();\r\n   toolsEvents();\r\n}","import { subTools } from '../global.js';\r\n\r\nexport default function toolsEvents() {\r\n\r\n   //#region zoom\r\n\r\n   let zoom = (direction) => {\r\n      var delay = 20;\r\n      setTimeout(() => {\r\n         if (direction == 'in') { mySketch.gs.transform.zoomIn(); mySketch.update(); } else { mySketch.gs.transform.zoomOut(); mySketch.update(); }\r\n         setTimeout(() => {\r\n            if (direction == 'in') { mySketch.gs.transform.zoomIn(); mySketch.update(); } else { mySketch.gs.transform.zoomOut(); mySketch.update(); }\r\n            setTimeout(() => {\r\n               if (direction == 'in') { mySketch.gs.transform.zoomIn(); mySketch.update(); } else { mySketch.gs.transform.zoomOut(); mySketch.update(); }\r\n               setTimeout(() => {\r\n                  if (direction == 'in') { mySketch.gs.transform.zoomIn(); mySketch.update(); } else { mySketch.gs.transform.zoomOut(); mySketch.update(); }\r\n                  setTimeout(() => {\r\n                     if (direction == 'in') { mySketch.gs.transform.zoomIn(); mySketch.update(); } else { mySketch.gs.transform.zoomOut(); mySketch.update(); }\r\n                     setTimeout(() => {\r\n                        if (direction == 'in') { mySketch.gs.transform.zoomIn(); mySketch.update(); } else { mySketch.gs.transform.zoomOut(); mySketch.update(); }\r\n                        setTimeout(() => {\r\n                           if (direction == 'in') { mySketch.gs.transform.zoomIn(); mySketch.update(); } else { mySketch.gs.transform.zoomOut(); mySketch.update(); }\r\n                           setTimeout(() => {\r\n                              if (direction == 'in') { mySketch.gs.transform.zoomIn(); mySketch.update(); } else { mySketch.gs.transform.zoomOut(); mySketch.update(); }\r\n                           }, delay);\r\n                        }, delay);\r\n                     }, delay);\r\n                  }, delay);\r\n               }, delay);\r\n            }, delay);\r\n         }, delay);\r\n      });\r\n   };\r\n\r\n   document.querySelector('#zoom-in-btn').addEventListener('click', () => {\r\n      zoom('in');\r\n   });\r\n\r\n   document.querySelector('#zoom-out-btn').addEventListener('click', () => {\r\n      zoom('out');\r\n   });\r\n\r\n   //#endregion tool - subtools events\r\n\r\n   let radios = document.querySelectorAll('.subtools-container input[type*=\"radio\"]');\r\n   radios.forEach(el => {\r\n      subTools.type = el.checked ? el.dataset.type : subTools.type;\r\n      el.addEventListener('change', () => {\r\n         subTools.type = el.checked ? el.dataset.type : subTools.type;\r\n      });\r\n   });\r\n\r\n   document.querySelector('#home').addEventListener('click', () => {\r\n      mySketch.gs.reset();\r\n      mySketch.update();\r\n   });\r\n\r\n   document.querySelector('#centrate').addEventListener('click', () => {\r\n      mySketch.gs.centrate();\r\n      mySketch.update();\r\n   });\r\n\r\n} ","import keypadEvents from './events.js';\r\nimport { keypadSettings, resize, checkSM, sidebar } from '../global.js';\r\n\r\nexport default function setupKeypad() {\r\n\r\n   keypadSettings.showHideKeyBtn.addEventListener(\"click\", function (e) {\r\n      let sidebarShown = /\\svisible\\s|^visible\\s|\\svisible$/.test(sidebar.className); // hasClass\r\n      if (!sidebarShown) {\r\n         document.querySelector(\"#show-hide-sidebar\").click();\r\n      }\r\n      let parent = document.querySelector(\".keypad-container\");\r\n      let $this = $(this);\r\n      let __keypadShown = $this.hasClass(\"visible\");\r\n      let from = __keypadShown ? \"visible\" : \"unvisible\",\r\n         to = __keypadShown ? \"unvisible\" : \"visible\";\r\n\r\n      keypadSettings.showHideKeyBtn.classList.remove(from);\r\n      keypadSettings.showHideKeyBtn.classList.add(to);\r\n\r\n      parent.classList.remove(from);\r\n      parent.classList.add(to);\r\n      if (__keypadShown) {\r\n         document.body.querySelector('.app-container').appendChild(keypadSettings.showHideKeyBtn);\r\n      } else {\r\n         parent.insertBefore(keypadSettings.showHideKeyBtn, parent.firstElementChild);\r\n      }\r\n      if (checkSM.smallScreen) {\r\n         resize();\r\n      }\r\n\r\n      keypadSettings.focusedControl.focus();\r\n   });\r\n\r\n   SUI.tabs(document.body.querySelector('.keypad-container .tabs-1'));\r\n\r\n   keypadEvents();\r\n}\r\n","import { keypadSettings, addControl } from './../global.js';\r\nimport ChildControl from './../ChildControl.js';\r\n\r\nexport default function(){\r\n   //#region (keypad - showHideBtn) events\r\n   let keypad = $('.keypad-container'),\r\n      sh = $(keypadSettings.showHideKeyBtn);\r\n\r\n   keypad.bind('focusin', function () {\r\n         keypadSettings.mathField.focus();\r\n   });\r\n\r\n   $(document.body).delegate(\"[cancel-hiding-keypad]\", \"mousedown touchstart\", function (e) {\r\n      keypadSettings.hideKeyPad = false;\r\n   });\r\n\r\n   $('.control').delegate(\".main\", \"touchstart\", function (e) {\r\n      if (sh.hasClass(\"hide\")) {\r\n         sh.click();\r\n      }\r\n   });\r\n   //#endregion\r\n\r\n   //#region writing\r\n\r\n   $(\".keypad-container .rows button[mq-cmd]\").each(function (index) {\r\n      $(this).on('click', function () {\r\n         let $this = $(this);\r\n         if ($this.hasClass('double-shiftable')) {\r\n            keypadSettings.mathField.cmd($(' > div.active > span.active', $this).attr('mq-cmd'));\r\n         } else if ($this.hasClass('shiftable')) {\r\n            keypadSettings.mathField.cmd($(' > span.active', $this).attr('mq-cmd'));\r\n         } else {\r\n            keypadSettings.mathField.cmd(this.getAttribute('mq-cmd'));\r\n         }\r\n         keypadSettings.focusedControl.focus();\r\n      });\r\n   });\r\n\r\n   $(\".keypad-container .rows button[mq-write]\").each(function (index) {\r\n      $(this).on('click', function () {\r\n         let $this = $(this);\r\n         if ($this.hasClass('double-shiftable')) {\r\n            keypadSettings.mathField.write($(' > div.active > span.active', $this).attr('mq-write'));\r\n         } else if ($this.hasClass('shiftable')) {\r\n            keypadSettings.mathField.write($(' > span.active', $this).attr('mq-write'));\r\n         } else {\r\n            keypadSettings.mathField.write(this.getAttribute('mq-write'));\r\n         }\r\n         keypadSettings.focusedControl.focus();\r\n      });\r\n   });\r\n\r\n   $(\".keypad-container .rows button[mq-func]\").each(function (index) {\r\n      $(this).on(\"click\", function () {\r\n         let $this = $(this);\r\n         if ($this.hasClass(\"double-shiftable\")) {\r\n            keypadSettings.mathField.write($(\" > div.active > span.active\", $this).attr(\"mq-func\"));\r\n         } else if ($this.hasClass(\"shiftable\")) {\r\n            keypadSettings.mathField.write($(\" > span.active\", $this).attr(\"mq-func\"));\r\n         } else {\r\n            keypadSettings.mathField.write(this.getAttribute(\"mq-func\"));\r\n         }\r\n         keypadSettings.mathField.cmd(\"(\");\r\n         keypadSettings.focusedControl.focus();\r\n      });\r\n   });\r\n\r\n   $(\".space\").on(\"click\", function () {\r\n      keypadSettings.mathField.keystroke(\"Right\");\r\n   });\r\n\r\n   //keystrokes\r\n   $(\".backspace\").on(\"mousedown\", function () {\r\n      if (keypadSettings.mathField.latex() == '') {\r\n         keypadSettings.focusedControl.remove();\r\n      } else {\r\n         keypadSettings.mathField.keystroke(\"Backspace\");\r\n      }\r\n\r\n      //#region for keep backSpace on holing the button\r\n\r\n      keypadSettings.mouseDownForInterval = true;\r\n      setTimeout(function () {\r\n         if (keypadSettings.mouseDownForInterval) {\r\n            keypadSettings.backspaceInterval = setInterval(function () {\r\n               keypadSettings.mathField.keystroke(\"Backspace\");\r\n            }, 120);\r\n         }\r\n      }, 400);\r\n\r\n      //#endregion\r\n\r\n   });\r\n\r\n   //#endregion\r\n\r\n   //#region direction\r\n\r\n   $(\".go-left\").on(\"click\", function () {\r\n      keypadSettings.mathField.keystroke(\"Left\");\r\n   });\r\n\r\n   $(\".go-right\").on(\"click\", function () {\r\n      keypadSettings.mathField.keystroke(\"Right\");\r\n   });\r\n\r\n   $(\".go-up\").on(\"click\", function () {\r\n      keypadSettings.mathField.keystroke(\"Up\");\r\n   });\r\n\r\n   $(\".go-down\").on(\"click\", function () {\r\n      keypadSettings.mathField.keystroke(\"Down\");\r\n   });\r\n\r\n   $(\".enter\").on(\"click\", function () {\r\n      addControl(new ChildControl(), parseInt(keypadSettings.focusedControl.orderELT.textContent));\r\n   });\r\n\r\n   //#endregion\r\n\r\n   //#region shift - double-shift\r\n\r\n   var shift = $(\".shift\");\r\n   shift.on(\"click\", function () {\r\n      let $this = $(this);\r\n      let rows = $this.parents(\".rows\");\r\n      if ($this.hasClass(\"active\")) {\r\n         $this.removeClass(\"active\");\r\n         $this.addClass(\"lock\");\r\n         rows.removeClass(\"shift-active\");\r\n         rows.addClass(\"shift-lock\");\r\n      } else {\r\n         if ($this.hasClass(\"lock\")) {\r\n            let spans = $(\r\n               \".shiftable > span, .double-shiftable > div > span\",\r\n               rows\r\n            );\r\n            spans.toggleClass(\"active\");\r\n            $this.removeClass(\"lock\");\r\n            rows.removeClass(\"shift-lock\");\r\n         } else {\r\n            let spans = $(\r\n               \".shiftable > span, .double-shiftable > div > span\",\r\n               rows\r\n            );\r\n            spans.toggleClass(\"active\");\r\n            $this.addClass(\"active\");\r\n            rows.addClass(\"shift-active\");\r\n         }\r\n      }\r\n   });\r\n\r\n   // this for disabling shift if it is not .lock\r\n   $(\".keypad-container .rows button\")\r\n      .not('.shift, .double-shift')\r\n      .on(\"click\", function () {\r\n         let $this = $(this);\r\n         let rows = $this.parents(\".rows\");\r\n         if (rows.hasClass(\"shift-active\")) {\r\n            let shift = $(\"button.shift\", rows);\r\n            let spans = $(\".shiftable > span, .double-shiftable > div > span\", rows);\r\n            spans.toggleClass(\"active\");\r\n            shift.removeClass(\"active\");\r\n            rows.removeClass('shift-active');\r\n         }\r\n      });\r\n\r\n   var dShift = $(\".double-shift\");\r\n   dShift.on(\"click\", function () {\r\n      let $this = $(this);\r\n      let divs = $(\".double-shiftable > div\", $this.parents(\".rows\"));\r\n      divs.toggleClass(\"active\");\r\n      $this.toggleClass(\"active\");\r\n\r\n   });\r\n\r\n      //#endregion\r\n}","import { getContainment, updateObjsOrder, resize, checkSM, addControl, keypadSettings, sidebar } from './global.js';\r\nimport Sketch from '../PLOTTO/Sketch.js';\r\nimport drawing from '../PLOTTO/drawing/index.js';\r\nimport setEvents from './events/index.js';\r\nimport { default as setupKeypad} from './keypad/index.js';\r\nimport ChildControl from './ChildControl.js';\r\nimport { Variable } from '../PLOTTO/GraphChildren/index.js';\r\n/**\r\n * \"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\" reminder\r\n * app folder is associated with PLOTTO folder, both of them depends upon the other.\r\n */\r\nexport default function setupAPP(canvasParent) {\r\n  // document.body.style.height = window.innerHeight + 'px';\r\n\r\n  window.MP = MathPackage;\r\n  window.angles = MP.Angles;\r\n  window.lines = MP.Lines;\r\n  window.math = MP.Core;\r\n  window.drawing = drawing;\r\n  window.vector = MP.entities.Vector;\r\n  window.MQ = MathQuill.getInterface(2);\r\n  MQ.config({\r\n    sumStartsWithNEquals: true,\r\n    supSubsRequireOperand: true,\r\n    // charsThatBreakOutOfSupSub: '+-=<>',\r\n    autoSubscriptNumerals: true,\r\n    autoCommands: 'pi theta sqrt abs floor ceil round random sum int prod',\r\n    // // autoOperatorNames: '',\r\n    maxDepth: 10,\r\n  });\r\n  window.mySketch = new Sketch(canvasParent);\r\n  window.canvas = mySketch.canvas;\r\n  window.canvasParent = canvasParent;\r\n\r\n  resize.prevSize = { width: 1000, height: 1000 }; /// the app is desined upon the large screen so this should be the default\r\n  checkSM();\r\n  resize.prevSize = { width: window.innerWidth, height: window.innerHeight };\r\n\r\n  let mathFields = $(\".math-field\");\r\n  for (let i = 0; i < mathFields.length; i++) {\r\n    MQ.StaticMath(mathFields[i]);\r\n  }\r\n\r\n  let addNewGCelt = $(`\r\n      <li class=\"control\">\r\n        <div class=\"side-status\" cancel-move>\r\n          <div class=\"order-container\">\r\n            <span class='order'>123</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"main\" cancel-move cancel-hiding-keypad>\r\n          <div class=script-container><span type=\"text\" class=\"script\">NEW</span></div>\r\n        </div>\r\n        <div class=\"side-ctrl\">\r\n          <button class=\"closebtn-2 remove\" cancel-move><div class=\"inner\"></div></button>\r\n          <span class=\"move\">\r\n            <div>\r\n              <span>..</span>\r\n              <span>..</span>\r\n              <span>..</span>\r\n            </div>\r\n          </span>\r\n        </div>\r\n      </li>\r\n      `)[0];\r\n  document.body.querySelector('#add-new-control').append(addNewGCelt);\r\n\r\n  setEvents();\r\n  setupKeypad();\r\n\r\n  setupResizer();\r\n  setupSortable();\r\n\r\n  resize();\r\n  mySketch.gs.centrate();\r\n  mySketch.update();\r\n\r\n  console.log('%cPLOTTO', 'background: black; color: white; font: 50px consolas;');\r\n  console.log('%cWe are sciCave', 'color: blue; font: 25px consolas;');\r\n\r\n  addControl(new ChildControl());\r\n}\r\n\r\nfunction setupResizer(){\r\n\r\n  //#region sidebar-resizer\r\n\r\n  var sidebarResizer = sidebar.querySelector(\".resizer\");\r\n  let srDraggingConfig = {}; // sidebarResizerDraggingConfig\r\n\r\n  $(sidebarResizer).draggable({\r\n    axis: 'x',\r\n    containment: getContainment(sidebar),\r\n\r\n    start: (e) => {\r\n      sidebarResizer.classList.add('dragging');\r\n      srDraggingConfig.intialWidth = sidebar.clientWidth;\r\n      srDraggingConfig.intialOffset = e.pageX;\r\n      srDraggingConfig.cursor = document.body.style.cursor;\r\n      document.body.style.cursor = 'e-resize';\r\n    },\r\n\r\n    stop: () => {\r\n      sidebarResizer.classList.remove('dragging');\r\n      sidebar.style.flexBasis = sidebarResizer.style.left;\r\n      document.body.style.cursor = srDraggingConfig.cursor;\r\n    },\r\n\r\n    drag: () => {\r\n      sidebar.style.flexBasis = sidebarResizer.style.left;\r\n      resize(false);\r\n    }\r\n\r\n  });\r\n\r\n  //#endregion\r\n\r\n}\r\n\r\nfunction setupSortable(){\r\n\r\n  //#region sortable-sidebar\r\n\r\n  var outer_ccc = document.querySelector('.outer-controls');\r\n  var inner_ccc = outer_ccc.querySelector('.inner-controls');\r\n\r\n  let startSorting = true;\r\n  $(\".controls.sortable\").sortable({\r\n    axis: \"y\",\r\n    cancel: '.control [cancel-move]',\r\n\r\n    start: function (e, ui) {\r\n      startSorting = true;\r\n      outer_ccc.classList.add('sorting');\r\n      if (inner_ccc.clientHeight > outer_ccc.clientHeight) {\r\n        outer_ccc.style.overflowY = 'scroll';\r\n      }\r\n\r\n      ui.item[0].classList.add('dragging');\r\n      let id = ui.item[0].getAttribute('id');\r\n      for (let child in mySketch.children) {\r\n        if (child.id === id) {\r\n          child.focus();\r\n          continue;\r\n        }\r\n      }\r\n    },\r\n\r\n    stop: function (e, ui) {\r\n      if (startSorting) {\r\n        outer_ccc.classList.remove('sorting');\r\n        outer_ccc.style.overflowY = 'auto';\r\n        ui.item[0].classList.remove('dragging');\r\n      } else {\r\n        startSorting = false;\r\n      }\r\n    },\r\n\r\n    update: function () {\r\n      updateObjsOrder();\r\n    }\r\n\r\n  });\r\n  $(\".controls.sortable\").disableSelection();\r\n\r\n  //#endregion\r\n\r\n}\r\n\r\nsetupAPP(document.querySelector('#canvas-parent'));"],"names":["ExistBefore","Error","constructor","id","UndefError","undef","generateName","Date","now","randomNameNum","toString","mathFunc","log","x","base","Math","log10","ln","E","sec","cos","csc","sin","cot","tan","asec","acos","acsc","asin","acot","atan","sinh","exp","cosh","tanh","asinh","sqrt","acosh","atanh","sech","csch","coth","asech","acsch","acoth","fact","NaN","__fact","gcd","values","gcd_","abs","a","gcd2","i","length","b","lcm","product","pow","mod","Object","assign","vars","pi","PI","e","getJSfunction","input","params","usestrict","undefThrowError","result","MagicalParser","Node","MathPackage","Parser","parsedTOjsFunction","toLowerCase","maximaTOjsFunction","latexTOmaxima","value","funcs","func","GraphChild","options","callback","handlers","renderable","hasOwnProperty","sketch","gs","this","coorManager","children","set","_id","checkId","update","handlerArgs","_update","childrenCanvas","error","onupdate","draw","_draw","canvas","remove","_remove","delete","onremove","onerror","Canvas","elt","document","createElement","parent","appendChild","width","clientWidth","height","clientHeight","attributes","name","setAttribute","font","family","ctx","getContext","textBaseline","resize","names","props","p","clear","fillStyle","viewport","fillRect","clearRect","setFont","size","measureString","txt","measureText","_trans","trans","setTransform","transform","getTransform","lw","mag","lineWidth","line","x1","y1","x2","y2","moveTo","lineTo","ellipse","y","radius1","radius2","rotation","startAngle","endAngle","counterClockWise","beginPath","fill","stroke","color","r","g","num","num2","num3","num4","num5","num7","num6","isDark","brightness","toArray","override","join","colorPackage","Core","random","c","randomColor","weight","style","setup","canvasORctx","strokeStyle","Xfunction","idExists","expr","propName","pen","coor","coorSettings","background","drawing","randomLightColor","randomDarkColor","me","expression","path","Path2D","str","replace","indexOf","previousP","midP","continous","xmin","xmax","drawingStep","coorTOpx","isNaN","sign","Point","regex","match","strokeWeight","splice","eval","EvalExpr","evalFunc","Variable","valueOf","setValue","handlerOptions","onchange","getValue","Func","Empty","Slider","ChildControl","graphChild","innerHTML","childNodes","status","mySketch","control","__updateElts","setEvents","newid","_graphChild","__updateEvalExpr","updateSlider","updateSketch","specialProps","$slider","scriptELT","querySelector","removeELT","orderELT","mathField","MQ","MathField","edit","latex","enter","addEventListener","focus","blur","disableHandling","$","hasClass","trigger","undefined","prev","parsedScript","scriptParser","parse","__getAll","type","map","removeElt","childFromParsed","__updateDependants","parsed","check","args","concat","forEach","gc","find","setScript","script","handle","focusTheField","keypadSettings","focusedControl","classList","add","blurTheField","index","parseInt","textContent","isError","querySelectorAll","v","click","f","addControl","undefVars","reduce","slice","undefFuncs","errorText","buttonsVars","buttonsFuncs","notExistElt","bind","innerText","end","param","counter","String","fromCharCode","math","append","message","errorELT","hide","fadeOut","delay","fadeIn","console","removeGraphChild","alter","previousElementSibling","nextElementSibling","get","getAttribute","controls","newControlBtn","parentElement","childElementCount","setTimeout","removeControl","from","to","__toEmpty","__updateXfunction","__toXfunction","__toEvalExpr","__updateVariable","__toVariable","__updateSlider","__toSlider","sideStatus","$visibleElt","toggleClass","valueType","attr","valueElt","parseFloat","toFixed","split","fraction","denominator","numerator","StaticMath","quotientRemainder","quotient","$sliderOuter","attrs","min","max","step","dir","speed","speedModifier","invokeOnchange","on","event","handlerParams","ismousedown","slidersController","push","pop","slider","angleMargin","angles","deg","zoomLimits","zoomRatio","reset","vector","fromAngle","xAngle","mult","xScale","yAngle","yScale","iVector","j","jVector","center","d","_transformOrigin","pxVector","pxTOcoor","coorVector","_xAngle","constrainAngle","minAngle","_yAngle","angle","rotate","rotateX","rotateY","_center","vec","translate","zoomIn","centerOfZoom","transformOrigin","xZoomIn","yZoomIn","zoomOut","xZoomOut","yZoomOut","xSpace","reformXspace","ySpace","reformYspace","setViewport","keepRatio","ymin","ymax","xs","ys","isFinite","tfCorner","p_","getViewport","pxViewport","xStart","xTOcoor","xEnd","yStart","yTOcoor","yEnd","done","xZoomingState","ratio","xSpaceValue","yZoomingState","ySpaceValue","xSpaceModifier","ySpaceModifier","target","src","change","transToOrigin","ysm","xsm","invalid","isNumeric","lastVersion","vp","subtract","CoorManager","inverse","m","det","matrixInverse","ia","ib","ic","xToPixel","yToPixel","_width","_height","Transform","physicsRun","centrate","__id","has","defaultCoorSettings","xUnit","yUnit","drawDecimalLines","drawMainLines","drawAxisesLines","drawPolarCircles","drawPolarLines","drawPolarAngles","drawNumbers","decimalLinesSpace","polarCirclesSpace","polarLinesAnglesSpace","penDecimalLines","penMainLines","penXaxis","penYaxis","penPolarCircles","penPolarLines","autoRefiningOnZoomimg","antiBackground","fillColor","fillColorDim","custom","radian","start_x","start_y","end_x","end_y","floor","ceil","xD","yD","toExponential","__getLabelPos","strokeText","fillText","pos","number","dimension","unitVec","bounds","n","Sketch","canvasParent","GraphSettings","Coordinates","Map","CustomParsers","miterLimit","childFromScript","propsTOset","parsedString","getChildParser","left","right","contains","skip","drawable","getChildById","coors","child","subTools","details","SUI","TempMessege","layer","toolsbar","onhoverFix","position","bottom","duration","content","mouse","backspaceInterval","mouseDownForInterval","showHideKeyBtn","sidebar","updateObjsOrder","objs","order","obj","autoFocus","insertBefore","setContainment","checkSM","draggable","getContainment","prevSize","window","innerWidth","innerHeight","body","sidebarStyle","getComputedStyle","minWidth","maxWidth","workingSliders","interval","sliderControl","sliderConfig","stepConfig","current","startSlidersInterval","clearInterval","setInterval","canvasEvents","mousepressed","dragInterval","lines","Lines","startTransFunc","canvasPos","getPosittion","clientX","clientY","top","touch","touches","vel","search","xEq","lineEquation","yEq","distTo","distToLine","axis","xSapce","ySapce","xPenColor","yPenColor","space","o","constrain","penColor","increment","boxElt","preventDefault","updateTransFunc","rotatedMouse","incre","dist","mina","showTransDetails","midEq","projectionToLine","scaleAxises","rotationAngle","snapAngle","stringDegAngle","rotateAxises","s","checked","shiftKey","equ","round","fadeColor","zoomBox","parentPos","offsetParent","offsetLeft","offsetTop","passive","capture","transEndFunc","messeges","html","msg","setContent","show","mousePos","wheelDelta","hideKeyPad","keypadShown","test","className","$this","__visible","removeClass","addClass","zoom","direction","el","dataset","toolsEvents","setupKeypad","__keypadShown","firstElementChild","smallScreen","tabs","keypad","sh","delegate","each","cmd","write","keystroke","rows","parents","not","shift","keypadEvents","setupAPP","MP","Angles","entities","Vector","MathQuill","getInterface","config","sumStartsWithNEquals","supSubsRequireOperand","autoSubscriptNumerals","autoCommands","maxDepth","mathFields","addNewGCelt","sidebarResizer","srDraggingConfig","containment","start","intialWidth","intialOffset","pageX","cursor","stop","flexBasis","drag","setupResizer","outer_ccc","inner_ccc","startSorting","sortable","cancel","ui","overflowY","item","disableSelection","setupSortable"],"mappings":"6LAAe,MAAMA,UAAoBC,MACtCC,YAAYC,SACH,IAAMA,EAAK,mCACZA,GAAKA,GCHD,MAAMC,UAAmBH,MACrCC,YAAYG,SACH,SACDA,MAAQA,YCFHC,WACLC,KAAKC,MAAQF,EAAaG,iBAAiBC,SAAS,IAE/DJ,EAAaG,cAAgB,EAwB7B,IAAIE,EAAW,CACZC,IAAK,SAAUC,EAAGC,EAAO,WACfC,KAAKC,MAAMH,GAAKE,KAAKC,MAAMF,IAErCG,GAAIJ,GAAKE,KAAKH,IAAIC,EAAGE,KAAKG,GAE1BC,IAAKN,GAAK,EAAIE,KAAKK,IAAIP,GACvBQ,IAAKR,GAAK,EAAIE,KAAKO,IAAIT,GACvBU,IAAKV,GAAK,EAAIE,KAAKS,IAAIX,GACvBY,KAAMZ,GAAKE,KAAKW,KAAK,EAAEb,GACvBc,KAAMd,GAAKE,KAAKa,KAAK,EAAEf,GACvBgB,KAAMhB,GAAKE,KAAKe,KAAK,EAAEjB,GAEvBkB,KAAMlB,IAAME,KAAKiB,IAAInB,GAAKE,KAAKiB,KAAKnB,IAAM,EAC1CoB,KAAMpB,IAAME,KAAKiB,IAAInB,GAAKE,KAAKiB,KAAKnB,IAAM,EAC1CqB,KAAMrB,GAAKE,KAAKgB,KAAKlB,GAAKE,KAAKkB,MAAMpB,GACrCsB,MAAOtB,GAAKE,KAAKE,GAAGJ,EAAIE,KAAKqB,KAAKvB,GAAK,EAAI,IAC3CwB,MAAOxB,GAAKE,KAAKE,GAAGJ,EAAIE,KAAKqB,KAAKvB,GAAK,EAAI,IAC3CyB,MAAOzB,GAAK,GAAME,KAAKE,IAAI,EAAIJ,IAAI,EAAIA,IAEvC0B,KAAM1B,GAAK,EAAIE,KAAKkB,KAAKpB,GACzB2B,KAAM3B,GAAK,EAAIE,KAAKgB,KAAKlB,GACzB4B,KAAM5B,GAAK,EAAIE,KAAKmB,KAAKrB,GACzB6B,MAAO7B,GAAKE,KAAKsB,MAAM,EAAIxB,GAC3B8B,MAAO9B,GAAKE,KAAKoB,MAAM,EAAItB,GAC3B+B,MAAO/B,GAAKE,KAAKuB,MAAM,EAAIzB,GAE3BgC,KAAMhC,GAAMA,EAAI,GAAM,GAAKA,EAAI,EAAKiC,IAAM/B,KAAKgC,OAAOlC,GACtDkC,OAAQlC,GAAW,IAANA,EAAU,EAAKA,EAAIE,KAAKgC,OAAOlC,EAAI,GAEhDmC,IAAK,IAAIC,SACFC,EAAOnC,KAAKoC,IAAIF,EAAO,IACvBG,EAAIrC,KAAKoC,IAAIF,EAAO,OACpBC,EAAO,GAAK,GAAKE,EAAI,GAAK,EAC3B,OAAON,IACVI,EAAOE,EAAIF,EAAOnC,KAAKsC,KAAKD,EAAGF,GAAQnC,KAAKsC,KAAKH,EAAME,OAElD,IAAIE,EAAI,EAAGA,EAAIL,EAAOM,OAAQD,IAAK,IACrCF,EAAIrC,KAAKoC,IAAIF,EAAOK,IAChBF,EAAI,GAAK,EACV,OAAON,IACVI,EAAOE,EAAIF,EAAOnC,KAAKsC,KAAKD,EAAGF,GAAQnC,KAAKsC,KAAKH,EAAME,UAGnDF,GAEVG,KAAI,CAACD,EAAGI,IACI,GAALA,EACMJ,EACHrC,KAAKiC,IAAIQ,EAAGJ,EAAII,GAE1BC,IAAK,IAAIR,SAEFG,EADAM,EAAU,MAET,IAAIJ,EAAI,EAAGA,EAAIL,EAAOM,OAAQD,IAAK,IACrCF,EAAIH,EAAOK,GACPF,EAAI,GAAM,EACX,OAAON,IACVY,GAAWN,SAEPrC,KAAKoC,IAAIO,GAAW3C,KAAK4C,IAAI5C,KAAKiC,OAAOC,GAASA,EAAOM,OAAS,IAG5EK,IAAK,CAACR,EAAGI,IACCJ,EAAII,GAIjBK,OAAOC,OAAO/C,KAAMJ,GAEpB,IAAIoD,EAAO,CACRC,GAAIjD,KAAKkD,GACTC,EAAGnD,KAAKG,GAMJ,SAASiD,EAAcC,EAAOC,EAAQC,GAAY,EAAMC,GAAkB,OAC1EC,KAEDA,EADCJ,aAAiBK,cAAcC,KACvBC,YAAYC,OAAOC,mBAAmBT,EAAOC,EAAQ,OAAQC,GAC7B,mBAAzBF,GAAOU,cACdH,YAAYC,OAAOG,mBAAmBJ,YAAYC,OAAOI,cAAcZ,EAAMa,OAAQZ,EAAQ,OAAQC,GAErGK,YAAYC,OAAOG,mBAAmBX,EAAOC,EAAQ,OAAQC,GAErEC,EAAiB,IACdC,EAAOnE,MAAM0D,KAAKR,OAAS,GAAKiB,EAAOnE,MAAM6E,MAAM3B,OAAS,EAAG,MAAM,IAAInD,EAAWoE,EAAOnE,cACxFmE,EAAOW,YAEPX,EAAOW,KAfpBtB,OAAOC,OAAO/C,KAAMgD,SCvGCqB,EAmBjBlF,YAAYmF,EAASC,WAEZC,SAAWF,EAAQE,UAAY,QAC/BC,YAAaH,EAAQI,eAAe,eAAgBJ,EAAQG,WAC7DH,EAAQI,eAAe,oBAAoBJ,EAAQE,SACnDF,EAAQI,eAAe,sBAAsBJ,EAAQG,YAEpDH,EAAQK,aACH,IAAIzF,MAAM,kHAEXyF,OAASL,EAAQK,YACjBC,GAAKC,KAAKF,OAAOC,QACjBE,YAAcD,KAAKD,GAAGE,mBACpBR,EAAQK,OAGnBL,EAAQlF,GAAKkF,EAAQlF,IAAMG,IAC3BuD,OAAOC,OAAO8B,KAAMP,GAEjBC,GAAUA,EAASM,WAEjBF,OAAOI,SAASC,IAAIH,KAAKzF,GAAIyF,sBAG3BA,KAAKI,WAETf,QACEe,IAAMJ,KAAKF,OAAOC,GAAGM,QAAQhB,GAOtCiB,OAAOC,EAAc,OACbP,KAAKJ,oBAEIY,QAAQR,KAAKF,OAAOW,eAAgBF,GAC3C,MAAOjC,QACAoC,MAAMpC,GAGf0B,KAAKL,SAASgB,eACThB,SAASgB,YAAYJ,GAIlCK,OACQZ,KAAKJ,iBACAiB,MAAMb,KAAKF,OAAOW,gBAI/BD,QAAQM,IAIRD,MAAMC,IAINC,OAAOR,EAAc,SACZS,eACAlB,OAAOI,SAASe,OAAOjB,KAAKzF,IAC7ByF,KAAKL,SAASuB,UAAUlB,KAAKL,SAASuB,YAAYX,GAG1DS,WAIAN,MAAMpC,QACGqB,SAASwB,QAAQ7C,UC5FT8C,EAOlB9G,YAAYmF,EAAU,YACd4B,IAAM5B,EAAQqB,QAAUQ,SAASC,cAAc,UAChD9B,EAAQ+B,SACT/B,EAAQ+B,OAAOC,YAAYzB,KAAKqB,UAC3BA,IAAIK,MAAQjC,EAAQ+B,OAAOG,iBAC3BN,IAAIO,OAASnC,EAAQ+B,OAAOK,cAEhCpC,EAAQqC,eACJ,IAAIC,KAAQtC,EAAQqC,gBACjBT,IAAIW,aAAaD,EAAMtC,EAAQqC,WAAWC,SAGhDE,KAAO,CAAEP,MAAO,GAAIQ,OAAQ,cAE5BC,IAAMnC,KAAKqB,IAAIe,WAAW,WAC1BD,IAAIE,aAAe,yBAKjBrC,KAAKqB,IAAIK,0BAIT1B,KAAKqB,IAAIO,OAGnBU,OAAOZ,EAAOE,OACPW,EAAQ,CAAC,WAAY,eAAgB,aAAc,aACnDC,EAAQ,OACP,IAAIC,KAAKF,EACXC,EAAMC,GAAKzC,KAAKmC,IAAIM,QAElBpB,IAAIK,MAAQA,OACZL,IAAIO,OAASA,EAClB3D,OAAOC,OAAO8B,KAAKmC,IAAKK,GAG3BE,MAAMC,EAAWC,GACVD,GACDC,EAAWA,GAAY,CAAC,EAAG,EAAG5C,KAAKqB,IAAIM,YAAa3B,KAAKqB,IAAIQ,mBACxDM,IAAIQ,UAAYA,OAChBR,IAAIU,YAAYD,KAErBA,EAAWA,GAAY,CAAC,EAAG,EAAG5C,KAAKqB,IAAIM,YAAa3B,KAAKqB,IAAIQ,mBACxDM,IAAIW,aAAaF,IAI5BG,QAAQd,GACDA,EAAKe,OAAMhD,KAAKiC,KAAKe,KAAOf,EAAKe,MACjCf,EAAKC,SAAQlC,KAAKiC,KAAKC,OAASD,EAAKC,aACpCC,IAAIF,KAAQ,GAAEjC,KAAKiC,KAAKe,UAAUhD,KAAKiC,KAAKC,SAGpDe,cAAcC,OACPF,EAAOhD,KAAKmC,IAAIgB,YAAYD,UAChCF,EAAKpB,OAAS5B,KAAKiC,KAAKe,KACjBA,yBAIAhD,KAAKoD,qBAKDC,QACND,OAASC,EACDrD,KAAKoD,OAAO,GAAKpD,KAAKoD,OAAO,GAAYpD,KAAKoD,OAAO,GAAKpD,KAAKoD,OAAO,GAGtFE,gBAAgB7E,QACR8E,UAAY9E,OACZ0D,IAAImB,gBAAgB7E,GAG5B+E,sBACUxD,KAAKuD,iCAILvD,KAAKyD,iBAGDA,OACPC,IAAQ1D,KAAKoD,OAAO,GAAKpD,KAAKoD,OAAO,KAAO,GAAKpD,KAAKoD,OAAO,GAAKpD,KAAKoD,OAAO,KAAO,IAAM,QAC1FjB,IAAIwB,UAAYF,EAAKC,OACrBD,GAAKA,EAKbG,KAAKC,EAAIC,EAAIC,EAAIC,QACT7B,IAAI8B,OAAOJ,EAAIC,QACf3B,IAAI+B,OAAOH,EAAIC,GAGvBG,QAAQlJ,EAAGmJ,EAAGC,EAASC,EAASC,EAAW,EAAGC,EAAa,EAAGC,EAAmB,EAARtJ,KAAKkD,GAAMqG,GAAmB,GACpGJ,EAAUA,GAAWD,OAChBlC,IAAIwC,iBACJxC,IAAIgC,QAAQlJ,EAAGmJ,EAAGC,EAASC,GAAWD,EAASE,EAAUC,EAAYC,EAAUC,QAC/EvC,IAAIyC,YACJzC,IAAI0C,UChGR,MAAMC,EACTxK,YAAYyK,EAAGC,EAAGpH,EAAGJ,QACZuH,EAAIA,OACJC,EAAIA,OACJpH,EAAIA,OACJJ,EAAIA,uBAILyH,EAAMjF,KAAK+E,EAAI,IACfG,EAAOlF,KAAKgF,EAAI,IAChBG,EAAOnF,KAAKpC,EAAI,IAChBwH,EAAOH,EACPI,EAAOJ,SACPC,EAAOE,IACPA,EAAOF,GACPC,EAAOC,IACPA,EAAOD,GACPD,EAAOG,IACPA,EAAOH,GACPC,EAAOE,IACPA,EAAOF,IACFC,EAAOC,GAAQ,eAInBrF,KAAK+E,GAAK/E,KAAKgF,GAAOhF,KAAKgF,GAAKhF,KAAKpC,EACtC,OAAO,MACPqH,EAAMjF,KAAK+E,EAAI,IACfG,EAAOlF,KAAKgF,EAAI,IAChBG,EAAOnF,KAAKpC,EAAI,IAChB0H,EAAO,EACPF,EAAOH,EACPI,EAAOJ,EACPC,EAAOE,IACPA,EAAOF,GACPC,EAAOC,IACPA,EAAOD,GACPD,EAAOG,IACPA,EAAOH,GACPC,EAAOE,IACPA,EAAOF,OACPI,EAAOH,EAAOC,SACdJ,GAAOG,EACPE,GAAQJ,EAAOC,GAAQI,EAClBL,GAAQE,EACbE,EAAO,GAAMH,EAAOF,GAAOM,EACtBJ,GAAQC,IACbE,EAAO,GAAML,EAAMC,GAAQK,GAC/BD,GAAQ,GACJA,EAAO,IACPA,GAAQ,KACLA,uBAIHL,EAAMjF,KAAK+E,EAAI,IACfG,EAAOlF,KAAKgF,EAAI,IAChBG,EAAOnF,KAAKpC,EAAI,IAEhBwH,EAAOH,EACPI,EAAOJ,SACPC,EAAOE,IACPA,EAAOF,GACPC,EAAOC,IACPA,EAAOD,GACPD,EAAOG,IACPA,EAAOH,GACPC,EAAOE,IACPA,EAAOF,GACPC,GAAQC,EAXD,GAaCD,EAAOC,GAAQ,GACf,IACCD,EAAOC,IAASD,EAAOC,IAC3BD,EAAOC,IAAU,EAAID,EAAQC,GAG1CG,iBACQxF,KAAKyF,WAAa,IAQ1BC,QAAQC,EAAW,UACR,CACHA,EAASZ,GAAoB,IAAfY,EAASZ,EAAUY,EAASZ,EAAI/E,KAAK+E,EACnDY,EAASX,GAAoB,IAAfW,EAASX,EAAUW,EAASX,EAAIhF,KAAKgF,EACnDW,EAAS/H,GAAoB,IAAf+H,EAAS/H,EAAU+H,EAAS/H,EAAIoC,KAAKpC,EACnD+H,EAASnI,GAAoB,IAAfmI,EAASnI,EAAUmI,EAASnI,EAAIwC,KAAKxC,GAI3D1C,SAAS6K,EAAW,UACR,QAAO3F,KAAK0F,QAAQC,GAAUC,KAAK,UAO5C,MAAMC,oBACSf,OACVG,EAAMH,EAAMC,EAAI,IAChBG,EAAOJ,EAAME,EAAI,IACjBG,EAAOL,EAAMlH,EAAI,IACjBwH,EAAOH,EACPI,EAAOJ,SACPC,EAAOE,IACPA,EAAOF,GACPC,EAAOC,IACPA,EAAOD,GACPD,EAAOG,IACPA,EAAOH,GACPC,EAAOE,IACPA,EAAOF,IACFC,EAAOC,GAAQ,aAGjBP,MACFA,EAAMC,GAAKD,EAAME,GAAOF,EAAME,GAAKF,EAAMlH,EAC1C,OAAO,MACPqH,EAAMH,EAAMC,EAAI,IAChBG,EAAOJ,EAAME,EAAI,IACjBG,EAAOL,EAAMlH,EAAI,IACjB0H,EAAO,EACPF,EAAOH,EACPI,EAAOJ,EACPC,EAAOE,IACPA,EAAOF,GACPC,EAAOC,IACPA,EAAOD,GACPD,EAAOG,IACPA,EAAOH,GACPC,EAAOE,IACPA,EAAOF,OACPI,EAAOH,EAAOC,SACdJ,GAAOG,EACPE,GAAQJ,EAAOC,GAAQI,EAClBL,GAAQE,EACbE,EAAO,GAAMH,EAAOF,GAAOM,EACtBJ,GAAQC,IACbE,EAAO,GAAML,EAAMC,GAAQK,GAC/BD,GAAQ,GACJA,EAAO,IACXA,GAAQ,KACDA,oBAGOR,OACVG,EAAMH,EAAMC,EAAI,IAChBG,EAAOJ,EAAME,EAAI,IACjBG,EAAOL,EAAMlH,EAAI,IAEjBwH,EAAOH,EACPI,EAAOJ,SACPC,EAAOE,IACPA,EAAOF,GACPC,EAAOC,IACPA,EAAOD,GACPD,EAAOG,IACPA,EAAOH,GACPC,EAAOE,IACPA,EAAOF,GACPC,GAAQC,EAXD,GAaCD,EAAOC,GAAQ,GACf,IACCD,EAAOC,IAASD,EAAOC,IAC3BD,EAAOC,IAAU,EAAID,EAAQC,iBAE5BP,WACNe,EAAaJ,WAAWX,GAAS,iCAS9B,IAAIA,EAAM/F,YAAY+G,KAAKC,OAAO,KAAMhH,YAAY+G,KAAKC,OAAO,KAAOhH,YAAY+G,KAAKC,OAAO,mCAIlGC,EAAIH,EAAaI,iBAChBD,EAAIH,EAAaI,qBAAyBD,EAAER,iBAC1CQ,gCAIHA,EAAIH,EAAaI,iBAChBD,EAAIH,EAAaI,oBAAwBD,EAAER,iBACzCQ,iDAhNX1L,YAAYwK,EAAOoB,EAAS,EAAGC,EAAQ,cAC9BrB,MAAQA,OACRoB,OAASA,OACTC,MAAQA,EAEjBC,MAAMC,IACFA,EAAcA,aAAuBjF,EAASiF,EAAYlE,IAAMkE,GACpDC,YAActG,KAAK8E,MAAMhK,WACrCuL,EAAY1C,UAAY3D,KAAKkG,8CA4M9B,SAAuBhD,UACnBpC,OAAOO,IAAIe,WAAW,MAAMe,YAAYD,MChNpC,MAAMqD,UAAkB/G,EAIpClF,YAAYmF,OAEL+G,EAAW/G,EAAQlF,OAClBkF,EAAQgH,WACJ,IAAIpM,MAAM,uEAA0EqM,SAAW,uCAEnGjH,EAAQkH,IAAK,KACXX,EAAIvG,EAAQK,OAAO8G,KAAKC,aAAaC,WAAWtB,SAAWuB,EAAQlB,aAAamB,mBAAqBD,EAAQlB,aAAaoB,kBAC9HjB,EAAExI,EAAI,IACNiC,EAAQkH,IAAM,IAAII,EAAQJ,IAAIX,EAAG,SAI9BvG,EAAUyH,IACbA,EAAGC,WAAa5I,EAAc2I,EAAGT,KAAM,CAAC,MAAM,GAC9CS,EAAGE,KAAO,IAAIC,OAEVb,IACDrL,KAAK+L,EAAG3M,IAAM2M,EAAGC,gCAMRV,EAAM3G,MACjBwH,IAAIC,QAAQ,MAAO,IAAIC,QAAQ,MAAQ,EAAG,MAAM,IAAInN,MAAM,gCACvD,IAAIkM,EAAU,CAAEE,KAAAA,EAAM3G,OAAAA,kBAGlBgB,OAEP2B,EAAGgF,EAAWC,EAAMC,EACpBP,EAAO,IAAIC,WACV,IAAIpM,EAAI+E,KAAKD,GAAG6C,SAASgF,KAAM3M,GAAK+E,KAAKD,GAAG6C,SAASiF,KAAM5M,GAAK+E,KAAKD,GAAG+H,YAAa,CACvFrF,EAAIzC,KAAKC,YAAY8H,SAAS9M,EAAG+E,KAAKmH,WAAWlM,IACjDyM,EAAO1H,KAAKC,YAAY8H,SAAS9M,EAAI+E,KAAKD,GAAG+H,YAAc,EAAG9H,KAAKmH,WAAWlM,EAAI+E,KAAKD,GAAG+H,YAAc,KAE3FE,MAAMvF,EAAExH,KAAO+M,MAAMvF,EAAE2B,IACjCjJ,KAAKoC,IAAIkF,EAAExH,GAAK,KAAUE,KAAKoC,IAAIkF,EAAE2B,GAAK,MACxCuD,IAAcxM,KAAK8M,KAAKxF,EAAE2B,EAAIsD,EAAKtD,KAAOjJ,KAAK8M,KAAKP,EAAKtD,EAAIqD,EAAUrD,IAAMjJ,KAAKoC,IAAIkF,EAAE2B,EAAIqD,EAAUrD,GAAKpE,KAAKD,GAAG+H,YAAc,MAASH,IAOxIA,EACDP,EAAKlD,OAAOzB,EAAExH,EAAGwH,EAAE2B,GAEnBgD,EAAKnD,OAAOxB,EAAExH,EAAGwH,EAAE2B,GAEtBqD,EAAY,CAAExM,EAAGwH,EAAExH,EAAGmJ,EAAG3B,EAAE2B,GAC3BuD,GAAY,GAXRA,IACDA,GAAY,QAchBP,KAAOA,EAGfvG,MAAMC,OACCqB,EAAMrB,EAAOqB,IACjBA,EAAImE,YAActG,KAAK2G,IAAI7B,MAAMhK,WACjCqH,EAAIwB,UAAY3D,KAAK2G,IAAIT,OACzB/D,EAAI0C,OAAO7E,KAAKoH,MAGnBpG,iBACU7F,KAAK6E,KAAKzF,IAGpBO,kBACUkF,KAAKmH,YC/EH,MAAMe,UAAc1I,EAE/BlF,YAAYmF,OAIJiH,KADJjH,EAAQkH,IAAMlH,EAAQkH,KAAO,IAAII,QAAQJ,IAAI,IAAII,QAAQjC,MAAM,EAAG,EAAG,KAAM,IAG3E4B,EAAW,KACNjH,EAAQiH,SACH,IAAIrM,MAAM,uEAA0EqM,EAAW,sCAGzGA,EAAW,KACNjH,EAAQiH,SACH,IAAIrM,MAAM,uEAA0EqM,EAAW,yCAInGjH,EAAUyH,IACZA,EAAGjM,EAAIsD,EAAc2I,EAAGjM,GACxBiM,EAAG9C,EAAI7F,EAAc2I,EAAG9C,uBAKdkD,EAAKxH,MACfwH,EAAK,KACD7E,EACA0F,EAAQ,yCACZb,EAAIC,QAAQY,EAAO,CAACC,EAAOnN,EAAGmJ,KAC1B3B,EAAI,IAAIyF,EAAM,CAAEpI,OAAAA,EAAQ7E,EAAAA,EAAGmJ,EAAAA,MAE1B3B,EAGD,OAAOA,EAFP,MAAM,IAAIpI,MAAM,sCAAwCiN,GAK5D,MAAM,IAAIjN,MAAM,yBAGxBuG,KAAKE,EAAQP,EAAc,OAEnBP,KAAKJ,WAAY,QACTI,KAAK2G,IAAIR,WACR,QACDrF,EAAOuH,aAAa,GACpBvH,EAAO+D,OAAO,KACd/D,EAAO8D,QAAS5E,KAAK2G,IAAI7B,MAAMY,UAAU4C,OAAO,EAAG,GAAK,eAEvD,UACDxH,EAAOqB,IAAIwB,UAAY,EACvB7C,EAAOqB,IAAImE,YAAYtG,KAAK2G,IAAI7B,MAAMhK,YACtCgG,EAAOqB,IAAIQ,UAAU3C,KAAKF,OAAO8G,KAAKC,aAAaC,WAAWhM,gBAGlE2H,EAAIzC,KAAKC,YAAY8H,SAAS/H,KAAK/E,EAAEsN,OAAQvI,KAAKoE,EAAEmE,QACxDzH,EAAOqD,QAAQ1B,EAAExH,EAAGwH,EAAE2B,EAAGpE,KAAK2G,IAAIT,OAAQlG,KAAK2G,IAAIT,QAGnDlG,KAAKL,SAASgB,eACThB,SAASgB,YAAYJ,GAKlCzF,iBACY,IAAGkF,KAAK/E,MAAM+E,KAAKoE,MCpEpB,MAAMoE,UAAiBhJ,EACnClF,YAAYmF,OAELiH,KACJA,EAAW,QACNjH,EAAO,WACH,IAAIpF,MAAM,iHAIboF,EAAUyH,IACbA,EAAGuB,SAAWlK,EAAc2I,EAAGT,0BAInBa,EAAKxH,MAChBwH,SAEM,IAAIkB,EAAS,CAAE/B,KAAMA,OAG5B,MAAM,IAAIpM,MAAM,gCAGtBkO,cACUvI,KAAKyI,YCzBH,MAAMC,UAAkClJ,EAEpDlF,YAAYmF,OAELiH,KACJA,EAAW,MACNjH,EAAQiH,SACJ,IAAIrM,MAAM,8GAEnBqM,EAAW,SACNjH,EAAQiH,SACJ,IAAIrM,MAAM,iHAGboF,EAAUyH,QACRA,EAAG3M,GAAG6N,MAAM,iBAAkB,MAAM,IAAI/N,MAAO,GAAE6M,EAAG3M,kBACzD2M,EAAG7H,MAAQ,CAAEsJ,QAASpK,EAAc2I,EAAG7H,QACvClE,KAAK+L,EAAG3M,IAAM2M,EAAG7H,QAIvBuJ,SAASvJ,EAAOwJ,EAAiB,IAC9B1N,KAAK6E,KAAKzF,IAAM8E,EACZW,KAAKL,SAASmJ,UAAU9I,KAAKL,SAASmJ,YAAYD,GAGzDE,kBACU5N,KAAK6E,KAAKzF,IAGpByG,iBACU7F,KAAK6E,KAAKzF,KC/BR,MAAMyO,UAA8BxJ,EAEhDlF,YAAYmF,OAELiH,KACJA,EAAW,MACNjH,EAAQiH,SACJ,IAAIrM,MAAM,8GAEnBqM,EAAW,QACNjH,EAAQiH,SACJ,IAAIrM,MAAM,8GAEnBqM,EAAW,UACNjH,EAAQiH,SACJ,IAAIrM,MAAM,iHAIboF,EAAUyH,QACRA,EAAG3M,GAAG6N,MAAM,iBAAkB,MAAM,IAAI/N,MAAO,GAAE6M,EAAG3M,kBACzD2M,EAAG3H,KAAOhB,EAAckB,EAAQgH,KAAMhH,EAAQhB,QAC9CtD,KAAK+L,EAAG3M,IAAM2M,EAAG3H,OAKvByB,iBACU7F,KAAK6E,KAAKzF,KC7BR,MAAM0O,UAAczJ,EAChClF,YAAYmF,SACHA,ICDG,MAAMyJ,UAAgC1J,EAElDlF,YAAYmF,OAELiH,KACJA,EAAW,MACNjH,EAAQiH,SACJ,IAAIrM,MAAM,uEAA0EqM,EAAW,sCAExGA,EAAW,SACNjH,EAAQiH,SACJ,IAAIrM,MAAM,uEAA0EqM,EAAW,yCAGlGjH,EAAUyH,QACRA,EAAG3M,GAAG6N,MAAM,iBAAkB,MAAM,IAAI/N,MAAO,GAAE6M,EAAG3M,kBACzDY,KAAK+L,EAAG3M,IAAM2M,EAAG7H,QAKvBuJ,SAASvJ,EAAOwJ,EAAiB,IAC9B1N,KAAK6E,KAAKzF,IAAM8E,EACZW,KAAKL,SAASmJ,UAAU9I,KAAKL,SAASmJ,YAAYD,GAGzDE,kBACU5N,KAAK6E,KAAKzF,IAGpByG,iBACU7F,KAAK6E,KAAKzF,WC7BF4O,EAClB7O,YAAY8O,QACJ/H,IAAMC,SAASC,cAAc,YAC7BF,IAAIgI,UAAa,mCACIrJ,KAAKzF,6tBAuB1B8G,IAAOrB,KAAKqB,IAAIiI,WAAW,QAE3BC,OAAS,aACTH,WAAaA,GAAc,IAAIH,EAAM,CAAEnJ,OAAQ0J,SAAUC,QAASzJ,YAClE0J,aAAa,KAAM1J,KAAKoJ,iBAExBO,4BAIE3J,KAAKI,WAGRwJ,QACCxJ,IAAMwJ,OACNvI,IAAI9G,GAAKqP,0BAIP5J,KAAK6J,2BAGAxK,GACRA,aAAiBmJ,EAClBnJ,EAAMM,SAASgB,SAAW,UAClBmJ,oBAEAzK,aAAiB6J,IACzB7J,EAAMM,SAASmJ,SAAW,CAACiB,GAAe,EAAMC,GAAe,KACxDD,IAAc/J,KAAKiK,aAAaC,QAAQ,GAAG7K,MAAQW,KAAK6J,YAAYd,YACpEiB,GAAcR,SAASlJ,QAAO,GAAM,UAIzCuJ,YAAcxK,OACd9E,GAAK8E,EAAM9E,GAGnBoP,gBACOQ,EAAYnK,KAAKqB,IAAI+I,cAAc,gBAClCC,UAAYrK,KAAKqB,IAAI+I,cAAc,gBACnCE,SAAWtK,KAAKqB,IAAI+I,cAAc,cAGnCG,EAAYC,GAAGC,UAAUN,EAAW,CACrCxK,SAAU,CACP+K,KAAM,UACEpK,OAAOiK,EAAUI,UAGzBC,MAAO,UACCA,iBAITL,UAAYA,OAGZlJ,IAAI+I,cAAc,SAASS,iBAAiB,UAAYvM,SACrDwM,OAAM,UAGTzJ,IAAI+I,cAAc,SAASS,iBAAiB,WAAavM,SACtDyM,MAAK,UAGRV,UAAUQ,iBAAiB,QAAUvM,SAClCyC,wBAKE4J,OACL3K,KAAKgL,mBACa,UAAhBhL,KAAKuJ,OAAoB,CACtBvJ,KAAK6J,uBAAuBX,GACzB+B,EAAE,gBAAiBjL,KAAKqB,KAAK6J,SAAS,SACvCD,EAAE,cAAejL,KAAKqB,KAAK8J,QAAQ,cAGpC5B,OAAS,gBACTM,YAAY9I,cACZxG,QAAK6Q,UAEHC,EAAOrL,KAAK6J,eACF,KAAVc,OACIW,aAAe,IAAIzM,cAAcC,KAAK,SACtCsK,WAAa,IAAIH,EAAM,CAAEnJ,OAAQ0J,eAClC,IACAmB,SACIW,aAAe,UACfA,aAAe9B,SAAS+B,aAAaC,MAAMzM,YAAYC,OAAOI,cAAcuL,SAC5ExM,KAAO6B,KAAKyL,SAASzL,KAAKsL,aAAc,CAAEI,KAAM,aAAcC,IAAInO,GAAKA,EAAEuE,WACzEzC,MAAQU,KAAKyL,SAASzL,KAAKsL,aAAc,CAAEI,KAAM,oBAAqBC,IAAInO,GAAKA,EAAEuE,QAGpF/B,KAAKsL,aAAc,WAEpB9I,EAAQ,CACT7C,SAAU,CACPuB,SAAW0K,IACJA,GAAW5L,KAAKe,QAAO,IAE9BI,QAAU7C,SACFoC,MAAMpC,KAGjBmL,QAASzJ,MAGRA,KAAKoJ,YAAcpJ,KAAKoJ,WAAWzC,MAAKnE,EAAMmE,IAAM3G,KAAKoJ,WAAWzC,UACnEyC,WAAaI,SAASqC,gBAAgB7L,KAAKsL,aAAc9I,QAE5DkH,aACF2B,EACArL,KAAKoJ,YAET,MAAO9K,QACDoC,MAAMpC,GAET0B,KAAKzF,IAGHyF,KAAK6J,mBACDtP,GAAKyF,KAAK6J,YAAYtP,GAC3BiP,SAAStJ,SAASC,IAAIH,KAAKzF,GAAIyF,KAAKoJ,kBAGrC0C,qBACLtC,SAASlJ,SACW,cAAhBN,KAAKuJ,aACDA,OAAS,aACTjJ,OAAON,KAAKuK,UAAUI,UACH,aAAhB3K,KAAKuJ,cACRA,OAAS,mBAGZA,OAAS,YAKvBkC,SAASM,EAAQC,EAAQ,QAClB7N,EAAO,MACP4N,EAAOC,MAAMA,SACP,CAACD,OAEH,IAAIrO,EAAI,EAAGA,EAAIqO,EAAOE,KAAKtO,OAAQD,IACrCS,EAAOA,EAAK+N,OAAOlM,KAAKyL,SAASM,EAAOE,KAAKvO,GAAIsO,WAGhD7N,EAGV2N,mBAAmBT,MACZrL,KAAK6J,uBAAuBnB,GAAY1I,KAAK6J,uBAAuBX,EAAQ,KACzElG,EAAOwG,SAAStJ,SAAS8C,KAC7BwG,SAAStJ,SAASiM,QAAQC,IACvBpJ,IACIA,EAAO,GACPoJ,GAAMA,IAAOpM,KAAK6J,aAAeuC,EAAG3C,QAAQtL,MACzCiO,EAAG3C,QAAQtL,KAAKkO,KAAK7O,GAAKwC,KAAK6J,YAAYtP,KAAOiD,GAAM6N,GAAQ7N,IAAM6N,EAAK9Q,KAC5E6R,EAAG3C,QAAQnJ,cAInBN,KAAK6J,uBAAuBb,EAAM,KAC/BhG,EAAOwG,SAAStJ,SAAS8C,KAC7BwG,SAAStJ,SAASiM,QAAQC,IACvBpJ,IACIA,EAAO,GACPoJ,GAAMA,EAAG3C,UAAYzJ,MAAQoM,EAAG3C,QAAQtL,MACrCiO,EAAG3C,QAAQnK,MAAM+M,KAAK7O,GAAKwC,KAAK6J,YAAYtP,KAAOiD,GAAM6N,GAAQ7N,IAAM6N,EAAK9Q,KAC7E6R,EAAG3C,QAAQnJ,YAM1BgM,UAAUC,EAAQC,GAAS,GACnBA,SACGxB,iBAAkB,QAErBT,UAAUI,MAAM4B,GAChBC,SACGxB,iBAAkB,GAI7BF,MAAM2B,GAAgB,GACfzM,KAAK6J,uBAAuBX,GACzB+B,EAAE,gBAAiBjL,KAAKqB,KAAK6J,SAAS,SACvCD,EAAE,cAAejL,KAAKqB,KAAK8J,QAAQ,SAGrCuB,EAAeC,gBAAkBD,EAAeC,iBAAmB3M,MAAM0M,EAAeC,eAAe5B,OAE3G2B,EAAeC,eAAiB3M,KAChC0M,EAAenC,UAAYvK,KAAKuK,UAC5BkC,GAAezM,KAAKuK,UAAUO,aAC7BzJ,IAAIuL,UAAUC,IAAI,SAG1B9B,KAAK+B,GAAe,GAEbA,GAAc9M,KAAKuK,UAAUQ,YAC5B1J,IAAIuL,UAAU7L,OAAO,SAG7B6J,YACOmC,EAAQC,SAAShN,KAAKsK,SAAS2C,gBACd,IAAjBjN,KAAKkN,QAAe,MAChBnC,WAED5M,EAAO6B,KAAKqB,IAAI8L,iBAAiB,uBAChC,IAAIC,KAAKjP,EACXiP,EAAEC,QACFN,QAGCzN,EAAQU,KAAKqB,IAAI8L,iBAAiB,wBACjC,IAAIG,KAAKhO,EACXgO,EAAED,QACFN,IAINQ,EADe,IAAIpE,EACE4D,GAGxBrM,MAAMpC,MACCA,aAAa9D,EAAY,KACtBC,EAAQ6D,EAAE7D,MACV+S,EAAY/S,EAAM0D,KAAKsP,OAAO,CAAC7P,EAAGJ,IAAMI,EAAIJ,EAAI,KAAM,IAAIkQ,MAAM,GAAI,GACpEC,EAAalT,EAAM6E,MAAMmO,OAAO,CAAC7P,EAAGJ,IAAMI,EAAIJ,EAAI,KAAM,IAAIkQ,MAAM,GAAI,GACtEE,GAAaJ,EAAa,mBAAkBA,KAAe,KAAOG,EAAc,sBAAqBA,KAAgB,SACpHjN,MAAM,IAAIrG,MAAMuT,EAAY,+BAEZ,IAAjB5N,KAAKkN,cAED7L,IAAI+I,cAAc,oBAAoBrJ,aAG1C8M,EAAc,GAAIC,EAAe,GAEjCrT,EAAM0D,KAAKR,OAAS,IACrBkQ,EAAc,2BACdA,GAAepT,EAAM0D,KAAKsP,OAAO,CAAC7P,EAAGJ,IAAeI,EAAK,6BAA4BJ,aAAiB,KAAO,GAC7GqQ,GAAepT,EAAM0D,KAAKR,OAAS,EAAI,8CAAgD,GACvFkQ,GAAe,UAGdpT,EAAM6E,MAAM3B,OAAS,IACtBmQ,EAAe,4BACfA,GAAgBrT,EAAM6E,MAAMmO,OAAO,CAAC7P,EAAGJ,IAAeI,EAAK,8BAA6BJ,aAAiB,KAAO,GAChHsQ,GAAgBrT,EAAM6E,MAAM3B,OAAS,EAAI,+CAAiD,GAC1FmQ,GAAgB,cAGfC,EAAc9C,EAAG,0BAAyB4C,EAAcC,WAExD5G,EAAKlH,KACTiL,EAAE,OAAQ8C,GAAaC,KAAK,SAAS,WAGlCT,EAAY,GAFHvN,KAAKiO,gBAEUjB,SAAS9F,EAAGoD,SAAS2C,iBAGhDhC,EAAE,QAAS8C,GAAaC,KAAK,SAAS,eAI/BE,EAFAC,EAAQ,IACRC,EAAU,OAEPjT,KAAK0E,eAAesO,KAAWD,GAC/BE,EAAU,KACXD,EAAQ,IACRD,EAAM,GAENC,EADQC,EAAU,IACVC,OAAOC,aAAaC,KAAKxI,OAAO,GAAI,KAEpCsI,OAAOC,aAAaC,KAAKxI,OAAO,GAAI,MAE/CqI,IAIHb,EAAY,GAFHvN,KAAKiN,qBAEYkB,eAAmBA,IAASnB,SAAS9F,EAAGoD,SAAS2C,iBAG9EhC,EAAE,YAAa8C,GAAaC,KAAK,QAAS,SACnC7P,EAAO6B,KAAKqB,IAAI8L,iBAAiB,uBAChC,IAAIC,KAAKjP,EACXiP,EAAEC,UAIRpC,EAAE,aAAc8C,GAAaC,KAAK,QAAS,SACpC1O,EAAQU,KAAKqB,IAAI8L,iBAAiB,wBACjC,IAAIG,KAAKhO,EACXgO,EAAED,eAIHhM,IAAI+I,cAAc,SAASoE,OAAOT,EAAY,SAC9Cb,QAAU,MAEX,IACAlN,KAAKkN,QAAS,CACAlN,KAAKqB,IAAI+I,cAAc,cAC7BpI,aAAa,aAAc1D,EAAEmQ,aAClC,MACCpN,IAAIuL,UAAUC,IAAI,cAClBK,SAAU,OACV9D,WAAWxJ,YAAa,MACzB8O,EAAWzD,EAAG,sHAKlByD,EAAS,GAAG1M,aAAa,mBAAoB,SAC7C0M,EAAS,GAAG1M,aAAa,aAAc1D,EAAEmQ,SACzCC,EAASC,YACJtN,IAAI+I,cAAc,gBAAgBoE,OAAOE,EAAS,IACvDA,EAASE,QAAQ,GAAGC,MAAM,KAAKC,OAAO,KAEzCC,QAAQ/T,IAAIsD,IAIlByC,OAAOiO,GAAmB,GACnBhP,KAAK6J,uBAAuBX,GACzB+B,EAAE,gBAAiBjL,KAAKqB,KAAK6J,SAAS,SACvCD,EAAE,cAAejL,KAAKqB,KAAK8J,QAAQ,SC/SxC,SAAuB1B,MACvBA,IAAYiD,EAAeC,eAAgB,KACxCsC,EAAQxF,EAAQpI,IAAI6N,wBAA0BzF,EAAQpI,IAAI8N,mBAC1DF,GACDzF,SAAStJ,SAASkP,IAAIH,EAAMI,aAAa,OAAO5F,QAAQqB,QAG9DrB,EAAQpI,IAAIN,aACRuO,EAAWhO,SAAS8I,cAAc,aAClCmF,EAAgBD,EAASE,cAAcpF,cAAc,oBACtB,IAA/BkF,EAASG,oBACVF,EAAc3C,UAAUC,IAAI,iBAC5ByC,EAASE,cAAc5C,UAAUC,IAAI,eACrC6C,WAAW,KACRH,EAAc3C,UAAU7L,OAAO,iBAC/BuO,EAASE,cAAc5C,UAAU7L,OAAO,eACxCwM,EAAW,IAAIpE,IACf,MDiSHwG,CAAc3P,MACVgP,IACGhP,KAAKoJ,YAAYpJ,KAAKoJ,WAAWrI,cAChC+K,sBAERtC,SAASlJ,SAKZoJ,aAAakG,EAAMC,MAEZD,GAAQC,GAAMD,EAAKtV,cAAgBuV,EAAGvV,YAAa,CACjC0F,KAAKqB,IAAI8L,iBAAiB,gBAChChB,QAAQ9K,IAASA,EAAIN,WAEhB,IAAjBf,KAAKkN,cACD7L,IAAI+I,cAAc,cAAcrJ,SAEpCf,KAAKkN,eACD7L,IAAIuL,UAAU7L,OAAO,cACrBM,IAAI+I,cAAc,cAAcrJ,cAChCmM,SAAU,GAId2C,IACGA,aAAc5G,OACV6G,YACGD,aAActJ,EAClBqJ,aAAgBrJ,OACZwJ,yBAEAC,gBAEAH,aAAcrH,EAClBoH,aAAgBpH,OACZsB,wBAEAmG,eAEAJ,aAAcnH,EAClBkH,aAAgBlH,OACZwH,wBAEAC,eAEAN,aAAc3G,IAClB0G,aAAgB1G,OACZkH,sBAEAC,eAMjBP,YACoB9P,KAAKqB,IAAI+I,cAAc,gBAG3C4F,oBACOM,EAAatQ,KAAKqB,IAAI+I,cAAc,gBACpCmG,EAActF,EAAG,gFACrBsF,EAAYvC,KAAK,QAAS,KACvBuC,EAAYC,YAAY,gBACnBpH,WAAWxJ,WAAa2Q,EAAYrF,SAAS,gBAC7C9B,WAAW9I,SAChBkJ,SAAS5I,SAEZ0P,EAAW9B,OAAO+B,EAAY,SACzBR,oBAGRA,oBACoB/P,KAAKqB,IAAI+I,cAAc,gBAAgBA,cAAc,YAC3DpI,aAAa,QAAU,YAAWhC,KAAKoJ,WAAWzC,IAAI7B,MAAMhK,cAG1EmV,mBACO5Q,EAAQ4L,EAAG,sDACf5L,EAAMsP,YACDtN,IAAI+I,cAAc,SAASoE,OAAOnP,EAAM,IAC7CA,EAAMyP,aACF2B,EAAYxF,EACZ,mIAIC5J,IAAI+I,cAAc,gBAAgBoE,OAAOiC,EAAU,IACxDA,EAAUpD,MAAM,YACLoD,EAAUC,KAAK,aACf,UACFD,EAAUC,KAAK,OAAQ,SACvBrR,EAAMuC,OAAO,cAEX,QACF6O,EAAUC,KAAK,OAAQ,YACvBrR,EAAMuC,OAAO,cAEX,WACF6O,EAAUC,KAAK,OAAQ,WACvBrR,EAAMuC,OAAO,SAGdkI,0BAGHG,aAAe,CACjBwG,UAAWA,EAAU,GACrBE,SAAUtR,EAAM,IAKtByK,2BAEUzK,EAAQW,KAAKoJ,WAAWb,UACvBP,MAAM3I,QA6CH4K,aAAa0G,SAAStH,UAAY,+BA5CvChK,GAAS,EACTA,EAAQuR,WAAWvR,EAAMwR,QAAQ,KACzB7Q,KAAKiK,aAAawG,UAAUpB,aAAa,aACzC,eAEMpF,aAAa0G,SAAStH,UAAa,SAAQhK,qBAGjD,WAEKA,EAAMmI,QAAQ,MAAQ,GAAKnI,EAAMyR,MAAM,KAAK,GAAGnT,OAAS,EAAG,KACxDoT,EAAWhS,YAAY+G,KAAKiL,SAAS1R,GACZ,IAAzB0R,EAASC,iBACL/G,aAAa0G,SAAStH,UAAa,SAAQ0H,EAASE,yBAEpDhH,aAAa0G,SAAStH,UAAa,gBAAe0H,EAASE,cAAcF,EAASC,sBACvFxG,GAAG0G,WAAWlR,KAAKiK,aAAa0G,SAASzQ,SAAS,eAGhD+J,aAAa0G,SAAStH,UAAa,SAAQhK,qBAIpD,cAEKA,EAAMmI,QAAQ,MAAQ,GAAKnI,EAAMyR,MAAM,KAAK,GAAGnT,OAAS,EAAG,KACxDoT,EAAWhS,YAAY+G,KAAKqL,kBAAkB9R,GACvB,IAAvB0R,EAASE,eACLhH,aAAa0G,SAAStH,UAAa,SAAQ0H,EAASK,mBAEhC,GAArBL,EAASK,cACLnH,aAAa0G,SAAStH,UAAa,gBAAe0H,EAASE,cAAcF,EAASC,2BAElF/G,aAAa0G,SAAStH,UAAa,SAAQ0H,EAASK,kBAAkBL,EAASE,cAAcF,EAASC,sBAE9GxG,GAAG0G,WAAWlR,KAAKiK,aAAa0G,SAASzQ,SAAS,eAGhD+J,aAAa0G,SAAStH,UAAa,SAAQhK,YAQhE,MAAOf,QACD2L,aAAa0G,SAAStH,UAAY,wBAClC3I,MAAMpC,IAIjB+R,iBAEOgB,EAAepG,EAAG,s0BAmBjB5J,IAAI+I,cAAc,SAASoE,OAAO6C,EAAa,QAChDnH,EAAUe,EAAE,UAAWoG,GAGvBC,EAAQ,CACTC,IAAK/G,GAAGC,UAAU4G,EAAa,GAAGjH,cAAc,sCAAuC,CACpFzK,SAAU,CACP+K,KAAM,WACC2G,EAAanG,SAAS,SACvBD,EAAE,cAAeoG,GAAclG,QAAQ,SAE1CjB,EAAQ,GAAGqH,IAAOhT,EAAc+S,EAAMC,IAAI5G,QAAxBpM,OAI3BiT,IAAKhH,GAAGC,UAAU4G,EAAa,GAAGjH,cAAc,sCAAuC,CACpFzK,SAAU,CACP+K,KAAM,WACC2G,EAAanG,SAAS,SACvBD,EAAE,cAAeoG,GAAclG,QAAQ,SAE1CjB,EAAQ,GAAGsH,IAAOjT,EAAc+S,EAAME,IAAI7G,QAAxBpM,OAI3BkT,KAAMjH,GAAGC,UAAU4G,EAAa,GAAGjH,cAAc,uCAAwC,CACtFzK,SAAU,CACP+K,KAAM,WACC2G,EAAanG,SAAS,SACvBD,EAAE,cAAeoG,GAAclG,QAAQ,SAE1CjB,EAAQ,GAAGuH,KAAQlT,EAAc+S,EAAMG,KAAK9G,QAAzBpM,OAK5BmT,IAAK,YAELC,MAAO,IAEPC,cAAe,QAIb3H,aAAe,CACjBC,QAAAA,EACAoH,MAAAA,EACAO,gBAAgB,GAIhB3H,EACI4H,GAAG,SAAU,CAACC,KAAUC,KAClBhS,KAAKiK,aAAa4H,sBACdzI,WAAWR,SAASgI,WAAW1G,EAAQ,GAAG7K,OAAQ2S,QAClD1F,UAAUtM,KAAKoJ,WAAW7O,GAAK,MAAQ2P,EAAQ,GAAG7K,OAAO,MAGnEyS,GAAG,sBAAuB,KACpB5H,EAAQ,GAAG+H,aACZ/H,EAAQiB,QAAQ,UAAU,KAG/B2G,GAAG,uBAAwB,KACrBT,EAAanG,SAAS,SACvBD,EAAE,cAAeoG,GAAclG,QAAQ,SAE1CjB,EAAQ,GAAG+H,aAAc,IAE3BH,GAAG,mBAAoB,KACrB5H,EAAQ,GAAG+H,aAAc,IAG/BhH,EAAE,4BAA6BoG,GAAcrD,KAAK,QAAS,KACxDqD,EAAab,YAAY,wBAK5BvF,EAAE,cAAeoG,GAAcrD,KAAK,QAAS,KAC1CqD,EAAab,YAAY,QACrBa,EAAanG,SAAS,QACvBgH,EAAkBC,KAAKnS,MAEvBkS,EAAkBE,IAAIpS,aAM1BoQ,iBAGRA,qBACOiC,EAASrS,KAAKiK,aAAaC,QAAQ,GACnC7K,EAAQW,KAAKoJ,WAAWL,gBAEvBkB,aAAaqH,MAAMC,IAAI5G,MAAMxP,KAAKoW,IAAIX,WAAWyB,EAAOd,KAAMX,WAAWvR,UACzE4K,aAAaqH,MAAME,IAAI7G,MAAMxP,KAAKqW,IAAIZ,WAAWyB,EAAOb,KAAMZ,WAAWvR,UAEzE4K,aAAa4H,gBAAiB,EACnCQ,EAAOhT,MAAQA,OACV4K,aAAa4H,gBAAiB,EAKtC1B,oBACQlG,aAAe,GAKvBiG,qBEhqBY,QAEZ5V,YAAYyF,QACJA,GAAKA,OACLE,YAAcF,EAAGE,iBACjBN,SAAW,QAEX2S,YAAcC,OAAOC,IAAI,SACzBC,WAAa,CAAC,GAAI,UAClBA,WAAW,GAA2B,EAArBzS,KAAKyS,WAAW,GAAS,EAAKzS,KAAKyS,WAAW,GAA0B,EAArBzS,KAAKyS,WAAW,GAAS,EAAI,EAAIzS,KAAKyS,WAAW,QACrHC,UAAY,SAEZb,gBAAiB,OACjBc,6BAOEC,OAAOC,WAAW7S,KAAK8S,QAAQC,KAAK/S,KAAKgT,6BAMzCJ,OAAOC,WAAW7S,KAAKiT,QAAQF,KAAK/S,KAAKkT,QAGnD1P,mBACO9F,EAAIsC,KAAKmT,QACTC,EAAIpT,KAAKqT,QACTrN,EAAIhG,KAAKsT,aACN,CAAE9V,EAAGE,EAAEzC,EAAG2C,EAAGF,EAAE0G,EAAG4B,EAAGoN,EAAEnY,EAAGsY,EAAGH,EAAEhP,EAAG9F,EAAG0H,EAAE/K,EAAGqS,EAAGtH,EAAE5B,gCAM/CpE,KAAKwT,qCAGKC,MACbA,GAAYA,aAAoBb,OAAQ,MACpCY,iBAAmB,CACrBC,SAAUA,OAET7M,EAAO5G,KAAKC,YAAYyT,SAASD,EAASxY,EAAGwY,EAASrP,QACrDoP,iBAAiBG,WAAa,IAAIf,OAAOhM,EAAK3L,EAAG2L,EAAKxC,aAEtDoP,sBAAmBpI,sBAQRpL,KAAK4T,mBAChBxG,OACJ5P,EAAI+U,OAAOsB,eAAezG,MAC1BmF,OAAOuB,SAASlB,OAAOC,UAAUrV,GAAIoV,OAAOC,UAAU7S,KAAK+T,SAAU,CAAErI,KAAM,UAAa1L,KAAKsS,YAAa,KACzG1U,EAAI2U,OAAOyB,MAAMpB,OAAOC,UAAUrV,GAAIoV,OAAOC,UAAU7S,KAAK+T,SAAU,CAAErC,IAAK,cAC7E9T,EAAIoC,KAAKsS,aAAe1U,EAAI,EAC7BJ,EAAI+U,OAAOsB,eAAe7T,KAAK+T,QAAU/T,KAAKsS,cAG9C1U,EAAI2U,OAAOyB,MAAMpB,OAAOC,UAAUrV,GAAIoV,OAAOC,UAAU7S,KAAK+T,UACxDnW,EAAIoC,KAAKsS,aAAe1U,EAAI,EAC7BJ,EAAI+U,OAAOsB,eAAe7T,KAAK+T,QAAU/T,KAAKsS,cAG9C1U,EAAI2U,OAAOyB,MAAMpB,OAAOC,UAAUrV,GAAIoV,OAAOC,UAAU7S,KAAK+T,SAAShB,MAAM,GAAI,CAAErB,IAAK,cAClF9T,EAAIoC,KAAKsS,aAAe1U,EAAI,EAC7BJ,EAAI+U,OAAOsB,eAAe7T,KAAK+T,QAAU5Y,KAAKkD,GAAK2B,KAAKsS,cAGxD1U,EAAI2U,OAAOyB,MAAMpB,OAAOC,UAAUrV,GAAIoV,OAAOC,UAAU7S,KAAK+T,SAAShB,MAAM,IACvEnV,EAAIoC,KAAKsS,aAAe1U,EAAI,IAC7BJ,EAAI+U,OAAOsB,eAAe7T,KAAK+T,QAAU5Y,KAAKkD,GAAK2B,KAAKsS,sBAMlEsB,QAAUpW,sBAGIwC,KAAK+T,mBAChB3G,OACJ5P,EAAI+U,OAAOsB,eAAezG,MAC1BmF,OAAOuB,SAASlB,OAAOC,UAAUrV,GAAIoV,OAAOC,UAAU7S,KAAK4T,SAAU,CAAElI,KAAM,UAAa1L,KAAKsS,YAAa,KACzG1U,EAAI2U,OAAOyB,MAAMpB,OAAOC,UAAUrV,GAAIoV,OAAOC,UAAU7S,KAAK4T,SAAU,CAAElC,IAAK,cAC7E9T,EAAIoC,KAAKsS,aAAe1U,EAAI,EAC7BJ,EAAI+U,OAAOsB,eAAe7T,KAAK4T,QAAU5T,KAAKsS,cAG9C1U,EAAI2U,OAAOyB,MAAMpB,OAAOC,UAAUrV,GAAIoV,OAAOC,UAAU7S,KAAK4T,UACxDhW,EAAIoC,KAAKsS,aAAe1U,EAAI,EAC7BJ,EAAI+U,OAAOsB,eAAe7T,KAAK4T,QAAU5T,KAAKsS,cAG9C1U,EAAI2U,OAAOyB,MAAMpB,OAAOC,UAAUrV,GAAIoV,OAAOC,UAAU7S,KAAK4T,SAASb,MAAM,GAAI,CAAErB,IAAK,cAClF9T,EAAIoC,KAAKsS,aAAe1U,EAAI,EAC7BJ,EAAI+U,OAAOsB,eAAe7T,KAAK4T,QAAUzY,KAAKkD,GAAK2B,KAAKsS,cAGxD1U,EAAI2U,OAAOyB,MAAMpB,OAAOC,UAAUrV,GAAIoV,OAAOC,UAAU7S,KAAK4T,SAASb,MAAM,IACvEnV,EAAIoC,KAAKsS,aAAe1U,EAAI,IAC7BJ,EAAI+U,OAAOsB,eAAe7T,KAAK4T,QAAUzY,KAAKkD,GAAK2B,KAAKsS,sBAMlEyB,QAAUvW,EAMlByW,OAAOzW,EAAGkO,EAAO,WACT1D,MAAMxK,GAAI,CACC,QAATkO,IACDlO,EAAIA,EAAI,IAAMrC,KAAKkD,QAElBX,EAAIsC,KAAK6R,oBACRA,gBAAiB,OACjBiB,QAAUtV,OACVyV,QAAUzV,OACVqU,eAAiBnU,OACjBoL,YAOXoL,QAAQ1W,EAAGkO,EAAO,WACV1D,MAAMxK,GAAI,CACC,QAATkO,IACDlO,EAAIA,EAAI,IAAMrC,KAAKkD,QAElBX,EAAIsC,KAAK6R,oBACRA,gBAAiB,OACjBiB,QAAUtV,OACVqU,eAAiBnU,OACjBoL,YAOXqL,QAAQ3W,EAAGkO,EAAO,WACV1D,MAAMxK,GAAI,MACPqU,gBAAiB,EACT,QAATnG,IACDlO,EAAIA,EAAI,IAAMrC,KAAKkD,QAElBX,EAAIsC,KAAK6R,oBACRA,gBAAiB,OACjBoB,QAAUzV,OACVqU,eAAiBnU,OACjBoL,gCAQW9I,KAAKoU,mBAEhBC,QACHD,QAAUC,OACVvL,SAAS9I,KAAK6R,gBAAgB,GAGtCyC,UAAUjV,QACFiU,OAAS,IAAIV,OAAO5S,KAAKoU,QAAQnZ,EAAIoE,EAAMpE,EAAG+E,KAAKoU,QAAQhQ,EAAI/E,EAAM+E,GAO7EmQ,OAAOC,GAEJA,EAAeA,GAAgB,IAAI5B,OAAO5S,KAAKD,GAAG2B,MAAQ,EAAG1B,KAAKD,GAAG6B,OAAS,QACzE6S,gBAAkBD,MAEnBhX,EAAIwC,KAAK6R,oBACRA,gBAAiB,OACjB6C,eAAgBC,eAChB9C,eAAiBrU,OACjBsL,WAGR8L,QAAQJ,GAELA,EAAeA,GAAgB,IAAI5B,OAAO5S,KAAKD,GAAG2B,MAAQ,EAAG1B,KAAKD,GAAG6B,OAAS,QACzE6S,gBAAkBD,MAEnBhX,EAAIwC,KAAK6R,oBACRA,gBAAiB,OACjBgD,gBAAiBC,gBACjBjD,eAAiBrU,OACjBsL,WAGR4L,UAEO1U,KAAK+U,QAAU/U,KAAKyS,WAAW,KAAIzS,KAAK+U,QAAU/U,KAAK0S,gBAEtDsC,oBACAlM,WAGR+L,WAEO7U,KAAK+U,QAAU/U,KAAKyS,WAAW,KAAIzS,KAAK+U,QAAU/U,KAAK0S,gBAEtDsC,oBACAlM,WAIR6L,UAEO3U,KAAKiV,QAAUjV,KAAKyS,WAAW,KAAIzS,KAAKiV,QAAUjV,KAAK0S,gBAEtDwC,oBACApM,WAGRgM,WAEO9U,KAAKiV,QAAUjV,KAAKyS,WAAW,KAAIzS,KAAKiV,QAAUjV,KAAK0S,gBAEtDwC,oBACApM,WAcRqM,YAAYvS,EAAUwS,GAGnBxS,EAASgF,KAAyB,IAAlBhF,EAASgF,KAAa,EAAKhF,EAASgF,MAAQ5H,KAAKD,GAAG6C,SAASgF,KAC7EhF,EAASiF,KAAyB,IAAlBjF,EAASiF,KAAa,EAAKjF,EAASiF,MAAQ7H,KAAKD,GAAG6C,SAASiF,KAC7EjF,EAASyS,KAAyB,IAAlBzS,EAASyS,KAAa,EAAKzS,EAASyS,MAAQrV,KAAKD,GAAG6C,SAASyS,KAC7EzS,EAAS0S,KAAyB,IAAlB1S,EAAS0S,KAAa,EAAK1S,EAAS0S,MAAQtV,KAAKD,GAAG6C,SAAS0S,SACzE9X,EAAIwC,KAAK6R,oBAAqBA,gBAAiB,MAC/CpP,EAAIzC,KAAKC,YAAYyT,SAAS1T,KAAKD,GAAG2B,MAAQ,EAAG1B,KAAKD,GAAG6B,OAAS,GAKlE2T,EAAKvV,KAAK+U,OAAQS,EAAKxV,KAAKiV,YAE3BF,OAAS/U,KAAK+U,SAAWnS,EAASiF,KAAOjF,EAASgF,OAAS5H,KAAKD,GAAG6C,SAASiF,KAAO7H,KAAKD,GAAG6C,SAASgF,OACrGwN,OACIH,QAAUjV,KAAK+U,OAASQ,OAExBN,OAASjV,KAAKiV,SAAWrS,EAAS0S,KAAO1S,EAASyS,OAASrV,KAAKD,GAAG6C,SAAS0S,KAAOtV,KAAKD,GAAG6C,SAASyS,QAGxGrV,KAAKiV,QAAU,GAAKjV,KAAK+U,QAAU,GAAK/M,MAAMhI,KAAK+U,UAAYU,SAASzV,KAAK+U,SAAW/M,MAAMhI,KAAKiV,UAAYQ,SAASzV,KAAKiV,gBACzHF,OAASQ,OACTN,OAASO,QAGZR,oBACAE,oBAMApM,UAAS,OACV4M,EAAW1V,KAAKC,YAAY8H,SAASnF,EAASgF,KAAMhF,EAAS0S,SACjEI,EAAW,IAAI9C,OAAO8C,EAASza,EAAGya,EAAStR,QAEtCkQ,UAAUoB,EAAS3C,MAAM,SACzBjK,UAAS,GACVsM,EAAW,KACRO,EAAK3V,KAAKC,YAAY8H,SAAStF,EAAExH,GAAI2H,EAAS0S,KAAO1S,EAASyS,MAAQ,QACrEf,UAAU,IAAI1B,OAAO,EAAG5S,KAAKD,GAAG6B,OAAS,EAAI+T,EAAGvR,SAEnD0E,gBAAiB+I,eAAiBrU,EAI1CoY,YAAYC,GACTA,EAAWjO,KAAOiO,EAAWjO,MAAQ,EACrCiO,EAAWhO,KAAOgO,EAAWhO,MAAQ7H,KAAKD,GAAG2B,MAC7CmU,EAAWR,KAAOQ,EAAWR,MAAQ,EACrCQ,EAAWP,KAAOO,EAAWP,MAAQtV,KAAKD,GAAG6B,WAEzCkU,EAAS9V,KAAKC,YAAY8V,QAAQF,EAAWjO,KAAMzM,KAAKS,IAAIoE,KAAKiT,QAAU,EAAI4C,EAAWR,KAAOQ,EAAWP,MAC5GU,EAAOhW,KAAKC,YAAY8V,QAAQF,EAAWhO,KAAM1M,KAAKS,IAAIoE,KAAKiT,SAAW,EAAI4C,EAAWR,KAAOQ,EAAWP,MAC3GW,EAASjW,KAAKC,YAAYiW,QAAQ/a,KAAKS,IAAIoE,KAAK8S,QAAU,EAAI+C,EAAWhO,KAAOgO,EAAWjO,KAAMiO,EAAWP,MAC5Ga,EAAOnW,KAAKC,YAAYiW,QAAQ/a,KAAKS,IAAIoE,KAAK8S,SAAW,EAAI+C,EAAWhO,KAAOgO,EAAWjO,KAAMiO,EAAWR,YAExG,CACJzN,KAAMoO,EAAOF,EAASE,EAAOF,EAC7BjO,KAAMmO,EAAOF,EAASE,EAAOF,EAC7BT,KAAMc,EAAOF,EAASE,EAAOF,EAC7BX,KAAMa,EAAOF,EAASE,EAAOF,GAQnCjB,mBACOoB,GAAO,OACJpW,KAAK+U,OAAS/U,KAAKyS,WAAW,IAAI,IACZ,GAAtBzS,KAAKqW,cAAoB,MACrBA,cAAgB,MACjBC,EAAQ,QACPC,YAAcvW,KAAKuW,YAAcD,OACjCvB,OAAS/U,KAAK+U,OAASuB,OAE1B,GAA0B,GAAtBtW,KAAKqW,cAAoB,MAC1BA,cAAgB,MACjBC,EAAQ,QACPC,YAAcvW,KAAKuW,YAAcD,OACjCvB,OAAS/U,KAAK+U,OAASuB,OAE1B,GAA0B,GAAtBtW,KAAKqW,cAAoB,MAC1BA,cAAgB,MACjBC,EAAQ,QACPC,YAAcvW,KAAKuW,YAAcD,OACjCvB,OAAS/U,KAAK+U,OAASuB,EAE/BF,GAAO,MAENA,OACGpW,KAAK+U,OAAS/U,KAAKyS,WAAW,OACR,GAAtBzS,KAAKqW,cAAoB,MACrBA,cAAgB,MACjBC,EAAQ,OACPC,YAAcvW,KAAKuW,YAAcD,OACjCvB,OAAS/U,KAAK+U,OAASuB,OAE1B,GAA0B,GAAtBtW,KAAKqW,cAAoB,MAC1BA,cAAgB,MACjBC,EAAQ,SACPC,YAAcvW,KAAKuW,YAAcD,OACjCvB,OAAS/U,KAAK+U,OAASuB,OAE1B,GAA0B,GAAtBtW,KAAKqW,cAAoB,MAC1BA,cAAgB,MACjBC,EAAQ,OACPC,YAAcvW,KAAKuW,YAAcD,OACjCvB,OAAS/U,KAAK+U,OAASuB,GAIrCpB,mBACOkB,GAAO,OACJpW,KAAKiV,OAASjV,KAAKyS,WAAW,IAAI,IACZ,GAAtBzS,KAAKwW,cAAoB,MACrBA,cAAgB,MACjBF,EAAQ,QACPG,YAAczW,KAAKyW,YAAcH,OACjCrB,OAASjV,KAAKiV,OAASqB,OAE1B,GAA0B,GAAtBtW,KAAKwW,cAAoB,MAC1BA,cAAgB,MACjBF,EAAQ,QACPG,YAAczW,KAAKyW,YAAcH,OACjCrB,OAASjV,KAAKiV,OAASqB,OAE1B,GAA0B,GAAtBtW,KAAKwW,cAAoB,MAC1BA,cAAgB,MACjBF,EAAQ,QACPG,YAAczW,KAAKyW,YAAcH,OACjCrB,OAASjV,KAAKiV,OAASqB,EAE/BF,GAAO,MAENA,OACGpW,KAAKiV,OAASjV,KAAKyS,WAAW,OACR,GAAtBzS,KAAKwW,cAAoB,MACrBA,cAAgB,MACjBF,EAAQ,OACPG,YAAczW,KAAKyW,YAAcH,OACjCrB,OAASjV,KAAKiV,OAASqB,OAE1B,GAA0B,GAAtBtW,KAAKwW,cAAoB,MAC1BA,cAAgB,MACjBF,EAAQ,SACPG,YAAczW,KAAKyW,YAAcH,OACjCrB,OAASjV,KAAKiV,OAASqB,OAE1B,GAA0B,GAAtBtW,KAAKwW,cAAoB,MAC1BA,cAAgB,MACjBF,EAAQ,OACPG,YAAczW,KAAKyW,YAAcH,OACjCrB,OAASjV,KAAKiV,OAASqB,GAKrC3D,aACQ8B,qBAAkBrJ,OAElB2J,OAAS,SACTwB,YAAc,OACdG,eAAiB,OACjBL,cAAgB,OAEhBpB,OAAS,SACTwB,YAAc,OACdE,eAAiB,OACjBH,cAAgB,OAEhB5C,QAAU,OACVG,QAAU5Y,KAAKkD,GAAK,OAEpB+V,QAAU,IAAIxB,OAAO5S,KAAKD,GAAG2B,MAAQ,EAAG1B,KAAKD,GAAG6B,OAAS,QAEzDkH,WAGR5K,OAAO0Y,EAAQC,GAGZD,EAAO7B,OAAS8B,EAAI9B,OACpB6B,EAAOL,YAAcM,EAAIN,YACzBK,EAAOF,eAAiBG,EAAIH,eAC5BE,EAAOP,cAAgBQ,EAAIR,cAE3BO,EAAO3B,OAAS4B,EAAI5B,OACpB2B,EAAOH,YAAcI,EAAIJ,YACzBG,EAAOD,eAAiBE,EAAIF,eAC5BC,EAAOJ,cAAgBK,EAAIL,cAE3BI,EAAOhD,QAAUiD,EAAIjD,QACrBgD,EAAO7C,QAAU8C,EAAI9C,QAErB6C,EAAOxC,QAAUyC,EAAIzC,QAGxBtL,SAASgO,EAAS9W,KAAK6R,eAAgBkF,GAAgB,MAEhDD,EAAQ,KAELE,EAAMhX,KAAK0W,eAAiBvb,KAAKoC,IAAIpC,KAAKK,IAAIwE,KAAK8S,OAAS9S,KAAKiT,SACjEgE,EAAMjX,KAAK2W,eAAiBxb,KAAKoC,IAAIpC,KAAKK,IAAIwE,KAAK8S,OAAS9S,KAAKiT,cAChED,OAAUhT,KAAK+U,OAASiC,EAAMhX,KAAKuW,iBACnCrD,OAAUlT,KAAKiV,OAASgC,EAAMjX,KAAKyW,gBAEpCS,GACA3I,KAAK4I,UAAUnX,KAAKgT,UAAYzE,KAAK4I,UAAUnX,KAAKkT,UACpD3E,KAAK4I,UAAUnX,KAAKsT,OAAOrY,KAAOsT,KAAK4I,UAAUnX,KAAKsT,OAAOlP,IAC7DpE,KAAKyU,iBAAmBsC,KACpBxI,KAAK4I,UAAUnX,KAAKyU,gBAAgBd,WAAW1Y,KAAOsT,KAAK4I,UAAUnX,KAAKyU,gBAAgBd,WAAWvP,KACnGmK,KAAK4I,UAAUnX,KAAKyU,gBAAgBhB,SAASxY,KAAOsT,KAAK4I,UAAUnX,KAAKyU,gBAAgBhB,SAASrP,OAEvG8S,EAAS,KACN1Z,EAAIwC,KAAK6R,oBACRA,gBAAiB,WAEd3T,OAAO8B,KAAMA,KAAKoX,YAAY7T,WACpC,MAAOjF,QACDqU,oBAEHd,eAAiBrU,YACjBsL,UAAS,QAIZ7I,YAAYsD,UAAYvD,KAAKwD,mBAE9B6T,EAAKrX,KAAK4V,YAAY,CACvBhO,KAAM,EAAGC,KAAM7H,KAAKD,GAAG2B,MACvB2T,KAAM,EAAGC,KAAMtV,KAAKD,GAAG6B,YAG1ByV,EAAG3V,MAAQ2V,EAAGxP,KAAOwP,EAAGzP,KACxByP,EAAGzV,OAASyV,EAAG/B,KAAO+B,EAAGhC,UACpBtV,GAAG6C,SAAWyU,OAEdtX,GAAG+H,aAAe9H,KAAKD,GAAG6C,SAASiF,KAAO7H,KAAKD,GAAG6C,SAASgF,MAAQ,IAExEsP,GAAW3I,KAAK4I,UAAUnX,KAAKD,GAAG6C,SAASgF,QAAU2G,KAAK4I,UAAUnX,KAAKD,GAAG6C,SAASiF,QACjF0G,KAAK4I,UAAUnX,KAAKD,GAAG6C,SAASyS,QAAU9G,KAAK4I,UAAUnX,KAAKD,GAAG6C,SAAS0S,QAC1E/G,KAAK4I,UAAUnX,KAAKD,GAAG+H,cACvB9H,KAAKD,GAAG6C,SAASiF,KAAO7H,KAAKD,GAAG6C,SAASgF,KAAQ,MACjD5H,KAAKD,GAAG6C,SAAS0S,KAAOtV,KAAKD,GAAG6C,SAASyS,KAAQ,MACjDrV,KAAKD,GAAG6C,SAASiF,KAAO7H,KAAKD,GAAG6C,SAASgF,KAAQ,OACjD5H,KAAKD,GAAG6C,SAAS0S,KAAOtV,KAAKD,GAAG6C,SAASyS,KAAQ,OACjDrV,KAAKD,GAAG6C,SAASgF,KAAO5H,KAAKD,GAAG+H,YAAc,GAAK9H,KAAKD,GAAG6C,SAASgF,MACrE5H,KAAKD,GAAG6C,SAASiF,KAAO7H,KAAKD,GAAG+H,YAAc,GAAK9H,KAAKD,GAAG6C,SAASiF,KAEnEqP,GAAWlX,KAAKoX,YAAa,KAC1B5Z,EAAIwC,KAAK6R,oBACRA,gBAAiB,WAEd3T,OAAO8B,KAAMA,KAAKoX,YAAY7T,WACpC,MAAOjF,QACDqU,oBAEHd,eAAiBrU,YACjBsL,UAAS,GAEV,IAEA9I,KAAKyU,iBAAmBsC,EAAe,KACpCvZ,EAAIwC,KAAK6R,oBACRA,gBAAiB,MAClBpP,EAAIzC,KAAKC,YAAY8H,YAAY/H,KAAKyU,gBAAgBd,WAAWjO,uBAChE4O,UAAUtU,KAAKyU,gBAAgBhB,SAAS6D,SAAS7U,SACjDqG,UAAS,GAAM,aACf+I,eAAiBrU,GAIrBwC,KAAKL,SAASmJ,eACVnJ,SAASmJ,eAEbzF,EAAQ,QACPnF,OAAOmF,EAAOrD,WACdoX,YAAc,CAChB7T,UAAWF,YC1hBLkU,EAElBjd,YAAYiJ,QACJA,UAAYA,GAAa,CAAC/F,EAAG,EAAGI,EAAG,EAAGoI,EAAG,EAAGuN,EAAG,EAAGjV,EAAG,EAAGgP,EAAG,0BAIzDtN,KAAKqD,oBAGDA,QAEN/E,EAAI+E,EAAM/E,OACVgP,EAAIjK,EAAMiK,OAEV9P,EAAI6F,EAAM7F,OACVI,EAAIyF,EAAMzF,OACVoI,EAAI3C,EAAM2C,OACVuN,EAAIlQ,EAAMkQ,MAYXiE,EAViBC,CAAAA,QACd/Z,EAAI,GACJga,EAAMD,EAAEja,EAAIia,EAAElE,EAAIkE,EAAEzR,EAAIyR,EAAE7Z,SAC9BF,EAAEF,EAAIia,EAAElE,EAAImE,EACZha,EAAE6V,EAAIkE,EAAEja,EAAIka,EACZha,EAAEsI,GAAKyR,EAAEzR,EAAI0R,EACbha,EAAEE,GAAK6Z,EAAE7Z,EAAI8Z,EACNha,GAGIia,CAActU,QAEvBuU,GAAKJ,EAAQha,OACbqa,GAAKL,EAAQ5Z,OACbka,GAAKN,EAAQxR,OACbzL,GAAKid,EAAQjE,EAGrBxL,SAAS9M,EAAGmJ,SACF,CAAEnJ,EAAG+E,KAAK+X,SAAS9c,EAAGmJ,GAAIA,EAAGpE,KAAKgY,SAAS/c,EAAGmJ,IAGxDsP,SAASzY,EAAGmJ,SACF,CAAEnJ,EAAG+E,KAAK+V,QAAQ9a,EAAGmJ,GAAIA,EAAGpE,KAAKkW,QAAQjb,EAAGmJ,IAGtD2T,SAAS9c,EAAGmJ,UAEDpE,KAAKxC,EAAIvC,EAAI+E,KAAKgG,EAAI5B,EAAIpE,KAAK1B,EAG1C0Z,SAAS/c,EAAGmJ,UAEDpE,KAAKpC,EAAI3C,EAAI+E,KAAKuT,EAAInP,EAAIpE,KAAKsN,EAG1CyI,QAAQ9a,EAAGmJ,UACRnJ,GAAQ+E,KAAK1B,EACb8F,GAAQpE,KAAKsN,EACNtN,KAAK4X,GAAK3c,EAAI+E,KAAK8X,GAAK1T,EAGlC8R,QAAQjb,EAAGmJ,UACRnJ,GAAQ+E,KAAK1B,EACb8F,GAAQpE,KAAKsN,EACNtN,KAAK6X,GAAK5c,EAAI+E,KAAKzF,GAAK6J,GC7DtB,QAEb9J,YAAYwF,EAAQ4B,EAAOE,QACpB9B,OAASA,OACTmY,OAASvW,OACTwW,QAAUtW,OAEV3B,YAAc,IAAIsX,OAClBhU,UAAY,IAAI4U,EAAUnY,WAE1BsT,OAAS,IAAIV,OAAO5S,KAAK0B,MAAQ,EAAG1B,KAAK4B,OAAS,QAElDwW,YAAa,oBAIApY,KAAKF,OAAO8G,wBAEX5G,KAAKiY,QAAU,YAC1B5Y,QACH4Y,OAAS5Y,OACTkE,UAAUuF,+BAEK9I,KAAKkY,SAAW,aAC3B7Y,QACJ6Y,QAAU7Y,OACVkE,UAAUuF,+BAIR9I,KAAKuD,UAAU+P,kBAGbe,QACJ9Q,UAAU+P,OAASe,uBAIjBrU,KAAKuD,UAAU4P,6BAIfnT,KAAKuD,UAAU8P,QAGxBgF,gBACO9U,UAAU+P,OAAS,IAAIV,OAAO5S,KAAK0B,MAAQ,EAAG1B,KAAK4B,OAAS,GAGnE+Q,aACOpP,UAAUoP,QAGjBtS,QAAQ9F,OACDA,EAAI,MAAM,IAAIF,MAAM,iEACrBie,EAAO/d,EAAGgN,QAAQ,0BAA2B,UAC5C+Q,EACH,MAAM,IAAIje,MAAO,IAAGE,8BAEhByF,KAAKF,OAAOI,SAASqY,IAAIhe,SACrB,IAAIH,EAAYG,MAGtBY,KAAK0E,eAAetF,GAAK,MAAM,IAAIH,EAAYG,UAC5C+d,GCnEI,QAEZhe,YAAYyF,EAAI8G,QACR9G,GAAKA,OACLE,YAAcD,KAAKD,GAAGE,gBACvBuY,EAAsB,CACvB9M,KAAM,UACN+M,MAAO,GACPC,MAAO,GAEP5R,WAAY,IAAIC,QAAQjC,MAAM,IAAK,IAAK,IAAK,KAC7C7C,KAAM,UAEN0W,kBAAkB,EAClBC,eAAe,EACfC,iBAAiB,EACjBC,kBAAkB,EAClBC,gBAAgB,EAChBC,iBAAiB,EACjBC,aAAa,EAEbC,kBAAmB,EACnBC,kBAAmB,EACnBC,sBAAuB,EAEvBC,gBAAiB,KACjBC,aAAc,KACdC,SAAU,KACVC,SAAU,KACVC,gBAAiB,KACjBC,cAAe,KAEfC,uBAAuB,GAG1B1b,OAAOC,OAAOsa,EAAqB,CAChC1T,MAAO0T,EAAoB1R,WAAWtB,SAAW,IAAIuB,QAAQjC,MAAM,IAAK,IAAK,IAAK,KAAO,IAAIiC,QAAQjC,MAAM,GAAI,GAAI,GAAI,GACvH8U,eAAgBpB,EAAoB1R,WAAWtB,SAAW,IAAIuB,QAAQjC,MAAM,IAAK,IAAK,IAAK,KAAO,IAAIiC,QAAQjC,MAAM,GAAI,GAAI,GAAI,GAChI6T,kBAAmBH,EAAoB1R,WAAWtB,SAClD6T,gBAAiB,IAAItS,QAAQJ,IAAI6R,EAAoB1R,WAAWtB,SAAW,IAAIuB,QAAQjC,MAAM,IAAK,IAAK,IAAK,GAAK,KAAO,IAAIiC,QAAQjC,MAAM,GAAI,GAAI,GAAI,GAAK,KAAM,GACjKwU,aAAc,IAAIvS,QAAQJ,IAAI6R,EAAoB1R,WAAWtB,SAAW,IAAIuB,QAAQjC,MAAM,IAAK,IAAK,IAAK,IAAM,KAAO,IAAIiC,QAAQjC,MAAM,GAAI,GAAI,GAAI,IAAM,KAAM,GAChKyU,SAAU,IAAIxS,QAAQJ,IAAI6R,EAAoB1R,WAAWtB,SAAW,IAAIuB,QAAQjC,MAAM,IAAK,IAAK,IAAK,IAAM,KAAO,IAAIiC,QAAQjC,MAAM,EAAG,EAAG,EAAG,IAAM,KAAM,GACzJ0U,SAAU,IAAIzS,QAAQJ,IAAI6R,EAAoB1R,WAAWtB,SAAW,IAAIuB,QAAQjC,MAAM,IAAK,IAAK,IAAK,IAAM,KAAO,IAAIiC,QAAQjC,MAAM,EAAG,EAAG,EAAG,IAAM,KAAM,GACzJ2U,gBAAiB,IAAI1S,QAAQJ,IAAI6R,EAAoB1R,WAAWtB,SAAW,IAAIuB,QAAQjC,MAAM,IAAK,IAAK,IAAK,IAAM,KAAO,IAAIiC,QAAQjC,MAAM,GAAI,GAAI,GAAI,GAAK,KAAM,GAClK4U,cAAe,IAAI3S,QAAQJ,IAAI6R,EAAoB1R,WAAWtB,SAAW,IAAIuB,QAAQjC,MAAM,IAAK,IAAK,IAAK,IAAM,KAAO,IAAIiC,QAAQjC,MAAM,GAAI,GAAI,GAAI,GAAK,KAAM,KAEnK7G,OAAOC,OAAOsa,EAAqB,CAChCqB,UAAWrB,EAAoB1T,MAAMhK,WACrCgf,aAActB,EAAoB1T,MAAMhK,SAAS,CAAE0C,EAAG,OAErDqJ,QACIA,aAAe,GACpB5I,OAAOC,OAAO8B,KAAK6G,aAAc2R,GACjCva,OAAOC,OAAO8B,KAAK6G,aAAcA,SAE5BA,aAAe2R,EAK1B5X,KAAKuB,UACMnC,KAAK6G,aAAa6E,UAClB,eACGqO,OAAO5X,aAEV,WACG6X,OAAO7X,IAKrB4X,OAAOjZ,EAAQtD,EAAI,OAEZyc,EAASC,EAASC,EAAOC,KAC7BH,EAAU9e,KAAKkf,MAAMra,KAAKD,GAAG6C,SAASgF,KAAO5H,KAAKD,GAAGwD,UAAUgT,YAAc/Y,GAAKA,EAAIwC,KAAKD,GAAGwD,UAAUgT,YACxG4D,EAAQhf,KAAKmf,KAAKta,KAAKD,GAAG6C,SAASiF,KAAO7H,KAAKD,GAAGwD,UAAUgT,YAAc/Y,GAAKA,EAAIwC,KAAKD,GAAGwD,UAAUgT,YACrG2D,EAAU/e,KAAKkf,MAAMra,KAAKD,GAAG6C,SAASyS,KAAOrV,KAAKD,GAAGwD,UAAUkT,aAAezW,KAAKD,GAAGwD,UAAUkT,YAChG2D,EAAQjf,KAAKmf,KAAKta,KAAKD,GAAG6C,SAAS0S,KAAOtV,KAAKD,GAAGwD,UAAUkT,aAAezW,KAAKD,GAAGwD,UAAUkT,YAEzFzW,KAAK6G,aAAa8R,iBAAkB,CACrC7X,EAAOqB,IAAIwC,iBACNkC,aAAawS,gBAAgBjT,MAAMtF,OAEnC,IAAIpD,EAAIuc,EAASvc,GAAKyc,EAAOzc,GAAKsC,KAAKD,GAAGwD,UAAUgT,YAAc/Y,EAAIwC,KAAK6G,aAAaqS,kBAC1FpY,EAAO8C,KAAK5D,KAAKC,YAAY8X,SAASra,EAAGwc,GAAUla,KAAKC,YAAY+X,SAASta,EAAGwc,GAC7Ela,KAAKC,YAAY8X,SAASra,EAAG0c,GAAQpa,KAAKC,YAAY+X,SAASta,EAAG0c,QAEnE,IAAI1c,EAAIwc,EAASxc,GAAK0c,EAAO1c,GAAKsC,KAAKD,GAAGwD,UAAUkT,YAAczW,KAAK6G,aAAaqS,kBACtFpY,EAAO8C,KAAK5D,KAAKC,YAAY8X,SAASkC,EAASvc,GAAIsC,KAAKC,YAAY+X,SAASiC,EAASvc,GACnFsC,KAAKC,YAAY8X,SAASoC,EAAOzc,GAAIsC,KAAKC,YAAY+X,SAASmC,EAAOzc,IAC5EoD,EAAOqB,IAAI0C,YAGV7E,KAAK6G,aAAa+R,cAAe,CAClC9X,EAAOqB,IAAIwC,iBACNkC,aAAayS,aAAalT,MAAMtF,OAEhC,IAAIpD,EAAIuc,EAASvc,GAAKyc,EAAOzc,GAAKsC,KAAKD,GAAGwD,UAAUgT,YAAc/Y,EACpEsD,EAAO8C,KAAK5D,KAAKC,YAAY8X,SAASra,EAAGwc,GAAUla,KAAKC,YAAY+X,SAASta,EAAGwc,GAC7Ela,KAAKC,YAAY8X,SAASra,EAAG0c,GAAQpa,KAAKC,YAAY+X,SAASta,EAAG0c,QAEnE,IAAI1c,EAAIwc,EAASxc,GAAK0c,EAAO1c,GAAKsC,KAAKD,GAAGwD,UAAUkT,YACtD3V,EAAO8C,KAAK5D,KAAKC,YAAY8X,SAASkC,EAASvc,GAAIsC,KAAKC,YAAY+X,SAASiC,EAASvc,GACnFsC,KAAKC,YAAY8X,SAASoC,EAAOzc,GAAIsC,KAAKC,YAAY+X,SAASmC,EAAOzc,IAC5EoD,EAAOqB,IAAI0C,YAGV7E,KAAK6G,aAAagS,kBACnB/X,EAAOqB,IAAIwC,iBACNkC,aAAa0S,SAASnT,MAAMtF,GACjCA,EAAO8C,KAAK5D,KAAKC,YAAY8X,SAASkC,EAAS,GAAIja,KAAKC,YAAY+X,SAASiC,EAAS,GACnFja,KAAKC,YAAY8X,SAASoC,EAAO,GAAIna,KAAKC,YAAY+X,SAASmC,EAAO,IACzErZ,EAAOqB,IAAI0C,SACX/D,EAAOqB,IAAIwC,iBACNkC,aAAa2S,SAASpT,MAAMtF,GACjCA,EAAO8C,KAAK5D,KAAKC,YAAY8X,SAAS,EAAGmC,GAAUla,KAAKC,YAAY+X,SAAS,EAAGkC,GAC7Ela,KAAKC,YAAY8X,SAAS,EAAGqC,GAAQpa,KAAKC,YAAY+X,SAAS,EAAGoC,IACrEtZ,EAAOqB,IAAI0C,UAGV7E,KAAK6G,aAAaoS,YAAa,KAM5B7U,EAAGnJ,EACHgK,EAOAsV,EAAIC,EAbRP,EAAU9e,KAAKkf,MAAMJ,EAAUja,KAAKD,GAAGwD,UAAUgT,YAAc/Y,GAC/D2c,EAAQhf,KAAKmf,KAAKH,EAAQna,KAAKD,GAAGwD,UAAUgT,YAAc/Y,GAC1D0c,EAAU/e,KAAKkf,MAAMH,EAAUla,KAAKD,GAAGwD,UAAUkT,aACjD2D,EAAQjf,KAAKmf,KAAKF,EAAQpa,KAAKD,GAAGwD,UAAUkT,aAK5C3V,EAAOqB,IAAIQ,UAAY3C,KAAK6G,aAAagT,UACzC/Y,EAAOqB,IAAImE,YAActG,KAAK6G,aAAaC,WAAWhM,WACtDgG,EAAOqB,IAAIwB,UAAY,EACvB7C,EAAOiC,QAAQ,CAAEC,KAAM,KAGnB7H,KAAKoC,IAAIpC,KAAKS,IAAIoE,KAAKD,GAAGwD,UAAU0P,SAAW9X,KAAKoC,IAAIpC,KAAKS,IAAIoE,KAAKD,GAAGwD,UAAUuP,UAEpFyH,EAAK,IAAKC,EAAK,MAGfD,EAAK,IAAKC,EAAK,SAGb,IAAI9c,EAAIuc,EAASvc,GAAKyc,EAAOzc,GAAK,KACpCzC,EAAIyC,EAAIsC,KAAKD,GAAGwD,UAAUgT,YAC1BtR,EAAO9J,KAAKoC,IAAItC,GAAK,MAASE,KAAKoC,IAAItC,IAAM,OAC1CA,EAAEwf,cAAc,GAAGlT,QAAQ,YAAa,QACxCtM,EAAE4V,QAAQ,GAAGtJ,QAAQ,MAAO,IAAIA,QAAQ,MAAO,IACzC,GAALtM,EAAQ,CACTgK,IAAQzH,IAAMrC,KAAKkD,GAAK,EAAI,KAAO,IAAM2B,KAAK6G,aAAa4R,UACvDhW,EAAIzC,KAAK0a,cAAc5Z,EAAQd,KAAKC,YAAY8H,SAAS9M,EAAG,GAAKgK,EAAKsV,EAAIva,KAAKD,GAAGwD,UAAU8P,SAChGvS,EAAOqB,IAAIwY,WAAW1V,EAAKxC,EAAExH,EAAGwH,EAAE2B,GAClCtD,EAAOqB,IAAIyY,SAAS3V,EAAKxC,EAAExH,EAAGwH,EAAE2B,OAIjC,IAAI1G,EAAIwc,EAASxc,GAAK0c,EAAO1c,GAAK,KACpC0G,EAAI1G,EAAIsC,KAAKD,GAAGwD,UAAUkT,YAC1BxR,EAAO9J,KAAKoC,IAAI6G,GAAK,MAASjJ,KAAKoC,IAAI6G,IAAM,OAC1CA,EAAEqW,cAAc,GAAGlT,QAAQ,YAAa,QACxCnD,EAAEyM,QAAQ,GAAGtJ,QAAQ,MAAO,IAAIA,QAAQ,MAAO,IACzC,GAALnD,EAAQ,CACTa,GAAOjF,KAAK6G,aAAa6R,UACrBjW,EAAIzC,KAAK0a,cAAc5Z,EAAQd,KAAKC,YAAY8H,SAAS,EAAG3D,GAAIa,EAAKuV,EAAIxa,KAAKD,GAAGwD,UAAU4P,SAC/FrS,EAAOqB,IAAIwY,WAAW1V,EAAKxC,EAAExH,EAAGwH,EAAE2B,GAClCtD,EAAOqB,IAAIyY,SAAS3V,EAAKxC,EAAExH,EAAGwH,EAAE2B,KAK5C4V,OAAOlZ,QACCiZ,OAAOjZ,EAAQ3F,KAAKkD,GAAK,GASjCqc,cAAc5Z,EAAQ+Z,EAAKC,EAAQC,EAAWC,OACvChY,EAAOlC,EAAOmC,cAAc6X,MAChC9X,EAAKpB,OAAS,GACdiZ,EAAM,IAAIjI,OAAOiI,EAAI5f,EAAG,EAAG4f,EAAIzW,EAAG,GAEhB,MAAd2W,EAAmB,KAChBE,EAAS,CAAC,GAAIjb,KAAKD,GAAG2B,MAAQsB,EAAKtB,MAAQ,OAC3CmZ,EAAI5f,EAAIggB,EAAO,GAAI,KAEhBC,GAAKD,EAAO,GAAKJ,EAAI5f,GAAK+f,EAAQ/f,SAC/B4f,EAAIhO,IAAImO,EAAQjI,KAAKmI,IACxB,GAAIL,EAAI5f,EAAIggB,EAAO,GAAI,KAEvBC,GAAKD,EAAO,GAAKJ,EAAI5f,GAAK+f,EAAQ/f,SAC/B4f,EAAIhO,IAAImO,EAAQjI,KAAKmI,WAGrBL,EAEN,KAEAI,EAAS,CAAC,GAAIjb,KAAKD,GAAG6B,OAASoB,EAAKpB,OAAS,OAC7CiZ,EAAIzW,EAAI6W,EAAO,GAAI,KAEhBC,GAAKD,EAAO,GAAKJ,EAAIzW,GAAK4W,EAAQ5W,SAC/ByW,EAAIhO,IAAImO,EAAQjI,KAAKmI,IACxB,GAAIL,EAAIzW,EAAI6W,EAAO,GAAI,KAEvBC,GAAKD,EAAO,GAAKJ,EAAIzW,GAAK4W,EAAQ5W,SAC/ByW,EAAIhO,IAAImO,EAAQjI,KAAKmI,WAGrBL,UCjNEM,EAEjB7gB,YAAY8gB,QACHta,OAAS,IAAIM,EAAO,CAAEI,OAAQ4Z,EAActZ,WAAY,CAAEvH,GAAI,iBAC9DkG,eAAiB,IAAIW,EAAO,CAAEI,OAAQ4Z,EAActZ,WAAY,CAAEvH,GAAI,0BACtEwF,GAAK,IAAIsb,EAAcrb,KAAMA,KAAKc,OAAOY,MAAO1B,KAAKc,OAAOc,aAS5DgF,KAAO,IAAI0U,EAAYtb,KAAKD,SAC5BG,SAAW,IAAIqb,SACfhQ,aAAe,IAAI1M,cAAc2c,cAAcrgB,UAE/CsF,eAAe0B,IAAIsZ,WAAa,EAKzCC,gBAAgBnP,EAAQoP,EAAa,QAC7BC,EAAe5b,KAAK6b,eAAerQ,MAAMe,EAAOhF,QAAQ,MAAO,cAC5DsE,gBAAgB+P,EAAcD,GAGzC9P,gBAAgB+P,EAAcD,EAAa,OACvCA,EAAW7b,OAASE,KACM,KAAtB4b,EAAalQ,YACN,IAAIzC,EAAM0S,MAEK,MAAtBC,EAAa7Z,KAAc,KACvB+Z,EAAOF,EAAa3P,KAAK,GAAI8P,EAAQH,EAAa3P,KAAK,MAEvD6P,EAAK9P,MAAM,CAAEN,KAAM,WAAY3J,KAAM,QAAWga,EAAMC,SAAS,CAAEtQ,KAAM,WAAY3J,KAAM,aAClF,IAAIwE,EAAUtI,OAAOC,OAAOyd,EAAY,CAAElV,KAAMsV,KAKtD,GAAID,EAAK9P,MAAM,CAAEN,KAAM,oBAAsB,IAEtB,GAApBoQ,EAAK7P,KAAKtO,QAAeme,EAAK7P,KAAK,GAAGD,MAAM,CAAEN,KAAM,WAAY3J,KAAM,QAAWga,EAAMC,SAAS,CAAEtQ,KAAM,WAAY3J,KAAM,aACnH,IAAIwE,EAAU,CAAEzG,OAAQE,KAAMyG,KAAMsV,EAAOxhB,GAAIuhB,EAAK/Z,OAI1D,KAEGka,EADAxd,EAAS,MAETqd,EAAK7P,KAAK,GAAGD,MAAM,CAAEN,KAAM,YAAa3J,KAAM,UACzC,IAAIoM,KAAS2N,EAAK7P,KAAK,GAAGA,KACR,aAAfkC,EAAMzC,KACNjN,EAAO0T,KAAKhE,EAAMpM,MAElBka,GAAO,MAKW,aAAtBH,EAAK7P,KAAK,GAAGP,OAAqBuQ,GAAO,GACxCA,GAAMxd,EAAO0T,KAAK2J,EAAK7P,KAAK,GAAGlK,UAEnCka,SACM,IAAIjT,EAAK/K,OAAOC,OAAOyd,EAAY,CAAEphB,GAAIuhB,EAAK/Z,KAAMtD,OAAAA,EAAQgI,KAAMsV,UAMhF,CAAA,GAAkB,aAAdD,EAAKpQ,MAAsC,WAAfqQ,EAAMrQ,YAChC,IAAIxC,EAAOjL,OAAOC,OAAOyd,EAAY,CAAEphB,GAAIuhB,EAAK/Z,KAAM1C,MAAO0c,EAAM1c,SAGzE,GAAkB,aAAdyc,EAAKpQ,MAAuBqQ,EAAM/P,MAAM,CAAEN,KAAM,iBAAkB3J,KAAM,OAAiC,WAAvBga,EAAM9P,KAAK,GAAGP,YAC9F,IAAIxC,EAAOjL,OAAOC,OAAOyd,EAAY,CAAEphB,GAAIuhB,EAAK/Z,KAAM1C,OAAQ0c,EAAM9P,KAAK,GAAG5M,SAGlF,GAAkB,aAAdyc,EAAKpQ,YACH,IAAIhD,EAASzK,OAAOC,OAAOyd,EAAY,CAAEphB,GAAIuhB,EAAK/Z,KAAM1C,MAAO0c,UAsBzE,CAAA,GAAIH,EAAaI,SAAS,CAAEtQ,KAAM,WAAY3J,KAAM,aAC9C,IAAIwE,EAAUtI,OAAOC,OAAOyd,EAAY,CAAElV,KAAMmV,KAItD,GAAIA,EAAa5P,MAAM,CAAEN,KAAM,QAAS3J,KAAM,QAAuC,GAA5B6Z,EAAa3P,KAAKtO,QAAeie,EAAa3P,KAAK,GAAGD,MAAM,CAAEN,KAAM,YAAa3J,KAAM,IAAKpE,OAAQ,MAE1JQ,KAAK6d,SAAS,YAoBP,IAAI9T,EAAMjK,OAAOC,OAAO,CAAEjD,EAAG2gB,EAAa3P,KAAK,GAAGA,KAAK,GAAI7H,EAAGwX,EAAa3P,KAAK,GAAGA,KAAK,IAAM0P,WAmEtG,IAAInT,EAASvK,OAAOC,OAAOyd,EAAY,CAAElV,KAAMmV,EAAcM,UAAU,KAGlFC,aAAa5hB,UAKFyF,KAAKE,SAASkP,IAAI7U,GAG7B+F,OAAOM,GAAO,EAAMwb,GAAQ,MAIJ,aAAhBpc,KAAKuJ,QAAyC,gBAAhBvJ,KAAKuJ,YAC9BA,OAAS,gBACX,MACEA,OAAS,eACT,IAAI8S,KAASrc,KAAKE,SAAS7C,SACxBgf,GACAA,EAAM/b,SAGVM,QACKA,KAAKwb,GAEM,cAAhBpc,KAAKuJ,aACAA,OAAS,aACTjJ,OAAOM,EAAMwb,SAEb7S,OAAS,SAK1B3I,KAAKwb,GAAQ,GACLA,SACKtb,OAAO4B,aACPkE,KAAKhG,KAAKZ,KAAKc,cAInBL,eAAeiC,YAEf,IAAI2Z,KAASrc,KAAKE,SAAS7C,SACxBgf,GACAA,EAAMzb,KAAKZ,KAAKS,qBLpPrB6b,EAAW,CACnBC,QAASC,IAAIC,YAAY,CACtBC,OAAO,EACPC,UAAU,EACVC,YAAY,EACZC,SAAU,CAAEC,OAAQ,GAAIhB,KAAM,IAC9BiB,SAAU,KACVC,QAAS,uEACTxb,OAAQF,SAAS8I,cAAc,kBAAkBoF,iBAG5CyN,EAAQ,CAAEhiB,OAAGmQ,EAAWhH,OAAGgH,GAE3BsB,EAAiB,CACzBwQ,uBAAmB9R,EACnB+R,sBAAsB,EACtBC,eAAgB9b,SAAS8I,cAAc,cACvCG,UAAWjJ,SAAS8I,cAAc,YAG1BiT,EAAU/b,SAAS8I,cAAc,sBAMrC,SAASkT,QACTC,EAAOjc,SAAS6L,iBAAiB,gBACjCqQ,EAAQ,MACP,IAAIC,KAAOF,EACbE,EAAIzb,aAAa,QAASwb,EAAQ,GAClCC,EAAIrT,cAAc,UAAU6C,YAAcuQ,IAIzC,SAASjQ,EAAW/O,EAAOuO,EAAQ,OAAQ2Q,GAAY,OACvDjU,EAAUjL,EACuB,mBAAzBA,GAAOU,gBAChBuK,EAAU,IAAIN,EACdM,EAAQc,UAAUI,MAAMnM,QAEvB8Q,EAAWhO,SAAS8I,cAAc,iBAElC1M,EAAc,UADlBqP,EAASwB,KAAK4I,UAAUpK,IAAUA,EAAQuC,EAASG,kBAAoB,EAAK,OAAS1C,GAC1DuC,EAASG,kBAAoB,EAAI1C,EACxDrP,GAAK,GAAe,SAAVqP,GACXtD,EAAQpI,IAAI+I,cAAc,UAAU6C,YAAcvP,EAAI,EACtD4R,EAASqO,aAAalU,EAAQpI,IAAKiO,EAASpP,SAASxC,IACrD4f,MAEA7T,EAAQpI,IAAIW,aAAa,QAASsN,EAASG,mBAC3ChG,EAAQpI,IAAI+I,cAAc,UAAU6C,YAAcqC,EAASG,kBAAoB,EAC/EH,EAAS7N,YAAYgI,EAAQpI,MAE5Bqc,GAAWjU,EAAQqB,QAiCnB,SAASxI,EAAOsb,GAAiB,GACrCC,IAEArU,SAAS1I,OAAOwB,OAAO8Y,aAAazZ,YAAayZ,aAAavZ,cAC9D2H,SAAS/I,eAAe6B,OAAO8Y,aAAazZ,YAAayZ,aAAavZ,cAEtE2H,SAASzJ,GAAGwD,UAAUsO,gBAAiB,EAEvCrI,SAASzJ,GAAG2B,MAAQ0Z,aAAazZ,YACjC6H,SAASzJ,GAAG6B,OAASwZ,aAAavZ,iBAE9BwV,EAAK7N,SAASzJ,GAAG6C,SACrB4G,SAASzJ,GAAGwD,UAAUuF,UAAS,GAE/BU,SAASzJ,GAAGwD,UAAUkR,qBAAkBrJ,EACxC5B,SAASzJ,GAAGwD,UAAU4R,YAAYkC,GAAI,GACtC7N,SAASzJ,GAAGwD,UAAUsO,gBAAiB,EACvCrI,SAASzJ,GAAGwD,UAAUuF,WAGlB8U,GACD3S,EAAE,WAAYoS,GACVS,UAAU,SAAU,cAAeC,EAAeV,IAIzD7T,SAASlJ,SACTgC,EAAO0b,SAAW,CAAEtc,MAAOuc,OAAOC,WAAYtc,OAAQqc,OAAOE,aAEzD,SAASN,IACTI,OAAOC,YAAc,KAAO5b,EAAO0b,SAAStc,MAAQ,KAErDJ,SAAS8c,KAAKhU,cAAc,kBAAkBwC,UAAU7L,OAAO,gBAC/DO,SAAS8c,KAAKhU,cAAc,kBAAkBwC,UAAUC,IAAI,iBACpDoR,OAAOC,WAAa,KAAO5b,EAAO0b,SAAStc,OAAS,MAE5DJ,SAAS8c,KAAKhU,cAAc,kBAAkBwC,UAAUC,IAAI,gBAC5DvL,SAAS8c,KAAKhU,cAAc,kBAAkBwC,UAAU7L,OAAO,iBAK9D,SAASgd,EAAe1c,OACxBgd,EAAeJ,OAAOK,iBAAiBjd,GACvCkQ,EAAMvE,SAASqR,EAAaE,SAAShX,QAAQ,KAAM,KACpDiK,EAAMxE,SAASqR,EAAaG,SAASjX,QAAQ,KAAM,YAGlDgK,EAAMC,EACA,CACJD,EAAK,EACLA,EACAvE,SAASqR,EAAazc,OAAO2F,QAAQ,KAAM,MAGvC,CACJgK,EAAK,EACLC,EACAxE,SAASqR,EAAazc,OAAO2F,QAAQ,KAAM,MAlBpDsW,EAAQG,SAAW,CAAEtc,MAAOuc,OAAOC,WAAYtc,OAAQqc,OAAOE,aA2CvD,IAAIjM,EAAoB,CAE5BuM,eAAgB,GAChBC,SAAU,EACVnV,OAAQ,aAKR4I,KAAM,SAAUwM,OAETzU,EAAUyU,EAAc1U,aAAaC,QACrCmI,EAASnI,EAAQ,GACjBoH,EAAQqN,EAAc1U,aAAaqH,MACnCsN,EAAe,CAChBrN,IAAKX,WAAWyB,EAAOd,KACvBC,IAAKZ,WAAWyB,EAAOb,KACvBC,KAAMb,WAAWyB,EAAOZ,MACxBpS,MAAOsf,EAAcvV,WAAWL,YAE/B8V,EAAa,CACdC,SAAUF,EAAavf,MAAQuf,EAAarN,KAAOqN,EAAanN,KAChEpG,MAAOuT,EAAavf,MAAQuf,EAAarN,KAAOqN,EAAanN,KAC7DD,KAAMoN,EAAapN,IAAMoN,EAAarN,KAAOqN,EAAanN,WAGxDgN,eAAetM,KAAK,CAAEwM,cAAAA,EAAeE,WAAAA,EAAYD,aAAAA,EAActN,MAAAA,EAAOpH,QAAAA,IAEvD,eAAhBlK,KAAKuJ,cACDA,OAAS,eACTwV,yBAOX3M,IAAK,SAAUuM,OACP,IAAIjhB,EAAI,EAAGA,EAAIsC,KAAKye,eAAe9gB,OAAQD,IACzCihB,IAAkB3e,KAAKye,eAAe/gB,GAAGihB,oBACrCF,eAAenW,OAAO5K,EAAG,GAGD,IAA/BsC,KAAKye,eAAe9gB,cAChB4L,OAAS,aACdyV,cAAchf,KAAK0e,YAIzBK,qBAAsB,gBAIdL,SAAWO,YAAY,SAWpB,IAAI5M,KAAUrS,KAAKye,eAAgB,KACjCI,EAAaxM,EAAOwM,WACpBD,EAAevM,EAAOuM,aACtB1U,EAAUmI,EAAOnI,WASrB2U,EAAWC,SAAYzM,EAAOf,MAAMK,MAAQU,EAAOf,MAAMM,cAAgB,IA1BxD,GA4BbzW,KAAKoC,IAAIshB,EAAWC,QAAUD,EAAWxT,MAAQ,EAAG,QAC7CgH,EAAOf,MAAMI,SACb,iBACErS,EAAQuf,EAAarN,IAAOsN,EAAWC,QAAUF,EAAanN,KAC9DoN,EAAWC,QAAU,GAAKD,EAAWC,QAAUD,EAAWrN,IAAKa,EAAOf,MAAMM,gBAAkB,GAE/F1H,EAAQ,GAAG7K,MAAQA,EACnB6K,EAAQiB,QAAQ,UAAU,GAAM,cAIjC,gBACE9L,EAAQuf,EAAarN,IAAOsN,EAAWC,QAAUF,EAAanN,KAC9DoN,EAAWC,QAAUD,EAAWrN,IAAKqN,EAAWC,QAAU,GAE3D5U,EAAQ,GAAG7K,MAAQA,EACnB6K,EAAQiB,QAAQ,UAAU,GAAM,cAIjC,iBACE9L,EAAQuf,EAAarN,IAAOsN,EAAWC,QAAUF,EAAanN,KAC9DoN,EAAWC,QAAU,EAAGD,EAAWC,QAAUD,EAAWrN,KAEzDtH,EAAQ,GAAG7K,MAAQA,EACnB6K,EAAQiB,QAAQ,UAAU,GAAM,WAKzC0T,EAAWxT,KAAOwT,EAAWC,SAGnCtV,SAASlJ,QAAO,GAAM,IA7DF,MM3Nd,SAAS4e,QAEjBC,EAEAC,EADAC,EAAQtgB,YAAYugB,MAGpBC,EAAkBjhB,IAEnB6gB,GAAe,MAGXK,EAAYC,EAAa3e,OAAOO,QACrB,cAAX/C,EAAEoN,KACHuR,EAAMhiB,EAAIqD,EAAEohB,QAAUF,EAAU1D,KAChCmB,EAAM7Y,EAAI9F,EAAEqhB,QAAUH,EAAUI,QAC5B,KAEAC,EAAQvhB,EAAEwhB,QAAQ,GACtB7C,EAAMhiB,EAAI4kB,EAAMH,QAAUF,EAAU1D,KACpCmB,EAAM7Y,EAAIyb,EAAMF,QAAUH,EAAUI,OAGvC3hB,OAAOC,OAAOoe,EAAU,CACrB5Q,KAAM4Q,EAAS5Q,KACfuR,MAAO,IAAIrK,OAAOqK,EAAMhiB,EAAGgiB,EAAM7Y,GACjC+O,QAAS3J,SAASzJ,GAAGwD,UAAU4P,QAC/BE,QAAS7J,SAASzJ,GAAGwD,UAAU8P,UAGZ,SAAlBiJ,EAAS5Q,KAGVuR,EAAM5R,KAAO,CAAEpQ,EAAGgiB,EAAMhiB,EAAGmJ,EAAG6Y,EAAM7Y,GACpC6Y,EAAM8C,IAAM,CAAE9kB,EAAG,EAAGmJ,EAAG,GACvB4a,cAAcI,QAQZ,GAAI9C,EAAS5Q,KAAKsU,OAAO,WAAa,EAAG,KAGvCC,EAAMZ,EAAMa,cAAc1W,SAASzJ,GAAGwD,UAAUuP,OAAQtJ,SAASzJ,GAAGuT,QACrE6M,EAAMd,EAAMa,cAAc1W,SAASzJ,GAAGwD,UAAU0P,OAAQzJ,SAASzJ,GAAGuT,QACnEC,EAAI,GACJ6M,EAAS,CACVnlB,EAAGokB,EAAMgB,WAAW/D,EAASW,MAAOgD,GACpC7b,EAAGib,EAAMgB,WAAW/D,EAASW,MAAOkD,OAEnCC,EAAOnlB,EAAIsY,GAAK6M,EAAOhc,EAAImP,EAC5B+I,EAASgE,KAAO,KAChBhE,EAASvH,OAASvL,SAASzJ,GAAGwD,UAAUgd,OACxCjE,EAASrH,OAASzL,SAASzJ,GAAGwD,UAAUid,OACxClE,EAASxJ,OAAStJ,SAASzJ,GAAGwD,UAAUuP,OACxCwJ,EAASrJ,OAASzJ,SAASzJ,GAAGwD,UAAU0P,OACxCqJ,EAAS7H,gBAAkB,IAAI7B,OAAOpJ,SAASzJ,GAAGuT,OAAOrY,EAAGuO,SAASzJ,GAAGuT,OAAOlP,GAC/EkY,EAASmE,UAAYxiB,OAAOC,OAAO,IAAI6I,QAAQjC,MAAS0E,SAAS5C,KAAKC,aAAa0S,SAASzU,OAC5FwX,EAASoE,UAAYziB,OAAOC,OAAO,IAAI6I,QAAQjC,MAAS0E,SAAS5C,KAAKC,aAAa2S,SAAS1U,OAC5F0E,SAAS5C,KAAKC,aAAa0S,SAASzU,MAAQ,IAAIiC,QAAQjC,MAAM,IAAK,EAAG,EAAG,KACzE0E,SAAS5C,KAAKC,aAAa2S,SAAS1U,MAAQ,IAAIiC,QAAQjC,MAAM,IAAK,EAAG,EAAG,UAEvE,GAAIsb,EAAOnlB,EAAIsY,EAAG,CACpB+I,EAASgE,KAAO,IAChBhE,EAASqE,MAAQnX,SAASzJ,GAAGwD,UAAUgd,OACvCjE,EAAStI,MAAQxK,SAASzJ,GAAGwD,UAAUuP,WACnC8N,EAAI,IAAIhO,OAAOrE,KAAKsS,UAAUrX,SAASzJ,GAAGuT,OAAOrY,EAAG,EAAGuO,SAASzJ,GAAG2B,OAAQ6M,KAAKsS,UAAUrX,SAASzJ,GAAGuT,OAAOlP,EAAG,EAAGoF,SAASzJ,GAAG6B,SAC/Hgf,EAAE3lB,IAAMuO,SAASzJ,GAAGuT,OAAOrY,IAC5B2lB,EAAItE,EAASW,OAEhBX,EAAS7H,gBAAkBmM,EAC3BtE,EAASwE,SAAW,CAACtX,SAAS5C,KAAKC,aAAa0S,SAASzU,OAAO4I,QAAQ,GACxElE,SAAS5C,KAAKC,aAAa0S,SAASzU,MAAQ,IAAIiC,QAAQjC,MAAM,IAAK,EAAG,EAAG,UAEvE,GAAIsb,EAAOhc,EAAImP,EAAG,CACpB+I,EAASgE,KAAO,IAChBhE,EAASqE,MAAQnX,SAASzJ,GAAGwD,UAAUid,OACvClE,EAAStI,MAAQxK,SAASzJ,GAAGwD,UAAU0P,WACnC2N,EAAI,IAAIhO,OAAOrE,KAAKsS,UAAUrX,SAASzJ,GAAGuT,OAAOrY,EAAG,EAAGuO,SAASzJ,GAAG2B,OAAQ6M,KAAKsS,UAAUrX,SAASzJ,GAAGuT,OAAOlP,EAAG,EAAGoF,SAASzJ,GAAG6B,SAC/Hgf,EAAExc,IAAMoF,SAASzJ,GAAGuT,OAAOlP,IAC5Bwc,EAAItE,EAASW,OAEhBX,EAAS7H,gBAAkBmM,EAC3BtE,EAASwE,SAAW,CAACtX,SAAS5C,KAAKC,aAAa2S,SAAS1U,OAAO4I,QAAQ,GACxElE,SAAS5C,KAAKC,aAAa2S,SAAS1U,MAAQ,IAAIiC,QAAQjC,MAAM,IAAK,EAAG,EAAG,UAGzEwX,EAASgE,UAAOlV,EAEnBkR,EAASyE,UAAY,EACrBvX,SAAS5I,YACL,GAAsB,SAAlB0b,EAAS5Q,KAAiB,KAG9BsV,EAAS1f,SAASC,cAAc,OACpCyf,EAAOpU,UAAUC,IAAI,YAErBuO,aAAa5M,OAAOwS,GACpB1E,EAAS0E,OAASA,EAClB1E,EAASzG,WAAa,GAEzBvX,EAAE2iB,kBAGL7F,aAAavQ,iBAAiB,YAAa0U,GAC3CnE,aAAavQ,iBAAiB,aAAc0U,OAExC2B,EAAmB5iB,OAGhB6gB,EAAc,KAEXK,EAAYC,EAAa3e,OAAOO,QACrB,cAAX/C,EAAEoN,KACHuR,EAAMhiB,EAAIqD,EAAEohB,QAAUF,EAAU1D,KAChCmB,EAAM7Y,EAAI9F,EAAEqhB,QAAUH,EAAUI,QAC5B,KAEAC,EAAQvhB,EAAEwhB,QAAQ,GACtB7C,EAAMhiB,EAAI4kB,EAAMH,QAAUF,EAAU1D,KACpCmB,EAAM7Y,EAAIyb,EAAMF,QAAUH,EAAUI,WAG/BtD,EAAS5Q,UACT,OAqHXlC,SAASzJ,GAAGwD,UAAU+Q,UAAU,IAAI1B,OAAOqK,EAAMhiB,EAAGgiB,EAAM7Y,GAAGkT,SAASgF,EAASW,QAC/EzT,SAASlJ,SAETgc,EAASW,MAAQ,IAAIrK,OAAOqK,EAAMhiB,EAAGgiB,EAAM7Y,aAnHhC,yBAsHO9F,MACG,KAAjBge,EAASgE,KAAa,KACnBa,EAAe7E,EAASW,MACxBgD,EAAMZ,EAAMa,cAAc1W,SAASzJ,GAAGwD,UAAUuP,OAAQtJ,SAASzJ,GAAGuT,QACpE8N,GAAS7S,KAAK8S,KAAKpE,EAAMhiB,EAAGgiB,EAAM7Y,EAAG+c,EAAalmB,EAAGkmB,EAAa/c,IAAM,EAAIib,EAAMgB,WAAW,IAAIzN,OAAOqK,EAAMhiB,EAAGgiB,EAAM7Y,GAAI6b,IAAQ,IAAM,MAE7IzW,SAASzJ,GAAGwD,UAAUkR,qBAAkBrJ,GACnCpD,MAAMoZ,GAAQ,KACZE,EAAO/O,OAAOuB,SAASlB,OAAOC,WAAWrJ,SAASzJ,GAAGwD,UAAUuP,QAAS,IAAIF,OAAOqK,EAAMhiB,EAAGgiB,EAAM7Y,GAAGkT,SAAS6J,IAC9GzP,EAAM4P,EAAOnmB,KAAKkD,GAAK,EAAI,EAAKijB,EAAOnmB,KAAKkD,GAAK,GAAK,EAAI,EAE9DmL,SAASzJ,GAAGwD,UAAUkR,gBAAkB6H,EAAS7H,gBACjDjL,SAASzJ,GAAGwD,UAAUwR,QAAWqM,EAAQ1P,EAAM4K,EAASyE,UACxDvX,SAASzJ,GAAGwD,UAAUyR,eACtBsH,EAASyE,UAAYK,EAAQ1P,EAGhClI,SAASzJ,GAAGwD,UAAUuF,UAAS,GAC/BU,SAASlJ,SAITihB,EAAiB,CACb,KAAI/X,SAASzJ,GAAGoT,QAAQzP,IAAM4Y,EAASnJ,QAAQzP,KAAKmN,QAAQ,YAG5D,GAAqB,KAAjByL,EAASgE,KAAa,KAC1Ba,EAAe7E,EAASW,MACxBkD,EAAMd,EAAMa,cAAc1W,SAASzJ,GAAGwD,UAAU0P,OAAQzJ,SAASzJ,GAAGuT,QACpE8N,GAAS7S,KAAK8S,KAAKpE,EAAMhiB,EAAGgiB,EAAM7Y,EAAG+c,EAAalmB,EAAGkmB,EAAa/c,IAAM,EAAIib,EAAMgB,WAAW,IAAIzN,OAAOqK,EAAMhiB,EAAGgiB,EAAM7Y,GAAI+b,IAAQ,IAAM,MAE7I3W,SAASzJ,GAAGwD,UAAUkR,qBAAkBrJ,GACnCpD,MAAMoZ,GAAQ,KACZE,EAAO/O,OAAOuB,SAASlB,OAAOC,WAAWrJ,SAASzJ,GAAGwD,UAAU0P,QAAS,IAAIL,OAAOqK,EAAMhiB,EAAGgiB,EAAM7Y,GAAGkT,SAAS6J,IAC9GzP,EAAM4P,EAAOnmB,KAAKkD,GAAK,EAAI,EAAKijB,EAAOnmB,KAAKkD,GAAK,GAAK,EAAI,EAE9DmL,SAASzJ,GAAGwD,UAAUkR,gBAAkB6H,EAAS7H,gBACjDjL,SAASzJ,GAAGwD,UAAU0R,QAAWmM,EAAQ1P,EAAM4K,EAASyE,UACxDvX,SAASzJ,GAAGwD,UAAU2R,eACtBoH,EAASyE,UAAYK,EAAQ1P,EAGhClI,SAASzJ,GAAGwD,UAAUuF,UAAS,GAC/BU,SAASlJ,SAGTihB,EAAiB,CACb,KAAI/X,SAASzJ,GAAGsT,QAAQ3P,IAAM4Y,EAASjJ,QAAQ3P,KAAKmN,QAAQ,YAG9D,GAAqB,MAAjByL,EAASgE,KAAc,KACzBkB,EAAQnC,EAAMa,eAAe1W,SAASzJ,GAAGwD,UAAU0P,OAASzJ,SAASzJ,GAAGwD,UAAUuP,QAAU,EAAGtJ,SAASzJ,GAAGuT,QAC3G6N,EAAe9B,EAAMoC,iBAAiBnF,EAASW,MAAOuE,GAEtDJ,GAAS7S,KAAK8S,KAAKpE,EAAMhiB,EAAGgiB,EAAM7Y,EAAG+c,EAAalmB,EAAGkmB,EAAa/c,IAAM,EAAIib,EAAMgB,WAAW,IAAIzN,OAAOqK,EAAMhiB,EAAGgiB,EAAM7Y,GAAIod,IAAU,IAAM,MAE/IhY,SAASzJ,GAAGwD,UAAUkR,qBAAkBrJ,GACnCpD,MAAMoZ,GAAQ,KACZE,EAAO/O,OAAOuB,SAASlB,OAAOC,WAAWrJ,SAASzJ,GAAGwD,UAAU0P,QAAS,IAAIL,OAAOqK,EAAMhiB,EAAGgiB,EAAM7Y,GAAGkT,SAAS6J,IAC9GzP,EAAM4P,EAAOnmB,KAAKkD,GAAK,EAAI,EAAKijB,EAAOnmB,KAAKkD,GAAK,GAAK,EAAI,EAE9DmL,SAASzJ,GAAGwD,UAAUkR,gBAAkB6H,EAAS7H,oBAC7C6B,GAAS9M,SAASzJ,GAAGwD,UAAU0R,QAAUmM,EAAQ1P,EAAM4K,EAASyE,YAAcvX,SAASzJ,GAAGwD,UAAU0R,OACxGqB,EAAQ/H,KAAKsS,UAAUvK,EAAO,GAAK,KACnC9M,SAASzJ,GAAGwD,UAAU0R,QAAUqB,EAChC9M,SAASzJ,GAAGwD,UAAUwR,QAAUuB,EAChC9M,SAASzJ,GAAGwD,UAAU2R,eACtB1L,SAASzJ,GAAGwD,UAAUyR,eACtBsH,EAASyE,UAAYK,EAAQ1P,EAGhClI,SAASzJ,GAAGwD,UAAUuF,UAAS,GAC/BU,SAASlJ,SAGTihB,EAAiB,CACb,KAAI/X,SAASzJ,GAAGsT,QAAQ3P,IAAM4Y,EAASjJ,QAAQ3P,KAAKmN,QAAQ,QAhMvD6Q,aAGD,0BAkMQpjB,MACE,KAAjBge,EAASgE,SACN/R,KAAK8S,KAAK7X,SAASzJ,GAAGuT,OAAOrY,EAAGuO,SAASzJ,GAAGuT,OAAOlP,EAAG6Y,EAAMhiB,EAAGgiB,EAAM7Y,GAAK,GAAI,KAC3E+c,EAAe7E,EAASW,MACxB0E,EAAgBpP,OAAOyB,MAAMsI,EAASW,MAAM3F,SAAS,IAAI1E,OAAOpJ,SAASzJ,GAAGuT,OAAOrY,EAAGuO,SAASzJ,GAAGuT,OAAOlP,IAAK,IAAIwO,OAAOqK,EAAMhiB,EAAGgiB,EAAM7Y,GAAGkT,SAAS,IAAI1E,OAAOpJ,SAASzJ,GAAGuT,OAAOrY,EAAGuO,SAASzJ,GAAGuT,OAAOlP,QAC5Mud,EAAgBpP,OAAOsB,eAAe8N,IACjC3Z,MAAM2Z,GAAgB,CAExBnY,SAASzJ,GAAGwD,UAAUuP,OAASP,OAAOqP,UAAUtF,EAAStI,MAAQ2N,EAAe,CAAC,EAAGxmB,KAAKkD,SACrFiV,EAAS9J,SAASzJ,GAAGuT,OACzB6N,EAAe7N,EAAOzG,IAAIyP,EAASW,MAAM3F,SAAShE,GAAQW,OAAO0N,IAGpEnY,SAASzJ,GAAGwD,UAAUkR,qBAAkBrJ,EACxC5B,SAASzJ,GAAGwD,UAAUsO,gBAAiB,EACvCrI,SAASzJ,GAAGwD,UAAUuF,WACtBU,SAASlJ,SAITihB,EAAiB,CACb,WAAUhP,OAAOsP,eAAerY,SAASzJ,GAAGwD,UAAUuP,OAAOjC,QAAQ,MACrE,kBAAiB0B,OAAOsP,gBAAgBF,aAG3C,GAAqB,KAAjBrF,EAASgE,SACb/R,KAAK8S,KAAK7X,SAASzJ,GAAGuT,OAAOrY,EAAGuO,SAASzJ,GAAGuT,OAAOlP,EAAG6Y,EAAMhiB,EAAGgiB,EAAM7Y,GAAK,GAAI,KAE3E+c,EAAe7E,EAASW,MACxB0E,EAAgBpP,OAAOyB,MAAMsI,EAASW,MAAM3F,SAAS,IAAI1E,OAAOpJ,SAASzJ,GAAGuT,OAAOrY,EAAGuO,SAASzJ,GAAGuT,OAAOlP,IAAK,IAAIwO,OAAOqK,EAAMhiB,EAAGgiB,EAAM7Y,GAAGkT,SAAS,IAAI1E,OAAOpJ,SAASzJ,GAAGuT,OAAOrY,EAAGuO,SAASzJ,GAAGuT,OAAOlP,QAC5Mud,EAAgBpP,OAAOsB,eAAe8N,IACjC3Z,MAAM2Z,GAAgB,CACxBnY,SAASzJ,GAAGwD,UAAU0P,OAASV,OAAOqP,UAAUtF,EAAStI,MAAQ2N,EAAe,CAACxmB,KAAKkD,GAAK,EAAG,EAAElD,KAAKkD,GAAG,QACpGiV,EAAS9J,SAASzJ,GAAGuT,OACzB6N,EAAe7N,EAAOzG,IAAIyP,EAASW,MAAM3F,SAAShE,GAAQW,OAAO0N,IAGpEnY,SAASzJ,GAAGwD,UAAUsO,gBAAiB,EACvCrI,SAASzJ,GAAGwD,UAAUuF,WACtBU,SAASlJ,SAGTihB,EAAiB,CACb,WAAUhP,OAAOsP,eAAerY,SAASzJ,GAAGwD,UAAU0P,OAAOpC,QAAQ,MACrE,kBAAiB0B,OAAOsP,gBAAgBF,aAG3C,GAAqB,MAAjBrF,EAASgE,MACb/R,KAAK8S,KAAK7X,SAASzJ,GAAGuT,OAAOrY,EAAGuO,SAASzJ,GAAGuT,OAAOlP,EAAG6Y,EAAMhiB,EAAGgiB,EAAM7Y,GAAK,GAAI,KAC3E+c,EAAe7E,EAASW,MACxB0E,EAAgBpP,OAAOyB,MAAMsI,EAASW,MAAM3F,SAAS,IAAI1E,OAAOpJ,SAASzJ,GAAGuT,OAAOrY,EAAGuO,SAASzJ,GAAGuT,OAAOlP,IAAK,IAAIwO,OAAOqK,EAAMhiB,EAAGgiB,EAAM7Y,GAAGkT,SAAS,IAAI1E,OAAOpJ,SAASzJ,GAAGuT,OAAOrY,EAAGuO,SAASzJ,GAAGuT,OAAOlP,QAC5Mud,EAAgBpP,OAAOsB,eAAe8N,IACjC3Z,MAAM2Z,GAAgB,CACxBnY,SAASzJ,GAAGwD,UAAUuP,OAASwJ,EAASxJ,OAAS6O,EACjDnY,SAASzJ,GAAGwD,UAAU0P,OAASqJ,EAASrJ,OAAS0O,MAC7CrO,EAAS9J,SAASzJ,GAAGuT,OACzB6N,EAAe7N,EAAOzG,IAAIyP,EAASW,MAAM3F,SAAShE,GAAQW,OAAO0N,IAGpEnY,SAASzJ,GAAGwD,UAAUsO,gBAAiB,EACvCrI,SAASzJ,GAAGwD,UAAUuF,WACtBU,SAASlJ,SAGTihB,EAAiB,CACb,WAAUhP,OAAOsP,eAAerY,SAASzJ,GAAGwD,UAAUuP,UACtD,WAAUP,OAAOsP,eAAerY,SAASzJ,GAAGwD,UAAU0P,UACtD,kBAAiBV,OAAOsP,gBAAgBF,QAnQtCG,aAGD,iBAsQGxjB,OAGVyjB,EAAI,CAAEna,KAAM0U,EAASW,MAAMhiB,EAAGoa,KAAMiH,EAASW,MAAM7Y,EAAGyD,KAAMoV,EAAMhiB,EAAGqa,KAAM2H,EAAM7Y,GAErFkY,EAASzG,WAAWjO,KAAOzM,KAAKoW,IAAIwQ,EAAEna,KAAMma,EAAEla,MAAOyU,EAASzG,WAAWR,KAAOla,KAAKoW,IAAIwQ,EAAE1M,KAAM0M,EAAEzM,MACnGgH,EAASzG,WAAWhO,KAAO1M,KAAKqW,IAAIuQ,EAAEna,KAAMma,EAAEla,MAAOyU,EAASzG,WAAWP,KAAOna,KAAKqW,IAAIuQ,EAAE1M,KAAM0M,EAAEzM,MACnGgH,EAASzG,WAAWnU,MAAQ4a,EAASzG,WAAWhO,KAAOyU,EAASzG,WAAWjO,KAC3E0U,EAASzG,WAAWjU,OAAS0a,EAASzG,WAAWP,KAAOgH,EAASzG,WAAWR,KAC5E0M,EAAIzF,EAASzG,WAETkM,EAAErgB,MAAQ,IAAMqgB,EAAEngB,OAAS,KAC5BmgB,EAAErgB,MAAQ,EACVqgB,EAAEngB,OAAS,MAGVN,SAAS8I,cAAc,qBAAqB4X,SAAW1jB,EAAE2jB,SAAU,KAChEzkB,EAAI+U,OAAOuB,SAASlB,OAAOC,UAAU,GAAI,IAAID,OAAOpJ,SAASzJ,GAAG2B,MAAO8H,SAASzJ,GAAG6B,SACnFsgB,EAAM7C,EAAMa,aAAa1iB,EAAG8e,EAASW,OACrCxa,EAAI4c,EAAMoC,iBAAiB,IAAI7O,OAAOqK,EAAMhiB,EAAGgiB,EAAM7Y,GAAI8d,GAC7DH,EAAI,CAAEna,KAAM0U,EAASW,MAAMhiB,EAAGoa,KAAMiH,EAASW,MAAM7Y,EAAGyD,KAAM1M,KAAKgnB,MAAM1f,EAAExH,GAAIqa,KAAMna,KAAKgnB,MAAM1f,EAAE2B,IAChGkY,EAASzG,WAAWjO,KAAOzM,KAAKoW,IAAIwQ,EAAEna,KAAMma,EAAEla,MAAOyU,EAASzG,WAAWR,KAAOla,KAAKoW,IAAIwQ,EAAE1M,KAAM0M,EAAEzM,MACnGgH,EAASzG,WAAWhO,KAAO1M,KAAKqW,IAAIuQ,EAAEna,KAAMma,EAAEla,MAAOyU,EAASzG,WAAWP,KAAOna,KAAKqW,IAAIuQ,EAAE1M,KAAM0M,EAAEzM,MACnGgH,EAASzG,WAAWnU,MAAQ4a,EAASzG,WAAWhO,KAAOyU,EAASzG,WAAWjO,KAC3E0U,EAASzG,WAAWjU,OAAS0a,EAASzG,WAAWP,KAAOgH,EAASzG,WAAWR,KAC5E0M,EAAIzF,EAASzG,gBAGbyG,EAAS0E,OAAOpU,UAAU7L,OAAO,KACjCub,EAAS0E,OAAOpU,UAAU7L,OAAO,KAC7BghB,EAAEngB,OAAS,IAAMmgB,EAAErgB,MAAQ,IAE5B4a,EAAS0E,OAAOpU,UAAUC,IAAI,KAC9BkV,EAAE1M,KAAO,EACT0M,EAAEzM,KAAO9L,SAASzJ,GAAG6B,OACrBmgB,EAAEngB,OAAS4H,SAASzJ,GAAG6B,QAEjBmgB,EAAEngB,OAAS,IAAMmgB,EAAErgB,MAAQ,KAEjC4a,EAAS0E,OAAOpU,UAAUC,IAAI,KAC9BkV,EAAEna,KAAO,EACTma,EAAEla,KAAO2B,SAASzJ,GAAG2B,MACrBqgB,EAAErgB,MAAQ8H,SAASzJ,GAAG2B,WAKxB0gB,EAAY5Y,SAAS5C,KAAKC,aAAaC,WAAWtB,SAAW,QAAU,QAC3E8W,EAAS0E,OAAOhf,aAAa,QAAU,WAAU+f,EAAEna,kBAAkBma,EAAE1M,oBAAoB0M,EAAErgB,sBAAsBqgB,EAAEngB,2BAA2BwgB,KApTpIC,CAAQ/jB,GAIjBA,EAAE2iB,4BAOCxB,EAAape,OACfihB,EAAY,CAAExG,KAAM,EAAG8D,IAAK,UAC5Bve,EAAIkhB,eACLD,EAAY7C,EAAape,EAAIkhB,eAEzB,CAAEzG,KAAMza,EAAImhB,WAAaF,EAAUxG,KAAM8D,IAAKve,EAAIohB,UAAYH,EAAU1C,KARlF3B,OAAOpT,iBAAiB,YAAaqW,GAAiB,GACtDjD,OAAOpT,iBAAiB,YAAaqW,EAAiB,CAAEwB,SAAS,EAAOC,SAAS,QAU7EC,EAAgBtkB,OACb6gB,KACDA,GAAe,EACO,SAAlB7C,EAAS5Q,KAAiB,KAG3BsT,cAAcI,GACdnC,EAAM8C,IAAM,IAAInN,OAAOqK,EAAM8C,IAAI9kB,EAAGgiB,EAAM8C,IAAI3b,GACvC6Y,EAAM8C,IAAIrc,IAAM,IACpBuZ,EAAM8C,IAAM9C,EAAM8C,IAAIhN,KAAK,IAE9BqM,EAAeH,YAAY,KACpBhC,EAAM8C,IAAIrc,IAAM,IACjBuZ,EAAM8C,IAAM9C,EAAM8C,IAAIhN,KAAK,KAE9BvJ,SAASzJ,GAAGwD,UAAU+Q,UAAU2I,EAAM8C,KACtCvW,SAASlJ,SACL2c,EAAM8C,IAAIrc,KAAO,GAAGsb,cAAcI,IACtC,SAEG9C,EAAS5Q,KAAKsU,OAAO,WAAa,GAGnB,KAAjB1D,EAASgE,KACV9W,SAAS5C,KAAKC,aAAa0S,SAASzU,MAAQwX,EAASwE,SAC5B,KAAjBxE,EAASgE,KACjB9W,SAAS5C,KAAKC,aAAa2S,SAAS1U,MAAQwX,EAASwE,SAC5B,MAAjBxE,EAASgE,OACjB9W,SAAS5C,KAAKC,aAAa0S,SAASzU,MAAQwX,EAASmE,UACrDjX,SAAS5C,KAAKC,aAAa2S,SAAS1U,MAAQwX,EAASoE,WAExDlX,SAAS5I,QAEe,SAAlB0b,EAAS5Q,OACf4Q,EAAS0E,OAAOjgB,SACZub,EAASzG,WAAWnU,OAAS4a,EAASzG,WAAWjU,SAClD4H,SAASzJ,GAAGwD,UAAUkR,qBAAkBrJ,EACxC5B,SAASzJ,GAAGwD,UAAU4R,YAAY3L,SAASzJ,GAAGwD,UAAUqS,YAAY0G,EAASzG,cAEhF0L,EAAiB,CACd,OACC,WAAU/X,SAASzJ,GAAG6C,SAASgF,QAC/B,WAAU4B,SAASzJ,GAAG6C,SAASiF,OAChC,KACA,OACC,WAAU2B,SAASzJ,GAAG6C,SAASyS,QAC/B,WAAU7L,SAASzJ,GAAG6C,SAAS0S,OAChC,MAEH9L,SAASlJ,oBAuPTihB,EAAiBsB,OACnBC,EAAO,qCACN,IAAIC,KAAOF,EACbC,GAAQ,MAAQC,EAAM,OAEzBD,GAAQ,SACRxG,EAASC,QAAQyG,WAAWF,GAC5BxG,EAASC,QAAQ0G,OAzPpBhF,OAAOpT,iBAAiB,UAAW+X,GACnC3E,OAAOpT,iBAAiB,WAAY+X,GAEpCxH,aAAavQ,iBAAiB,aAAevM,IAC1CA,EAAE2iB,qBAEEzB,EAAYC,EAAa3e,OAAOO,KACpC4b,EAAMhiB,EAAIqD,EAAEohB,QAAUF,EAAU1D,KAChCmB,EAAM7Y,EAAI9F,EAAEqhB,QAAUH,EAAUI,QAE5BtM,EAAS9J,SAASzJ,GAAGuT,OACrB4P,EAAWjG,EACXle,YAAY+G,KAAKub,KAAKpE,EAAMhiB,EAAGgiB,EAAM7Y,EAAGkP,EAAOrY,EAAGqY,EAAOlP,GAAK,KAC/D8e,EAAW5P,GAEVhV,EAAE6kB,WAAa,GAChB3Z,SAASzJ,GAAGwD,UAAUgR,OAAO,IAAI3B,OAAOsQ,EAASjoB,EAAGioB,EAAS9e,IAC7DoF,SAASlJ,WAETkJ,SAASzJ,GAAGwD,UAAUqR,QAAQ,IAAIhC,OAAOsQ,EAASjoB,EAAGioB,EAAS9e,IAC9DoF,SAASlJ,qBC3OMqJ,IAErBsU,OAAOpT,iBAAiB,SAAUvI,GAClC2b,OAAOpT,iBAAiB,WAAW,SAAUkH,GAEtCrF,EAAeyQ,uBAChBzQ,EAAeyQ,sBAAuB,EACtC6B,cAActS,EAAewQ,oBAGhCxQ,EAAe0W,YAAa,KAE/BnF,OAAOpT,iBAAiB,YAAY,SAAUkH,GAEvCrF,EAAeyQ,uBAChBzQ,EAAeyQ,sBAAuB,EACtC6B,cAActS,EAAewQ,oBAGhCxQ,EAAe0W,YAAa,KAE/BnF,OAAOpT,iBAAiB,aAAa,SAAUvM,OAExC+kB,EAAc,oCAAoCC,KAAK5W,EAAe0Q,eAAemG,WACrF7W,EAAe0W,YAAcC,GAC9B3W,EAAe0Q,eAAe/P,WAIpC4Q,OAAOpT,iBAAiB,cAAc,SAAUvM,OAEzC+kB,EAAc,oCAAoCC,KAAK5W,EAAe0Q,eAAemG,WACrF7W,EAAe0W,YAAcC,GAC9B3W,EAAe0Q,eAAe/P,WAMpC/L,SAAS8I,cAAc,oBAAoBS,iBAAiB,QAAUvM,IACnEiP,EAAW,IAAIpE,KAGlB7H,SAAS8I,cAAc,sBAAsBS,iBAAiB,SAAQ,SAAUvM,OACzEklB,EAAQvY,EAAEjL,MACVyjB,EAAYD,EAAMtY,SAAS,WAC3B0E,EAAO6T,EAAY,UAAY,YAChC5T,EAAK4T,EAAY,YAAc,UAG9BA,EACDniB,SAAS8c,KAAKhU,cAAc,kBAAkB3I,YAAYzB,MAE1Dqd,EAAQjT,cAAc,WAAWoE,OAAOxO,MAG3CwjB,EAAME,YAAY9T,GAClB4T,EAAMG,SAAS9T,GAEfwN,EAAQzQ,UAAU7L,OAAO6O,GACzByN,EAAQzQ,UAAUC,IAAIgD,GAEtBvN,OAGH4c,mBChEI0E,EAAQC,IAETnU,WAAW,KACS,MAAbmU,GAAqBra,SAASzJ,GAAGwD,UAAUgR,SAAU/K,SAASlJ,WAAmBkJ,SAASzJ,GAAGwD,UAAUqR,UAAWpL,SAASlJ,UAC/HoP,WAAW,KACS,MAAbmU,GAAqBra,SAASzJ,GAAGwD,UAAUgR,SAAU/K,SAASlJ,WAAmBkJ,SAASzJ,GAAGwD,UAAUqR,UAAWpL,SAASlJ,UAC/HoP,WAAW,KACS,MAAbmU,GAAqBra,SAASzJ,GAAGwD,UAAUgR,SAAU/K,SAASlJ,WAAmBkJ,SAASzJ,GAAGwD,UAAUqR,UAAWpL,SAASlJ,UAC/HoP,WAAW,KACS,MAAbmU,GAAqBra,SAASzJ,GAAGwD,UAAUgR,SAAU/K,SAASlJ,WAAmBkJ,SAASzJ,GAAGwD,UAAUqR,UAAWpL,SAASlJ,UAC/HoP,WAAW,KACS,MAAbmU,GAAqBra,SAASzJ,GAAGwD,UAAUgR,SAAU/K,SAASlJ,WAAmBkJ,SAASzJ,GAAGwD,UAAUqR,UAAWpL,SAASlJ,UAC/HoP,WAAW,KACS,MAAbmU,GAAqBra,SAASzJ,GAAGwD,UAAUgR,SAAU/K,SAASlJ,WAAmBkJ,SAASzJ,GAAGwD,UAAUqR,UAAWpL,SAASlJ,UAC/HoP,WAAW,KACS,MAAbmU,GAAqBra,SAASzJ,GAAGwD,UAAUgR,SAAU/K,SAASlJ,WAAmBkJ,SAASzJ,GAAGwD,UAAUqR,UAAWpL,SAASlJ,UAC/HoP,WAAW,KACS,MAAbmU,GAAqBra,SAASzJ,GAAGwD,UAAUgR,SAAU/K,SAASlJ,WAAmBkJ,SAASzJ,GAAGwD,UAAUqR,UAAWpL,SAASlJ,WAhB3I,KAAA,KAAA,KAAA,KAAA,KAAA,KAAA,OA2BfgB,SAAS8I,cAAc,gBAAgBS,iBAAiB,QAAS,KAC9D+Y,EAAK,QAGRtiB,SAAS8I,cAAc,iBAAiBS,iBAAiB,QAAS,KAC/D+Y,EAAK,SAKKtiB,SAAS6L,iBAAiB,4CAChChB,QAAQ2X,IACZxH,EAAS5Q,KAAOoY,EAAG9B,QAAU8B,EAAGC,QAAQrY,KAAO4Q,EAAS5Q,KACxDoY,EAAGjZ,iBAAiB,SAAU,KAC3ByR,EAAS5Q,KAAOoY,EAAG9B,QAAU8B,EAAGC,QAAQrY,KAAO4Q,EAAS5Q,SAI9DpK,SAAS8I,cAAc,SAASS,iBAAiB,QAAS,KACvDrB,SAASzJ,GAAG4S,QACZnJ,SAASlJ,WAGZgB,SAAS8I,cAAc,aAAaS,iBAAiB,QAAS,KAC3DrB,SAASzJ,GAAGsY,WACZ7O,SAASlJ,WDYZ0jB,YEpEqBC,IAErBvX,EAAe0Q,eAAevS,iBAAiB,SAAS,SAAUvM,GAC5C,oCAAoCglB,KAAKjG,EAAQkG,YAEjEjiB,SAAS8I,cAAc,sBAAsBiD,YAE5C7L,EAASF,SAAS8I,cAAc,qBAEhC8Z,EADQjZ,EAAEjL,MACYkL,SAAS,WAC/B0E,EAAOsU,EAAgB,UAAY,YACpCrU,EAAKqU,EAAgB,YAAc,UAEtCxX,EAAe0Q,eAAexQ,UAAU7L,OAAO6O,GAC/ClD,EAAe0Q,eAAexQ,UAAUC,IAAIgD,GAE5CrO,EAAOoL,UAAU7L,OAAO6O,GACxBpO,EAAOoL,UAAUC,IAAIgD,GACjBqU,EACD5iB,SAAS8c,KAAKhU,cAAc,kBAAkB3I,YAAYiL,EAAe0Q,gBAEzE5b,EAAOmc,aAAajR,EAAe0Q,eAAgB5b,EAAO2iB,mBAEzDtG,EAAQuG,aACT9hB,IAGHoK,EAAeC,eAAe7B,WAGjC0R,IAAI6H,KAAK/iB,SAAS8c,KAAKhU,cAAc,8BC9BzB,eAERka,EAASrZ,EAAE,qBACZsZ,EAAKtZ,EAAEyB,EAAe0Q,gBAEzBkH,EAAOtW,KAAK,WAAW,WACjBtB,EAAenC,UAAUO,WAG/BG,EAAE3J,SAAS8c,MAAMoG,SAAS,yBAA0B,wBAAwB,SAAUlmB,GACnFoO,EAAe0W,YAAa,KAG/BnY,EAAE,YAAYuZ,SAAS,QAAS,cAAc,SAAUlmB,GACjDimB,EAAGrZ,SAAS,SACbqZ,EAAGlX,WAOTpC,EAAE,0CAA0CwZ,MAAK,SAAU1X,GACxD9B,EAAEjL,MAAM8R,GAAG,SAAS,eACb0R,EAAQvY,EAAEjL,MACVwjB,EAAMtY,SAAS,oBAChBwB,EAAenC,UAAUma,IAAIzZ,EAAE,8BAA+BuY,GAAO9S,KAAK,WAClE8S,EAAMtY,SAAS,aACvBwB,EAAenC,UAAUma,IAAIzZ,EAAE,iBAAkBuY,GAAO9S,KAAK,WAE7DhE,EAAenC,UAAUma,IAAI1kB,KAAKqP,aAAa,WAElD3C,EAAeC,eAAe7B,cAIpCG,EAAE,4CAA4CwZ,MAAK,SAAU1X,GAC1D9B,EAAEjL,MAAM8R,GAAG,SAAS,eACb0R,EAAQvY,EAAEjL,MACVwjB,EAAMtY,SAAS,oBAChBwB,EAAenC,UAAUoa,MAAM1Z,EAAE,8BAA+BuY,GAAO9S,KAAK,aACpE8S,EAAMtY,SAAS,aACvBwB,EAAenC,UAAUoa,MAAM1Z,EAAE,iBAAkBuY,GAAO9S,KAAK,aAE/DhE,EAAenC,UAAUoa,MAAM3kB,KAAKqP,aAAa,aAEpD3C,EAAeC,eAAe7B,cAIpCG,EAAE,2CAA2CwZ,MAAK,SAAU1X,GACzD9B,EAAEjL,MAAM8R,GAAG,SAAS,eACb0R,EAAQvY,EAAEjL,MACVwjB,EAAMtY,SAAS,oBAChBwB,EAAenC,UAAUoa,MAAM1Z,EAAE,8BAA+BuY,GAAO9S,KAAK,YACpE8S,EAAMtY,SAAS,aACvBwB,EAAenC,UAAUoa,MAAM1Z,EAAE,iBAAkBuY,GAAO9S,KAAK,YAE/DhE,EAAenC,UAAUoa,MAAM3kB,KAAKqP,aAAa,YAEpD3C,EAAenC,UAAUma,IAAI,KAC7BhY,EAAeC,eAAe7B,cAIpCG,EAAE,UAAU6G,GAAG,SAAS,WACrBpF,EAAenC,UAAUqa,UAAU,YAItC3Z,EAAE,cAAc6G,GAAG,aAAa,WACW,IAApCpF,EAAenC,UAAUI,QAC1B+B,EAAeC,eAAe5L,SAE9B2L,EAAenC,UAAUqa,UAAU,aAKtClY,EAAeyQ,sBAAuB,EACtCzN,YAAW,WACJhD,EAAeyQ,uBAChBzQ,EAAewQ,kBAAoB+B,aAAY,WAC5CvS,EAAenC,UAAUqa,UAAU,eACnC,QAEN,QAUN3Z,EAAE,YAAY6G,GAAG,SAAS,WACvBpF,EAAenC,UAAUqa,UAAU,WAGtC3Z,EAAE,aAAa6G,GAAG,SAAS,WACxBpF,EAAenC,UAAUqa,UAAU,YAGtC3Z,EAAE,UAAU6G,GAAG,SAAS,WACrBpF,EAAenC,UAAUqa,UAAU,SAGtC3Z,EAAE,YAAY6G,GAAG,SAAS,WACvBpF,EAAenC,UAAUqa,UAAU,WAGtC3Z,EAAE,UAAU6G,GAAG,SAAS,WACrBvE,EAAW,IAAIpE,EAAgB6D,SAASN,EAAeC,eAAerC,SAAS2C,iBAOtEhC,EAAE,UACR6G,GAAG,SAAS,eACX0R,EAAQvY,EAAEjL,MACV6kB,EAAOrB,EAAMsB,QAAQ,YACrBtB,EAAMtY,SAAS,UAChBsY,EAAME,YAAY,UAClBF,EAAMG,SAAS,QACfkB,EAAKnB,YAAY,gBACjBmB,EAAKlB,SAAS,sBAEVH,EAAMtY,SAAS,QAAS,CACbD,EACT,oDACA4Z,GAEGrU,YAAY,UAClBgT,EAAME,YAAY,QAClBmB,EAAKnB,YAAY,kBACb,CACQzY,EACT,oDACA4Z,GAEGrU,YAAY,UAClBgT,EAAMG,SAAS,UACfkB,EAAKlB,SAAS,oBAMvB1Y,EAAE,kCACE8Z,IAAI,yBACJjT,GAAG,SAAS,eAEN+S,EADQ5Z,EAAEjL,MACG8kB,QAAQ,YACrBD,EAAK3Z,SAAS,gBAAiB,KAC5B8Z,EAAQ/Z,EAAE,eAAgB4Z,GAClB5Z,EAAE,oDAAqD4Z,GAC7DrU,YAAY,UAClBwU,EAAMtB,YAAY,UAClBmB,EAAKnB,YAAY,oBAIbzY,EAAE,iBACR6G,GAAG,SAAS,eACZ0R,EAAQvY,EAAEjL,MACHiL,EAAE,0BAA2BuY,EAAMsB,QAAQ,UACjDtU,YAAY,UACjBgT,EAAMhT,YAAY,aD1IrByU,GExBY,SAASC,EAAS9J,GAG/B6C,OAAOkH,GAAKpmB,YACZkf,OAAO1L,OAAS4S,GAAGC,OACnBnH,OAAOoB,MAAQ8F,GAAG7F,MAClBrB,OAAO1P,KAAO4W,GAAGrf,KACjBmY,OAAOlX,QAAUA,EACjBkX,OAAOrL,OAASuS,GAAGE,SAASC,OAC5BrH,OAAOzT,GAAK+a,UAAUC,aAAa,GACnChb,GAAGib,OAAO,CACRC,sBAAsB,EACtBC,uBAAuB,EAEvBC,uBAAuB,EACvBC,aAAc,yDAEdC,SAAU,KAEZ7H,OAAOzU,SAAW,IAAI2R,EAAOC,GAC7B6C,OAAOnd,OAAS0I,SAAS1I,OACzBmd,OAAO7C,aAAeA,EAEtB9Y,EAAO0b,SAAW,CAAEtc,MAAO,IAAME,OAAQ,KACzCic,IACAvb,EAAO0b,SAAW,CAAEtc,MAAOuc,OAAOC,WAAYtc,OAAQqc,OAAOE,iBAEzD4H,EAAa9a,EAAE,mBACd,IAAIvN,EAAI,EAAGA,EAAIqoB,EAAWpoB,OAAQD,IACrC8M,GAAG0G,WAAW6U,EAAWroB,QAGvBsoB,EAAc/a,EAAG,ssBAqBd,GACP3J,SAAS8c,KAAKhU,cAAc,oBAAoBoE,OAAOwX,GAEvDrc,IACAsa,IAeF,eAIMgC,EAAiB5I,EAAQjT,cAAc,gBACvC8b,EAAmB,GAEvBjb,EAAEgb,GAAgBnI,UAAU,CAC1BwC,KAAM,IACN6F,YAAapI,EAAeV,GAE5B+I,MAAQ9nB,IACN2nB,EAAerZ,UAAUC,IAAI,YAC7BqZ,EAAiBG,YAAchJ,EAAQ1b,YACvCukB,EAAiBI,aAAehoB,EAAEioB,MAClCL,EAAiBM,OAASllB,SAAS8c,KAAKjY,MAAMqgB,OAC9CllB,SAAS8c,KAAKjY,MAAMqgB,OAAS,YAG/BC,KAAM,KACJR,EAAerZ,UAAU7L,OAAO,YAChCsc,EAAQlX,MAAMugB,UAAYT,EAAe9f,MAAM2V,KAC/Cxa,SAAS8c,KAAKjY,MAAMqgB,OAASN,EAAiBM,QAGhDG,KAAM,KACJtJ,EAAQlX,MAAMugB,UAAYT,EAAe9f,MAAM2V,KAC/CxZ,GAAO,MAxCXskB,GAiDF,eAIMC,EAAYvlB,SAAS8I,cAAc,mBACnC0c,EAAYD,EAAUzc,cAAc,uBAEpC2c,GAAe,EACnB9b,EAAE,sBAAsB+b,SAAS,CAC/B1G,KAAM,IACN2G,OAAQ,yBAERb,MAAO,SAAU9nB,EAAG4oB,GAClBH,GAAe,EACfF,EAAUja,UAAUC,IAAI,WACpBia,EAAUjlB,aAAeglB,EAAUhlB,eACrCglB,EAAU1gB,MAAMghB,UAAY,UAG9BD,EAAGE,KAAK,GAAGxa,UAAUC,IAAI,gBACrBtS,EAAK2sB,EAAGE,KAAK,GAAG/X,aAAa,UAC5B,IAAIgN,KAAS7S,SAAStJ,SACrBmc,EAAM9hB,KAAOA,GACf8hB,EAAMvR,SAMZ2b,KAAM,SAAUnoB,EAAG4oB,GACbH,GACFF,EAAUja,UAAU7L,OAAO,WAC3B8lB,EAAU1gB,MAAMghB,UAAY,OAC5BD,EAAGE,KAAK,GAAGxa,UAAU7L,OAAO,aAE5BgmB,GAAe,GAInBzmB,OAAQ,WACNgd,OAIJrS,EAAE,sBAAsBoc,mBA5FxBC,GAEAhlB,IACAkH,SAASzJ,GAAGsY,WACZ7O,SAASlJ,SAETyO,QAAQ/T,IAAI,WAAY,yDACxB+T,QAAQ/T,IAAI,mBAAoB,qCAEhCuS,EAAW,IAAIpE,UAyFjB+b,EAAS5jB,SAAS8I,cAAc"}