{"version":3,"file":"app.js","sources":["../../src/js/PLOTTO/global.js","../../src/js/PLOTTO/GraphChildren/GraphChild.js","../../src/js/PLOTTO/Canvas.js","../../src/js/PLOTTO/drawing/drawing.js","../../src/js/PLOTTO/GraphChildren/functions/Xfunction.js","../../src/js/PLOTTO/GraphChildren/functions/XYfunction.js","../../src/js/PLOTTO/GraphChildren/Point.js","../../src/js/PLOTTO/GraphChildren/EvalExpr.js","../../src/js/PLOTTO/GraphChildren/Variable.js","../../src/js/PLOTTO/GraphChildren/Empty.js","../../src/js/PLOTTO/GraphChildren/Slider.js","../../src/js/app/ChildControl.js","../../src/js/PLOTTO/GraphSetting/Transform.js","../../src/js/PLOTTO/GraphSetting/GraphSettings.js","../../src/js/PLOTTO/Coordinates.js","../../src/js/PLOTTO/Sketch.js","../../src/js/app/global.js","../../src/js/app/events/canvasEvents.js","../../src/js/app/events/toolsEvents.js","../../src/js/app/events/index.js","../../src/js/app/keypad/events.js","../../src/js/app/keypad/index.js","../../src/js/app/app.js"],"sourcesContent":["\r\nexport function generateName() {\r\n   return (Date.now() + generateName.randomNameNum++).toString(36);\r\n}\r\ngenerateName.randomNameNum = 0;\r\n\r\n// let mathFunc = {\r\n//    sin: x => Math.sin(x),\r\n//    cos: x => Math.cos(x),\r\n//    tan: x => Math.tan(x),\r\n//    asin: x => Math.asin(x),\r\n//    acos: x => Math.acos(x),\r\n//    atan: x => Math.atan(x),\r\n//    exp: x => Math.exp(x),\r\n//    ln: x => Math.log(x),\r\n//    log: function (x) {\r\n//       let base = arguments[1] || 10;\r\n//       return Math.log10(x) / Math.log(base);\r\n//    },\r\n//    sqrt: x => Math.sqrt(x),\r\n//    max: (...values) => Math.max(...values),\r\n//    min: (...values) => Math.min(...values),\r\n//    round: x => Math.round(x),\r\n//    abs: x => Math.abs(x),\r\n//    floor: x => Math.floor(x),\r\n//    ceil: x => Math.ceil(x),\r\n// };\r\n\r\nlet mathFunc = {\r\n\r\n   log: function (x, base = 10) {\r\n      return Math.log10(x) / Math.log10(base);\r\n   },\r\n   ln: x => Math.log(x, Math.E),\r\n\r\n   sec: x => 1 / Math.cos(x),\r\n   csc: x => 1 / Math.sin(x),\r\n   cot: x => 1 / Math.tan(x),\r\n\r\n   sinh: x => (Math.exp(x) - Math.exp(-x)) / 2,\r\n   cosh: x => (Math.exp(x) + Math.exp(-x)) / 2,\r\n   tanh: x => Math.sinh(x) / Math.cosh(-x),\r\n   asinh: x => Math.log,\r\n   acosh: x => (Math.exp(x) + Math.exp(-x)) / 2,\r\n   atanh: x => Math.sinh(x) / Math.cosh(-x),\r\n\r\n   gcd: (...values)=>{\r\n      let gcd_ = Math.abs(values[0]);\r\n      let a = Math.abs(values[1]);\r\n      if (gcd_ % 1 != 0 || a % 1 != 0)\r\n         return NaN;\r\n      gcd_ = a > gcd_ ? Math.gcd2(a, gcd_) : Math.gcd2(gcd_, a);\r\n\r\n      for (let i = 2; i < values.length; i++) {\r\n         a = Math.abs(values[i]);\r\n         if (a % 1 != 0)\r\n            return NaN;\r\n         gcd_ = a > gcd_ ? Math.gcd2(a, gcd_) : Math.gcd2(gcd_, a);\r\n      }\r\n\r\n      return gcd_;\r\n   },\r\n   \r\n   gcd2: (a, b) => {\r\n      a = Math.abs(a);\r\n      b = Math.abs(b);\r\n\r\n      if (b === 0 || a === 0) {\r\n         return a;\r\n      }\r\n      else if (a === b) {\r\n         return a;\r\n      }\r\n      else if (a % b === 0) {\r\n         return b;\r\n      }\r\n      else {\r\n         if (a - b > b) {\r\n            return Math.gcd(a - b, b);\r\n         }\r\n         else {\r\n            return Math.gcd(b, a - b);\r\n         }\r\n      }\r\n      return NaN;\r\n   },\r\n\r\n   lcm: (...values) => {\r\n      let product = 1;\r\n      let a;\r\n      for (let i = 0; i < values.length; i++) {\r\n         a = values[i];\r\n         if (a % 1 !== 0)\r\n            return NaN;\r\n         product *= a;\r\n      }\r\n      return Math.abs(product) / Math.pow(Math.gcd(...values), values.length - 1);\r\n   },\r\n   \r\n   mod: (a, b) =>{\r\n      return a % b;\r\n   }\r\n};\r\n\r\nObject.assign(Math, mathFunc);\r\n\r\nlet vars = {\r\n   pi: Math.PI,\r\n   e: mathFunc.sec,\r\n   \r\n};\r\n\r\nObject.assign(Math, vars);\r\n\r\nexport function getJSfunction(input, params, parse = true) {\r\n   if (input instanceof Function)\r\n      return input;\r\n   else if (input instanceof MagicalParser.Node) {\r\n      return MathPackage.Parser.parsedTOjsFunction(input, params);\r\n   } else {\r\n      return MathPackage.Parser.maximaTOjsFunction(input, params, parse);\r\n   }\r\n}\r\n","import { generateName } from './../global.js';\r\nexport default class GraphChild {\r\n\r\n    constructor(options) {\r\n        this.checkOptions(options);\r\n\r\n        if (!options.id) {\r\n            options.id = generateName();\r\n        }\r\n\r\n        options.handlers = options.handlers || {};\r\n        options.renderable = options.hasOwnProperty('renderable') ? options.renderable : true;\r\n        \r\n        this.sketch = options.sketch; /// avoid error when defining the sketch after the id\r\n        Object.assign(this, options);\r\n        this.gs = this.sketch.gs;\r\n        this.gs.childrenIDs.push(options.id);\r\n\r\n    }\r\n    checkOptions(options) {\r\n        let propName;\r\n        if (!options.sketch) {\r\n            propName = 'sketch';\r\n            throw new Error('Your options passed to the shetchChild is not valid, it doesn\\'t has ' + propName + ' property, or it is falsy value');\r\n        }\r\n    }   \r\n    get id() {\r\n        return this._id;\r\n    }\r\n    set id(value) {\r\n        this._id = this.sketch.gs.checkId(value);\r\n    }\r\n\r\n    /**\r\n     * methods are here\r\n     */\r\n\r\n    render(canvas, handlerOptions = []) {\r\n        if (this.handlers.onrender) {\r\n            this.handlers.onrender(...handlerOptions);\r\n        }\r\n    }\r\n\r\n    remove(handlerArgs) {\r\n        this.sketch.children.delete(this.id);\r\n        this.gs.childrenIDs = this.gs.childrenIDs.filter(a => a !== this.id);\r\n        if (this.handlers.remove) this.handlers.remove(...handlerArgs);\r\n    }\r\n    \r\n    error(e) {\r\n        this.handlers.onerror(e);\r\n    }\r\n}\r\n","export default class Canvas{\r\n\r\n   /**\r\n    * to create an instance of Canvas class, this offer some good methods and propeties.\r\n    * @param {Objetc} options \r\n    * you can set parent, canvas, attributes which contains any attribute of html. \r\n    */\r\n   constructor(options = {}) {\r\n      this.elt = options.canvas || document.createElement(\"canvas\");\r\n      this.ctx = this.elt.getContext('2d');\r\n      if (options.parent) options.parent.appendChild(this.elt);\r\n      if (options.attributes) {\r\n         for (let [name, value] in attributes) {\r\n            this.elt.setAttribut(name, value);\r\n         }\r\n      }\r\n      this.font = { width: 15, family: 'Arial' };\r\n   }\r\n\r\n   resize(width, height) {\r\n      this.elt.width = width;\r\n      this.elt.height = height;\r\n   }\r\n   clear(fillStyle) {\r\n      if (fillStyle) {\r\n         this.ctx.fillStyle = fillStyle;\r\n         this.ctx.fillRect(0, 0, this.elt.clientWidth, this.elt.clientHeight);\r\n      } else {\r\n         this.ctx.clearRect(0, 0, this.elt.width, this.elt.height);\r\n      }\r\n   }\r\n   setFont(font) {\r\n      if (font.size) this.font.size = font.size;\r\n      if (font.family) this.font.family = font.family;\r\n      this.ctx.font = `${this.font.size}px ${this.font.family}`;\r\n   }\r\n   measureString(txt) {\r\n      let size = this.ctx.measureText(txt);\r\n      size.height = this.font.size;\r\n      return size;\r\n   }\r\n\r\n   //#region shapes\r\n\r\n   line(x1, y1, x2, y2) {\r\n      this.ctx.moveTo(x1, y1);\r\n      this.ctx.lineTo(x2, y2);\r\n   }\r\n\r\n   ellipse(x, y, radius1, radius2, rotation = 0, startAngle = 0, endAngle = Math.PI*2, counterClockWise = false) {\r\n      radius2 = radius2 || radius1;\r\n      this.ctx.beginPath();\r\n      this.ctx.ellipse(x, y, radius1, radius2 || radius1, rotation, startAngle, endAngle, counterClockWise);\r\n      this.ctx.fill();\r\n      this.ctx.stroke();\r\n   }\r\n\r\n   //#endregion\r\n\r\n}","import Canvas from './../Canvas.js';\r\nexport class pen{\r\n    constructor(color, weight = 1, style = 'solid'){\r\n        this.color = color;\r\n        this.weight = weight;\r\n        this.style = style;\r\n    }\r\n    setup(canvasORctx) {\r\n        canvasORctx = canvasORctx instanceof Canvas ? canvasORctx.ctx : canvasORctx;\r\n        canvasORctx.strokeStyle = this.color.toString();\r\n        canvasORctx.lineWidth = this.weight;\r\n    }\r\n}\r\n\r\nexport class color{\r\n    constructor(r, g, b, a) {\r\n        this.r = r;\r\n        this.g = g;\r\n        this.b = b;\r\n        this.a = a;\r\n    }\r\n\r\n    brightness() {\r\n        let num = this.r / 255;\r\n        let num2 = this.g / 255;\r\n        let num3 = this.b / 255;\r\n        let num4 = num;\r\n        let num5 = num;\r\n        if (num2 > num4)\r\n            num4 = num2;\r\n        if (num3 > num4)\r\n            num4 = num3;\r\n        if (num2 < num5)\r\n            num5 = num2;\r\n        if (num3 < num5)\r\n            num5 = num3;\r\n        return ((num4 + num5) / 2);\r\n    }\r\n\r\n    hue() {\r\n        if ((this.r == this.g) && (this.g == this.b))\r\n            return 0;\r\n        let num = this.r / 255;\r\n        let num2 = this.g / 255;\r\n        let num3 = this.b / 255;\r\n        let num7 = 0;\r\n        let num4 = num;\r\n        let num5 = num;\r\n        if (num2 > num4)\r\n            num4 = num2;\r\n        if (num3 > num4)\r\n            num4 = num3;\r\n        if (num2 < num5)\r\n            num5 = num2;\r\n        if (num3 < num5)\r\n            num5 = num3;\r\n        let num6 = num4 - num5;\r\n        if (num == num4)\r\n            num7 = (num2 - num3) / num6;\r\n        else if (num2 == num4)\r\n            num7 = 2 + ((num3 - num) / num6);\r\n        else if (num3 == num4)\r\n            num7 = 4 + ((num - num2) / num6);\r\n        num7 *= 60;\r\n        if (num7 < 0)\r\n            num7 += 360;\r\n        return num7;\r\n    }\r\n\r\n    saturation() {\r\n        let num = this.r / 255;\r\n        let num2 = this.g / 255;\r\n        let num3 = this.b / 255;\r\n        let num7 = 0;\r\n        let num4 = num;\r\n        let num5 = num;\r\n        if (num2 > num4)\r\n            num4 = num2;\r\n        if (num3 > num4)\r\n            num4 = num3;\r\n        if (num2 < num5)\r\n            num5 = num2;\r\n        if (num3 < num5)\r\n            num5 = num3;\r\n        if (num4 == num5)\r\n            return num7;\r\n        let num6 = (num4 + num5) / 2;\r\n        if (num6 <= 0.5)\r\n            return ((num4 - num5) / (num4 + num5));\r\n        return ((num4 - num5) / ((2 - num4) - num5));\r\n    }\r\n\r\n    isDark() {\r\n        if (this.brightness() > 0.40) {\r\n            return false;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    toArray() {\r\n        return [this.r, this.g, this.b, this.a];\r\n    }\r\n\r\n    toString() {\r\n        return `rgba(${this.r}, ${this.g}, ${this.b}, ${this.a})`;\r\n    }\r\n}\r\n\r\n/**\r\n * our color is an object has r g b as properties. {r: num, g: num, b: num}\r\n */\r\nexport class colorPackage{\r\n    static brightness(color) {\r\n        let num = color.r / 255;\r\n        let num2 = color.g / 255;\r\n        let num3 = color.b / 255;\r\n        let num4 = num;\r\n        let num5 = num;\r\n        if (num2 > num4)\r\n            num4 = num2;\r\n        if (num3 > num4)\r\n            num4 = num3;\r\n        if (num2 < num5)\r\n            num5 = num2;\r\n        if (num3 < num5)\r\n            num5 = num3;\r\n        return ((num4 + num5) / 2);\r\n    }\r\n\r\n    static hue(color) {\r\n        if ((color.r == color.g) && (color.g == color.b))\r\n            return 0;\r\n        let num = color.r / 255;\r\n        let num2 = color.g / 255;\r\n        let num3 = color.b / 255;\r\n        let num7 = 0;\r\n        let num4 = num;\r\n        let num5 = num;\r\n        if (num2 > num4)\r\n            num4 = num2;\r\n        if (num3 > num4)\r\n            num4 = num3;\r\n        if (num2 < num5)\r\n            num5 = num2;\r\n        if (num3 < num5)\r\n            num5 = num3;\r\n        let num6 = num4 - num5;\r\n        if (num == num4)\r\n            num7 = (num2 - num3) / num6;\r\n        else if (num2 == num4)\r\n            num7 = 2 + ((num3 - num) / num6);\r\n        else if (num3 == num4)\r\n            num7 = 4 + ((num - num2) / num6);\r\n        num7 *= 60;\r\n        if (num7 < 0)\r\n        num7 += 360;\r\n        return num7;\r\n    }\r\n\r\n    static saturation(color) {\r\n        let num = color.r / 255;\r\n        let num2 = color.g / 255;\r\n        let num3 = color.b / 255;\r\n        let num7 = 0;\r\n        let num4 = num;\r\n        let num5 = num;\r\n        if (num2 > num4)\r\n            num4 = num2;\r\n        if (num3 > num4)\r\n            num4 = num3;\r\n        if (num2 < num5)\r\n            num5 = num2;\r\n        if (num3 < num5)\r\n            num5 = num3;\r\n        if (num4 == num5)\r\n            return num7;\r\n        let num6 = (num4 + num5) / 2;\r\n        if (num6 <= 0.5)\r\n            return ((num4 - num5) / (num4 + num5));\r\n        return ((num4 - num5) / ((2 - num4) - num5));\r\n    }\r\n    static isDark(color) {\r\n        if (colorPackage.brightness(color) > 0.35) {\r\n            return false;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    static randomColor() {\r\n        return new color(MathPackage.Core.random(255), MathPackage.Core.random(255),  MathPackage.Core.random(255));\r\n    }\r\n\r\n    static randomDarkColor() {\r\n        let c = colorPackage.randomColor();\r\n        do { c = colorPackage.randomColor(); } while (!c.isDark());\r\n        return c;\r\n    }\r\n\r\n    static randomLightColor() {\r\n        let c = colorPackage.randomColor();\r\n        do { c = colorPackage.randomColor(); } while (c.isDark());\r\n        return c;\r\n    }\r\n}\r\n\r\nexport function measureString(txt) {\r\n    return canvas.elt.getContext(\"2d\").measureText(txt);\r\n}","/****************************************************************/\r\n/****************************************************************/\r\n/****************************************************************/\r\nimport GraphChild from '../GraphChild.js';\r\nimport drawing from '../../drawing/index.js';\r\nimport { getJSfunction } from '../../global.js';\r\n\r\nexport default class Xfunction extends GraphChild {\r\n   /** \r\n    * gs stands for graphSetting.\r\n   */\r\n   constructor(options) {\r\n      //#region \r\n      let propName;\r\n\r\n      propName = 'expr';\r\n      if (!options[propName]) {\r\n         throw new Error('Your options passed to the shetchChild is not valid, it doesn\\'t has ' + propName + ' property, or it is falsy value');\r\n      }\r\n\r\n      if (!options.pen) {\r\n         let c = options.sketch.coor.coorSettings.background.isDark() ? drawing.colorPackage.randomLightColor() : drawing.colorPackage.randomDarkColor();\r\n         c.a = 155;\r\n         options.pen = new drawing.pen(c, 2);\r\n      }\r\n      //#endregion\r\n\r\n      super(options);\r\n      this.expression = getJSfunction(this.expr, ['x'], true);\r\n   }\r\n\r\n   static fromString(expr, sketch) {\r\n      if (str.replace(/==+/, '').indexOf('=') > -1) throw new Error('there is \"=\" opertor!');\r\n      return new Xfunction({expr, sketch});\r\n   }\r\n\r\n   async render(canvas) {\r\n      if (this.renderable) {\r\n         try {\r\n            let ctx = canvas.ctx;\r\n            ctx.strokeStyle = this.pen.color.toString();\r\n            ctx.lineWidth = this.pen.weight;\r\n            let p, previousP, midP, continous;\r\n            ctx.beginPath();\r\n            for (let x = this.gs.viewport.xmin; x <= this.gs.viewport.xmax; x += this.gs.drawingStep) {\r\n               p = this.gs.coorTOpx(x, this.expression(x));\r\n               midP = this.gs.coorTOpx(x - this.gs.drawingStep / 2, this.expression(x - this.gs.drawingStep / 2));\r\n               // if valid add new point, unless add the array of point if has more than point\r\n               let valid = !isNaN(p.x) && !isNaN(p.y) &&\r\n                  Math.abs(p.x) < 100000 && Math.abs(p.y) < 100000 &&\r\n                  ((continous && (Math.sign(p.y - midP.y) === Math.sign(midP.y - previousP.y) || Math.abs(p.y - previousP.y) / this.gs.drawingStep < 20)) || !continous);\r\n               if (!valid) {\r\n                  if (continous) {\r\n                     ctx.stroke();\r\n                     ctx.beginPath();\r\n                     continous = false;\r\n                  }\r\n               }\r\n               else {\r\n                  if (continous)\r\n                     ctx.lineTo(p.x, p.y);\r\n                  else\r\n                     ctx.moveTo(p.x, p.y);\r\n   \r\n                  previousP = { x: p.x, y: p.y };\r\n                  continous = true;\r\n               }\r\n            }\r\n   \r\n            ctx.stroke();\r\n         } catch (e) {\r\n            this.error(e);\r\n         }\r\n      }\r\n      if (this.handlers.onrender) {\r\n         this.handlers.onrender(...handlerArgs);\r\n      }\r\n   }\r\n\r\n   toString() {\r\n      return this.expression;\r\n   }\r\n\r\n}\r\n","/****************************************************************/\r\n/****************************************************************/\r\n/****************************************************************/\r\nimport GraphChild from '../GraphChild.js';\r\nimport drawing from '../../drawing/index.js';\r\nimport { getJSfunction } from '../../global.js';\r\n\r\nexport default class XYfunction extends GraphChild {\r\n   /** \r\n    * gs stands for graphSetting.\r\n   */\r\n   constructor(options) {\r\n      //#region \r\n      let propName;\r\n\r\n      propName = 'expr';\r\n      if (!options[propName]) {\r\n         throw new Error('Your options passed to the shetchChild is not valid, it doesn\\'t has ' + propName + ' property, or it is falsy value');\r\n      }\r\n\r\n      if (!options.pen) {\r\n         let c = options.sketch.coor.coorSettings.background.isDark() ? drawing.colorPackage.randomLightColor() : drawing.colorPackage.randomDarkColor();\r\n         c.a = 155;\r\n         options.pen = new drawing.pen(c, 2);\r\n      }\r\n      //#endregion\r\n\r\n      super(options);\r\n      this.expression = getJSfunction(this.expr, ['x'], true);\r\n   }\r\n\r\n   static fromString(expr, sketch) {\r\n      if (str.replace(/==+/, '').indexOf('=') > -1) throw new Error('there is \"=\" opertor!');\r\n      return new XYfunction({ expr, sketch });\r\n   }\r\n\r\n   async render(canvas) {\r\n      if (this.renderable) {\r\n         try {\r\n            let ctx = canvas.ctx;\r\n            ctx.strokeStyle = this.pen.color.toString();\r\n            ctx.lineWidth = this.pen.weight;\r\n            let p, previousP, midP, continous;\r\n            ctx.beginPath();\r\n            for (let x = this.gs.viewport.xmin; x <= this.gs.viewport.xmax; x += this.gs.drawingStep) {\r\n               p = this.gs.coorTOpx(x, this.expression(x));\r\n               midP = this.gs.coorTOpx(x - this.gs.drawingStep / 2, this.expression(x - this.gs.drawingStep / 2));\r\n               // if valid add new point, unless add the array of point if has more than point\r\n               let valid = !isNaN(p.x) && !isNaN(p.y) &&\r\n                  Math.abs(p.x) < 100000 && Math.abs(p.y) < 100000 &&\r\n                  ((continous && (Math.sign(p.y - midP.y) === Math.sign(midP.y - previousP.y) || Math.abs(p.y - previousP.y) / this.gs.drawingStep < 20)) || !continous);\r\n               if (!valid) {\r\n                  if (continous) {\r\n                     ctx.stroke();\r\n                     ctx.beginPath();\r\n                     continous = false;\r\n                  }\r\n               }\r\n               else {\r\n                  if (continous)\r\n                     ctx.lineTo(p.x, p.y);\r\n                  else\r\n                     ctx.moveTo(p.x, p.y);\r\n\r\n                  previousP = { x: p.x, y: p.y };\r\n                  continous = true;\r\n               }\r\n            }\r\n\r\n            ctx.stroke();\r\n         } catch (e) {\r\n            this.error(e);\r\n         }\r\n      }\r\n      if (this.handlers.onrender) {\r\n         this.handlers.onrender(...handlerArgs);\r\n      }\r\n   }\r\n\r\n   toString() {\r\n      return this.expression;\r\n   }\r\n\r\n}\r\n","\r\nimport GraphChild from './GraphChild.js';\r\nimport { getJSfunction } from '../global.js';\r\nexport default class Point extends GraphChild {\r\n    // color is rgb\r\n    // gs stands for graphSetting\r\n    constructor(options) {\r\n        options.pen = options.pen || new drawing.pen(new drawing.color(0, 0, 255), 10);\r\n        \r\n        //#region \r\n        let propName;\r\n\r\n        propName = 'x';\r\n        if (!options[propName]) {\r\n            throw new Error('Your options passed to the shetchChild is not valid, it doesn\\'t has ' + propName + ' property, or it is falsy value');\r\n        }\r\n\r\n        propName = 'y';\r\n        if (!options[propName]) {\r\n            throw new Error('Your options passed to the shetchChild is not valid, it doesn\\'t has ' + propName + ' property, or it is falsy value');\r\n        }\r\n        //#endregion\r\n\r\n        super(options);\r\n        this.x = getJSfunction(this.x);\r\n        this.y = getJSfunction(this.y);\r\n    }\r\n\r\n    static fromString(str, sketch) {\r\n        if (str) {\r\n            let p;\r\n            let regex = /^\\s*\\(\\s*(.+?)\\s*,\\s*(.+?)\\s*\\)\\s*$/;\r\n            str.replace(regex, (match, x, y) => {\r\n                p = new Point({ sketch, x, y });\r\n            });\r\n            if (!p)\r\n                throw new Error('error while trying to add a point: ' + str);\r\n            else\r\n                return p;\r\n        }\r\n        else\r\n            throw new Error('your str is empty :\\'(');\r\n    }\r\n\r\n    async render(canvas, handlerArgs = []) {\r\n\r\n        if (this.renderable) {\r\n            switch (this.pen.style) {\r\n                case 'solid':\r\n                    canvas.strokeWeight(2);\r\n                    canvas.stroke(200);\r\n                    canvas.fill(...(this.pen.color.toArray().splice(0, 3)), 150);\r\n                    break;\r\n                case 'shallow':\r\n                    canvas.ctx.lineWidth = 3;\r\n                    canvas.ctx.strokeStyle(this.pen.color.toString());\r\n                    canvas.ctx.fillStyle(this.sketch.coor.coorSettings.background.toString());\r\n                    break;\r\n            }\r\n            let p = this.gs.coorTOpx(this.x.eval(), this.y.eval());\r\n            canvas.ellipse(p.x, p.y, this.pen.weight, this.pen.weight);\r\n        }\r\n\r\n        if (this.handlers.onrender) {\r\n            this.handlers.onrender(...handlerArgs);\r\n        }\r\n\r\n    }\r\n\r\n    toString() {\r\n        return `(${this.x}, ${this.y})`;\r\n    }\r\n\r\n}\r\n","import GraphChild from \"./GraphChild.js\";\r\nimport { getJSfunction } from '../global.js';\r\n\r\nexport default class EvalExpr extends GraphChild{\r\n   constructor(options) {\r\n      //#region \r\n      let propName;\r\n      propName = 'expr';\r\n      if (!options[propName]) {\r\n         throw new Error('Your options passed to the shetchChild is not valid, it doesn\\'t has ' + propName + ' property, or it is falsy value');\r\n      }\r\n      //#endregion\r\n      super(options);\r\n\r\n      if (this.expr.check({ type: 'operator', name: '=' })) {\r\n         this.eval = new Function(\r\n            'return ' +\r\n            MathPackage.Parser.__generateJS(this.expr.args[0]) +\r\n            ' === ' +\r\n            MathPackage.Parser.__generateJS(this.expr.args[1])\r\n         );         \r\n      } else {\r\n         this.evalFunc = getJSfunction(this.expr);\r\n      }\r\n   }\r\n\r\n   static fromString(str, sketch) {\r\n      if (str) {\r\n         // TODO: getting it from \"a = 1+2/4\"\r\n         return new EvalExpr({ expr: expr });\r\n      }\r\n      else\r\n         throw new Error('your expression is empty :\\'(');\r\n   }\r\n\r\n   eval() {\r\n      try {\r\n         return this.evalFunc();\r\n      } catch (e) {\r\n         this.error(e);\r\n      }\r\n   }\r\n\r\n}","import GraphChild from \"./GraphChild.js\";\r\nimport { getJSfunction } from '../global.js';\r\n\r\nexport default class Variable /** or slider */ extends GraphChild {\r\n\r\n   constructor(options) {\r\n      //#region \r\n      let propName;\r\n      propName = 'id';\r\n      if (!options[propName]) {\r\n         throw new Error('Your options passed to the shetchChild is not valid, it doesn\\'t has ' + 'name' + ' property, or it is falsy value');\r\n      }\r\n      propName = 'value';\r\n      if (!options[propName]) {\r\n         throw new Error('Your options passed to the shetchChild is not valid, it doesn\\'t has ' + 'name' + ' property, or it is falsy value');\r\n      }\r\n      //#endregion\r\n      super(options);\r\n\r\n      if (!this.id.match(/[a-zA-Z_]+\\d*/)) throw new Error(`${this.id} is invalid.`);\r\n\r\n      let val;\r\n      let funcBody;\r\n\r\n      if (this.value.check({ type: 'operator', name: '=' })) {\r\n         funcBody =\r\n            MathPackage.Parser.__generateJS(this.expr.args[0]) +\r\n            ' === ' +\r\n            MathPackage.Parser.__generateJS(this.expr.args[1]);\r\n      } else {\r\n         funcBody = MathPackage.Parser.__generateJS(this.value);\r\n      }\r\n      eval(`this.value = {func: ()=>${funcBody}, valueOf: function(){return this.func();}};`);\r\n      Math[this.id] = this.value;\r\n\r\n   }\r\n\r\n   setValue(value, handlerOptions = []) {\r\n      Math[this.id] = value;\r\n      if (this.handlers.onchange) this.handlers.onchange(...handlerOptions);\r\n   }\r\n\r\n   getValue() {\r\n      return Math[this.id];\r\n   }\r\n\r\n   remove() {\r\n      delete Math[this.id];\r\n      this.sketch.children.delete(this.id);\r\n      this.gs.childrenIDs = this.gs.childrenIDs.filter(a => a !== this.id);\r\n      if (this.handlers.remove) this.handlers.remove(...handlerArgs);\r\n   }\r\n\r\n}","import GraphChild from \"./GraphChild.js\";\r\n\r\nexport default class Empty extends GraphChild {\r\n   constructor(options) {\r\n      super(options);\r\n   }\r\n}","import GraphChild from \"./GraphChild.js\";\r\nimport { getJSfunction } from '../global.js';\r\n\r\nexport default class Slider /** or slider */ extends GraphChild {\r\n   \r\n   constructor(options) {\r\n      //#region \r\n      let propName;\r\n      propName = 'id';\r\n      if (!options[propName]) {\r\n         throw new Error('Your options passed to the shetchChild is not valid, it doesn\\'t has ' + propName + ' property, or it is falsy value');\r\n      }\r\n      propName = 'value';\r\n      if (!options[propName]) {\r\n         throw new Error('Your options passed to the shetchChild is not valid, it doesn\\'t has ' + propName + ' property, or it is falsy value');\r\n      }\r\n      //#endregion\r\n      super(options);\r\n\r\n      if (!this.id.match(/[a-zA-Z_]+\\d*/)) throw new Error(`${this.id} is invalid.`);\r\n      \r\n      Math[this.id] = this.value;\r\n\r\n   }\r\n\r\n   setValue(value, handlerOptions = []) {\r\n      Math[this.id] = value;\r\n      if (this.handlers.onchange) this.handlers.onchange(...handlerOptions);\r\n   }\r\n\r\n   getValue() {\r\n      return Math[this.id];\r\n   }\r\n\r\n   remove() {\r\n      delete Math[this.id];\r\n      this.sketch.children.delete(this.id);\r\n      this.gs.childrenIDs = this.gs.childrenIDs.filter(a => a !== this.id);\r\n      if (this.handlers.remove) this.handlers.remove(...handlerArgs);\r\n   }\r\n\r\n}","\r\nimport { addControl, removeControl, genRandomName, keypadSettings } from './global.js';\r\nimport { Xfunction, XYfunction, Point, EvalExpr, Variable, Empty, Slider } from '../PLOTTO/GraphChildren/index.js';\r\nexport default class ChildControl {\r\n   constructor(graphChild) {\r\n      this.elt = document.createElement('div');\r\n      this.elt.innerHTML = `\r\n      <li class=\"control\" id=\"${this.id}\">\r\n        <div class=\"side-status\" cancel-move>\r\n          <div class=\"order-container\">\r\n            <span class='order'>12</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"main\" cancel-move cancel-hiding-keypad>\r\n         <div class=script-container><span type=\"text\" class=\"script\"></span></div>\r\n        </div>\r\n        <div class=\"side-ctrl\">\r\n          <button class=\"closebtn-2 remove\" cancel-move><div class=\"inner\"></div></button>\r\n          <span class=\"move\">\r\n            <div>\r\n              <span>..</span>\r\n              <span>..</span>\r\n              <span>..</span>\r\n            </div>\r\n          </span>\r\n        </div>\r\n      </li>\r\n      `;\r\n      this.elt = (this.elt.childNodes[1]);\r\n\r\n      this.graphChild = graphChild || new Empty({ sketch: mySketch });\r\n      this.__updateElts(null, this.graphChild);\r\n\r\n      this.setEvents();\r\n   }\r\n\r\n   get id() {\r\n      return this._id;\r\n   }\r\n\r\n   set id(newid) {\r\n      this._id = newid;\r\n      this.elt.id = newid;\r\n   }\r\n\r\n   get graphChild() {\r\n      return this._graphChild;\r\n   }\r\n\r\n   set graphChild(value) {\r\n\r\n      value.handlers.onremove = (removeElt) => {\r\n         if (removeElt) this.remove(false);\r\n      };\r\n      value.handlers.onerror = (e) => {\r\n         this.error(e);\r\n      };\r\n      value.control = this;\r\n\r\n      mySketch.children.set(value.id, value); /// changing the id\r\n\r\n      this._graphChild = value;\r\n      this.id = value.id;\r\n\r\n   }\r\n\r\n   setEvents() {\r\n      let scriptELT = this.elt.querySelector('.script');\r\n      this.removeELT = this.elt.querySelector('.remove');\r\n      this.orderELT = this.elt.querySelector('.order');\r\n\r\n      //#region math, script field\r\n      let mathField = MQ.MathField(scriptELT, {\r\n         handlers: {\r\n            edit: () => {\r\n               this.update(mathField.latex());\r\n            },\r\n\r\n            enter: () =>{\r\n               let newChild = new ChildControl();\r\n               addControl(newChild, parseInt(this.orderELT.textContent));\r\n            },\r\n         }\r\n      });\r\n      this.mathField = mathField;\r\n      //#endregion \r\n\r\n      this.elt.querySelector('.main').addEventListener('focusin', (e) => {\r\n         this.focus(false);\r\n      });\r\n\r\n      this.elt.querySelector('.main').addEventListener('focusout', (e) => {\r\n         this.blur(false);\r\n      });\r\n\r\n      this.removeELT.addEventListener('click', (e) => {\r\n         this.remove();\r\n      });\r\n\r\n   }\r\n\r\n   update(latex, disableHandling) {\r\n      if (!(this.disableHandling || disableHandling)) {\r\n         try {\r\n            this._graphChild.remove();\r\n            let prev = this._graphChild;\r\n            if (latex === '') {\r\n               this.parsedScript = new MagicalParser.Node('');\r\n               this.graphChild = new Empty({ sketch: mySketch });\r\n            } else {\r\n               mySketch.gs.childrenIDs = mySketch.gs.childrenIDs.filter(a => a !== this.id); /// removing the id as if the id didn't not change but the values did, here will be error saying ${this.id} is defined before\r\n               if (latex) {\r\n                  this.parsedScript = null;\r\n                  this.parsedScript = mySketch.scriptParser.parse(MathPackage.Parser.latexTOmaxima(latex));\r\n               }\r\n               if (!this.parsedScript) return; /// syntax error ocurred, no possible update exist, this error happen before and now the parsedString is null, the error elt exists and stop updating all is done\r\n               let props = {};\r\n               if (this.graphChild && this.graphChild.pen) props.pen = this.graphChild.pen;\r\n               this.graphChild = mySketch.childFromParsed(this.parsedScript, props); /// the parsed string is valid, no error are predicted on fetching the gc\r\n            }\r\n            this.__updateElts(\r\n               prev,\r\n               this.graphChild\r\n            );\r\n            this.__checkVars();\r\n            this.__checkFunctions();\r\n         } catch (e) {\r\n            this.error(e);\r\n         }\r\n         // if (!this.id) {\r\n         //    /// consequently, am error occured, before assigning the new gc, after deleting the preious one.\r\n         //    /// reverse the effect\r\n         //    if (this._graphChild) {\r\n         //       this.id = this._graphChild.id;\r\n         //       mySkech.children.set(this.id, this.graphChild);\r\n         //       mySketch.gs.childrenIDs.push(this.id);\r\n         //    }\r\n         // }\r\n         this.__updateDependants();\r\n         mySketch.update();\r\n      }\r\n   }\r\n\r\n   __getAll(parsed, check = {}) {\r\n      let vars = [];\r\n      if (parsed.check(check)) {\r\n         return [parsed];\r\n      } else {\r\n         for (let i = 0; i < parsed.args.length; i++) {\r\n            vars = vars.concat(this.__getAll(parsed.args[i], check));\r\n         }\r\n      }\r\n      return vars;\r\n   }\r\n\r\n   __checkVars() {\r\n\r\n      let vars = this.__getAll(this.parsedScript, { type: 'variable' });\r\n      this.vars = vars;\r\n      let varsNotExist = [];\r\n      let vneError;\r\n\r\n      if (this.graphChild instanceof Xfunction || this.graphChild instanceof XYfunction) {\r\n         for (let i = 0; i < vars.length; i++){\r\n            if (!Math.hasOwnProperty(vars[i].name) && (vars[i].name !== 'x') && (vars[i].name !== 'y')) {\r\n               if (!varsNotExist.find(a => a.name === vars[i].name)) {\r\n                  varsNotExist.push(vars[i]);\r\n               }\r\n            } else {\r\n               /// attach that var to me\r\n            }\r\n         }\r\n      } else {\r\n         for (let i = 0; i < vars.length; i++) {\r\n            if (!Math.hasOwnProperty(vars[i].name) && !(this.graphChild instanceof Xfunction && vars[i].name === 'x')) {\r\n               if (!varsNotExist.find(a => a.name === vars[i].name)) {\r\n                  varsNotExist.push(vars[i]);\r\n               }\r\n            } else {\r\n               /// attach that var to me\r\n            }\r\n         }\r\n      }\r\n\r\n      if (this.varsNotExist /** from the previous handling not the current one */ && this.varsNotExist.length > 0) {\r\n         /// remove the previous elts\r\n         this.elt.querySelector('.main .vars-not-exist').remove();\r\n         this.varsNotExist = [];\r\n         if (this.isError) {\r\n            this.elt.classList.remove('error');\r\n            this.elt.querySelector('.error-elt').remove();\r\n            this.isError = false;\r\n         }\r\n      }\r\n\r\n      if (varsNotExist.length > 0) {\r\n         let addVarsElt = $(`\r\n               <div class='vars-not-exist'>\r\n                  ${varsNotExist.reduce((b, a) => { return b + `<button class=\"var\">${a.name}</button>`; }, '')}\r\n               </div>\r\n               `);\r\n\r\n         $('.var', addVarsElt).bind('click', function () {\r\n            alert('adding new var called: ' + this.innerText);\r\n         });\r\n\r\n         this.elt.querySelector('.main').append(addVarsElt[0]);\r\n         this.varsNotExist = varsNotExist;\r\n         this.graphChild.renderable = false;\r\n         throw new Error('Undefined vars [' + varsNotExist.reduce((b, a) => { return b + `${a.name}, `; }, '').slice(0, -2) + '], click the button to define.');\r\n      } else {\r\n         this.graphChild.renderable = true;\r\n      }\r\n\r\n   }\r\n\r\n   __checkFunctions() {\r\n\r\n      let funcs = this.__getAll(this.parsedScript, { type: 'function' });\r\n      this.funcs = funcs;\r\n      let funcsNotExist = [];\r\n      let fneError;\r\n\r\n      for (let i = 0; i < funcs.length; i++)\r\n         if (!Math.hasOwnProperty(funcs[i].name) && !(this.graphChild instanceof Xfunction && funcs[i].name === 'x')) {\r\n            if (!funcsNotExist.find(a => a.name === funcs[i].name)) {\r\n               funcsNotExist.push(funcs[i]);\r\n            }\r\n         } else {\r\n            /// attach that var to me\r\n         }\r\n\r\n      if (this.funcsNotExist /** from the previous handling not the current one */ && this.funcsNotExist.length > 0) {\r\n         /// remove the previous elts\r\n         this.elt.querySelector('.main .funcs-not-exist').remove();\r\n         this.funcsNotExist = [];\r\n         if (this.isError) {\r\n            this.elt.classList.remove('error');\r\n            this.elt.querySelector('.error-elt').remove();\r\n            this.isError = false;\r\n         }\r\n      }\r\n\r\n      if (funcsNotExist.length > 0) {\r\n         let addfuncsElt = $(`\r\n               <div class='funcs-not-exist'>\r\n                  ${funcsNotExist.reduce((b, a) => { return b + `<button class=\"var\">${a.name}</button>`; }, '')}\r\n               </div>\r\n               `);\r\n\r\n         $('.var', addfuncsElt).bind('click', function () {\r\n            alert('adding new var called: ' + this.innerText);\r\n         });\r\n\r\n         this.elt.querySelector('.main').append(addfuncsElt[0]);\r\n         this.funcsNotExist = funcsNotExist;\r\n         this.graphChild.renderable = false;\r\n         throw new Error('Undefined functions [' + funcsNotExist.reduce((b, a) => { return b + `${a.name}, `; }, '').slice(0, -2) + '], click the button to define.');\r\n      } else {\r\n         this.graphChild.renderable = true;\r\n      }\r\n\r\n   }\r\n\r\n   __updateDependants() {\r\n      if (this._graphChild instanceof Variable || this._graphChild instanceof Slider) {\r\n         let size = mySketch.children.size;\r\n         mySketch.children.forEach(gc => {\r\n            size--;\r\n            if (size < 0) return;\r\n            if (gc && gc !== this._graphChild && gc.control.vars) {\r\n               if (gc.control.vars.find(a => this._graphChild.id === a.name))\r\n                  gc.control.update();\r\n            }\r\n         });\r\n      } else if (this._graphChild instanceof Function) {\r\n         let size = mySketch.children.size;\r\n         mySketch.children.forEach(gc => {\r\n            size--;\r\n            if (size < 0) return;\r\n            if (gc && gc !== this._graphChild && gc.control.vars) {\r\n               if (gc.control.functions.find(a => this._graphChild.id === a.name))\r\n                  gc.control.update();\r\n            }\r\n         });\r\n      }\r\n   }\r\n\r\n   setScript(script, handle = true) {\r\n      if (!handle) {\r\n         this.disableHandling = true;\r\n      }\r\n      this.mathField.latex(script);\r\n      if (!handle) {\r\n         this.disableHandling = false;\r\n      }\r\n   }\r\n\r\n   focus(focusTheField = true) {\r\n      if (keypadSettings.focusedControl && keypadSettings.focusedControl !== this) keypadSettings.focusedControl.blur();\r\n      // setting this to be focuses\r\n      keypadSettings.focusedControl = this;\r\n      keypadSettings.mathField = this.mathField;\r\n      if (focusTheField) this.mathField.focus();\r\n      this.elt.classList.add('focus');\r\n   }\r\n\r\n   blur(blurTheField = true) {\r\n      // keypadSettings.focusedControl = undefined;\r\n      if (blurTheField) this.mathField.blur();\r\n      this.elt.classList.remove('focus');\r\n   }\r\n\r\n   error(e) {\r\n\r\n      if (this.isError) {\r\n         this.elt.querySelector('.error-elt').remove();\r\n      }\r\n      this.elt.classList.add('error');\r\n      this.isError = true;\r\n\r\n      this.graphChild.renderable = false;\r\n\r\n      let errorELT = $(`\r\n      <div class=\"error-elt\">\r\n         <i class=\"fas fa-bug\"></i>\r\n      </div>\r\n      `);\r\n      errorELT.balloon({\r\n         html: true, contents: e.message, minLifetime: 1000,\r\n         css: {\r\n            \"font-size\": '1em',\r\n         }\r\n      });\r\n      errorELT.hide();\r\n      this.elt.querySelector('.side-status').append(errorELT[0]);\r\n      errorELT.fadeOut(0).delay(200).fadeIn(500);\r\n\r\n   }\r\n\r\n   remove(removeGraphChild = true) {\r\n      removeControl(this);\r\n      if (removeGraphChild) {\r\n         if (this.graphChild) this.graphChild.remove();\r\n         this.__updateDependants();\r\n      }\r\n      mySketch.update();\r\n   }\r\n\r\n   //#region updatingElt\r\n\r\n   __updateElts(from, to) {\r\n      if (this.isError) {\r\n         this.elt.classList.remove('error');\r\n         this.elt.querySelector('.error-elt').remove();\r\n         this.isError = false;\r\n      }\r\n      if (to) {\r\n         if (to instanceof Empty) {\r\n            this.__toEmpty();\r\n         } else if (to instanceof Xfunction) {\r\n            if (from instanceof Xfunction) {\r\n               this.__updateXfunction();\r\n            } else {\r\n               this.__toXfunction();\r\n            }\r\n         } else if (to instanceof EvalExpr) {\r\n            if (from instanceof EvalExpr) {\r\n               this.__updateEvalExpr();\r\n            } else {\r\n               this.__toEvalExpr();\r\n            }\r\n         } else if (to instanceof Variable) {\r\n            if (from instanceof Variable) {\r\n               this.__updateVariable();\r\n            } else {\r\n               this.__toVariable();\r\n            }\r\n         } else if (to instanceof Slider) {\r\n            if (from instanceof Slider) {\r\n               this.__updateSlider();\r\n            } else {\r\n               this.__toSlider();\r\n            }\r\n         }\r\n      }\r\n   }\r\n\r\n   __toEmpty() {\r\n      this.elt.type = 'Xfunction';\r\n      let sideStatus = this.elt.querySelector('.side-status');\r\n      let eltsTOremove = this.elt.querySelectorAll('.special-elt');\r\n      eltsTOremove.forEach(elt => { elt.remove(); });\r\n   }\r\n\r\n   __toXfunction() {\r\n      this.elt.type = 'Xfunction';\r\n      let sideStatus = this.elt.querySelector('.side-status');\r\n      let eltsTOremove = this.elt.querySelectorAll('.special-elt');\r\n      eltsTOremove.forEach(elt => { elt.remove(); });\r\n      sideStatus.append($(`<div class=\"visible special-elt\"><div class=\"inner\"></div></div>`)[0]);\r\n      this.__updateXfunction();\r\n   }\r\n\r\n   __updateXfunction() {\r\n      let visibleELt = this.elt.querySelector('.side-status').querySelector('.visible');\r\n      visibleELt.setAttribute('style', `--color: ${this.graphChild.pen.color.toString()}`);\r\n   }\r\n\r\n   __toEvalExpr() {\r\n      this.elt.type = 'EvalExpr';\r\n      let eltsTOremove = this.elt.querySelectorAll('.special-elt');\r\n      eltsTOremove.forEach(elt => { elt.remove(); });\r\n\r\n      let value = $(`<div class=\"value special-elt\"><span></span></div>`);\r\n      value.hide();\r\n      this.elt.querySelector('.main').append(value[0]);\r\n      value.fadeIn();\r\n      let valueType = $(\r\n         `<div class=\"value-type special-elt\" type=decimal>\r\n            <span><i class=\"fas fa-divide\"></i></span>\r\n         </div>`\r\n      );\r\n      this.elt.querySelector('.side-status').append(valueType[0]);\r\n      valueType.click(() => {\r\n         switch (valueType.attr('type')) {\r\n            case 'decimal':\r\n               valueType.attr('type', 'fract');\r\n               value.height(56);\r\n               break;\r\n            case 'fract':\r\n               valueType.attr('type', 'quotient');\r\n               value.height(56);\r\n               break;\r\n            case 'quotient':\r\n               valueType.attr('type', 'decimal');\r\n               value.height(33);\r\n               break;\r\n         }\r\n         this.__updateEvalExpr();\r\n      });\r\n\r\n      this.specialProps = {\r\n         valueType: valueType[0],\r\n         valueElt: value[0]\r\n      };\r\n      this.graphChild.handlers.onrender = () => {\r\n         this.__updateEvalExpr();\r\n      };\r\n      // this.__updateEvalExpr(); /// will be done on updating the sktech\r\n   }\r\n\r\n   __updateEvalExpr() {\r\n      this.graphChild.handlers.onrender = () => {\r\n         this.__updateEvalExpr();\r\n      };\r\n\r\n      try {\r\n         let value = this.graphChild.eval();\r\n         if (isNaN(value)) throw new Error('error on evaluating, it seems to be cause by undefined variable.');\r\n         value += 0; /// +0 is here to convert the object (representing the valueOf a variable) into a number \r\n         switch (this.specialProps.valueType.getAttribute('type')) {\r\n            case 'decimal':\r\n               {\r\n                  this.specialProps.valueElt.innerHTML = `<span>${value}</span>`;\r\n               }\r\n               break;\r\n            case 'fract':\r\n               {\r\n                  let fraction = MathPackage.Core.fraction(value);\r\n                  if (fraction.denominator === 1) {\r\n                     this.specialProps.valueElt.innerHTML = `<span>${fraction.numerator}</span>`;\r\n                  } else {\r\n                     this.specialProps.valueElt.innerHTML = `<span>\\\\frac{${fraction.numerator}}{${fraction.denominator}}</span>`;\r\n                     MQ.StaticMath(this.specialProps.valueElt.children[0]);\r\n                  }\r\n               }\r\n               break;\r\n            case 'quotient':\r\n               {\r\n                  let fraction = MathPackage.Core.quotientRemainder(value);\r\n                  if (fraction.numerator === 0) {\r\n                     this.specialProps.valueElt.innerHTML = `<span>${fraction.quotient}</span>`;\r\n                  } else {\r\n                     if (fraction.quotient == 0) {\r\n                        this.specialProps.valueElt.innerHTML = `<span>\\\\frac{${fraction.numerator}}{${fraction.denominator}}</span>`;\r\n                     } else {\r\n                        this.specialProps.valueElt.innerHTML = `<span>${fraction.quotient}\\\\frac{${fraction.numerator}}{${fraction.denominator}}</span>`;\r\n                     }\r\n                     MQ.StaticMath(this.specialProps.valueElt.children[0]);\r\n                  }\r\n               }\r\n               break;\r\n         }\r\n      } catch (e) {\r\n         this.specialProps.valueElt.innerHTML = '<span>NaN</span>';\r\n         this.error(e);\r\n      }\r\n   }\r\n\r\n   __toSlider() {\r\n      this.elt.type = 'Slider';\r\n      let eltsTOremove = this.elt.querySelectorAll('.special-elt');\r\n      eltsTOremove.forEach(elt => { elt.remove(); });\r\n\r\n      // for (let [id, gc] of mySketch.children) {\r\n      //    gc.control.update();\r\n      // }\r\n\r\n      /// adding slider\r\n      let sliderOuter = $(`\r\n      <div class=\"slider-outer special-elt\">\r\n         <div class='range-container'>\r\n            <span class='slider-controller-toggle'><i class=\"fas fa-sort-down\"></i></span>\r\n            <input type=range class=slider min=-5 max=5 step=0.1 />\r\n            <span class='play-pause'><i class=\"fas fa-play\"></i></span>\r\n         </div>\r\n         <div class='slider-controller'>\r\n            <label>min</label>:<span class=\"math-field min\">-5</span>\r\n            <label>max</label>:<span class=\"math-field max\">5</span>\r\n            <label>step</label>:<span class=\"math-field step\">0.1</span>\r\n         </div>\r\n      </div>`);\r\n      this.elt.querySelector('.main').append(sliderOuter[0]);\r\n      let slider = sliderOuter[0].querySelector('.slider');\r\n\r\n      slider.addEventListener('change', () => {\r\n         if (this.specialProps.invokeOnchange) {\r\n            this.graphChild.setValue(parseFloat(slider.value), [false]);\r\n            this.setScript(this.graphChild.id + ' = ' + slider.value, false);\r\n            if (this.isError) {\r\n               /// Math.${id} is undefined so setValue first\r\n               this.isError = false;\r\n               this.__updateDependants();\r\n               this.elt.querySelector('.error-elt').remove();\r\n            }\r\n         }\r\n      });\r\n      $(slider).on('mousemove touchmove', () => {\r\n         if (slider.ismousedown) {\r\n            this.graphChild.setValue(parseFloat(slider.value));\r\n            this.setScript(this.graphChild.id + ' = ' + slider.value, false);\r\n            if (this.isError) {\r\n               /// Math.${id} is undefined so setValue first\r\n               this.isError = false;\r\n               this.__updateDependants();\r\n               this.elt.querySelector('.error-elt').remove();\r\n            }\r\n         }\r\n      });\r\n      $(slider).on('mousedown touchstart', () => {\r\n         slider.ismousedown = true;\r\n      });\r\n      $(slider).on('mouseup touchend', () => {\r\n         slider.ismousedown = false;\r\n      });\r\n\r\n      // sliderControllerMathFields\r\n      let scmfs = {\r\n         min: MQ.MathField(sliderOuter[0].querySelector('.slider-controller .math-field.min'), {\r\n            handlers: {\r\n               edit: function () {\r\n                  slider.min = (MathPackage.Parser.maximaTOjsFunction(MathPackage.Parser.latexTOmaxima(scmfs.min.latex())))();\r\n               }\r\n            }\r\n         }),\r\n         max: MQ.MathField(sliderOuter[0].querySelector('.slider-controller .math-field.max'), {\r\n            handlers: {\r\n               edit: function () {\r\n                  slider.max = (MathPackage.Parser.maximaTOjsFunction(MathPackage.Parser.latexTOmaxima(scmfs.max.latex())))();\r\n               }\r\n            }\r\n         }),\r\n         step: MQ.MathField(sliderOuter[0].querySelector('.slider-controller .math-field.step'), {\r\n            handlers: {\r\n               edit: function () {\r\n                  slider.step = Math.max(0.01, MathPackage.Parser.maximaTOjsFunction(MathPackage.Parser.latexTOmaxima(scmfs.step.latex()))());\r\n               }\r\n            }\r\n         })\r\n      };\r\n\r\n      /// the special properties for this specific type of GraphChild\r\n      this.specialProps = {\r\n         slider, scmfs,\r\n         invokeOnchange: true\r\n      };\r\n\r\n      this.__updateSlider();\r\n   }\r\n\r\n   __updateSlider() {\r\n      this.graphChild.handlers.onchange = (updateSlider = true) => {\r\n         if (updateSlider)\r\n            slider.value = this.graphChild.getValue();\r\n         mySketch.update(true, false);\r\n      };\r\n\r\n      let slider = this.specialProps.slider;\r\n      let value = this.graphChild.getValue();\r\n\r\n\r\n      this.specialProps.scmfs.min.latex(Math.min(parseFloat(slider.min), parseFloat(value)));\r\n      this.specialProps.scmfs.max.latex(Math.max(parseFloat(slider.max), parseFloat(value)));\r\n\r\n      this.specialProps.invokeOnchange = false;\r\n      slider.value = value;\r\n      this.specialProps.invokeOnchange = true;\r\n\r\n      // this.setScript(this.graphChild.id + ' = ' + slider.value, false);\r\n   }\r\n\r\n   __toVariable() {\r\n      this.elt.type = 'Variable';\r\n      let eltsTOremove = this.elt.querySelectorAll('.special-elt');\r\n      eltsTOremove.forEach(elt => { elt.remove(); });\r\n\r\n      this.specialProps = {};\r\n\r\n      // this.__updateEvalExpr(); /// will be done on updating the sktech\r\n   }\r\n\r\n   __updateVariable() {\r\n     \r\n   }\r\n   //#endregion\r\n\r\n}","export default class {\r\n\r\n   constructor(gs) {\r\n      this.gs = gs;\r\n\r\n      /** don't spacify the value of xAngle or yAngle before _xAngle and _yAngle\r\n       *  as the value of either depends upon the other */\r\n      /**\r\n       * here this.invokeOnchange is undefines so there is no use of put it to false\r\n       */\r\n      this._xAngle = 0;\r\n      this.xSpace = 80;\r\n      this.xSpaceValue = 2;\r\n      this.xSpaceModifier = 1;\r\n      this.xSpaceModifier = 1;\r\n\r\n      this._yAngle = Math.PI / 2;\r\n      this.ySpace = 80;\r\n      this.ySpaceValue = 2;\r\n      this.ySpaceModifier = 1;\r\n      this.ySpaceModifier = 1;\r\n\r\n      this.angleMargin = angles.deg(20);\r\n      this.zoomLimits = [80, 180];\r\n      this.zoomLimits[1] = (this.zoomLimits[1] * 2 / 5) < this.zoomLimits[0] ? this.zoomLimits[0] * 5 / 2 + 1 : this.zoomLimits[0];\r\n      this.zoomRatio = 1.1;\r\n\r\n      this.xZoomingState = 2; this.yZoomingState = 2;\r\n\r\n      this.invokeOnchange = true;\r\n   }\r\n\r\n   //#region transformation's origin\r\n\r\n   get transformOrigin() {\r\n      return this._transformOrigin;\r\n   }\r\n\r\n   set transformOrigin(pxVector) {\r\n      if (pxVector && pxVector instanceof vector) {\r\n         this._transformOrigin = {\r\n            pxVector: pxVector\r\n         };\r\n         let coor = this.gs.pxTOcoor(pxVector.x, pxVector.y);\r\n         this._transformOrigin.coorVector = new vector(coor.x, coor.y);\r\n      } else {\r\n         this._transformOrigin = undefined;\r\n      }\r\n   }\r\n\r\n   //#endregion\r\n\r\n   //#region {rotation, angles}\r\n\r\n   get xAngle() { return this._xAngle; }\r\n   set xAngle(v) {\r\n      let a = angles.constrainAngle(v);\r\n      if (angles.minAngle(vector.fromAngle(a), vector.fromAngle(this._yAngle), { type: 'lines' }) < this.angleMargin) {\r\n         let b = angles.angle(vector.fromAngle(a), vector.fromAngle(this._yAngle), { dir: 'clockwise' });\r\n         if (b < this.angleMargin && b > 0) {\r\n            a = angles.constrainAngle(this._yAngle + this.angleMargin);\r\n         }\r\n         else {\r\n            b = angles.angle(vector.fromAngle(a), vector.fromAngle(this._yAngle));\r\n            if (b < this.angleMargin && b > 0) {\r\n               a = angles.constrainAngle(this._yAngle - this.angleMargin);\r\n            }\r\n            else {\r\n               b = angles.angle(vector.fromAngle(a), vector.fromAngle(this._yAngle).mult(-1), { dir: 'clockwise' });\r\n               if (b < this.angleMargin && b > 0) {\r\n                  a = angles.constrainAngle(this._yAngle + Math.PI + this.angleMargin);\r\n               }\r\n               else {\r\n                  b = angles.angle(vector.fromAngle(a), vector.fromAngle(this._yAngle).mult(-1));\r\n                  if (b < this.angleMargin && b > 0) {\r\n                     a = angles.constrainAngle(this._yAngle + Math.PI - this.angleMargin);\r\n                  }\r\n               }\r\n            }\r\n         }\r\n      }\r\n      this._xAngle = a;\r\n   }\r\n\r\n   get yAngle() { return this._yAngle; }\r\n   set yAngle(v) {\r\n      let a = angles.constrainAngle(v);\r\n      if (angles.minAngle(vector.fromAngle(a), vector.fromAngle(this._xAngle), { type: 'lines' }) < this.angleMargin) {\r\n         let b = angles.angle(vector.fromAngle(a), vector.fromAngle(this._xAngle), { dir: 'clockwise' });\r\n         if (b < this.angleMargin && b > 0) {\r\n            a = angles.constrainAngle(this._xAngle + this.angleMargin);\r\n         }\r\n         else {\r\n            b = angles.angle(vector.fromAngle(a), vector.fromAngle(this._xAngle));\r\n            if (b < this.angleMargin && b > 0) {\r\n               a = angles.constrainAngle(this._xAngle - this.angleMargin);\r\n            }\r\n            else {\r\n               b = angles.angle(vector.fromAngle(a), vector.fromAngle(this._xAngle).mult(-1), { dir: 'clockwise' });\r\n               if (b < this.angleMargin && b > 0) {\r\n                  a = angles.constrainAngle(this._xAngle + Math.PI + this.angleMargin);\r\n               }\r\n               else {\r\n                  b = angles.angle(vector.fromAngle(a), vector.fromAngle(this._xAngle).mult(-1));\r\n                  if (b < this.angleMargin && b > 0) {\r\n                     a = angles.constrainAngle(this._xAngle + Math.PI - this.angleMargin);\r\n                  }\r\n               }\r\n            }\r\n         }\r\n      }\r\n      this._yAngle = a;\r\n   }\r\n\r\n   /**\r\n * @param {*} type, is 'deg' or 'rad'\r\n */\r\n   rotate(a, type = 'rad') {\r\n      if (!isNaN(a)) {\r\n         if (type === 'deg') {\r\n            a = a / 180 * Math.PI;\r\n         }\r\n         this.invokeOnchange = false;\r\n         this.xAngle += a;\r\n         this.yAngle += a;\r\n         this.invokeOnchange = true;\r\n         this.onchange();\r\n      }\r\n   }\r\n\r\n   /**\r\n  * @param {*} type, is 'deg' or 'rad'\r\n  */\r\n   rotateX(a, type = 'rad') {\r\n      if (!isNaN(a)) {\r\n         this.invokeOnchange = false;\r\n         if (type === 'deg') {\r\n            a = a / 180 * Math.PI;\r\n         }\r\n         this.xAngle += a;\r\n         this.invokeOnchange = true;\r\n         this.onchange();\r\n      }\r\n   }\r\n\r\n   /**\r\n    * @param {*} type, is 'deg' or 'rad'\r\n    */\r\n   rotateY(a, type = 'rad') {\r\n      if (!isNaN(a)) {\r\n         this.invokeOnchange = false;\r\n         if (type === 'deg') {\r\n            a = a / 180 * Math.PI;\r\n         }\r\n         this.yAngle += a;\r\n         this.invokeOnchange = true;\r\n         this.onchange();\r\n      }\r\n   }\r\n\r\n   //#endregion\r\n\r\n   //#region translate\r\n\r\n   translate(value) {\r\n      this.gs._center = new vector(this.gs.center.x + value.x, this.gs.center.y + value.y);\r\n      this.onchange(this.invokeOnchange, false);\r\n   }\r\n   translateX(value) {\r\n      this.gs._center = new vector(this.gs.center.x + value.x, this.gs.center.y + value.y);\r\n      this.onchange(this.invokeOnchange, false);\r\n   }\r\n   translateY(value) {\r\n      this.gs._center = new vector(this.gs.center.x + value.x, this.gs.center.y + value.y);\r\n      this.onchange(this.invokeOnchange, false);\r\n   }\r\n\r\n   //#endregion\r\n\r\n   //#region zoom\r\n\r\n   zoomIn(centerOfZoom) {\r\n\r\n      centerOfZoom = centerOfZoom || new vector(this.gs.width / 2, this.gs.height / 2);\r\n      this.transformOrigin = centerOfZoom;\r\n\r\n      this.invokeOnchange = false;\r\n      this.xZoomIn(); this.yZoomIn();\r\n      this.invokeOnchange = true;\r\n      this.onchange();\r\n\r\n   }\r\n   zoomOut(centerOfZoom) {\r\n\r\n      centerOfZoom = centerOfZoom || new vector(this.gs.width / 2, this.gs.height / 2);\r\n      this.transformOrigin = centerOfZoom;\r\n\r\n      this.invokeOnchange = false;\r\n      this.xZoomOut(); this.yZoomOut();\r\n      this.invokeOnchange = true;\r\n      this.onchange();\r\n\r\n   }\r\n   xZoomIn() {\r\n      // #region X\r\n      if (this.xSpace <= this.zoomLimits[1]) this.xSpace *= this.zoomRatio;\r\n\r\n      this.reformXspace();\r\n      this.onchange();\r\n      //#endregion\r\n   }\r\n   xZoomOut() {\r\n      // #region X\r\n      if (this.xSpace >= this.zoomLimits[0]) this.xSpace /= this.zoomRatio;\r\n\r\n      this.reformXspace();\r\n      this.onchange();\r\n      //#endregion\r\n\r\n   }\r\n   yZoomIn() {\r\n      // #region Y\r\n      if (this.ySpace <= this.zoomLimits[1]) this.ySpace *= this.zoomRatio;\r\n\r\n      this.reformYspace();\r\n      this.onchange();\r\n      //#endregion\r\n   }\r\n   yZoomOut() {\r\n      // #region Y\r\n      if (this.ySpace >= this.zoomLimits[0]) this.ySpace /= this.zoomRatio;\r\n\r\n      this.reformYspace();\r\n      this.onchange();\r\n      //#endregion\r\n   }\r\n\r\n   //#endregion\r\n\r\n   //#region viewport managment\r\n\r\n   setViewport(viewport, corner, resize) {\r\n      //#region precalculations\r\n      viewport = viewport || {};\r\n      viewport.xmin = viewport.xmin === 0 ? 0 : (viewport.xmin || this.gs.viewport.xmin);\r\n      viewport.xmax = viewport.xmax === 0 ? 0 : (viewport.xmax || this.gs.viewport.xmax);\r\n      viewport.ymin = viewport.ymin === 0 ? 0 : (viewport.ymin || this.gs.viewport.ymin);\r\n      viewport.ymax = viewport.ymax === 0 ? 0 : (viewport.ymax || this.gs.viewport.ymax);\r\n      let a = this.invokeOnchange; this.invokeOnchange = false;\r\n      let p = this.gs.pxTOcoor(this.gs.width / 2, this.gs.height / 2);\r\n      corner = corner || new vector(0, 0);\r\n      corner = this.gs.pxTOcoor(corner.x, corner.y);\r\n      //#endregion\r\n\r\n      //#region maincalculations\r\n      let xs = this.xSpace, ys = this.ySpace;\r\n\r\n      this.xSpace = this.xSpace / ((viewport.xmax - viewport.xmin) / (this.gs.viewport.xmax - this.gs.viewport.xmin));\r\n      if (resize) {\r\n         this.ySpace *= this.xSpace / xs;\r\n      }\r\n      else {\r\n         this.ySpace = this.ySpace / ((viewport.ymax - viewport.ymin) / (this.gs.viewport.ymax - this.gs.viewport.ymin));\r\n      }\r\n\r\n      if (this.ySpace <= 0 || this.xSpace <= 0 || isNaN(this.xSpace) || !isFinite(this.xSpace) || isNaN(this.ySpace) || !isFinite(this.ySpace)) {\r\n         this.xSpace = xs;\r\n         this.ySpace = ys;\r\n      }\r\n\r\n      this.reformXspace();\r\n      this.reformYspace();\r\n\r\n      //#endregion\r\n\r\n      //#region aftercalulations\r\n      this.invokeOnchange = true; this.onchange();\r\n      corner = this.gs.coorTOpx(corner.x, corner.y);\r\n      corner = new vector(corner.x, corner.y);\r\n      this.translate(corner.mult(-1));\r\n      this.onchange();\r\n      if (resize) {\r\n         let p_ = this.gs.coorTOpx(p.x, (viewport.ymax + viewport.ymin) / 2);\r\n         this.translate(new vector(0, this.gs.height / 2 - p_.y));\r\n      }\r\n      this.onchange(); this.invokeOnchange = a;\r\n      //#endregion\r\n   }\r\n\r\n   getViewport(pxViewport) {\r\n      let xStart = this.gs.xToCoor(pxViewport.xmin, Math.tan(this.yAngle) > 0 ? pxViewport.ymin : pxViewport.ymax);\r\n      let xEnd = this.gs.xToCoor(pxViewport.xmax, Math.tan(this.yAngle) <= 0 ? pxViewport.ymin : pxViewport.ymax);\r\n      let yStart = this.gs.yToCoor(Math.tan(this.xAngle) > 0 ? pxViewport.xmax : pxViewport.xmin, pxViewport.ymax);\r\n      let yEnd = this.gs.yToCoor(Math.tan(this.xAngle) <= 0 ? pxViewport.xmax : pxViewport.xmin, pxViewport.ymin);\r\n\r\n      return {\r\n         xmin: xEnd < xStart ? xEnd : xStart,\r\n         xmax: xEnd > xStart ? xEnd : xStart,\r\n         ymin: yEnd < yStart ? yEnd : yStart,\r\n         ymax: yEnd > yStart ? yEnd : yStart\r\n      };\r\n   }\r\n\r\n   //#endregion\r\n\r\n   //#region general\r\n\r\n   reformXspace() {\r\n      let done = false;\r\n      while (this.xSpace > this.zoomLimits[1]) {\r\n         if (this.xZoomingState == 5) {\r\n            this.xZoomingState = 2;\r\n            let ratio = 2 / 5;\r\n            this.xSpaceValue = this.xSpaceValue * ratio;\r\n            this.xSpace = this.xSpace * ratio;\r\n         }\r\n         else if (this.xZoomingState == 2) {\r\n            this.xZoomingState = 1;\r\n            let ratio = 1 / 2;\r\n            this.xSpaceValue = this.xSpaceValue * ratio;\r\n            this.xSpace = this.xSpace * ratio;\r\n         }\r\n         else if (this.xZoomingState == 1) {\r\n            this.xZoomingState = 5;\r\n            let ratio = 0.5 / 1;\r\n            this.xSpaceValue = this.xSpaceValue * ratio;\r\n            this.xSpace = this.xSpace * ratio;\r\n         }\r\n         done = true;\r\n      }\r\n      if (done) return;\r\n      while (this.xSpace < this.zoomLimits[0]) {\r\n         if (this.xZoomingState == 1) {\r\n            this.xZoomingState = 2;\r\n            let ratio = 2 / 1;\r\n            this.xSpaceValue = this.xSpaceValue * ratio;\r\n            this.xSpace = this.xSpace * ratio;\r\n         }\r\n         else if (this.xZoomingState == 2) {\r\n            this.xZoomingState = 5;\r\n            let ratio = 5 / 2;\r\n            this.xSpaceValue = this.xSpaceValue * ratio;\r\n            this.xSpace = this.xSpace * ratio;\r\n         }\r\n         else if (this.xZoomingState == 5) {\r\n            this.xZoomingState = 1;\r\n            let ratio = 10 / 5;\r\n            this.xSpaceValue = this.xSpaceValue * ratio;\r\n            this.xSpace = this.xSpace * ratio;\r\n         }\r\n      }\r\n   }\r\n   reformYspace() {\r\n      let done = false;\r\n      while (this.ySpace > this.zoomLimits[1]) {\r\n         if (this.yZoomingState == 5) {\r\n            this.yZoomingState = 2;\r\n            let ratio = 2 / 5;\r\n            this.ySpaceValue = this.ySpaceValue * ratio;\r\n            this.ySpace = this.ySpace * ratio;\r\n         }\r\n         else if (this.yZoomingState == 2) {\r\n            this.yZoomingState = 1;\r\n            let ratio = 1 / 2;\r\n            this.ySpaceValue = this.ySpaceValue * ratio;\r\n            this.ySpace = this.ySpace * ratio;\r\n         }\r\n         else if (this.yZoomingState == 1) {\r\n            this.yZoomingState = 5;\r\n            let ratio = 0.5 / 1;\r\n            this.ySpaceValue = this.ySpaceValue * ratio;\r\n            this.ySpace = this.ySpace * ratio;\r\n         }\r\n         done = true;\r\n      }\r\n      if (done) return;\r\n      while (this.ySpace < this.zoomLimits[0]) {\r\n         if (this.yZoomingState == 1) {\r\n            this.yZoomingState = 2;\r\n            let ratio = 2 / 1;\r\n            this.ySpaceValue = this.ySpaceValue * ratio;\r\n            this.ySpace = this.ySpace * ratio;\r\n         }\r\n         else if (this.yZoomingState == 2) {\r\n            this.yZoomingState = 5;\r\n            let ratio = 5 / 2;\r\n            this.ySpaceValue = this.ySpaceValue * ratio;\r\n            this.ySpace = this.ySpace * ratio;\r\n         }\r\n         else if (this.yZoomingState == 5) {\r\n            this.yZoomingState = 1;\r\n            let ratio = 10 / 5;\r\n            this.ySpaceValue = this.ySpaceValue * ratio;\r\n            this.ySpace = this.ySpace * ratio;\r\n         }\r\n      }\r\n   }\r\n\r\n   reset() {\r\n      this.transformOrigin = undefined;\r\n      this.invokeOnchange = false;\r\n\r\n      this.xSpace = 80;\r\n      this.xSpaceValue = 2;\r\n      this.xSpaceModifier = 1;\r\n      this.xZoomingState = 2;\r\n\r\n      this.ySpace = 80;\r\n      this.ySpaceValue = 2;\r\n      this.ySpaceModifier = 1;\r\n      this.yZoomingState = 2;\r\n\r\n      this._xAngle = 0;\r\n      this._yAngle = Math.PI / 2;\r\n\r\n      this.translate(new vector(\r\n         this.gs.width / 2 - this.gs.center.x,\r\n         this.gs.height / 2 - this.gs.center.y\r\n      ));\r\n\r\n      this.invokeOnchange = true;\r\n      this.onchange();\r\n   }\r\n\r\n   assign(src) {\r\n      Object.assign(this, src);\r\n   }\r\n\r\n   onchange(change = this.invokeOnchange, transToOrigin = true) {\r\n      /// updating\r\n      if (change) {\r\n\r\n         let ysm = this.xSpaceModifier * Math.abs(Math.cos(this.xAngle - this.yAngle)) + 1;\r\n         let xsm = this.ySpaceModifier * Math.abs(Math.cos(this.xAngle - this.yAngle)) + 1;\r\n         this.xScale = (this.xSpace * ysm / this.xSpaceValue);\r\n         this.yScale = (this.ySpace * xsm / this.ySpaceValue);\r\n\r\n         this.gs.viewport = this.getViewport({\r\n            xmin: 0, xmax: this.gs.width,\r\n            ymin: 0, ymax: this.gs.height\r\n         });\r\n\r\n         this.gs.drawingStep = (this.gs.viewport.xmax - this.gs.viewport.xmin) / 10000;\r\n\r\n         if (this.transformOrigin && transToOrigin) {\r\n            let a = this.invokeOnchange;\r\n            this.invokeOnchange = false;\r\n            let p = this.gs.coorTOpx(...this.transformOrigin.coorVector.toArray());\r\n            this.translate(this.transformOrigin.pxVector.subtract(p));\r\n            this.onchange(true, false);\r\n            this.invokeOnchange = a;\r\n         }\r\n\r\n         //#region checking if valid.\r\n         let notValid = (this.gs.viewport.xmin + this.gs.drawingStep / 2 <= this.gs.viewport.xmin) ||\r\n            this.gs.viewport.xmax - this.gs.drawingStep / 2 >= this.gs.viewport.xmax ||\r\n            !math.isNumeric(this.xScale) || !math.isNumeric(this.yScale) ||\r\n            !math.isNumeric(this.gs.viewport.xmin) || !math.isNumeric(this.gs.viewport.xmax) ||\r\n            !math.isNumeric(this.gs.viewport.ymin) || !math.isNumeric(this.gs.viewport.ymax) ||\r\n            !math.isNumeric(this.gs.drawingStep) ||\r\n            (this.gs.viewport.xmax - this.gs.viewport.xmin) > 10 ** 12 ||\r\n            (this.gs.viewport.ymax - this.gs.viewport.ymin) > 10 ** 12 ||\r\n            (this.gs.viewport.xmax - this.gs.viewport.xmin) < 10 ** -12 ||\r\n            (this.gs.viewport.ymax - this.gs.viewport.ymin) < 10 ** -12 ||\r\n            !math.isNumeric(this.gs.center.x) || !math.isNumeric(this.gs.center.y) ||\r\n            (this.transformOrigin && transToOrigin &&\r\n               (!math.isNumeric(this.transformOrigin.coorVector.x) || !math.isNumeric(this.transformOrigin.coorVector.y) ||\r\n                  !math.isNumeric(this.transformOrigin.pxVector.x) || !math.isNumeric(this.transformOrigin.pxVector.y)));\r\n         //#endregion\r\n\r\n         if (notValid && this.lastEdition) {\r\n            this.assign(this.lastEdition.transform);\r\n            this.gs.viewport = Object.assign({}, this.lastEdition.viewport);\r\n            this.gs.drawingStep = this.lastEdition.drawingStep;\r\n            this.gs._center = Object.assign(new vector(), this.lastEdition.center);\r\n            return;\r\n         }\r\n\r\n         this.lastEdition = {\r\n            transform: Object.assign(new this.constructor(), this),\r\n            viewport: Object.assign({}, this.gs.viewport),\r\n            drawingStep: this.gs.drawingStep,\r\n            center: Object.assign(new vector(), this.gs.center)\r\n         };\r\n\r\n      }\r\n   }\r\n\r\n   //#endregion\r\n\r\n};\r\n","import Transform from './Transform.js';\r\n\r\nexport default class {\r\n\r\n  constructor(sketch, width, height) {\r\n    this.sketch = sketch;\r\n    this._width = width;\r\n    this._height = height;\r\n    this._center = new vector(this.width / 2, this.height / 2);\r\n\r\n    this.transform = new Transform(this);\r\n    this.transform.onchange();\r\n\r\n    this.physicsRun = false;\r\n\r\n    this.childrenIDs = [];\r\n  \r\n  }\r\n\r\n  get coor() { return this.sketch.coor; }\r\n\r\n  get width() { return this._width || 0; }\r\n  set width(value) {\r\n    this._width = value; /** to update the boundaries */\r\n    this.transform.onchange();\r\n  }\r\n  get height() { return this._height || 0; }\r\n  set height(value) {\r\n    this._height = value; /** to update the boundaries */\r\n    this.transform.onchange();\r\n  }\r\n\r\n  /**\r\n   * @returns the i vector of the cartesian coordinates relative to (with respect to) the pixel coordinates\r\n   */\r\n  get iVector() {\r\n    return vector.fromAngle(-this.transform.xAngle).mult(this.transform.xScale);\r\n  }\r\n  /**\r\n  * @returns the j vector of the cartesian coordinates relative to (with respect to) the pixel coordinates\r\n  */\r\n  get jVector() {\r\n    return vector.fromAngle(-this.transform.yAngle).mult(this.transform.yScale);\r\n  }\r\n\r\n  get center() { return this._center; }\r\n\r\n  centrate() {\r\n    this.transform.translate(new vector(\r\n      this.width / 2 - this.center.x,\r\n      this.height / 2 - this.center.y\r\n    ));\r\n  }\r\n\r\n  reset() {\r\n    this.transform.reset();\r\n  }\r\n\r\n  //#region convert { coor, px }\r\n\r\n  coorTOpx(x, y) {\r\n    return { x: this.xToPixel(x, y), y: this.yToPixel(x, y) };\r\n  }\r\n  pxTOcoor(x, y) {\r\n    return { x: this.xToCoor(x, y), y: this.yToCoor(x, y) };\r\n  }\r\n  xToPixel(xCoorValue, yCoorValue) {\r\n    return (this.center.x + (xCoorValue * this.transform.xScale) * Math.cos(this.transform.xAngle) + (yCoorValue * this.transform.yScale) * Math.cos(this.transform.yAngle));\r\n  }\r\n  yToPixel(xCoorValue, yCoorValue) {\r\n    return (this.center.y - ((yCoorValue * this.transform.yScale) * Math.sin(this.transform.yAngle) + (xCoorValue * this.transform.xScale) * Math.sin(this.transform.xAngle)));\r\n  }\r\n  xToCoor(xPixelValue, yPixelValue) {\r\n    xPixelValue = xPixelValue - this.center.x;\r\n    yPixelValue = this.center.y - yPixelValue;\r\n    return ((Math.cos(this.transform.yAngle) * yPixelValue - Math.sin(this.transform.yAngle) * xPixelValue) / Math.sin(this.transform.xAngle - this.transform.yAngle)) / this.transform.xScale;\r\n  }\r\n  yToCoor(xPixelValue, yPixelValue) {\r\n    xPixelValue = xPixelValue - this.center.x;\r\n    yPixelValue = this.center.y - yPixelValue;\r\n    return ((Math.cos(this.transform.xAngle) * yPixelValue - Math.sin(this.transform.xAngle) * xPixelValue) / Math.sin(this.transform.yAngle - this.transform.xAngle)) / this.transform.yScale;\r\n  }\r\n\r\n  //#endregion\r\n\r\n  checkId(id) {\r\n    if (!id) throw new Error('can\\'t set a falsy value to the name of this sketch child.');\r\n    let __id = id.replace(/^\\s*([_a-zA-z\\d]+)\\s*$/, '$1');\r\n    if (!__id)\r\n      throw new Error(`\"${id}\" is not valid to use.`);\r\n    else {\r\n      if (this.childrenIDs.find(a=> a === id)) {\r\n        throw new Error(`\"${id}\" is used before.`);\r\n      }\r\n    }\r\n    return __id;\r\n  }\r\n\r\n}\r\n\r\n\r\n","\r\nexport default class {\r\n\r\n   constructor(gs, coorSettings) {\r\n      this.gs = gs;\r\n      let defaultCoorSettings = {\r\n         type: 'default',\r\n         xUnit: '',\r\n         yUnit: '',\r\n\r\n         background: new drawing.color(255, 255, 255, 255),\r\n         font: 'Georgia',\r\n\r\n         drawDecimalLines: true,\r\n         drawMainLines: true,\r\n         drawAxisesLines: true,\r\n         drawPolarCircles: false,\r\n         drawPolarLines: false,\r\n         drawPolarAngles: false,\r\n         drawNumbers: true,\r\n\r\n         decimalLinesSpace: 5,\r\n         polarCirclesSpace: 5,\r\n         polarLinesAnglesSpace: 6,\r\n\r\n         penDecimalLines: null,\r\n         penMainLines: null,\r\n         penXaxis: null,\r\n         penYaxis: null,\r\n         penPolarCircles: null,\r\n         penPolarLines: null,\r\n\r\n         autoRefiningOnZoomimg: true\r\n      };\r\n\r\n      Object.assign(defaultCoorSettings, {\r\n         color: defaultCoorSettings.background.isDark() ? new drawing.color(200, 200, 200, 255) : new drawing.color(50, 50, 50, 1),\r\n         antiBackground: defaultCoorSettings.background.isDark() ? new drawing.color(200, 200, 200, 255) : new drawing.color(50, 50, 50, 1),\r\n         drawDecimalLines: !defaultCoorSettings.background.isDark(),\r\n         penDecimalLines: new drawing.pen(defaultCoorSettings.background.isDark() ? new drawing.color(200, 200, 200, 30 / 255) : new drawing.color(50, 50, 50, 30 / 255), 1),\r\n         penMainLines: new drawing.pen(defaultCoorSettings.background.isDark() ? new drawing.color(200, 200, 200, 100 / 255) : new drawing.color(50, 50, 50, 100 / 255), 1),\r\n         penXaxis: new drawing.pen(defaultCoorSettings.background.isDark() ? new drawing.color(255, 255, 255, 150 / 255) : new drawing.color(0, 0, 0, 150 / 255), 2),\r\n         penYaxis: new drawing.pen(defaultCoorSettings.background.isDark() ? new drawing.color(255, 255, 255, 150 / 255) : new drawing.color(0, 0, 0, 150 / 255), 2),\r\n         penPolarCircles: new drawing.pen(defaultCoorSettings.background.isDark() ? new drawing.color(200, 200, 200, 100 / 255) : new drawing.color(50, 50, 50, 50 / 255), 1),\r\n         penPolarLines: new drawing.pen(defaultCoorSettings.background.isDark() ? new drawing.color(200, 200, 200, 100 / 255) : new drawing.color(50, 50, 50, 50 / 255), 1)\r\n      });\r\n\r\n      if (coorSettings) {\r\n         this.coorSettings = {};\r\n         Object.assign(this.coorSettings, defaultCoorSettings);\r\n         Object.assign(this.coorSettings, coorSettings);\r\n      } else {\r\n         this.coorSettings = defaultCoorSettings;\r\n      }\r\n\r\n   }\r\n\r\n   render(ctx) {\r\n      switch (this.coorSettings.type) {\r\n         case 'default':\r\n            this.custom(ctx);\r\n            break;\r\n         case 'rad':\r\n            this.radian(ctx);\r\n            break;\r\n      }\r\n   }\r\n\r\n   custom(canvas, a = 1) {\r\n\r\n      let start_x, start_y, end_x, end_y;\r\n      start_x = Math.floor(this.gs.viewport.xmin / this.gs.transform.xSpaceValue / a) * a * this.gs.transform.xSpaceValue;\r\n      end_x = Math.ceil(this.gs.viewport.xmax / this.gs.transform.xSpaceValue / a) * a * this.gs.transform.xSpaceValue;\r\n      start_y = Math.floor(this.gs.viewport.ymin / this.gs.transform.ySpaceValue) * this.gs.transform.ySpaceValue;\r\n      end_y = Math.ceil(this.gs.viewport.ymax / this.gs.transform.ySpaceValue) * this.gs.transform.ySpaceValue;\r\n\r\n      if (this.coorSettings.drawDecimalLines) {\r\n         canvas.ctx.beginPath();\r\n         this.coorSettings.penDecimalLines.setup(canvas);\r\n         // x\r\n         for (let i = start_x; i <= end_x; i += this.gs.transform.xSpaceValue * a / this.coorSettings.decimalLinesSpace)\r\n            canvas.line(this.gs.xToPixel(i, start_y), this.gs.yToPixel(i, start_y),\r\n               this.gs.xToPixel(i, end_y), this.gs.yToPixel(i, end_y));\r\n         // y\r\n         for (let i = start_y; i <= end_y; i += this.gs.transform.ySpaceValue / this.coorSettings.decimalLinesSpace)\r\n            canvas.line(this.gs.xToPixel(start_x, i), this.gs.yToPixel(start_x, i),\r\n               this.gs.xToPixel(end_x, i), this.gs.yToPixel(end_x, i));\r\n         canvas.ctx.stroke();\r\n      }\r\n\r\n      if (this.coorSettings.drawMainLines) {\r\n         canvas.ctx.beginPath();\r\n         this.coorSettings.penMainLines.setup(canvas);\r\n         // x\r\n         for (let i = start_x; i <= end_x; i += this.gs.transform.xSpaceValue * a)\r\n            canvas.line(this.gs.xToPixel(i, start_y), this.gs.yToPixel(i, start_y),\r\n               this.gs.xToPixel(i, end_y), this.gs.yToPixel(i, end_y));\r\n         // y\r\n         for (let i = start_y; i <= end_y; i += this.gs.transform.ySpaceValue)\r\n            canvas.line(this.gs.xToPixel(start_x, i), this.gs.yToPixel(start_x, i),\r\n               this.gs.xToPixel(end_x, i), this.gs.yToPixel(end_x, i));\r\n         canvas.ctx.stroke();\r\n      }\r\n\r\n      if (this.coorSettings.drawAxisesLines) {\r\n         canvas.ctx.beginPath();\r\n         this.coorSettings.penXaxis.setup(canvas);\r\n         canvas.line(this.gs.xToPixel(start_x, 0), this.gs.yToPixel(start_x, 0),\r\n            this.gs.xToPixel(end_x, 0), this.gs.yToPixel(end_x, 0));\r\n         canvas.ctx.stroke();\r\n         canvas.ctx.beginPath();\r\n         this.coorSettings.penYaxis.setup(canvas);\r\n         canvas.line(this.gs.xToPixel(0, start_y), this.gs.yToPixel(0, start_y),\r\n            this.gs.xToPixel(0, end_y), this.gs.yToPixel(0, end_y));\r\n         canvas.ctx.stroke();\r\n      }\r\n\r\n      start_x = Math.floor(start_x / this.gs.transform.xSpaceValue / a);\r\n      end_x = Math.ceil(end_x / this.gs.transform.xSpaceValue / a);\r\n      start_y = Math.floor(start_y / this.gs.transform.ySpaceValue);\r\n      end_y = Math.ceil(end_y / this.gs.transform.ySpaceValue);\r\n\r\n      let y, x;\r\n      let num;\r\n      if (this.coorSettings.drawNumbers) {\r\n         // label position x\r\n         canvas.ctx.fillStyle = this.coorSettings.color.toString();\r\n         canvas.ctx.strokeStyle = `rgba(${this.coorSettings.background.toArray().splice(0, 3).join(', ')}, 200)`;\r\n         canvas.ctx.lineWidth = 2;\r\n         canvas.setFont({ size: 15 }); /// setting the label style.\r\n\r\n         let xD, yD;\r\n         if (Math.abs(Math.tan(this.gs.transform.yAngle)) > Math.abs(Math.tan(this.gs.transform.xAngle))) { // && Math.tan(Math.abs(this.gs.transform._xAngle - this.gs.transform._yAngle)) >= 1\r\n            // dealing horizetally when setting x labels vetically.\r\n            xD = 'v'; yD = 'h';\r\n         }\r\n         else {\r\n            xD = 'h'; yD = 'v';\r\n         }\r\n\r\n         for (let i = start_x; i <= end_x; i += 1) {\r\n            x = i * this.gs.transform.xSpaceValue;\r\n            num = (Math.abs(x) < 0.001 || Math.abs(x) >= 999999) ?\r\n               x.toExponential(3).replace(/\\.?0+e\\+?/, '10^') :\r\n               x.toFixed(3).replace(/0+$/, \"\").replace(/\\.$/, ''); /// .toFixed(3) returns 32146.000 if you input an integer, so I want to remove all the zeros from the end, and if \".\" remians, then remove it too, other wise keep all thing such as 2343165.123 \r\n            if (x != 0) {\r\n               num += (a === Math.PI / 2 ? 'pi' : '') + this.coorSettings.xUnit;\r\n               let p = this.__getLabelPos(canvas, this.gs.coorTOpx(x, 0), num, xD, this.gs.jVector); /// position of the label of x which the line, which is parallel to yAxis, intersect xAxis;\r\n               canvas.ctx.fillText(num, p.x, p.y);\r\n               // canvas.ctx.strokeText(num, p.x + 4, p.y + 4);\r\n            }\r\n         }\r\n         // label position y\r\n         for (let i = start_y; i <= end_y; i += 1) {\r\n            y = i * this.gs.transform.ySpaceValue;\r\n            num = (Math.abs(y) < 0.001 || Math.abs(y) >= 999999) ?\r\n               y.toExponential(3).replace(/\\.?0+e\\+?/, '10^') :\r\n               y.toFixed(3).replace(/0+$/, \"\").replace(/\\.$/, '');\r\n            if (y != 0) {\r\n               num += this.coorSettings.yUnit;\r\n               let p = this.__getLabelPos(canvas, this.gs.coorTOpx(0, y), num, yD, this.gs.iVector);\r\n               canvas.ctx.fillText(num, p.x, p.y);\r\n               // canvas.ctx.strokeText(num, p.x + 4, p.y + 4);\r\n            }\r\n         }\r\n      }\r\n   }\r\n   radian(canvas) {\r\n      this.custom(canvas, Math.PI / 2);\r\n   }\r\n\r\n   /**\r\n    * \r\n    * @param {vector} pos the real position for the label on either of the two axes\r\n    * @param {string} number as string to measure its size.\r\n    * @param {string} dimension which is either 'h' or 'v', so the code will check if the label is out side the horizental view 'h', or the vertical view 'v';\r\n    */\r\n   __getLabelPos(canvas, pos, number, dimension, unitVec) {\r\n      let size = canvas.measureString(number);\r\n      size.height = 10; // as there is no properity called height in size, gotten from measureString(\"string\");\r\n      pos = new vector(pos.x, pos.y);\r\n\r\n      if (dimension === 'h') {\r\n         let bounds = [4, this.gs.width - size.width - 4];\r\n         if (pos.x < bounds[0]) {\r\n            let n = (bounds[0] - pos.x) / unitVec.x;\r\n            return pos.add(unitVec.mult(n));\r\n         } else if (pos.x > bounds[1]) {\r\n            let n = (bounds[1] - pos.x) / unitVec.x;\r\n            return pos.add(unitVec.mult(n));\r\n         } else {\r\n            return pos;\r\n         }\r\n      } else {\r\n         /// if dimension is 'v' or even anything else.\r\n         let bounds = [4, this.gs.height - size.height - 4];\r\n         if (pos.y < bounds[0]) {\r\n            let n = (bounds[0] - pos.y) / unitVec.y;\r\n            return pos.add(unitVec.mult(n));\r\n         } else if (pos.y > bounds[1]) {\r\n            let n = (bounds[1] - pos.y) / unitVec.y;\r\n            return pos.add(unitVec.mult(n));\r\n         } else {\r\n            return pos;\r\n         }\r\n      }\r\n   }\r\n\r\n}","/* eslint-disable no-unused-vars */\r\n/* eslint-disable no-undef */\r\nimport GraphSettings from './GraphSetting/GraphSettings.js';\r\nimport Coordinates from './Coordinates.js';\r\nimport Canvas from './Canvas.js';\r\nimport { Xfunction, EvalExpr, Point, Variable, Empty, Slider } from './GraphChildren/index.js';\r\nexport default class Sketch {\r\n\r\n    constructor(canvas) {\r\n        this.gs = new GraphSettings(this, canvas.clientWidth, canvas.clientHeight);\r\n        this.coor = new Coordinates(this.gs);\r\n        this.canvas = new Canvas({ canvas: canvas });\r\n        this.subcanvas = new Canvas();\r\n        this.ChildrenCanvas = new Canvas();\r\n\r\n        this.children = new Map();\r\n        this.scriptParser = new MagicalParser.CustomParsers.Math();\r\n    }\r\n\r\n    appendChild(child) {\r\n        if (!child.id) throw new Error('Your sketch child should have had an id :\\'(');\r\n        let append = (child instanceof GraphChild ? child : this.childFromScript(child));\r\n        this.children.set(child.id, child);\r\n    }\r\n\r\n    childFromScript(script, propsTOset = {}) {\r\n        let parsedString = this.getChildParser.parse(script.replace(/\\^/g, '**'));\r\n        return childFromParsed(parsedString, propsTOset);\r\n    }\r\n\r\n    childFromParsed(parsedString, propsTOset = {}) {\r\n        propsTOset.sketch = this;\r\n        if (parsedString.type === '') {\r\n            return new Empty(propsTOset);\r\n        }\r\n        if (parsedString.name === '=') {\r\n            let left = parsedString.args[0], right = parsedString.args[1];\r\n\r\n            if (left.check({ type: 'variable', name: 'y' }) && !right.contains({ type: 'variable', name: 'y' })) {\r\n                return new Xfunction(Object.assign(propsTOset, { expr: right, }));\r\n            }\r\n\r\n            //such : area( h , b , theta ) = 0.5 * h * b * sin( theta )\r\n            //such : f(x) = x^2\r\n            else if (left.check({ type: 'functionCalling' }) && !this.gs.reservedFunction.find(name => Math.hasOwnProperty(left.name))) {\r\n                // such : f(x) = x^2\r\n                if (left.args.length == 1 && left.args[0].check({ type: 'variable', name: 'x' }) && !right.contains({ type: 'variable', name: 'y' })) {\r\n                    return new Xfunction({ sketch: this, expr: right, id: left.name });\r\n                }\r\n                /*\r\n                //such : area( h , b , theta) = 0.5 * h * b * sin( theta )\r\n                else {\r\n                    List < string > args = new List<string>();\r\n                    LNode Process = null;\r\n                    \r\n                    foreach(LNode arg in left.Args);\r\n                    {\r\n                        if (arg.IsId) {\r\n                            args.Add(arg.Name.Name);\r\n                        }\r\n                        else {\r\n                            throw new Exception($\"The argument {arg.ToString().Substring(0, arg.ToString().length - 1)} of the function \\\"{name.ToString()}\\\" is invalid\");\r\n                        }\r\n                    }\r\n                    if (MathExpression(right)) {\r\n                        Process = right;\r\n                    }\r\n                    else {\r\n                        throw new Exception($\"The process {right.ToString().Substring(0, right.ToString().length - 1)} of the function \\\"{name.ToString()}\\\" is invalid\");\r\n                    }\r\n\r\n\r\n                    MathPackage.Operations.Func func = new MathPackage.Operations.Func(name, args, MathPackage.Transformer.GetNodeFromLoycNode(Process, GraphSettings.CalculationSettings));\r\n                    return func;\r\n                }\r\n                */\r\n            }\r\n\r\n            //such : a = 2\r\n            else if (left.type === 'variable' && right.type === 'number') {\r\n                return new Slider(Object.assign(propsTOset, { id: left.name, value: right.value }));\r\n            }\r\n            //such : a = -2\r\n            else if (left.type === 'variable' && right.check({ type: 'prefixOperator', name: '-' }) && right.args[0].type === 'number') {\r\n                return new Slider(Object.assign(propsTOset, { id: left.name, value: -right.args[0].value }));\r\n            }\r\n            //such : a = 2b+c\r\n            else if (left.type === 'variable') {\r\n                return new Variable(Object.assign(propsTOset, { id: left.name, value: right }));\r\n            }\r\n\r\n        }\r\n        // /// like 2+3*x = sin(y)^2\r\n        // else if ((IsBool(parsedString)) && (ContainsSymbol(parsedString, GraphSettings.sy_x) || ContainsSymbol(parsedString, GraphSettings.sy_y))) {\r\n        //    XYFunction f = new XYFunction(GraphSettings);\r\n        //    {\r\n        //       Expression = MathPackage.Transformer.GetNodeFromLoycNode(parsedString, GraphSettings.CalculationSettings);\r\n        //    };\r\n        //    if (selectName) {\r\n        //       if (enrollName) {\r\n        //          f.SetName(GraphSettings.selectName());\r\n        //       }\r\n        //       else {\r\n        //          f.Name = GraphSettings.selectName();\r\n        //       }\r\n        //    }\r\n        //    return f;\r\n        // }\r\n\r\n        /// to add function like : x^2\r\n        else if (parsedString.contains({ type: 'variable', name: 'x' })) {\r\n            return new Xfunction(Object.assign(propsTOset, { expr: parsedString, }));\r\n        }\r\n\r\n        /// to add a point like (1, 2)\r\n        else if (parsedString.check({ type: 'block', name: '()' }) && parsedString.args.length == 1 && parsedString.args[0].check({ type: 'separator', name: ',', length: 2 })) {\r\n            /// it is a parametricFunction\r\n            if (vars.contains('t')) {\r\n                //    let func = new ParametricFunc({\r\n                //       Parameter: \"t\",\r\n                //       Start: new MathPackage.Nodes.Constant(-10),\r\n                //       End: new MathPackage.Nodes.Constant(10),\r\n                //       x_Expression: MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[0], GraphSettings.CalculationSettings),\r\n                //       y_Expression: MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[1], GraphSettings.CalculationSettings),\r\n                //    });\r\n                //   ;\r\n                //    func.Step = null;\r\n                //    if (selectName) {\r\n                //       if (enrollName)\r\n                //          func.SetName(GraphSettings.selectName());\r\n                //       else\r\n                //          func.Name = GraphSettings.selectName();\r\n                //    }\r\n                //    return func;\r\n            }\r\n            /// it is a point\r\n            else {\r\n                return new Point({ x: parsedString.args[0].args[0], y: parsedString.args[0].args[1], ...propsTOset });\r\n            }\r\n        }\r\n\r\n        {\r\n            /*\r\n\r\n        else {\r\n            //#region \"Add PointsDependant\";\r\n            if (PDsTypes().Contains(parsedString.Target.Name.ToString())) {\r\n                PointsDependant pd = GetPD(parsedString, GraphSettings, selectName, enrollName);\r\n                if (pd != null) {\r\n                    return pd;\r\n                }\r\n            }\r\n            //#endregion\r\n            else if (parsedString.Target.Name.ToString() == \"Curve\") {\r\n                if (parsedString.Args.Count == 5) {\r\n                    // Checking for problems\r\n                    if (!parsedString.Args[0].IsId || !MathExpression(parsedString.Args[1]) || !MathExpression(parsedString.Args[2]) || !MathExpression(parsedString.Args[3]) || !MathExpression(parsedString.Args[4]))\r\n                        throw new Exception($\"the arguments is not valid.\\n{parsedString.ToString().Remove(0, parsedString.ToString().length - 1)}\");\r\n                    // Getting the object\r\n                    ParametricFunc func = new ParametricFunc(GraphSettings);\r\n                    {\r\n                        Parameter = parsedString.Args[0].Name.Name,\r\n                            Start = MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[1], GraphSettings.CalculationSettings),\r\n                            End = MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[2], GraphSettings.CalculationSettings),\r\n                            x_Expression = MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[3], GraphSettings.CalculationSettings),\r\n                            y_Expression = MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[4], GraphSettings.CalculationSettings),\r\n            };\r\n                    func.Step = null;\r\n                    if (selectName) {\r\n                        if (enrollName)\r\n                            func.SetName(GraphSettings.selectName());\r\n                        else\r\n                            func.Name = GraphSettings.selectName();\r\n                    }\r\n                    return func;\r\n                }\r\n                else if (parsedString.Args.Count == 6) {\r\n                    // Checking for problems\r\n                    if (!parsedString.Args[0].IsId || !MathExpression(parsedString.Args[1]) || !MathExpression(parsedString.Args[2]) || !MathExpression(parsedString.Args[3]) || !MathExpression(parsedString.Args[4]) || !MathExpression(parsedString.Args[5]))\r\n                        throw new Exception($\"the arguments is not valid.\\n{parsedString.ToString().Remove(0, parsedString.ToString().length - 1)}\");\r\n                    // Getting the object\r\n                    ParametricFunc func = new ParametricFunc(GraphSettings);\r\n                    {\r\n                        Parameter = parsedString.Args[0].Name.Name,\r\n                            Start = MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[1], GraphSettings.CalculationSettings),\r\n                            End = MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[2], GraphSettings.CalculationSettings),\r\n                            Step = MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[3], GraphSettings.CalculationSettings),\r\n                            x_Expression = MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[4], GraphSettings.CalculationSettings),\r\n                            y_Expression = MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[5], GraphSettings.CalculationSettings),\r\n                        };\r\n                    if (selectName) {\r\n                        if (enrollName)\r\n                            func.SetName(GraphSettings.selectName());\r\n                        else\r\n                            func.Name = GraphSettings.selectName();\r\n                    }\r\n                    return func;\r\n                }\r\n            }\r\n        }\r\n\r\n    */\r\n        }\r\n\r\n        return new EvalExpr(Object.assign(propsTOset, { expr: parsedString, drawable: false }));\r\n    }\r\n\r\n    getChildById(id) {\r\n        // for (let index = 0; index < this.children.length; index++) {\r\n        //     if (this.children[index].id === id) return { child, index };\r\n        //     continue;\r\n        // }\r\n        return this.children.get(id);\r\n    }\r\n\r\n    update(draw = true, coors = true) {\r\n        if (this.canvas) {\r\n            if (coors) {\r\n                this.subcanvas.clear();\r\n                this.coor.render(this.subcanvas);\r\n            }\r\n            this.ChildrenCanvas.clear();\r\n            for (let child of this.children.values()) {\r\n                if (child) {\r\n                    child.render(this.ChildrenCanvas);\r\n                }\r\n            }\r\n\r\n            if (draw) this.draw();\r\n        }\r\n    }\r\n\r\n    draw() {\r\n        this.canvas.clear(this.coor.coorSettings.background.toString());\r\n        this.canvas.ctx.drawImage(this.subcanvas.elt, 0, 0);\r\n        this.canvas.ctx.drawImage(this.ChildrenCanvas.elt, 0, 0);\r\n    }\r\n\r\n}","import ChildControl from './ChildControl.js';\r\nimport Sketch from '../PLOTTO/Sketch.js';\r\n\r\n//#region variables\r\nexport var subTools = {\r\n   details: SUI.TempMessege({\r\n      layer: false,\r\n      toolsbar: true,\r\n      onhoverFix: true,\r\n      position: { bottom: 20, left: 20 },\r\n      duration: 2500, // to make it fixed\r\n      content: '<p style=\"background: green; color:white;\">There is no god but Allah',\r\n      parent: document.querySelector('.canvas-container')\r\n   })\r\n};\r\nexport var mouse = { x: undefined, y: undefined };\r\n\r\nexport var keypadSettings = {\r\n   backspaceInterval: undefined,\r\n   mouseDownForInterval: false,\r\n   showHideKeyBtn: document.querySelector(\".sh-keypad\"),\r\n   mathField: document.querySelector('.script')\r\n};\r\n//#endregion\r\n\r\n//#region methods\r\n\r\nexport function updateObjsOrder() {\r\n   let objs = document.querySelectorAll('.controls li');\r\n   let order = 1;\r\n   for (let obj of objs) {\r\n      obj.setAttribute('index', order -1);\r\n      obj.querySelector('.order').textContent = order++;\r\n   }\r\n}\r\n\r\nexport function addControl(control, index = 'last', autoFocus = true) {\r\n   var controls = document.querySelector('.controls');\r\n   index = (math.isNumeric(index) && index > controls.childElementCount - 1) ? 'last' : index;\r\n   let i = index === 'last' ? controls.childElementCount - 1 : index;\r\n   if (i > -1 && index !== 'last') {\r\n      control.elt.querySelector('.order').textContent = i + 1;\r\n      controls.insertBefore(control.elt, controls.children[i]);\r\n      updateObjsOrder();\r\n   } else {\r\n      control.elt.setAttribute('index', controls.childElementCount);\r\n      control.elt.querySelector('.order').textContent = controls.childElementCount + 1;\r\n      controls.appendChild(control.elt);\r\n   }\r\n   if (autoFocus) control.focus();\r\n}\r\n\r\nexport function removeControl(control) {\r\n   if (control === keypadSettings.focusedControl) {\r\n      let alter = control.elt.previousElementSibling || control.elt.nextElementSibling;\r\n      if (alter) {\r\n         mySketch.children.get(alter.getAttribute('id')).control.focus();\r\n      }\r\n   }\r\n   control.elt.remove();\r\n   var controls = document.querySelector('.controls');\r\n   var newControlBtn = controls.parentElement.querySelector('#add-new-control');\r\n   if (controls.childElementCount === 0) {\r\n      newControlBtn.classList.add('animate-shake');\r\n      controls.parentElement.classList.add('blink-error');\r\n      setTimeout(() => {\r\n         newControlBtn.classList.remove('animate-shake');\r\n         controls.parentElement.classList.remove('blink-error');\r\n         addControl(new ChildControl());\r\n      }, 400);\r\n   }\r\n}\r\n\r\nexport function addTOsketch(child, controlIndex = 'last' /* the index */) {\r\n   if ((controlIndex || controlIndex === 0) && !child.control) {\r\n      let control = new ChildControl(child);\r\n      addControl(control, controlIndex);\r\n   }\r\n   mySketch.appendChild(child);\r\n}\r\n\r\nexport var canvasParent = document.querySelector('.canvas-container');\r\nexport function resize(setContainment = true) {\r\n   checkSM();\r\n\r\n   document.body.style.height = window.innerHeight + 'px';\r\n\r\n   mySketch.canvas.resize(canvasParent.clientWidth, canvasParent.clientHeight);\r\n   mySketch.subcanvas.resize(canvasParent.clientWidth, canvasParent.clientHeight);\r\n   mySketch.ChildrenCanvas.resize(canvasParent.clientWidth, canvasParent.clientHeight);\r\n\r\n   mySketch.gs.width = canvasParent.clientWidth;\r\n   mySketch.gs.height = canvasParent.clientHeight;\r\n\r\n   let vp = mySketch.gs.viewport;\r\n   mySketch.gs.transform.onchange();\r\n   // if (angles.minAngle(new vector(1, 0), vector.fromAngle(mySketch.gs.transform.xAngle)).toFixed(3) === (0).toFixed(3) && angles.minAngle(new vector(1, 0), vector.fromAngle(mySketch.gs.transform.yAngle)).toFixed(3) === (Math.PI / 2).toFixed(3)) {\r\n   mySketch.gs.transform.transformOrigin = undefined;\r\n   mySketch.gs.transform.setViewport(vp, null, true);\r\n   // }\r\n\r\n   if (setContainment) {\r\n      let sideBar = document.querySelector('.sidebar-container');\r\n\r\n      $(\".sidebar-container .resizer\")\r\n         .draggable('option', 'containment', getContainment(sideBar));\r\n      // .css({ left: document.querySelector('.sidebar-container').clientWidth + 'px' });\r\n   }\r\n\r\n   mySketch.update();\r\n   resize.prevSize = { width: window.innerWidth, height: window.innerHeight };\r\n}\r\nexport function checkSM(){\r\n   if (window.innerWidth <= 600 && resize.prevSize.width > 600) {\r\n      /// changing the element layout\r\n      document.body.querySelector('.app-container .container').append(document.body.querySelector('.keypad-container'));\r\n      checkSM.smallScreen = true;\r\n   } else if (window.innerWidth > 600 && resize.prevSize.width <= 600) {\r\n      /// changing the element layout\r\n      document.body.append(document.body.querySelector('.app-container .container .keypad-container'));\r\n      checkSM.smallScreen = false;\r\n   }\r\n}\r\ncheckSM.prevSize = { width: window.innerWidth, height: window.innerHeight };\r\n\r\nexport function getContainment(elt) {\r\n   let sidebarStyle = window.getComputedStyle(elt);\r\n   let min = parseInt(sidebarStyle.minWidth.replace('px', '')),\r\n      max = parseInt(sidebarStyle.maxWidth.replace('px', ''));\r\n   /// this is for solving the problem when the max width 30%vw is lower than the min width 300px,\r\n   ///   - which cuase a problem with the position (style.left) of the resizer. \r\n   if (min > max) {\r\n      return [\r\n         min, 0,\r\n         min,\r\n         parseInt(sidebarStyle.height.replace('px', ''))\r\n      ];\r\n   } else {\r\n      return [\r\n         min, 0,\r\n         max,\r\n         parseInt(sidebarStyle.height.replace('px', ''))\r\n      ];\r\n   }\r\n\r\n}\r\n\r\nexport function genRandomName() {\r\n   let num = 0;\r\n   /// randomNameNum is here to avoid getting the same random name if the code is implemented so fast\r\n\r\n   return (Date.now() + genRandomName.randomNameNum++).toString(36);\r\n}\r\ngenRandomName.randomNameNum = 0;\r\n\r\n\r\n//#endregion\r\n","\r\n//#region canvas events\r\nimport { subTools, mouse } from '../global.js';\r\n\r\nexport default function canvasEvents() {\r\n   let mousepressed;\r\n   let lines = MathPackage.Lines;\r\n\r\n   let startTransFunc = (e) => {\r\n\r\n      mousepressed = true;\r\n\r\n      let canvasPos = getPosittion(canvas.elt);\r\n      if (e.type === 'mousedown') {\r\n         mouse.x = e.clientX - canvasPos.left;\r\n         mouse.y = e.clientY - canvasPos.top;\r\n      } else {\r\n         //touchstart\r\n         let touch = e.touches[0];\r\n         mouse.x = touch.clientX - canvasPos.left;\r\n         mouse.y = touch.clientY - canvasPos.top;\r\n      }\r\n\r\n      Object.assign(subTools, {\r\n         type: subTools.type,\r\n         mouse: new vector(mouse.x, mouse.y),\r\n         iVector: new vector(...mySketch.gs.iVector.toArray()),\r\n         jVector: new vector(...mySketch.gs.iVector.toArray())\r\n      });\r\n\r\n      if (subTools.type.search('axises') > -1) {\r\n         let xEq = lines.lineEquation(-mySketch.gs.transform.xAngle, mySketch.gs.center),\r\n            yEq = lines.lineEquation(-mySketch.gs.transform.yAngle, mySketch.gs.center);\r\n         let d = 30;\r\n         let distTo = {\r\n            x: lines.distToLine(subTools.mouse, xEq),\r\n            y: lines.distToLine(subTools.mouse, yEq)\r\n         };\r\n         if (distTo.x < d && distTo.y < d) {\r\n            subTools.axis = 'xy';\r\n            subTools.xSpace = mySketch.gs.transform.xSapce;\r\n            subTools.ySpace = mySketch.gs.transform.ySapce;\r\n            subTools.xAngle = mySketch.gs.transform.xAngle;\r\n            subTools.yAngle = mySketch.gs.transform.yAngle;\r\n            subTools.transformOrigin = new vector(mySketch.gs.center.x, mySketch.gs.center.y);\r\n            subTools.xPenColor = Object.assign(new drawing.color(), mySketch.coor.coorSettings.penXaxis.color);\r\n            subTools.yPenColor = Object.assign(new drawing.color(), mySketch.coor.coorSettings.penYaxis.color);\r\n            mySketch.coor.coorSettings.penXaxis.color = new drawing.color(255, 0, 0, 155);\r\n            mySketch.coor.coorSettings.penYaxis.color = new drawing.color(255, 0, 0, 155);\r\n         }\r\n         else if (distTo.x < d) {\r\n            subTools.axis = 'x';\r\n            subTools.space = mySketch.gs.transform.xSapce;\r\n            subTools.angle = mySketch.gs.transform.xAngle;\r\n            let o = new vector(math.constrain(mySketch.gs.center.x, 0, mySketch.gs.width), math.constrain(mySketch.gs.center.y, 0, mySketch.gs.height));\r\n            if (o.x !== mySketch.gs.center.x) {\r\n               o = subTools.mouse;\r\n            }\r\n            subTools.transformOrigin = o;\r\n            subTools.penColor = [mySketch.coor.coorSettings.penXaxis.color].slice()[0];\r\n            mySketch.coor.coorSettings.penXaxis.color = new drawing.color(255, 0, 0, 155);\r\n         }\r\n         else if (distTo.y < d) {\r\n            subTools.axis = 'y';\r\n            subTools.space = mySketch.gs.transform.ySapce;\r\n            subTools.angle = mySketch.gs.transform.yAngle;\r\n            let o = new vector(math.constrain(mySketch.gs.center.x, 0, mySketch.gs.width), math.constrain(mySketch.gs.center.y, 0, mySketch.gs.height));\r\n            if (o.y !== mySketch.gs.center.y) {\r\n               o = subTools.mouse;\r\n            }\r\n            subTools.transformOrigin = o;\r\n            subTools.penColor = [mySketch.coor.coorSettings.penYaxis.color].slice()[0];\r\n            mySketch.coor.coorSettings.penYaxis.color = new drawing.color(255, 0, 0, 155);\r\n         }\r\n         else {\r\n            subTools.axis = undefined;\r\n         }\r\n         subTools.increment = 0;\r\n         mySketch.draw();\r\n      } else if (subTools.type === 'zoom') {\r\n         subTools.pxViewport = {};\r\n      }\r\n      e.preventDefault();\r\n   };\r\n\r\n   canvas.elt.addEventListener('mousedown', startTransFunc);\r\n   canvas.elt.addEventListener('touchstart', startTransFunc);\r\n\r\n   let updateTransFunc = (e) => {\r\n      let canvasPos = getPosittion(canvas.elt);\r\n      if (e.type === 'mousemove') {\r\n         mouse.x = e.clientX - canvasPos.left;\r\n         mouse.y = e.clientY - canvasPos.top;\r\n      } else {\r\n         //touchstart\r\n         let touch = e.touches[0];\r\n         mouse.x = touch.clientX - canvasPos.left;\r\n         mouse.y = touch.clientY - canvasPos.top;\r\n      }\r\n      e.preventDefault();\r\n\r\n      if (mousepressed) {\r\n         switch (subTools.type) {\r\n            case 'move':\r\n               {\r\n                  moveCoor(e);\r\n                  break;\r\n               }\r\n            case 'scale-axises':\r\n               {\r\n                  scaleAxises(e);\r\n                  break;\r\n               }\r\n            case 'rotate-axises':\r\n               {\r\n                  rotateAxises(e);\r\n                  break;\r\n               }\r\n            case 'zoom':\r\n               {\r\n                  zoomBox(e);\r\n                  break;\r\n               }\r\n         }\r\n         e.preventDefault();\r\n      }\r\n   };\r\n\r\n   window.addEventListener('mousemove', updateTransFunc, true);\r\n   window.addEventListener('touchmove', updateTransFunc, { passive: false, capture: true });\r\n\r\n   function getPosittion(elt) {\r\n      let parentPos = { left: 0, top: 0 };\r\n      if (elt.offsetParent) {\r\n         parentPos = getPosittion(elt.offsetParent);\r\n      }\r\n      return { left: elt.offsetLeft + parentPos.left, top: elt.offsetTop + parentPos.top };\r\n   }\r\n\r\n   let transEndFunc = (e) => {\r\n      if (mousepressed) {\r\n         mousepressed = false;\r\n         if (subTools.type === 'move') {\r\n            mySketch.draw();\r\n         }\r\n         else if (subTools.type.search('axises') > -1) {\r\n            if (subTools.axis == 'x') {\r\n               mySketch.coor.coorSettings.penXaxis.color = subTools.penColor;\r\n               mySketch.draw();\r\n            } else if (subTools.axis == 'y') {\r\n               mySketch.coor.coorSettings.penYaxis.color = subTools.penColor;\r\n               mySketch.draw();\r\n            } else if (subTools.axis == 'xy') {\r\n               mySketch.coor.coorSettings.penXaxis.color = subTools.xPenColor;\r\n               mySketch.coor.coorSettings.penYaxis.color = subTools.yPenColor;\r\n               mySketch.draw();\r\n            }\r\n         }\r\n         else if (subTools.type === 'zoom') {\r\n            if (subTools.pxViewport.width && subTools.pxViewport.height) {\r\n               mySketch.gs.transform.transformOrigin = undefined;\r\n               mySketch.gs.transform.setViewport(mySketch.gs.transform.getViewport(subTools.pxViewport), new vector(subTools.pxViewport.xmin, subTools.pxViewport.ymin));\r\n            }\r\n            showTransDetails([\r\n               'x: {',\r\n               `  xmin: ${mySketch.gs.viewport.xmin},`,\r\n               `  xmax: ${mySketch.gs.viewport.xmax}`,\r\n               '},',\r\n               'y: {',\r\n               `  ymin: ${mySketch.gs.viewport.ymin},`,\r\n               `  ymax: ${mySketch.gs.viewport.ymax}`,\r\n               '}',\r\n            ], 'zoom');\r\n            mySketch.update();\r\n         }\r\n\r\n      }\r\n   };\r\n\r\n   window.addEventListener('mouseup', transEndFunc);\r\n   window.addEventListener('touchend', transEndFunc);\r\n\r\n   canvas.elt.addEventListener('mousewheel', (e) => {\r\n      {\r\n         e.preventDefault();\r\n         let center = mySketch.gs.center;\r\n         let mousePos = mouse;\r\n         if (MathPackage.Core.dist(mouse.x, center.x, mouse.y, center.y) < 30) {\r\n            mousePos = center;\r\n         }\r\n         if (e.wheelDelta > 0) {\r\n            mySketch.gs.transform.zoomIn(new vector(mousePos.x, mousePos.y));\r\n            mySketch.update();\r\n         } else {\r\n            mySketch.gs.transform.zoomOut(new vector(mousePos.x, mousePos.y));\r\n            mySketch.update();\r\n         }\r\n      }\r\n   });\r\n\r\n   //#region mouse move (tools'-subtools') functions\r\n\r\n   function moveCoor(e) {\r\n      mySketch.gs.transform.translate(new vector(mouse.x, mouse.y).subtract(subTools.mouse));\r\n      mySketch.update();\r\n      canvas.ellipse(mouse.x, mouse.y, 5);\r\n      subTools.mouse = new vector(mouse.x, mouse.y);\r\n   }\r\n\r\n   function scaleAxises(e) {\r\n      if (subTools.axis == 'x') {\r\n         let rotatedMouse = subTools.mouse;\r\n         let xEq = lines.lineEquation(-mySketch.gs.transform.xAngle, mySketch.gs.center);\r\n         let incre = (math.dist(mouse.x, mouse.y, rotatedMouse.x, rotatedMouse.y) ** 2 - lines.distToLine(new vector(mouse.x, mouse.y), xEq) ** 2) ** 0.5;\r\n\r\n         mySketch.gs.transform.transformOrigin = undefined;\r\n         if (!isNaN(incre)) {\r\n            let mina = angles.minAngle(vector.fromAngle(-mySketch.gs.transform.xAngle), new vector(mouse.x, mouse.y).subtract(rotatedMouse));\r\n            let dir = mina < Math.PI / 2 ? 1 : (mina > Math.PI / 2 ? -1 : 0);\r\n\r\n            mySketch.gs.transform.transformOrigin = subTools.transformOrigin;\r\n            mySketch.gs.transform.xSpace += (incre * dir - subTools.increment);\r\n            mySketch.gs.transform.reformXspace();\r\n            subTools.increment = incre * dir;\r\n         }\r\n\r\n         mySketch.gs.transform.onchange(true);\r\n         mySketch.update();\r\n         canvas.ellipse(rotatedMouse.x, rotatedMouse.y, 5);\r\n         canvas.ellipse(mouse.x, mouse.y, 5);\r\n\r\n         showTransDetails([\r\n            `*${(mySketch.gs.iVector.mag / subTools.iVector.mag).toFixed(2)}`\r\n         ]);\r\n\r\n      } else if (subTools.axis == 'y') {\r\n         let rotatedMouse = subTools.mouse;\r\n         let yEq = lines.lineEquation(-mySketch.gs.transform.yAngle, mySketch.gs.center);\r\n         let incre = (math.dist(mouse.x, mouse.y, rotatedMouse.x, rotatedMouse.y) ** 2 - lines.distToLine(new vector(mouse.x, mouse.y), yEq) ** 2) ** 0.5;\r\n\r\n         mySketch.gs.transform.transformOrigin = undefined;\r\n         if (!isNaN(incre)) {\r\n            let mina = angles.minAngle(vector.fromAngle(-mySketch.gs.transform.yAngle), new vector(mouse.x, mouse.y).subtract(rotatedMouse));\r\n            let dir = mina < Math.PI / 2 ? 1 : (mina > Math.PI / 2 ? -1 : 0);\r\n\r\n            mySketch.gs.transform.transformOrigin = subTools.transformOrigin;\r\n            mySketch.gs.transform.ySpace += (incre * dir - subTools.increment);\r\n            mySketch.gs.transform.reformYspace();\r\n            subTools.increment = incre * dir;\r\n         }\r\n\r\n         mySketch.gs.transform.onchange(true);\r\n         mySketch.update();\r\n         canvas.ellipse(rotatedMouse.x, rotatedMouse.y, 5);\r\n         canvas.ellipse(mouse.x, mouse.y, 5);\r\n         showTransDetails([\r\n            `*${(mySketch.gs.jVector.mag / subTools.jVector.mag).toFixed(2)}`\r\n         ]);\r\n      }\r\n      else if (subTools.axis == 'xy') {\r\n         let midEq = lines.lineEquation(-(mySketch.gs.transform.yAngle + mySketch.gs.transform.xAngle) / 2, mySketch.gs.center);\r\n         let rotatedMouse = lines.projectionToLine(subTools.mouse, midEq); // rotatedMouse here is the modified start point which sets on the line between x and y axises \r\n\r\n         let incre = (math.dist(mouse.x, mouse.y, rotatedMouse.x, rotatedMouse.y) ** 2 - lines.distToLine(new vector(mouse.x, mouse.y), midEq) ** 2) ** 0.5; // pathagorean's method \r\n\r\n         mySketch.gs.transform.transformOrigin = undefined;\r\n         if (!isNaN(incre)) {\r\n            let mina = angles.minAngle(vector.fromAngle(-mySketch.gs.transform.yAngle), new vector(mouse.x, mouse.y).subtract(rotatedMouse));\r\n            let dir = mina < Math.PI / 2 ? 1 : (mina > Math.PI / 2 ? -1 : 0);\r\n\r\n            mySketch.gs.transform.transformOrigin = subTools.transformOrigin;\r\n            let ratio = (mySketch.gs.transform.ySpace + (incre * dir - subTools.increment)) / mySketch.gs.transform.ySpace;\r\n            ratio = math.constrain(ratio, 0.9, 1.1);\r\n            mySketch.gs.transform.ySpace *= ratio;\r\n            mySketch.gs.transform.xSpace *= ratio;\r\n            mySketch.gs.transform.reformYspace();\r\n            mySketch.gs.transform.reformXspace();\r\n            subTools.increment = incre * dir;\r\n         }\r\n\r\n         mySketch.gs.transform.onchange(true);\r\n         mySketch.update();\r\n         canvas.ellipse(rotatedMouse.x, rotatedMouse.y, 5);\r\n         canvas.ellipse(mouse.x, mouse.y, 5);\r\n         showTransDetails([\r\n            `*${(mySketch.gs.jVector.mag / subTools.jVector.mag).toFixed(2)}`\r\n         ]);\r\n      }\r\n   }\r\n\r\n   function rotateAxises(e) {\r\n      if (subTools.axis == 'x') {\r\n         if (math.dist(mySketch.gs.center.x, mySketch.gs.center.y, mouse.x, mouse.y) > 10) {\r\n            let rotatedMouse = subTools.mouse;\r\n            let rotationAngle = angles.angle(subTools.mouse.subtract(new vector(mySketch.gs.center.x, mySketch.gs.center.y)), new vector(mouse.x, mouse.y).subtract(new vector(mySketch.gs.center.x, mySketch.gs.center.y)), 'vectors');\r\n            rotationAngle = angles.constrainAngle(rotationAngle);\r\n            if (!isNaN(rotationAngle)) {\r\n               // mySketch.gs.transform.xAngle = snapAngle(subTools.angle - rotationAngle);\r\n               mySketch.gs.transform.xAngle = angles.snapAngle(subTools.angle - rotationAngle, [0, Math.PI]);\r\n               let center = mySketch.gs.center;\r\n               rotatedMouse = center.add(subTools.mouse.subtract(center).rotate(rotationAngle));\r\n            }\r\n\r\n            mySketch.gs.transform.transformOrigin = undefined;\r\n            mySketch.gs.transform.invokeOnchange = true;\r\n            mySketch.gs.transform.onchange();\r\n            mySketch.update();\r\n\r\n            canvas.ellipse(rotatedMouse.x, rotatedMouse.y, 5);\r\n            canvas.ellipse(mouse.x, mouse.y, 5);\r\n            showTransDetails([\r\n               `xAngle: ${angles.stringDegAngle(mySketch.gs.transform.xAngle.toFixed(2))}`,\r\n               `rotationAngle: ${angles.stringDegAngle(-rotationAngle)}`\r\n            ]);\r\n         }\r\n      } else if (subTools.axis == 'y') {\r\n         if (math.dist(mySketch.gs.center.x, mySketch.gs.center.y, mouse.x, mouse.y) > 10) {\r\n\r\n            let rotatedMouse = subTools.mouse;\r\n            let rotationAngle = angles.angle(subTools.mouse.subtract(new vector(mySketch.gs.center.x, mySketch.gs.center.y)), new vector(mouse.x, mouse.y).subtract(new vector(mySketch.gs.center.x, mySketch.gs.center.y)), 'vectors');\r\n            rotationAngle = angles.constrainAngle(rotationAngle);\r\n            if (!isNaN(rotationAngle)) {\r\n               mySketch.gs.transform.yAngle = angles.snapAngle(subTools.angle - rotationAngle);\r\n               let center = mySketch.gs.center;\r\n               rotatedMouse = center.add(subTools.mouse.subtract(center).rotate(rotationAngle));\r\n            }\r\n\r\n            mySketch.gs.transform.invokeOnchange = true;\r\n            mySketch.gs.transform.onchange();\r\n            mySketch.update();\r\n            canvas.ellipse(rotatedMouse.x, rotatedMouse.y, 5);\r\n            canvas.ellipse(mouse.x, mouse.y, 5);\r\n            showTransDetails([\r\n               `yAngle: ${angles.stringDegAngle(mySketch.gs.transform.yAngle.toFixed(2))}`,\r\n               `rotationAngle: ${angles.stringDegAngle(-rotationAngle)}`\r\n            ]);\r\n         }\r\n      } else if (subTools.axis == 'xy') {\r\n         if (math.dist(mySketch.gs.center.x, mySketch.gs.center.y, mouse.x, mouse.y) > 10) {\r\n            let rotatedMouse = subTools.mouse;\r\n            let rotationAngle = angles.angle(subTools.mouse.subtract(new vector(mySketch.gs.center.x, mySketch.gs.center.y)), new vector(mouse.x, mouse.y).subtract(new vector(mySketch.gs.center.x, mySketch.gs.center.y)), 'vectors');\r\n            rotationAngle = angles.constrainAngle(rotationAngle);\r\n            if (!isNaN(rotationAngle)) {\r\n               mySketch.gs.transform.xAngle = subTools.xAngle - rotationAngle;\r\n               mySketch.gs.transform.yAngle = subTools.yAngle - rotationAngle;\r\n               let center = mySketch.gs.center;\r\n               rotatedMouse = center.add(subTools.mouse.subtract(center).rotate(rotationAngle));\r\n            }\r\n\r\n            mySketch.gs.transform.invokeOnchange = true;\r\n            mySketch.gs.transform.onchange();\r\n            mySketch.update();\r\n            canvas.ellipse(rotatedMouse.x, rotatedMouse.y, 5);\r\n            canvas.ellipse(mouse.x, mouse.y, 5);\r\n            showTransDetails([\r\n               `xAngle: ${angles.stringDegAngle(mySketch.gs.transform.xAngle)}`,\r\n               `yAngle: ${angles.stringDegAngle(mySketch.gs.transform.yAngle)}`,\r\n               `rotationAngle: ${angles.stringDegAngle(-rotationAngle)}`\r\n            ]);\r\n         }\r\n      }\r\n   }\r\n\r\n   function zoomBox(e) {\r\n\r\n      //#region calculating box\r\n      let s = { xmin: subTools.mouse.x, ymin: subTools.mouse.y, xmax: mouse.x, ymax: mouse.y };\r\n\r\n      subTools.pxViewport.xmin = Math.min(s.xmin, s.xmax); subTools.pxViewport.ymin = Math.min(s.ymin, s.ymax);\r\n      subTools.pxViewport.xmax = Math.max(s.xmin, s.xmax); subTools.pxViewport.ymax = Math.max(s.ymin, s.ymax);\r\n      subTools.pxViewport.width = subTools.pxViewport.xmax - subTools.pxViewport.xmin;\r\n      subTools.pxViewport.height = subTools.pxViewport.ymax - subTools.pxViewport.ymin;\r\n      s = subTools.pxViewport;\r\n      let slice;\r\n      if (s.width < 10 && s.height < 10) {\r\n         s.width = 0;\r\n         s.height = 0;\r\n      }\r\n      // reserved ratios\r\n      if (document.querySelector('#subtools-zoom-rr').checked || e.shiftKey) {\r\n         let a = angles.minAngle(vector.fromAngle(0), new vector(mySketch.gs.width, mySketch.gs.height));\r\n         let equ = lines.lineEquation(a, subTools.mouse);\r\n         let p = lines.projectionToLine(new vector(mouse.x, mouse.y), equ);\r\n         s = { xmin: subTools.mouse.x, ymin: subTools.mouse.y, xmax: Math.round(p.x), ymax: Math.round(p.y) };\r\n         subTools.pxViewport.xmin = Math.min(s.xmin, s.xmax); subTools.pxViewport.ymin = Math.min(s.ymin, s.ymax);\r\n         subTools.pxViewport.xmax = Math.max(s.xmin, s.xmax); subTools.pxViewport.ymax = Math.max(s.ymin, s.ymax);\r\n         subTools.pxViewport.width = subTools.pxViewport.xmax - subTools.pxViewport.xmin;\r\n         subTools.pxViewport.height = subTools.pxViewport.ymax - subTools.pxViewport.ymin;\r\n         s = subTools.pxViewport;\r\n      }\r\n      else {\r\n         if (s.height < 10 && s.width > 10) {\r\n            slice = { type: 'vertical' };\r\n            s.ymin = 0;\r\n            s.ymax = mySketch.gs.height;\r\n            s.height = mySketch.gs.height;\r\n         }\r\n         else if (s.height > 10 && s.width < 10) {\r\n            slice = { type: 'horizental' };\r\n            s.xmin = 0;\r\n            s.xmax = mySketch.gs.width;\r\n            s.width = mySketch.gs.width;\r\n         }\r\n      }\r\n      //#endregion\r\n\r\n      //#region drawing box\r\n      mySketch.subcanvas.resize(mySketch.gs.width, mySketch.gs.height);\r\n      mySketch.subcanvas.clear();\r\n      let c1 = mySketch.canvas.get(0, 0, mySketch.canvas.width, mySketch.canvas.height);\r\n      let c2 = mySketch.canvas.get(s.xmin, s.ymin, s.width, s.height);\r\n      mySketch.subcanvas.image(c1, 0, 0);\r\n      let fadeColor = mySketch.coor.coorSettings.background.isDark() ? [255, 155] : [0, 155];\r\n      mySketch.subcanvas.background(...fadeColor);\r\n      if (s.width && s.height) {\r\n         let size = 10,\r\n            sw = 4 + (4), r = 3;\r\n         if (!slice) {\r\n\r\n            mySketch.subcanvas.stroke(0);\r\n            mySketch.subcanvas.strokeWeight(sw);\r\n            mySketch.subcanvas.rect(s.xmin, s.ymin, size, size, r);\r\n            mySketch.subcanvas.rect(s.xmax - size, s.ymin, size, size, r);\r\n            mySketch.subcanvas.rect(s.xmin, s.ymax - size, size, size, r);\r\n            mySketch.subcanvas.rect(s.xmax - size, s.ymax - size, size, size, r);\r\n\r\n            mySketch.subcanvas.stroke(255, 200);\r\n            mySketch.subcanvas.strokeWeight(sw - 4);\r\n            mySketch.subcanvas.rect(s.xmin, s.ymin, size, size, r);\r\n            mySketch.subcanvas.rect(s.xmax - size, s.ymin, size, size, r);\r\n            mySketch.subcanvas.rect(s.xmin, s.ymax - size, size, size, r);\r\n            mySketch.subcanvas.rect(s.xmax - size, s.ymax - size, size, size, r);\r\n\r\n         } else {\r\n            let size = 20,\r\n               sw = 4 + (4), r = 3;\r\n            if (slice.type === 'vertical') {\r\n               mySketch.subcanvas.stroke(0);\r\n               mySketch.subcanvas.strokeWeight(sw);\r\n               mySketch.subcanvas.rect(s.xmin, subTools.mouse.y - size / 2, size, size, r);\r\n               mySketch.subcanvas.rect(s.xmax - size, subTools.mouse.y - size / 2, size, size, r);\r\n               mySketch.subcanvas.stroke(255, 200);\r\n               mySketch.subcanvas.strokeWeight(sw - 4);\r\n               mySketch.subcanvas.rect(s.xmin, subTools.mouse.y - size / 2, size, size, r);\r\n               mySketch.subcanvas.rect(s.xmax - size, subTools.mouse.y - size / 2, size, size, r);\r\n            } else {\r\n               mySketch.subcanvas.stroke(0);\r\n               mySketch.subcanvas.strokeWeight(8);\r\n               mySketch.subcanvas.rect(subTools.mouse.x - size / 2, s.ymin, size, size, r);\r\n               mySketch.subcanvas.rect(subTools.mouse.x - size / 2, s.ymax - size, size, size, r);\r\n               mySketch.subcanvas.stroke(255, 200);\r\n               mySketch.subcanvas.strokeWeight(4);\r\n               mySketch.subcanvas.rect(subTools.mouse.x - size / 2, s.ymin, size, size, r);\r\n               mySketch.subcanvas.rect(subTools.mouse.x - size / 2, s.ymax - size, size, size, r);\r\n            }\r\n         }\r\n\r\n         mySketch.subcanvas.image(c2, s.xmin, s.ymin);\r\n      }\r\n      image(mySketch.subcanvas, 0, 0);\r\n\r\n      //#endregion\r\n\r\n   }\r\n\r\n   /**\r\n    * @param {Array} messeges ::: Array of string which will be converted into p html element\r\n    */\r\n   function showTransDetails(messeges) {\r\n      let html = '<div class=\"subtools-details\">';\r\n      for (let msg of messeges) {\r\n         html += '<p>' + msg + '</p>';\r\n      }\r\n      html += '</div>';\r\n      subTools.details.setContent(html);\r\n      subTools.details.show();\r\n   }\r\n\r\n   //#endregion\r\n\r\n}\r\n\r\n//#endregion\r\n\r\n","import { subTools } from '../global.js';\r\n\r\nexport default function toolsEvents() {\r\n\r\n   //#region zoom\r\n\r\n   let zoom = (direction) => {\r\n      var delay = 20;\r\n      setTimeout(() => {\r\n         if (direction == 'in') { mySketch.gs.transform.zoomIn(); mySketch.update(); } else { mySketch.gs.transform.zoomOut(); mySketch.update(); }\r\n         setTimeout(() => {\r\n            if (direction == 'in') { mySketch.gs.transform.zoomIn(); mySketch.update(); } else { mySketch.gs.transform.zoomOut(); mySketch.update(); }\r\n            setTimeout(() => {\r\n               if (direction == 'in') { mySketch.gs.transform.zoomIn(); mySketch.update(); } else { mySketch.gs.transform.zoomOut(); mySketch.update(); }\r\n               setTimeout(() => {\r\n                  if (direction == 'in') { mySketch.gs.transform.zoomIn(); mySketch.update(); } else { mySketch.gs.transform.zoomOut(); mySketch.update(); }\r\n                  setTimeout(() => {\r\n                     if (direction == 'in') { mySketch.gs.transform.zoomIn(); mySketch.update(); } else { mySketch.gs.transform.zoomOut(); mySketch.update(); }\r\n                     setTimeout(() => {\r\n                        if (direction == 'in') { mySketch.gs.transform.zoomIn(); mySketch.update(); } else { mySketch.gs.transform.zoomOut(); mySketch.update(); }\r\n                        setTimeout(() => {\r\n                           if (direction == 'in') { mySketch.gs.transform.zoomIn(); mySketch.update(); } else { mySketch.gs.transform.zoomOut(); mySketch.update(); }\r\n                           setTimeout(() => {\r\n                              if (direction == 'in') { mySketch.gs.transform.zoomIn(); mySketch.update(); } else { mySketch.gs.transform.zoomOut(); mySketch.update(); }\r\n                           }, delay);\r\n                        }, delay);\r\n                     }, delay);\r\n                  }, delay);\r\n               }, delay);\r\n            }, delay);\r\n         }, delay);\r\n      });\r\n   };\r\n\r\n   document.querySelector('#zoom-in-btn').addEventListener('click', () => {\r\n      zoom('in');\r\n   });\r\n\r\n   document.querySelector('#zoom-out-btn').addEventListener('click', () => {\r\n      zoom('out');\r\n   });\r\n\r\n   //#endregion tool - subtools events\r\n\r\n   let radios = document.querySelectorAll('.subtools-container input[type*=\"radio\"]');\r\n   radios.forEach(el => {\r\n      subTools.type = el.checked ? el.dataset.type : subTools.type;\r\n      el.addEventListener('change', () => {\r\n         subTools.type = el.checked ? el.dataset.type : subTools.type;\r\n      });\r\n   });\r\n\r\n   document.querySelector('#home').addEventListener('click', () => {\r\n      mySketch.gs.reset();\r\n      mySketch.update();\r\n   });\r\n\r\n   document.querySelector('#centrate').addEventListener('click', () => {\r\n      mySketch.gs.centrate();\r\n      mySketch.update();\r\n   });\r\n\r\n} ","import canvasEvents from \"./canvasEvents.js\";\r\nimport toolsEvents from \"./toolsEvents.js\";\r\nimport ChildControl from \"../ChildControl.js\";\r\nimport { addControl, resize, keypadSettings, checkSM } from \"../global.js\";\r\n\r\nexport default function setEvents () {\r\n   //#region window events\r\n   window.addEventListener('resize', resize);\r\n   window.addEventListener(\"mouseup\", function (event) {\r\n      //#region for backspace interval\r\n      if (keypadSettings.mouseDownForInterval) {\r\n         keypadSettings.mouseDownForInterval = false;\r\n         clearInterval(keypadSettings.backspaceInterval);\r\n      }\r\n      //#endregion\r\n      keypadSettings.hideKeyPad = true;\r\n   });\r\n   window.addEventListener(\"touchend\", function (event) {\r\n      //#region for backspace interval\r\n      if (keypadSettings.mouseDownForInterval) {\r\n         keypadSettings.mouseDownForInterval = false;\r\n         clearInterval(keypadSettings.backspaceInterval);\r\n      }\r\n      //#endregion\r\n      keypadSettings.hideKeyPad = true;\r\n   });\r\n   window.addEventListener('mousedown', function (e) {\r\n      //#region hide keybad\r\n      let keypadShown = /\\svisible\\s|^visible\\s|\\svisible$/.test(keypadSettings.showHideKeyBtn.className); // hasClass\r\n      if (keypadSettings.hideKeyPad && keypadShown) {\r\n         keypadSettings.showHideKeyBtn.click();\r\n      }\r\n      //#endregion\r\n   });\r\n   window.addEventListener('touchstart', function (e) {\r\n      //#region hide keybad\r\n      let keypadShown = /\\svisible\\s|^visible\\s|\\svisible$/.test(keypadSettings.showHideKeyBtn.className); // hasClass\r\n      if (keypadSettings.hideKeyPad && keypadShown) {\r\n         keypadSettings.showHideKeyBtn.click();\r\n      }\r\n      //#endregion\r\n   });\r\n   //#endregion\r\n\r\n   document.querySelector('#add-new-control').addEventListener('click', (e) => {\r\n      addControl(new ChildControl()); \r\n   });\r\n   \r\n   document.querySelector('#show-hide-sidebar').addEventListener('click',function (e) {\r\n      let $this = $(this);\r\n      let __visible = $this.hasClass(\"visible\");\r\n      let from = __visible ? \"visible\" : \"unvisible\",\r\n         to = __visible ? \"unvisible\" : \"visible\";\r\n     \r\n         // let path = this.querySelector('path');\r\n      let sidebar = document.body.querySelector('.sidebar-container');\r\n      if (__visible) {\r\n         \r\n         if (checkSM.smallScreen) {\r\n            sidebar.style = 'width: ' + sidebar.clientWidth + 'px';\r\n            sidebar.style = 'height: ' + sidebar.clientHeight + 'px';\r\n         } else {\r\n            sidebar.style = 'width: ' + sidebar.clientWidth + 'px';\r\n            sidebar.style = 'height: ' + sidebar.clientHeight + 'px';\r\n         }\r\n\r\n         document.body.querySelector('.app-container').appendChild(this);\r\n         // path.setAttribute('d', path.getAttribute('right'));\r\n      } else {\r\n         sidebar.style = '';\r\n         sidebar.querySelector('.header').append(this);\r\n         // path.setAttribute('d', path.getAttribute('left'));\r\n      }\r\n\r\n      $this.removeClass(from);\r\n      $this.addClass(to);\r\n\r\n      sidebar.classList.remove(from);\r\n      sidebar.classList.add(to);\r\n\r\n      resize();\r\n   });\r\n\r\n   canvasEvents();\r\n   toolsEvents();\r\n}","import { keypadSettings, addControl } from './../global.js';\r\nimport ChildControl from './../ChildControl.js';\r\n\r\nexport default function(){\r\n   //#region (keypad - showHideBtn) events\r\n   let keypad = $('.keypad-container'),\r\n      sh = $(keypadSettings.showHideKeyBtn);\r\n\r\n   keypad.bind('focusin', function () {\r\n         keypadSettings.mathField.focus();\r\n   });\r\n\r\n   $(document.body).delegate(\"[cancel-hiding-keypad]\", \"mousedown touchstart\", function (e) {\r\n      keypadSettings.hideKeyPad = false;\r\n   });\r\n\r\n   $('.control').delegate(\".main\", \"touchstart\", function (e) {\r\n      if (sh.hasClass(\"hide\")) {\r\n         sh.click();\r\n      }\r\n   });\r\n   //#endregion\r\n\r\n   //#region writing\r\n\r\n   $(\".keypad-container .rows button[mq-cmd]\").each(function (index) {\r\n      $(this).on('click', function () {\r\n         let $this = $(this);\r\n         if ($this.hasClass('double-shiftable')) {\r\n            keypadSettings.mathField.cmd($(' > div.active > span.active', $this).attr('mq-cmd'));\r\n         } else if ($this.hasClass('shiftable')) {\r\n            keypadSettings.mathField.cmd($(' > span.active', $this).attr('mq-cmd'));\r\n         } else {\r\n            keypadSettings.mathField.cmd(this.getAttribute('mq-cmd'));\r\n         }\r\n         keypadSettings.focusedControl.focus();\r\n      });\r\n   });\r\n\r\n   $(\".keypad-container .rows button[mq-write]\").each(function (index) {\r\n      $(this).on('click', function () {\r\n         let $this = $(this);\r\n         if ($this.hasClass('double-shiftable')) {\r\n            keypadSettings.mathField.write($(' > div.active > span.active', $this).attr('mq-write'));\r\n         } else if ($this.hasClass('shiftable')) {\r\n            keypadSettings.mathField.write($(' > span.active', $this).attr('mq-write'));\r\n         } else {\r\n            keypadSettings.mathField.write(this.getAttribute('mq-write'));\r\n         }\r\n         keypadSettings.focusedControl.focus();\r\n      });\r\n   });\r\n\r\n   $(\".keypad-container .rows button[mq-func]\").each(function (index) {\r\n      $(this).on(\"click\", function () {\r\n         let $this = $(this);\r\n         if ($this.hasClass(\"double-shiftable\")) {\r\n            keypadSettings.mathField.write($(\" > div.active > span.active\", $this).attr(\"mq-func\"));\r\n         } else if ($this.hasClass(\"shiftable\")) {\r\n            keypadSettings.mathField.write($(\" > span.active\", $this).attr(\"mq-func\"));\r\n         } else {\r\n            keypadSettings.mathField.write(this.getAttribute(\"mq-func\"));\r\n         }\r\n         keypadSettings.mathField.cmd(\"(\");\r\n         keypadSettings.focusedControl.focus();\r\n      });\r\n   });\r\n\r\n   $(\".space\").on(\"click\", function () {\r\n      keypadSettings.mathField.keystroke(\"Right\");\r\n   });\r\n\r\n   //keystrokes\r\n   $(\".backspace\").on(\"mousedown\", function () {\r\n      if (keypadSettings.mathField.latex() == '') {\r\n         keypadSettings.focusedControl.remove();\r\n      } else {\r\n         keypadSettings.mathField.keystroke(\"Backspace\");\r\n      }\r\n\r\n      //#region for keep backSpace on holing the button\r\n\r\n      keypadSettings.mouseDownForInterval = true;\r\n      setTimeout(function () {\r\n         if (keypadSettings.mouseDownForInterval) {\r\n            keypadSettings.backspaceInterval = setInterval(function () {\r\n               keypadSettings.mathField.keystroke(\"Backspace\");\r\n            }, 120);\r\n         }\r\n      }, 400);\r\n\r\n      //#endregion\r\n\r\n   });\r\n\r\n   //#endregion\r\n\r\n   //#region direction\r\n\r\n   $(\".go-left\").on(\"click\", function () {\r\n      keypadSettings.mathField.keystroke(\"Left\");\r\n   });\r\n\r\n   $(\".go-right\").on(\"click\", function () {\r\n      keypadSettings.mathField.keystroke(\"Right\");\r\n   });\r\n\r\n   $(\".go-up\").on(\"click\", function () {\r\n      keypadSettings.mathField.keystroke(\"Up\");\r\n   });\r\n\r\n   $(\".go-down\").on(\"click\", function () {\r\n      keypadSettings.mathField.keystroke(\"Down\");\r\n   });\r\n\r\n   $(\".enter\").on(\"click\", function () {\r\n      addControl(new ChildControl(), parseInt(keypadSettings.focusedControl.orderELT.textContent));\r\n   });\r\n\r\n   //#endregion\r\n\r\n   //#region shift - double-shift\r\n\r\n   var shift = $(\".shift\");\r\n   shift.on(\"click\", function () {\r\n      let $this = $(this);\r\n      let rows = $this.parents(\".rows\");\r\n      if ($this.hasClass(\"active\")) {\r\n         $this.removeClass(\"active\");\r\n         $this.addClass(\"lock\");\r\n         rows.removeClass(\"shift-active\");\r\n         rows.addClass(\"shift-lock\");\r\n      } else {\r\n         if ($this.hasClass(\"lock\")) {\r\n            let spans = $(\r\n               \".shiftable > span, .double-shiftable > div > span\",\r\n               rows\r\n            );\r\n            spans.toggleClass(\"active\");\r\n            $this.removeClass(\"lock\");\r\n            rows.removeClass(\"shift-lock\");\r\n         } else {\r\n            let spans = $(\r\n               \".shiftable > span, .double-shiftable > div > span\",\r\n               rows\r\n            );\r\n            spans.toggleClass(\"active\");\r\n            $this.addClass(\"active\");\r\n            rows.addClass(\"shift-active\");\r\n         }\r\n      }\r\n   });\r\n\r\n   // this for disabling shift if it is not .lock\r\n   $(\".keypad-container .rows button\")\r\n      .not('.shift, .double-shift')\r\n      .on(\"click\", function () {\r\n         let $this = $(this);\r\n         let rows = $this.parents(\".rows\");\r\n         if (rows.hasClass(\"shift-active\")) {\r\n            let shift = $(\"button.shift\", rows);\r\n            let spans = $(\".shiftable > span, .double-shiftable > div > span\", rows);\r\n            spans.toggleClass(\"active\");\r\n            shift.removeClass(\"active\");\r\n            rows.removeClass('shift-active');\r\n         }\r\n      });\r\n\r\n   var dShift = $(\".double-shift\");\r\n   dShift.on(\"click\", function () {\r\n      let $this = $(this);\r\n      let divs = $(\".double-shiftable > div\", $this.parents(\".rows\"));\r\n      divs.toggleClass(\"active\");\r\n      $this.toggleClass(\"active\");\r\n\r\n   });\r\n\r\n      //#endregion\r\n}","import keypadEvents from './events.js';\r\nimport { keypadSettings, resize, checkSM } from '../global.js';\r\n\r\nexport default function setupKeypad() {\r\n\r\n   keypadSettings.showHideKeyBtn.addEventListener(\"click\", function (e) {\r\n      let sidebar = document.querySelector(\".sidebar-container\");\r\n      let sidebarShown = /\\svisible\\s|^visible\\s|\\svisible$/.test(sidebar.className); // hasClass\r\n      if (!sidebarShown) {\r\n         document.querySelector(\"#show-hide-sidebar\").click();\r\n      }\r\n      let parent = document.querySelector(\".keypad-container\");\r\n      let $this = $(this);\r\n      let __keypadShown = $this.hasClass(\"visible\");\r\n      let from = __keypadShown ? \"visible\" : \"unvisible\",\r\n         to = __keypadShown ? \"unvisible\" : \"visible\";\r\n\r\n      keypadSettings.showHideKeyBtn.classList.remove(from);\r\n      keypadSettings.showHideKeyBtn.classList.add(to);\r\n\r\n      parent.classList.remove(from);\r\n      parent.classList.add(to);\r\n      if (__keypadShown) {\r\n         document.body.querySelector('.app-container').appendChild(keypadSettings.showHideKeyBtn);\r\n      } else {\r\n         parent.insertBefore(keypadSettings.showHideKeyBtn, parent.firstElementChild);\r\n      }\r\n      if (checkSM.smallScreen) {\r\n         resize();\r\n      }\r\n\r\n      keypadSettings.focusedControl.focus();\r\n   });\r\n\r\n   SUI.tabs(document.body.querySelector('.keypad-container .tabs-1'));\r\n\r\n   keypadEvents();\r\n}\r\n","import { getContainment, updateObjsOrder, resize, checkSM, canvasParent, addControl, keypadSettings } from './global.js';\r\nimport Sketch from '../PLOTTO/Sketch.js';\r\nimport drawing from '../PLOTTO/drawing/index.js';\r\nimport setEvents from './events/index.js';\r\nimport { default as setupKeypad} from './keypad/index.js';\r\nimport ChildControl from './ChildControl.js';\r\nimport { Variable } from '../PLOTTO/GraphChildren/index.js';\r\n/**\r\n * \"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\" reminder\r\n * app folder is associated with PLOTTO folder, both of them depends upon the other.\r\n */\r\nexport default function setupAPP(canvas) {\r\n  document.body.style.height = window.innerHeight + 'px';\r\n\r\n  window.MP = MathPackage;\r\n  window.angles = MP.Angles;\r\n  window.lines = MP.Lines;\r\n  window.math = MP.Core;\r\n  window.drawing = drawing;\r\n  window.vector = MP.entities.Vector;\r\n  window.MQ = MathQuill.getInterface(2);\r\n  MQ.config({\r\n    sumStartsWithNEquals: true,\r\n    supSubsRequireOperand: true,\r\n    // charsThatBreakOutOfSupSub: '+-=<>',\r\n    autoSubscriptNumerals: true,\r\n    autoCommands: 'pi theta sqrt abs floor ceil round random sum int prod',\r\n    // // autoOperatorNames: '',\r\n    maxDepth: 10,\r\n  });\r\n  window.mySketch = new Sketch(canvas);\r\n  window.canvas = mySketch.canvas;\r\n  // canvasParent.appendChild(window.canvas.elt);\r\n\r\n  resize.prevSize = { width: 1000, height: 1000 }; /// the app is desined upon the large screen so this should be the default\r\n  checkSM();\r\n  resize.prevSize = { width: window.innerWidth, height: window.innerHeight };\r\n\r\n  let mathFields = $(\".math-field\");\r\n  for (let i = 0; i < mathFields.length; i++) {\r\n    MQ.StaticMath(mathFields[i]);\r\n  }\r\n\r\n  let addNewGCelt = $(`\r\n      <li class=\"control\">\r\n        <div class=\"side-status\" cancel-move>\r\n          <div class=\"order-container\">\r\n            <span class='order'>123</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"main\" cancel-move cancel-hiding-keypad>\r\n         <div class=script-container><span type=\"text\" class=\"script\">NEW</span></div>\r\n        </div>\r\n        <div class=\"side-ctrl\">\r\n          <button class=\"closebtn-2 remove\" cancel-move><div class=\"inner\"></div></button>\r\n          <span class=\"move\">\r\n            <div>\r\n              <span>..</span>\r\n              <span>..</span>\r\n              <span>..</span>\r\n            </div>\r\n          </span>\r\n        </div>\r\n      </li>\r\n      `)[0];\r\n  document.body.querySelector('#add-new-control').append(addNewGCelt);\r\n\r\n  setEvents();\r\n  setupKeypad();\r\n\r\n  setupResizer();\r\n  setupSortable();\r\n\r\n  resize();\r\n  mySketch.gs.centrate();\r\n  mySketch.update();\r\n\r\n  $('#loading-layer').fadeOut(1000, () => {\r\n    let oc = new ChildControl();\r\n    addControl(oc);\r\n  });\r\n\r\n  console.log('%cPLOTTO', 'background: black; color: white; font: 50px consolas;');\r\n  console.log('%cWe are sciCave', 'color: blue; font: 25px consolas;');\r\n}\r\n\r\nfunction setupResizer(){\r\n\r\n  //#region sidebar-resizer\r\n\r\n  var sidebar = document.querySelector(\".sidebar-container\");\r\n  var sidebarResizer = sidebar.querySelector(\".resizer\");\r\n  let srDraggingConfig = {}; // sidebarResizerDraggingConfig\r\n\r\n  $(sidebarResizer).draggable({\r\n    axis: 'x',\r\n    containment: getContainment(sidebar),\r\n\r\n    start: (e) => {\r\n      sidebarResizer.classList.add('dragging');\r\n      srDraggingConfig.intialWidth = sidebar.clientWidth;\r\n      srDraggingConfig.intialOffset = e.pageX;\r\n      srDraggingConfig.cursor = document.body.style.cursor;\r\n      document.body.style.cursor = 'e-resize';\r\n    },\r\n\r\n    stop: () => {\r\n      sidebarResizer.classList.remove('dragging');\r\n      sidebar.style.flexBasis = sidebarResizer.style.left;\r\n      document.body.style.cursor = srDraggingConfig.cursor;\r\n    },\r\n\r\n    drag: () => {\r\n      sidebar.style.flexBasis = sidebarResizer.style.left;\r\n      resize(false);\r\n    }\r\n\r\n  });\r\n\r\n  //#endregion\r\n\r\n}\r\n\r\nfunction setupSortable(){\r\n\r\n  //#region sortable-sidebar\r\n\r\n  var outer_ccc = document.querySelector('.outer-controls');\r\n  var inner_ccc = outer_ccc.querySelector('.inner-controls');\r\n\r\n  let startSorting = true;\r\n  $(\".controls.sortable\").sortable({\r\n    axis: \"y\",\r\n    cancel: '.control [cancel-move]',\r\n\r\n    start: function (e, ui) {\r\n      startSorting = true;\r\n      outer_ccc.classList.add('sorting');\r\n      if (inner_ccc.clientHeight > outer_ccc.clientHeight) {\r\n        outer_ccc.style.overflowY = 'scroll';\r\n      }\r\n\r\n      ui.item[0].classList.add('dragging');\r\n      let id = ui.item[0].getAttribute('id');\r\n      for (let child in mySketch.children) {\r\n        if (child.id === id) {\r\n          child.focus();\r\n          continue;\r\n        }\r\n      }\r\n    },\r\n\r\n    stop: function (e, ui) {\r\n      if (startSorting) {\r\n        outer_ccc.classList.remove('sorting');\r\n        outer_ccc.style.overflowY = 'auto';\r\n        ui.item[0].classList.remove('dragging');\r\n      } else {\r\n        startSorting = false;\r\n      }\r\n    },\r\n\r\n    update: function () {\r\n      updateObjsOrder();\r\n    }\r\n\r\n  });\r\n  $(\".controls.sortable\").disableSelection();\r\n\r\n  //#endregion\r\n\r\n}\r\n\r\nsetupAPP(document.querySelector('#canvas'));"],"names":["generateName","Date","now","randomNameNum","toString","mathFunc","log","x","base","Math","log10","ln","E","sec","cos","csc","sin","cot","tan","sinh","exp","cosh","tanh","asinh","acosh","atanh","gcd","values","gcd_","abs","a","NaN","gcd2","i","length","b","lcm","product","pow","mod","Object","assign","vars","pi","PI","e","getJSfunction","input","params","parse","Function","MagicalParser","Node","MathPackage","Parser","parsedTOjsFunction","maximaTOjsFunction","GraphChild","constructor","options","checkOptions","id","handlers","renderable","hasOwnProperty","sketch","this","gs","childrenIDs","push","propName","Error","_id","value","checkId","render","canvas","handlerOptions","onrender","remove","handlerArgs","children","delete","filter","error","onerror","Canvas","elt","document","createElement","ctx","getContext","parent","appendChild","attributes","name","setAttribut","font","width","family","resize","height","clear","fillStyle","fillRect","clientWidth","clientHeight","clearRect","setFont","size","measureString","txt","measureText","line","x1","y1","x2","y2","moveTo","lineTo","ellipse","y","radius1","radius2","rotation","startAngle","endAngle","counterClockWise","beginPath","fill","stroke","pen","color","weight","style","setup","canvasORctx","strokeStyle","lineWidth","r","g","brightness","num","num2","num3","num4","num5","hue","num7","num6","saturation","isDark","toArray","colorPackage","Core","random","c","randomColor","Xfunction","coor","coorSettings","background","drawing","randomLightColor","randomDarkColor","expression","expr","str","replace","indexOf","p","previousP","midP","continous","viewport","xmin","xmax","drawingStep","coorTOpx","isNaN","sign","XYfunction","Point","regex","match","strokeWeight","splice","eval","EvalExpr","check","type","__generateJS","args","evalFunc","Variable","funcBody","setValue","onchange","getValue","Empty","Slider","ChildControl","graphChild","innerHTML","childNodes","mySketch","__updateElts","setEvents","newid","_graphChild","onremove","removeElt","control","set","scriptELT","querySelector","removeELT","orderELT","mathField","MQ","MathField","edit","update","latex","enter","addControl","parseInt","textContent","addEventListener","focus","blur","disableHandling","prev","parsedScript","scriptParser","latexTOmaxima","props","childFromParsed","__checkVars","__checkFunctions","__updateDependants","__getAll","parsed","concat","varsNotExist","find","isError","classList","addVarsElt","$","reduce","bind","alert","innerText","append","slice","funcs","funcsNotExist","addfuncsElt","forEach","gc","functions","setScript","script","handle","focusTheField","keypadSettings","focusedControl","add","blurTheField","errorELT","balloon","html","contents","message","minLifetime","css","hide","fadeOut","delay","fadeIn","removeGraphChild","removeControl","from","to","__toEmpty","__updateXfunction","__toXfunction","__updateEvalExpr","__toEvalExpr","__updateVariable","__toVariable","__updateSlider","__toSlider","querySelectorAll","sideStatus","setAttribute","valueType","click","attr","specialProps","valueElt","getAttribute","fraction","denominator","numerator","StaticMath","quotientRemainder","quotient","sliderOuter","slider","invokeOnchange","parseFloat","on","ismousedown","scmfs","min","max","step","updateSlider","_xAngle","xSpace","xSpaceValue","xSpaceModifier","_yAngle","ySpace","ySpaceValue","ySpaceModifier","angleMargin","angles","deg","zoomLimits","zoomRatio","xZoomingState","yZoomingState","_transformOrigin","pxVector","vector","pxTOcoor","coorVector","undefined","v","constrainAngle","minAngle","fromAngle","angle","dir","mult","rotate","xAngle","yAngle","rotateX","rotateY","translate","_center","center","translateX","translateY","zoomIn","centerOfZoom","transformOrigin","xZoomIn","yZoomIn","zoomOut","xZoomOut","yZoomOut","reformXspace","reformYspace","setViewport","corner","ymin","ymax","xs","ys","isFinite","p_","getViewport","pxViewport","xStart","xToCoor","xEnd","yStart","yToCoor","yEnd","done","ratio","reset","src","change","transToOrigin","ysm","xsm","xScale","yScale","subtract","math","isNumeric","lastEdition","transform","_width","_height","Transform","physicsRun","centrate","xToPixel","yToPixel","xCoorValue","yCoorValue","xPixelValue","yPixelValue","__id","defaultCoorSettings","xUnit","yUnit","drawDecimalLines","drawMainLines","drawAxisesLines","drawPolarCircles","drawPolarLines","drawPolarAngles","drawNumbers","decimalLinesSpace","polarCirclesSpace","polarLinesAnglesSpace","penDecimalLines","penMainLines","penXaxis","penYaxis","penPolarCircles","penPolarLines","autoRefiningOnZoomimg","antiBackground","custom","radian","start_x","start_y","end_x","end_y","floor","ceil","xD","yD","join","toExponential","toFixed","__getLabelPos","jVector","fillText","iVector","pos","number","dimension","unitVec","bounds","n","Sketch","GraphSettings","Coordinates","subcanvas","ChildrenCanvas","Map","CustomParsers","child","childFromScript","propsTOset","parsedString","getChildParser","left","right","contains","reservedFunction","drawable","getChildById","get","draw","coors","drawImage","subTools","details","SUI","TempMessege","layer","toolsbar","onhoverFix","position","bottom","duration","content","mouse","backspaceInterval","mouseDownForInterval","showHideKeyBtn","updateObjsOrder","objs","order","obj","index","autoFocus","controls","childElementCount","insertBefore","alter","previousElementSibling","nextElementSibling","newControlBtn","parentElement","setTimeout","canvasParent","setContainment","checkSM","body","window","innerHeight","vp","sideBar","draggable","getContainment","prevSize","innerWidth","smallScreen","sidebarStyle","getComputedStyle","minWidth","maxWidth","canvasEvents","mousepressed","lines","Lines","startTransFunc","canvasPos","getPosittion","clientX","clientY","top","touch","touches","search","xEq","lineEquation","yEq","d","distTo","distToLine","axis","xSapce","ySapce","xPenColor","yPenColor","space","o","constrain","penColor","increment","preventDefault","updateTransFunc","rotatedMouse","incre","dist","mina","showTransDetails","mag","midEq","projectionToLine","scaleAxises","rotationAngle","snapAngle","stringDegAngle","rotateAxises","s","checked","shiftKey","equ","round","c1","c2","image","fadeColor","sw","rect","zoomBox","parentPos","offsetParent","offsetLeft","offsetTop","passive","capture","transEndFunc","messeges","msg","setContent","show","mousePos","wheelDelta","toolsEvents","zoom","direction","el","dataset","event","clearInterval","hideKeyPad","keypadShown","test","className","$this","__visible","hasClass","sidebar","removeClass","addClass","keypad","sh","delegate","each","cmd","write","keystroke","setInterval","rows","parents","toggleClass","not","shift","setupKeypad","__keypadShown","firstElementChild","tabs","keypadEvents","setupAPP","MP","Angles","entities","Vector","MathQuill","getInterface","config","sumStartsWithNEquals","supSubsRequireOperand","autoSubscriptNumerals","autoCommands","maxDepth","mathFields","addNewGCelt","setupResizer","setupSortable","console","sidebarResizer","srDraggingConfig","containment","start","intialWidth","intialOffset","pageX","cursor","stop","flexBasis","drag","outer_ccc","inner_ccc","startSorting","sortable","cancel","ui","overflowY","item","disableSelection"],"mappings":"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"}