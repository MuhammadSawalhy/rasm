{"version":3,"file":"app.js","sources":["../../src/js/PLOTTO/global.js","../../src/js/PLOTTO/GraphChildren/GraphChild.js","../../src/js/PLOTTO/Canvas.js","../../src/js/PLOTTO/drawing/drawing.js","../../src/js/PLOTTO/GraphChildren/functions/Xfunction.js","../../src/js/PLOTTO/GraphChildren/Point.js","../../src/js/PLOTTO/GraphChildren/EvalExpr.js","../../src/js/PLOTTO/GraphChildren/Variable.js","../../src/js/app/ChildControl.js","../../src/js/app/global.js","../../src/js/PLOTTO/GraphSetting/Transform.js","../../src/js/PLOTTO/GraphSetting/GraphSettings.js","../../src/js/PLOTTO/Coordinates.js","../../src/js/PLOTTO/Sketch.js","../../src/js/app/events/canvasEvents.js","../../src/js/app/events/index.js","../../src/js/app/events/toolsEvents.js","../../src/js/app/keypad/index.js","../../src/js/app/keypad/events.js","../../src/js/app/app.js"],"sourcesContent":["\r\nexport function generateName() {\r\n   return (Date.now() + generateName.randomNameNum++).toString(36);\r\n}\r\ngenerateName.randomNameNum = 0;\r\n\r\n// let mathFunc = {\r\n//    sin: x => Math.sin(x),\r\n//    cos: x => Math.cos(x),\r\n//    tan: x => Math.tan(x),\r\n//    asin: x => Math.asin(x),\r\n//    acos: x => Math.acos(x),\r\n//    atan: x => Math.atan(x),\r\n//    exp: x => Math.exp(x),\r\n//    ln: x => Math.log(x),\r\n//    log: function (x) {\r\n//       let base = arguments[1] || 10;\r\n//       return Math.log10(x) / Math.log(base);\r\n//    },\r\n//    sqrt: x => Math.sqrt(x),\r\n//    max: (...values) => Math.max(...values),\r\n//    min: (...values) => Math.min(...values),\r\n//    round: x => Math.round(x),\r\n//    abs: x => Math.abs(x),\r\n//    floor: x => Math.floor(x),\r\n//    ceil: x => Math.ceil(x),\r\n// };\r\n\r\nlet mathFunc = {\r\n\r\n   log: function (x, base = 10) {\r\n      return Math.log10(x) / Math.log10(base);\r\n   },\r\n   ln: x => Math.log(x, Math.E),\r\n\r\n   sec: x => 1 / Math.cos(x),\r\n   csc: x => 1 / Math.sin(x),\r\n   cot: x => 1 / Math.tan(x),\r\n\r\n   sinh: x => (Math.exp(x) - Math.exp(-x)) / 2,\r\n   cosh: x => (Math.exp(x) + Math.exp(-x)) / 2,\r\n   tanh: x => Math.sinh(x) / Math.cosh(-x),\r\n   asinh: x => Math.log,\r\n   acosh: x => (Math.exp(x) + Math.exp(-x)) / 2,\r\n   atanh: x => Math.sinh(x) / Math.cosh(-x),\r\n\r\n   gcd: (...values)=>{\r\n      let gcd_ = Math.abs(values[0]);\r\n      let a = Math.abs(values[1]);\r\n      if (gcd_ % 1 != 0 || a % 1 != 0)\r\n         return NaN;\r\n      gcd_ = a > gcd_ ? Math.gcd2(a, gcd_) : Math.gcd2(gcd_, a);\r\n\r\n      for (let i = 2; i < values.length; i++) {\r\n         a = Math.abs(values[i]);\r\n         if (a % 1 != 0)\r\n            return NaN;\r\n         gcd_ = a > gcd_ ? Math.gcd2(a, gcd_) : Math.gcd2(gcd_, a);\r\n      }\r\n\r\n      return gcd_;\r\n   },\r\n   \r\n   gcd2: (a, b) => {\r\n      a = Math.abs(a);\r\n      b = Math.abs(b);\r\n\r\n      if (b === 0 || a === 0) {\r\n         return a;\r\n      }\r\n      else if (a === b) {\r\n         return a;\r\n      }\r\n      else if (a % b === 0) {\r\n         return b;\r\n      }\r\n      else {\r\n         if (a - b > b) {\r\n            return Math.gcd(a - b, b);\r\n         }\r\n         else {\r\n            return Math.gcd(b, a - b);\r\n         }\r\n      }\r\n      return NaN;\r\n   },\r\n\r\n   lcm: (...values) => {\r\n      let product = 1;\r\n      let a;\r\n      for (let i = 0; i < values.length; i++) {\r\n         a = values[i];\r\n         if (a % 1 !== 0)\r\n            return NaN;\r\n         product *= a;\r\n      }\r\n      return Math.abs(product) / Math.pow(Math.gcd(...values), values.length - 1);\r\n   },\r\n   \r\n   mod: (a, b) =>{\r\n      return a % b;\r\n   }\r\n};\r\n\r\nObject.assign(Math, mathFunc);\r\n\r\nlet vars = {\r\n   pi: Math.PI,\r\n   e: mathFunc.sec,\r\n   \r\n};\r\n\r\nObject.assign(window, vars);\r\n\r\nexport function getJSfunction(input, params, parse = true) {\r\n   if (input instanceof Function)\r\n      return input;\r\n   else if (input instanceof MagicalParser.Node) {\r\n      return MathPackage.Parser.parsedTOjsFunction(input, params);\r\n   } else {\r\n      return MathPackage.Parser.maximaTOjsFunction(input, params, parse);\r\n   }\r\n}\r\n","import { generateName } from './../global.js';\r\nexport default class GraphChild {\r\n\r\n    constructor(options) {\r\n        this.checkOptions(options);\r\n\r\n        if (!options.id) {\r\n            options.id = generateName();\r\n        }\r\n\r\n        options.handlers = options.handlers || {};\r\n        options.renderable = options.hasOwnProperty('renderable') ? options.renderable : true;\r\n        \r\n        this.sketch = options.sketch; /// avoid error when defining the sketch after the id\r\n        Object.assign(this, options);\r\n        this.gs = this.sketch.gs;\r\n        this.gs.childrenIDs.push(options.id);\r\n\r\n    }\r\n    checkOptions(options) {\r\n        let propName;\r\n        if (!options.sketch) {\r\n            propName = 'sketch';\r\n            throw new Error('Your options passed to the shetchChild is not valid, it doesn\\'t has ' + propName + ' property, or it is falsy value');\r\n        }\r\n    }   \r\n    get id() {\r\n        return this._id;\r\n    }\r\n    set id(value) {\r\n        this._id = this.sketch.gs.checkId(value);\r\n    }\r\n\r\n    /**\r\n     * methods are here\r\n     */\r\n\r\n    render(canvas, handlerOptions = []) {\r\n        if (this.handlers.onrender) {\r\n            this.handlers.onrender(...handlerOptions);\r\n        }\r\n    }\r\n\r\n    remove(handlerArgs) {\r\n        this.sketch.children.delete(this.id);\r\n        this.gs.childrenIDs = this.gs.childrenIDs.filter(a => a !== this.id);\r\n        if (this.handlers.remove) this.handlers.remove(...handlerArgs);\r\n    }\r\n    \r\n    error(e) {\r\n        this.handlers.onerror(e);\r\n    }\r\n}\r\n","export default class Canvas{\r\n\r\n   /**\r\n    * to create an instance of Canvas class, this offer some good methods and propeties.\r\n    * @param {Objetc} options \r\n    * you can set parent, canvas, attributes which contains any attribute of html. \r\n    */\r\n   constructor(options = {}) {\r\n      this.elt = options.canvas || document.createElement(\"canvas\");\r\n      this.ctx = this.elt.getContext('2d');\r\n      if (options.parent) options.parent.appendChild(this.elt);\r\n      if (options.attributes) {\r\n         for (let [name, value] in attributes) {\r\n            this.elt.setAttribut(name, value);\r\n         }\r\n      }\r\n      this.font = { width: 15, family: 'Arial' };\r\n   }\r\n\r\n   resize(width, height) {\r\n      this.elt.width = width;\r\n      this.elt.height = height;\r\n   }\r\n   clear(fillStyle) {\r\n      if (fillStyle) {\r\n         this.ctx.fillStyle = fillStyle;\r\n         this.ctx.fillRect(0, 0, this.elt.clientWidth, this.elt.clientHeight);\r\n      } else {\r\n         this.ctx.clearRect(0, 0, this.elt.width, this.elt.height);\r\n      }\r\n   }\r\n   setFont(font) {\r\n      if (font.size) this.font.size = font.size;\r\n      if (font.family) this.font.family = font.family;\r\n      this.ctx.font = `${this.font.size}px ${this.font.family}`;\r\n   }\r\n   measureString(txt) {\r\n      let size = this.ctx.measureText(txt);\r\n      size.height = this.font.size;\r\n      return size;\r\n   }\r\n\r\n   //#region shapes\r\n\r\n   line(x1, y1, x2, y2) {\r\n      this.ctx.moveTo(x1, y1);\r\n      this.ctx.lineTo(x2, y2);\r\n   }\r\n\r\n   ellipse(x, y, radius1, radius2, rotation = 0, startAngle = 0, endAngle = Math.PI*2, counterClockWise = false) {\r\n      radius2 = radius2 || radius1;\r\n      this.ctx.beginPath();\r\n      this.ctx.ellipse(x, y, radius1, radius2 || radius1, rotation, startAngle, endAngle, counterClockWise);\r\n      this.ctx.fill();\r\n      this.ctx.stroke();\r\n   }\r\n\r\n   //#endregion\r\n\r\n}","import Canvas from './../Canvas.js';\r\nexport class pen{\r\n    constructor(color, weight = 1, style = 'solid'){\r\n        this.color = color;\r\n        this.weight = weight;\r\n        this.style = style;\r\n    }\r\n    setup(canvasORctx) {\r\n        canvasORctx = canvasORctx instanceof Canvas ? canvasORctx.ctx : canvasORctx;\r\n        canvasORctx.strokeStyle = this.color.toString();\r\n        canvasORctx.lineWidth = this.weight;\r\n    }\r\n}\r\n\r\nexport class color{\r\n    constructor(r, g, b, a) {\r\n        this.r = r;\r\n        this.g = g;\r\n        this.b = b;\r\n        this.a = a;\r\n    }\r\n\r\n    brightness() {\r\n        let num = this.r / 255;\r\n        let num2 = this.g / 255;\r\n        let num3 = this.b / 255;\r\n        let num4 = num;\r\n        let num5 = num;\r\n        if (num2 > num4)\r\n            num4 = num2;\r\n        if (num3 > num4)\r\n            num4 = num3;\r\n        if (num2 < num5)\r\n            num5 = num2;\r\n        if (num3 < num5)\r\n            num5 = num3;\r\n        return ((num4 + num5) / 2);\r\n    }\r\n\r\n    hue() {\r\n        if ((this.r == this.g) && (this.g == this.b))\r\n            return 0;\r\n        let num = this.r / 255;\r\n        let num2 = this.g / 255;\r\n        let num3 = this.b / 255;\r\n        let num7 = 0;\r\n        let num4 = num;\r\n        let num5 = num;\r\n        if (num2 > num4)\r\n            num4 = num2;\r\n        if (num3 > num4)\r\n            num4 = num3;\r\n        if (num2 < num5)\r\n            num5 = num2;\r\n        if (num3 < num5)\r\n            num5 = num3;\r\n        let num6 = num4 - num5;\r\n        if (num == num4)\r\n            num7 = (num2 - num3) / num6;\r\n        else if (num2 == num4)\r\n            num7 = 2 + ((num3 - num) / num6);\r\n        else if (num3 == num4)\r\n            num7 = 4 + ((num - num2) / num6);\r\n        num7 *= 60;\r\n        if (num7 < 0)\r\n            num7 += 360;\r\n        return num7;\r\n    }\r\n\r\n    saturation() {\r\n        let num = this.r / 255;\r\n        let num2 = this.g / 255;\r\n        let num3 = this.b / 255;\r\n        let num7 = 0;\r\n        let num4 = num;\r\n        let num5 = num;\r\n        if (num2 > num4)\r\n            num4 = num2;\r\n        if (num3 > num4)\r\n            num4 = num3;\r\n        if (num2 < num5)\r\n            num5 = num2;\r\n        if (num3 < num5)\r\n            num5 = num3;\r\n        if (num4 == num5)\r\n            return num7;\r\n        let num6 = (num4 + num5) / 2;\r\n        if (num6 <= 0.5)\r\n            return ((num4 - num5) / (num4 + num5));\r\n        return ((num4 - num5) / ((2 - num4) - num5));\r\n    }\r\n\r\n    isDark() {\r\n        if (this.brightness() > 0.40) {\r\n            return false;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    toArray() {\r\n        return [this.r, this.g, this.b, this.a];\r\n    }\r\n\r\n    toString() {\r\n        return `rgba(${this.r}, ${this.g}, ${this.b}, ${this.a})`;\r\n    }\r\n}\r\n\r\n/**\r\n * our color is an object has r g b as properties. {r: num, g: num, b: num}\r\n */\r\nexport class colorPackage{\r\n    static brightness(color) {\r\n        let num = color.r / 255;\r\n        let num2 = color.g / 255;\r\n        let num3 = color.b / 255;\r\n        let num4 = num;\r\n        let num5 = num;\r\n        if (num2 > num4)\r\n            num4 = num2;\r\n        if (num3 > num4)\r\n            num4 = num3;\r\n        if (num2 < num5)\r\n            num5 = num2;\r\n        if (num3 < num5)\r\n            num5 = num3;\r\n        return ((num4 + num5) / 2);\r\n    }\r\n\r\n    static hue(color) {\r\n        if ((color.r == color.g) && (color.g == color.b))\r\n            return 0;\r\n        let num = color.r / 255;\r\n        let num2 = color.g / 255;\r\n        let num3 = color.b / 255;\r\n        let num7 = 0;\r\n        let num4 = num;\r\n        let num5 = num;\r\n        if (num2 > num4)\r\n            num4 = num2;\r\n        if (num3 > num4)\r\n            num4 = num3;\r\n        if (num2 < num5)\r\n            num5 = num2;\r\n        if (num3 < num5)\r\n            num5 = num3;\r\n        let num6 = num4 - num5;\r\n        if (num == num4)\r\n            num7 = (num2 - num3) / num6;\r\n        else if (num2 == num4)\r\n            num7 = 2 + ((num3 - num) / num6);\r\n        else if (num3 == num4)\r\n            num7 = 4 + ((num - num2) / num6);\r\n        num7 *= 60;\r\n        if (num7 < 0)\r\n        num7 += 360;\r\n        return num7;\r\n    }\r\n\r\n    static saturation(color) {\r\n        let num = color.r / 255;\r\n        let num2 = color.g / 255;\r\n        let num3 = color.b / 255;\r\n        let num7 = 0;\r\n        let num4 = num;\r\n        let num5 = num;\r\n        if (num2 > num4)\r\n            num4 = num2;\r\n        if (num3 > num4)\r\n            num4 = num3;\r\n        if (num2 < num5)\r\n            num5 = num2;\r\n        if (num3 < num5)\r\n            num5 = num3;\r\n        if (num4 == num5)\r\n            return num7;\r\n        let num6 = (num4 + num5) / 2;\r\n        if (num6 <= 0.5)\r\n            return ((num4 - num5) / (num4 + num5));\r\n        return ((num4 - num5) / ((2 - num4) - num5));\r\n    }\r\n    static isDark(color) {\r\n        if (colorPackage.brightness(color) > 0.35) {\r\n            return false;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    static randomColor() {\r\n        return new color(MathPackage.Core.random(255), MathPackage.Core.random(255),  MathPackage.Core.random(255));\r\n    }\r\n\r\n    static randomDarkColor() {\r\n        let c = colorPackage.randomColor();\r\n        do { c = colorPackage.randomColor(); } while (!c.isDark());\r\n        return c;\r\n    }\r\n\r\n    static randomLightColor() {\r\n        let c = colorPackage.randomColor();\r\n        do { c = colorPackage.randomColor(); } while (c.isDark());\r\n        return c;\r\n    }\r\n}\r\n\r\nexport function measureString(txt) {\r\n    return canvas.elt.getContext(\"2d\").measureText(txt);\r\n}","/****************************************************************/\r\n/****************************************************************/\r\n/****************************************************************/\r\nimport GraphChild from '../GraphChild.js';\r\nimport drawing from '../../drawing/index.js';\r\nimport { getJSfunction } from '../../global.js';\r\n\r\nexport default class Xfunction extends GraphChild {\r\n   /** \r\n    * gs stands for graphSetting.\r\n   */\r\n   constructor(options) {\r\n      //#region \r\n      let propName;\r\n\r\n      propName = 'expr';\r\n      if (!options[propName]) {\r\n         throw new Error('Your options passed to the shetchChild is not valid, it doesn\\'t has ' + propName + ' property, or it is falsy value');\r\n      }\r\n\r\n      if (!options.pen) {\r\n         let c = options.sketch.coor.coorSettings.background.isDark() ? drawing.colorPackage.randomLightColor() : drawing.colorPackage.randomDarkColor();\r\n         c.a = 155;\r\n         options.pen = new drawing.pen(c, 2);\r\n      }\r\n      //#endregion\r\n\r\n      super(options);\r\n      this.expression = getJSfunction(this.expr, ['x'], true);\r\n   }\r\n\r\n   static fromString(expr, sketch) {\r\n      if (str.replace(/==+/, '').indexOf('=') > -1) throw new Error('there is \"=\" opertor!');\r\n      return new Xfunction({expr, sketch});\r\n   }\r\n\r\n   async render(canvas) {\r\n      if (this.renderable) {\r\n         try {\r\n            let ctx = canvas.ctx;\r\n            ctx.strokeStyle = this.pen.color.toString();\r\n            ctx.lineWidth = this.pen.weight;\r\n            let p, previousP, midP, continous;\r\n            ctx.beginPath();\r\n            for (let x = this.gs.viewport.xmin; x <= this.gs.viewport.xmax; x += this.gs.drawingStep) {\r\n               p = this.gs.coorTOpx(x, this.expression(x));\r\n               midP = this.gs.coorTOpx(x - this.gs.drawingStep / 2, this.expression(x - this.gs.drawingStep / 2));\r\n               // if valid add new point, unless add the array of point if has more than point\r\n               let valid = !isNaN(p.x) && !isNaN(p.y) &&\r\n                  Math.abs(p.x) < 100000 && Math.abs(p.y) < 100000 &&\r\n                  ((continous && (Math.sign(p.y - midP.y) === Math.sign(midP.y - previousP.y) || Math.abs(p.y - previousP.y) / this.gs.drawingStep < 20)) || !continous);\r\n               if (!valid) {\r\n                  if (continous) {\r\n                     ctx.stroke();\r\n                     ctx.beginPath();\r\n                     continous = false;\r\n                  }\r\n               }\r\n               else {\r\n                  if (continous)\r\n                     ctx.lineTo(p.x, p.y);\r\n                  else\r\n                     ctx.moveTo(p.x, p.y);\r\n   \r\n                  previousP = { x: p.x, y: p.y };\r\n                  continous = true;\r\n               }\r\n            }\r\n   \r\n            ctx.stroke();\r\n         } catch (e) {\r\n            this.error(e);\r\n         }\r\n      }\r\n      if (this.handlers.onrender) {\r\n         this.handlers.onrender(...handlerArgs);\r\n      }\r\n   }\r\n\r\n   toString() {\r\n      return this.expression;\r\n   }\r\n\r\n}\r\n","\r\nimport GraphChild from './GraphChild.js';\r\nimport { getJSfunction } from '../global.js';\r\nexport default class Point extends GraphChild {\r\n    // color is rgb\r\n    // gs stands for graphSetting\r\n    constructor(options) {\r\n        options.pen = options.pen || new drawing.pen(new drawing.color(0, 0, 255), 10);\r\n        \r\n        //#region \r\n        let propName;\r\n\r\n        propName = 'x';\r\n        if (!options[propName]) {\r\n            throw new Error('Your options passed to the shetchChild is not valid, it doesn\\'t has ' + propName + ' property, or it is falsy value');\r\n        }\r\n\r\n        propName = 'y';\r\n        if (!options[propName]) {\r\n            throw new Error('Your options passed to the shetchChild is not valid, it doesn\\'t has ' + propName + ' property, or it is falsy value');\r\n        }\r\n        //#endregion\r\n\r\n        super(options);\r\n        this.x = getJSfunction(this.x);\r\n        this.y = getJSfunction(this.y);\r\n    }\r\n\r\n    static fromString(str, sketch) {\r\n        if (str) {\r\n            let p;\r\n            let regex = /^\\s*\\(\\s*(.+?)\\s*,\\s*(.+?)\\s*\\)\\s*$/;\r\n            str.replace(regex, (match, x, y) => {\r\n                p = new Point({ sketch, x, y });\r\n            });\r\n            if (!p)\r\n                throw new Error('error while trying to add a point: ' + str);\r\n            else\r\n                return p;\r\n        }\r\n        else\r\n            throw new Error('your str is empty :\\'(');\r\n    }\r\n\r\n    async render(canvas, handlerArgs = []) {\r\n\r\n        if (this.renderable) {\r\n            switch (this.pen.style) {\r\n                case 'solid':\r\n                    canvas.strokeWeight(2);\r\n                    canvas.stroke(200);\r\n                    canvas.fill(...(this.pen.color.toArray().splice(0, 3)), 150);\r\n                    break;\r\n                case 'shallow':\r\n                    canvas.ctx.lineWidth = 3;\r\n                    canvas.ctx.strokeStyle(this.pen.color.toString());\r\n                    canvas.ctx.fillStyle(this.sketch.coor.coorSettings.background.toString());\r\n                    break;\r\n            }\r\n            let p = this.gs.coorTOpx(this.x.eval(), this.y.eval());\r\n            canvas.ellipse(p.x, p.y, this.pen.weight, this.pen.weight);\r\n        }\r\n\r\n        if (this.handlers.onrender) {\r\n            this.handlers.onrender(...handlerArgs);\r\n        }\r\n\r\n    }\r\n\r\n    toString() {\r\n        return `(${this.x}, ${this.y})`;\r\n    }\r\n\r\n}\r\n","import GraphChild from \"./GraphChild.js\";\r\nimport { getJSfunction } from '../global.js';\r\n\r\nexport default class EvalExpr extends GraphChild{\r\n   constructor(options) {\r\n      //#region \r\n      let propName;\r\n      propName = 'expr';\r\n      if (!options[propName]) {\r\n         throw new Error('Your options passed to the shetchChild is not valid, it doesn\\'t has ' + propName + ' property, or it is falsy value');\r\n      }\r\n      //#endregion\r\n      super(options);\r\n\r\n      if (this.expr.check({ type: 'operator', name: '=' })) {\r\n         this.eval = new Function(\r\n            'return ' +\r\n            MathPackage.Parser.__generateJS(this.expr.args[0]) +\r\n            ' === ' +\r\n            MathPackage.Parser.__generateJS(this.expr.args[1])\r\n         );         \r\n      } else {\r\n         this.evalFunc = getJSfunction(this.expr);\r\n      }\r\n   }\r\n\r\n   static fromString(str, sketch) {\r\n      if (str) {\r\n         // TODO: getting it from \"a = 1+2/4\"\r\n         return new EvalExpr({ expr: expr });\r\n      }\r\n      else\r\n         throw new Error('your expression is empty :\\'(');\r\n   }\r\n\r\n   eval() {\r\n      try {\r\n         return this.evalFunc();\r\n      } catch (e) {\r\n         this.error(e);\r\n      }\r\n   }\r\n\r\n}","import GraphChild from \"./GraphChild.js\";\r\nimport { getJSfunction } from '../global.js';\r\n\r\nexport default class Variable /** or slider */ extends GraphChild {\r\n   \r\n   constructor(options) {\r\n      //#region \r\n      let propName;\r\n      propName = 'id';\r\n      if (!options[propName]) {\r\n         throw new Error('Your options passed to the shetchChild is not valid, it doesn\\'t has ' + 'name' + ' property, or it is falsy value');\r\n      }\r\n      propName = 'value';\r\n      if (!options[propName]) {\r\n         throw new Error('Your options passed to the shetchChild is not valid, it doesn\\'t has ' + 'name' + ' property, or it is falsy value');\r\n      }\r\n      //#endregion\r\n      super(options);\r\n\r\n      if (!this.id.match(/[a-zA-Z_]+\\d*/)) throw new Error(`${this.id} is invalid.`);\r\n      \r\n      Math[this.id] = this.value;\r\n\r\n   }\r\n\r\n   setValue(value, handlerOptions = []) {\r\n      Math[this.id] = value;\r\n      if (this.handlers.onchange) this.handlers.onchange(...handlerOptions);\r\n   }\r\n\r\n   getValue() {\r\n      return Math[this.id];\r\n   }\r\n\r\n   remove() {\r\n      delete Math[this.id];\r\n      this.sketch.children.delete(this.id);\r\n      this.gs.childrenIDs = this.gs.childrenIDs.filter(a => a !== this.id);\r\n      if (this.handlers.remove) this.handlers.remove(...handlerArgs);\r\n   }\r\n\r\n}","import { addControl, removeControl, genRandomName } from './global.js';\r\nimport { Xfunction, Point, EvalExpr, Variable } from '../PLOTTO/GraphChildren/index.js';\r\nexport default class ChildControl {\r\n   constructor(graphChild) {\r\n      this.elt = document.createElement('div');\r\n      this.elt.innerHTML = `\r\n      <li class=\"control\" id=\"${this.id}\">\r\n        <div class=\"side-status\" cancel-move>\r\n          <div class=\"order-container\">\r\n            <span class='order'>12</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"main\" cancel-move cancel-hiding-keypad>\r\n         <div class=script-container><span type=\"text\" class=\"script\"></span></div>\r\n        </div>\r\n        <div class=\"side-ctrl\">\r\n          <button class=\"closebtn-2 remove\" cancel-move><div class=\"inner\"></div></button>\r\n          <span class=\"move\">\r\n            <div>\r\n              <span>..</span>\r\n              <span>..</span>\r\n              <span>..</span>\r\n            </div>\r\n          </span>\r\n        </div>\r\n      </li>\r\n      `;\r\n      this.elt = (this.elt.childNodes[1]);\r\n\r\n      if (graphChild) {\r\n         this.graphChild = graphChild;\r\n      } else {\r\n         this.id = genRandomName();\r\n         mySketch.children.set(this.id, null);\r\n      }\r\n\r\n      this.setEvents();\r\n   }\r\n\r\n   get id() {\r\n      return this._id;\r\n   }\r\n   set id(newid) {\r\n      this._id = newid;\r\n      this.elt.id = newid;\r\n   }\r\n\r\n   get graphChild() {\r\n      return this._graphChild;\r\n   }\r\n   set graphChild(value) {\r\n      if (!value && this._graphChild) {\r\n         /// delete the current graphChild from the sketch\r\n         this._graphChild.drawable = false;\r\n      } else if (value) {\r\n         value.handlers.onremove = (removeElt) => {\r\n            if (removeElt) this.remove(false);\r\n         };\r\n         value.handlers.onerror = (e) => {\r\n            this.error(e);\r\n         };\r\n         value.control = this;\r\n         mySketch.children.set(value.id, value); /// changing the id\r\n         let prev = this._graphChild;\r\n         this._graphChild = value;\r\n         this.id = value.id;\r\n         this.__updateElts(prev, value);\r\n\r\n\r\n         if (this._graphChild instanceof Variable) {\r\n            for (let [id, gc] of mySketch.children) {\r\n               if (gc && gc !== this._graphChild && gc.control.varsNotExist) {\r\n                  gc.control.__checkVars();\r\n               }\r\n            }\r\n         }\r\n         this.__checkVars();\r\n\r\n         mySketch.update();\r\n      }\r\n   }\r\n\r\n   setEvents() {\r\n      let scriptELT = this.elt.querySelector('.script');\r\n      this.removeELT = this.elt.querySelector('.remove');\r\n      let orderELT = this.elt.querySelector('.order');\r\n\r\n      //#region math, script field\r\n      let mathField = MQ.MathField(scriptELT, {\r\n         sumStartsWithNEquals: true,\r\n         supSubsRequireOperand: true,\r\n         // charsThatBreakOutOfSupSub: '+-=<>',\r\n         autoSubscriptNumerals: true,\r\n         autoCommands: 'pi theta sqrt abs floor ceil round random sum int prod',\r\n         // // autoOperatorNames: '',\r\n         maxDepth: 10,\r\n         handlers: {\r\n            edit: () => {\r\n               this.handleScript(mathField.latex());\r\n            },\r\n\r\n            enter: function () {\r\n               let newChild = new ChildControl();\r\n               addControl(newChild, parseInt(orderELT.textContent));\r\n               newChild.focus();\r\n            },\r\n         }\r\n      });\r\n      this.mathField = mathField;\r\n      //#endregion \r\n\r\n      this.elt.querySelector('.script').addEventListener('focusin', (e) => {\r\n         this.focus(false);\r\n      });\r\n\r\n      this.elt.querySelector('.script').addEventListener('focusout', (e) => {\r\n         this.blur(false);\r\n      });\r\n\r\n      this.removeELT.addEventListener('click', (e) => {\r\n         this.remove();\r\n      });\r\n\r\n   }\r\n\r\n   handleScript(latex, disableHandling) {\r\n      if (!(this.disableHandling || disableHandling)) {\r\n         let newGC;\r\n         if (this._graphChild) {\r\n            this._graphChild.remove();\r\n         } else {\r\n            mySketch.children.delete(this.id); //// new id will be set\r\n         }\r\n         try {\r\n            let parsed = mySketch.scriptParser.parse(MathPackage.Parser.latexTOmaxima(latex));\r\n            this.parsedScript = parsed;\r\n            mySketch.gs.childrenIDs = mySketch.gs.childrenIDs.filter(a => a !== this.id); /// removing the id as if the id didn't not change but the values did, here will be error saying ${this.id} is defined before\r\n            let props = {};\r\n            if (this.graphChild && this.graphChild.pen) props.pen = this.graphChild.pen;\r\n            newGC = mySketch.childFromParsed(parsed, props);\r\n\r\n            this.graphChild = newGC;\r\n\r\n         } catch (e) {\r\n            this.error(e);\r\n         }\r\n      }\r\n   }\r\n   __getAll(parsed, check = {}) {\r\n      let vars = [];\r\n      if (parsed.check(check)) {\r\n         return [parsed];\r\n      } else {\r\n         for (let i = 0; i < parsed.args.length; i++) {\r\n            vars = vars.concat(this.__getAll(parsed.args[i], check));\r\n         }\r\n      }\r\n      return vars;\r\n   }\r\n   __checkVars() {\r\n\r\n      let vars = this.__getAll(this.parsedScript, { type: 'variable' });\r\n      let varsNotExist = [];\r\n      let vneError;\r\n\r\n      for (let i = 0; i < vars.length; i++)\r\n         if (!Math.hasOwnProperty(vars[i].name) && !(this.graphChild instanceof Xfunction && vars[i].name === 'x')) {\r\n            if (!varsNotExist.find(a => a.name === vars[i].name)) {\r\n               varsNotExist.push(vars[i]);\r\n            }\r\n         } else {\r\n            /// attach that var to me\r\n         }\r\n\r\n      if (this.varsNotExist /** from the previous handling not the current one */) {\r\n         /// remove the previous elts\r\n         this.elt.querySelector('.main .vars-not-exist').remove();\r\n         if (this.isError) {\r\n            this.elt.classList.remove('error');\r\n            this.elt.querySelector('.error-elt').remove();\r\n            this.isError = false;\r\n         }\r\n      }\r\n\r\n      if (varsNotExist.length > 0) {\r\n         let addVarsElt = $(`\r\n               <div class='vars-not-exist'>\r\n                  ${varsNotExist.reduce((b, a) => { return b + `<button class=\"var\">${a.name}</button>`; }, '')}\r\n               </div>\r\n               `);\r\n\r\n         $('.var', addVarsElt).bind('click', function () {\r\n            alert('adding new var called: ' + this.innerText);\r\n         });\r\n\r\n         this.elt.querySelector('.main').append(addVarsElt[0]);\r\n         this.varsNotExist = varsNotExist;\r\n         this.graphChild.renderable = false;\r\n         this.error(Error('Undefined vars [' + varsNotExist.reduce((b, a) => { return b + `${a.name}, `; }, '').slice(0, -2) + '], click the button to define.'));\r\n      } else {\r\n         this.graphChild.renderable = true;\r\n      }\r\n\r\n   }\r\n\r\n   update() {\r\n      let newGC;\r\n      try {\r\n         mySketch.gs.childrenIDs = mySketch.gs.childrenIDs.filter(a => a !== this.id); /// removing the id as if the id didn't not change but the values did, here will be error saying ${this.id} is defined before\r\n         let props = {};\r\n         if (this.graphChild && this.graphChild.pen) props.pen = this.graphChild.pen;\r\n         newGC = mySketch.childFromParsed(this.parsedScript, props);\r\n      } catch (e) {\r\n         this.error(e);\r\n      }\r\n      this.graphChild = newGC;\r\n   }\r\n\r\n   setScript(script, handle = true) {\r\n      if (!handle) {\r\n         this.disableHandling = true;\r\n      }\r\n      this.mathField.latex(script);\r\n      if (!handle) {\r\n         this.disableHandling = false;\r\n      }\r\n   }\r\n\r\n   focus(focusTheField = true) {\r\n      if (mySketch.focusedChild && mySketch.focusedChild !== this) mySketch.focusedChild.blur();\r\n      // setting this to be focuses\r\n      mySketch.focusedChild = this;\r\n      if (focusTheField) this.mathField.focus();\r\n      this.elt.classList.add('focus');\r\n   }\r\n\r\n   blur(blurTheField = true) {\r\n      mySketch.focusedObject = undefined;\r\n      if (blurTheField) this.mathField.blur();\r\n      this.elt.classList.remove('focus');\r\n   }\r\n\r\n   error(e) {\r\n      if (this.isError) {\r\n         this.elt.querySelector('.error-elt').remove();\r\n      }\r\n      this.elt.classList.add('error');\r\n      this.isError = true;\r\n      let errorELT = $(`\r\n      <div class=\"error-elt\">\r\n         <i class=\"fas fa-bug\"></i>\r\n      </div>\r\n      `);\r\n      errorELT.balloon({\r\n         html: true, contents: e.message, minLifetime: 1000,\r\n         css: {\r\n            \"font-size\": '1em',\r\n         }\r\n      });\r\n      errorELT.hide();\r\n      this.elt.querySelector('.side-status').append(errorELT[0]);\r\n      errorELT.fadeOut(0).delay(200).fadeIn(500);\r\n\r\n      console.log({ e });\r\n   }\r\n\r\n   remove(removeGraphChild = true) {\r\n      removeControl(this);\r\n      if (removeGraphChild) {\r\n         if (this.graphChild) this.graphChild.remove();\r\n      }\r\n      mySketch.update();\r\n   }\r\n\r\n   //#region updatingElt\r\n\r\n   __updateElts(from, to) {\r\n      if (this.isError) {\r\n         this.elt.classList.remove('error');\r\n         this.elt.querySelector('.error-elt').remove();\r\n         this.isError = false;\r\n      }\r\n      if (to) {\r\n         if (to instanceof Xfunction) {\r\n            if (from instanceof Xfunction) {\r\n               this.__updateXfunction();\r\n            } else {\r\n               this.__toXfunction();\r\n            }\r\n         } else if (to instanceof EvalExpr) {\r\n            if (from instanceof EvalExpr) {\r\n               this.__updateEvalExpr();\r\n            } else {\r\n               this.__toEvalExpr();\r\n            }\r\n         } else if (to instanceof Variable) {\r\n            if (from instanceof Variable) {\r\n               this.__updateVariable();\r\n            } else {\r\n               this.__toVariable();\r\n            }\r\n         }\r\n      }\r\n   }\r\n\r\n   __toXfunction() {\r\n      this.elt.type = 'Xfunction';\r\n      let sideStatus = this.elt.querySelector('.side-status');\r\n      let eltsTOremove = this.elt.querySelectorAll('.special-elt');\r\n      eltsTOremove.forEach(elt => { elt.remove(); });\r\n      sideStatus.append($(`<div class=\"visible special-elt\"><div class=\"inner\"></div></div>`)[0]);\r\n      this.__updateXfunction();\r\n   }\r\n   __updateXfunction() {\r\n      let visibleELt = this.elt.querySelector('.side-status').querySelector('.visible');\r\n      visibleELt.setAttribute('style', `--color: ${this.graphChild.pen.color.toString()}`);\r\n   }\r\n\r\n   __toEvalExpr() {\r\n      this.elt.type = 'EvalExpr';\r\n      let eltsTOremove = this.elt.querySelectorAll('.special-elt');\r\n      eltsTOremove.forEach(elt => { elt.remove(); });\r\n\r\n      let value = $(`<div class=\"value special-elt\"><span></span></div>`);\r\n      value.hide();\r\n      this.elt.querySelector('.main').append(value[0]);\r\n      value.fadeIn();\r\n      let valueType = $(\r\n         `<div class=\"value-type special-elt\" type=decimal>\r\n            <span><i class=\"fas fa-divide\"></i></span>\r\n         </div>`\r\n      );\r\n      this.elt.querySelector('.side-status').append(valueType[0]);\r\n      valueType.click(() => {\r\n         switch (valueType.attr('type')) {\r\n            case 'decimal':\r\n               valueType.attr('type', 'fract');\r\n               value.height(56);\r\n               break;\r\n            case 'fract':\r\n               valueType.attr('type', 'quotient');\r\n               value.height(56);\r\n               break;\r\n            case 'quotient':\r\n               valueType.attr('type', 'decimal');\r\n               value.height(33);\r\n               break;\r\n         }\r\n         this.__updateEvalExpr();\r\n      });\r\n\r\n      this.graphChild.handlers.onrender = () => {\r\n         this.__updateEvalExpr();\r\n      };\r\n\r\n      this.specialProps = {\r\n         valueType: valueType[0],\r\n         valueElt: value[0]\r\n      };\r\n\r\n      this.__updateEvalExpr();\r\n   }\r\n   __updateEvalExpr() {\r\n      try {\r\n         let value = this.graphChild.eval();\r\n         switch (this.specialProps.valueType.getAttribute('type')) {\r\n            case 'decimal':\r\n               {\r\n                  this.specialProps.valueElt.innerHTML = `<span>${value}</span>`;\r\n               }\r\n               break;\r\n            case 'fract':\r\n               {\r\n                  let fraction = MathPackage.Core.fraction(value);\r\n                  if (fraction.denominator === 1) {\r\n                     this.specialProps.valueElt.innerHTML = `<span>${fraction.numerator}</span>`;\r\n                  } else {\r\n                     this.specialProps.valueElt.innerHTML = `<span>\\\\frac{${fraction.numerator}}{${fraction.denominator}}</span>`;\r\n                     MQ.StaticMath(this.specialProps.valueElt.children[0]);\r\n                  }\r\n               }\r\n               break;\r\n            case 'quotient':\r\n               {\r\n                  let fraction = MathPackage.Core.quotientRemainder(value);\r\n                  if (fraction.numerator === 0) {\r\n                     this.specialProps.valueElt.innerHTML = `<span>${fraction.quotient}</span>`;\r\n                  } else {\r\n                     this.specialProps.valueElt.innerHTML = `<span>${fraction.quotient}\\\\frac{${fraction.numerator}}{${fraction.denominator}}</span>`;\r\n                     MQ.StaticMath(this.specialProps.valueElt.children[0]);\r\n                  }\r\n               }\r\n               break;\r\n         }\r\n      } catch (e) {\r\n         this.specialProps.valueElt.innerHTML = '<span>NaN</span>';\r\n         this.error(e);\r\n      }\r\n   }\r\n\r\n   __toVariable() {\r\n      this.elt.type = 'Variable';\r\n      let eltsTOremove = this.elt.querySelectorAll('.special-elt');\r\n      eltsTOremove.forEach(elt => { elt.remove(); });\r\n\r\n      // for (let [id, gc] of mySketch.children) {\r\n      //    gc.control.update();\r\n      // }\r\n\r\n      /// adding slider\r\n      let sliderOuter = $(`\r\n      <div class=\"slider-outer special-elt\">\r\n         <div class='range-container'>\r\n            <span class='slider-controller-toggle'><i class=\"fas fa-sort-down\"></i></span>\r\n            <input type=range class=slider min=-5 max=5 step=0.1 />\r\n            <span class='play-pause'><i class=\"fas fa-play\"></i></span>\r\n         </div>\r\n         <div class='slider-controller'>\r\n            <label>min</label>:<span class=\"math-field min\">-5</span>\r\n            <label>max</label>:<span class=\"math-field max\">5</span>\r\n            <label>step</label>:<span class=\"math-field step\">0.1</span>\r\n         </div>\r\n      </div>`);\r\n      this.elt.querySelector('.main').append(sliderOuter[0]);\r\n      let slider = sliderOuter[0].querySelector('.slider');\r\n\r\n      slider.addEventListener('change', () => {\r\n         if (this.specialProps.invokeOnchange) {\r\n            this.graphChild.setValue(parseFloat(slider.value), [false]);\r\n            this.setScript(this.graphChild.id + ' = ' + slider.value, false);\r\n         }\r\n      });\r\n      $(slider).on('mousemove touchmove', () => {\r\n         if (slider.ismousedown) {\r\n            this.graphChild.setValue(parseFloat(slider.value));\r\n            this.setScript(this.graphChild.id + ' = ' + slider.value, false);\r\n         }\r\n      });\r\n      $(slider).on('mousedown touchstart', () => {\r\n         slider.ismousedown = true;\r\n      });\r\n      $(slider).on('mouseup touchend', () => {\r\n         slider.ismousedown = false;\r\n      });\r\n\r\n      // sliderControllerMathFields\r\n      let scmfs = {\r\n         min: MQ.MathField(sliderOuter[0].querySelector('.slider-controller .math-field.min'), {\r\n            handlers: {\r\n               edit: function () {\r\n                  slider.min = (MathPackage.Parser.maximaTOjsFunction(MathPackage.Parser.latexTOmaxima(scmfs.min.latex())))();\r\n               }\r\n            }\r\n         }),\r\n         max: MQ.MathField(sliderOuter[0].querySelector('.slider-controller .math-field.max'), {\r\n            handlers: {\r\n               edit: function () {\r\n                  slider.max = (MathPackage.Parser.maximaTOjsFunction(MathPackage.Parser.latexTOmaxima(scmfs.max.latex())))();\r\n               }\r\n            }\r\n         }),\r\n         step: MQ.MathField(sliderOuter[0].querySelector('.slider-controller .math-field.step'), {\r\n            handlers: {\r\n               edit: function () {\r\n                  slider.step = Math.max(0.01, MathPackage.Parser.maximaTOjsFunction(MathPackage.Parser.latexTOmaxima(scmfs.step.latex()))());\r\n               }\r\n            }\r\n         })\r\n      };\r\n\r\n      /// the special properties for this specific type of GraphChild\r\n      this.specialProps = {\r\n         slider, scmfs,\r\n         invokeOnchange: true\r\n      };\r\n\r\n      this.__updateVariable();\r\n   }\r\n   __updateVariable() {\r\n      this.graphChild.handlers.onchange = (updateSlider = true) => {\r\n         if (updateSlider)\r\n            slider.value = this.graphChild.getValue();\r\n         mySketch.update(true, false);\r\n      };\r\n\r\n      let slider = this.specialProps.slider;\r\n      let value = this.graphChild.getValue();\r\n\r\n      this.specialProps.invokeOnchange = false;\r\n\r\n      this.specialProps.scmfs.min.latex(Math.min(parseFloat(slider.min), parseFloat(value)));\r\n      this.specialProps.scmfs.max.latex(Math.max(parseFloat(slider.max), parseFloat(value)));\r\n\r\n      slider.value = value;\r\n\r\n      this.specialProps.invokeOnchange = true;\r\n      // this.setScript(this.graphChild.id + ' = ' + slider.value, false);\r\n   }\r\n\r\n   //#endregion\r\n\r\n}\r\n\r\n\r\n","import ChildControl from './ChildControl.js';\r\nimport Sketch from '../PLOTTO/Sketch.js';\r\n\r\n//#region variables\r\nexport var subTools = {\r\n   details: SUI.TempMessege({\r\n      layer: false,\r\n      toolsbar: true,\r\n      onhoverFix: true,\r\n      position: { bottom: 20, left: 20 },\r\n      duration: 2500, // to make it fixed\r\n      content: '<p style=\"background: green; color:white;\">There is no god but Allah',\r\n      parent: document.querySelector('.canvas-container')\r\n   })\r\n};\r\nexport var mouse = { x: undefined, y: undefined };\r\n//#endregion\r\n\r\n//#region methods\r\n\r\nexport function updateObjsOrder() {\r\n   let objs = document.querySelectorAll('.controls li');\r\n   let order = 1;\r\n   for (let obj of objs) {\r\n      obj.querySelector('.order').textContent = order++;\r\n   }\r\n}\r\n\r\nvar controls = document.querySelector('.controls');\r\nvar newControlBtn = controls.parentElement.querySelector('.new-control');\r\n\r\nexport function addControl(control, index = 'last') {\r\n   index = (math.isNumeric(index) && index > controls.childElementCount - 1) ? 'last' : index;\r\n   let i = index === 'last' ? controls.childElementCount - 1 : index;\r\n   if (i > -1 && index !== 'last') {\r\n      control.elt.querySelector('.order').textContent = index + 1;\r\n      controls.insertBefore(control.elt, controls.children[i]);\r\n      updateObjsOrder();\r\n   } else {\r\n      control.elt.querySelector('.order').textContent = controls.childElementCount + 1;\r\n      controls.appendChild(control.elt);\r\n   }\r\n}\r\n\r\nexport function removeControl(control) {\r\n   control.elt.remove();\r\n   if (controls.childElementCount === 0) {\r\n      newControlBtn.classList.add('animate-shake');\r\n      controls.parentElement.classList.add('blink-error');\r\n      setTimeout(() => {\r\n         newControlBtn.classList.remove('animate-shake');\r\n         controls.parentElement.classList.remove('blink-error');\r\n         addControl(new ChildControl());\r\n      }, 400);\r\n   }\r\n}\r\n\r\nexport function addTOsketch(child, controlIndex = 'last' /* the index */) {\r\n   if ((controlIndex || controlIndex === 0) && !child.control) {\r\n      let control = new ChildControl(child);\r\n      addControl(control, controlIndex);\r\n   }\r\n   mySketch.appendChild(child);\r\n}\r\n\r\nexport var canvasParent = document.querySelector('.canvas-container');\r\nexport function resize(setContainment = true) {\r\n\r\n   mySketch.canvas.resize(canvasParent.clientWidth, canvasParent.clientHeight);\r\n   mySketch.subcanvas.resize(canvasParent.clientWidth, canvasParent.clientHeight);\r\n   mySketch.ChildrenCanvas.resize(canvasParent.clientWidth, canvasParent.clientHeight);\r\n\r\n   mySketch.gs.width = canvasParent.clientWidth;\r\n   mySketch.gs.height = canvasParent.clientHeight;\r\n\r\n   let vp = mySketch.gs.viewport;\r\n   mySketch.gs.transform.onchange(true);\r\n   // if (angles.minAngle(new vector(1, 0), vector.fromAngle(mySketch.gs.transform.xAngle)).toFixed(3) === (0).toFixed(3) && angles.minAngle(new vector(1, 0), vector.fromAngle(mySketch.gs.transform.yAngle)).toFixed(3) === (Math.PI / 2).toFixed(3)) {\r\n   mySketch.gs.transform.invokeOnchange = false;\r\n   mySketch.gs.transform.transformOrigin = undefined;\r\n   mySketch.gs.transform.setViewport(vp, null, true);\r\n   mySketch.gs.transform.invokeOnchange = true;\r\n   mySketch.gs.transform.onchange();\r\n   // }\r\n\r\n   if (setContainment) {\r\n\r\n      $(\".sidebar-container .resizer\")\r\n         .draggable('option', 'containment', getContainment());\r\n      // .css({ left: document.querySelector('.sidebar-container').clientWidth + 'px' });\r\n   }\r\n\r\n   mySketch.update();\r\n\r\n}\r\n\r\nexport function getContainment() {\r\n   let sidebarStyle = window.getComputedStyle(document.querySelector('.sidebar-container'));\r\n   let min = parseInt(sidebarStyle.minWidth.replace('px', '')),\r\n      max = parseInt(sidebarStyle.maxWidth.replace('px', ''));\r\n   /// this is for solving the problem when the max width 30%vw is lower than the min width 300px,\r\n   ///   - which cuase a problem with the position (style.left) of the resizer. \r\n   if (min > max) {\r\n      return [\r\n         min, 0,\r\n         min,\r\n         parseInt(sidebarStyle.height.replace('px', ''))\r\n      ];\r\n   } else {\r\n      return [\r\n         min, 0,\r\n         max,\r\n         parseInt(sidebarStyle.height.replace('px', ''))\r\n      ];\r\n   }\r\n\r\n}\r\n\r\nexport function genRandomName() {\r\n   let num = 0;\r\n   /// randomNameNum is here to avoid getting the same random name if the code is implemented so fast\r\n\r\n   return (Date.now() + genRandomName.randomNameNum++).toString(36);\r\n}\r\ngenRandomName.randomNameNum = 0;\r\n\r\nexport var keyboardSettings = {\r\n   backspaceInterval: undefined,\r\n   mouseDownForInterval: false,\r\n   showHideKeyBtn: document.querySelector(\".sh-keypad\"),\r\n   mathField: document.querySelector('.script')\r\n};\r\n\r\n//#endregion\r\n","export default class {\r\n\r\n   constructor(gs) {\r\n      this.gs = gs;\r\n\r\n      /** don't spacify the value of xAngle or yAngle before _xAngle and _yAngle\r\n       *  as the value of either depends upon the other */\r\n      /**\r\n       * here this.invokeOnchange is undefines so there is no use of put it to false\r\n       */\r\n      this._xAngle = 0;\r\n      this.xSpace = 80;\r\n      this.xSpaceValue = 2;\r\n      this.xSpaceModifier = 1;\r\n      this.xSpaceModifier = 1;\r\n\r\n      this._yAngle = Math.PI / 2;\r\n      this.ySpace = 80;\r\n      this.ySpaceValue = 2;\r\n      this.ySpaceModifier = 1;\r\n      this.ySpaceModifier = 1;\r\n\r\n      this.angleMargin = angles.deg(20);\r\n      this.zoomLimits = [80, 180];\r\n      this.zoomLimits[1] = (this.zoomLimits[1] * 2 / 5) < this.zoomLimits[0] ? this.zoomLimits[0] * 5 / 2 + 1 : this.zoomLimits[0];\r\n      this.zoomRatio = 1.1;\r\n\r\n      this.xZoomingState = 2; this.yZoomingState = 2;\r\n\r\n      this.invokeOnchange = true;\r\n   }\r\n\r\n   //#region transformation's origin\r\n\r\n   get transformOrigin() {\r\n      return this._transformOrigin;\r\n   }\r\n\r\n   set transformOrigin(pxVector) {\r\n      if (pxVector && pxVector instanceof vector) {\r\n         this._transformOrigin = {\r\n            pxVector: pxVector\r\n         };\r\n         let coor = this.gs.pxTOcoor(pxVector.x, pxVector.y);\r\n         this._transformOrigin.coorVector = new vector(coor.x, coor.y);\r\n      } else {\r\n         this._transformOrigin = undefined;\r\n      }\r\n   }\r\n\r\n   //#endregion\r\n\r\n   //#region {rotation, angles}\r\n\r\n   get xAngle() { return this._xAngle; }\r\n   set xAngle(v) {\r\n      let a = angles.constrainAngle(v);\r\n      if (angles.minAngle(vector.fromAngle(a), vector.fromAngle(this._yAngle), { type: 'lines' }) < this.angleMargin) {\r\n         let b = angles.angle(vector.fromAngle(a), vector.fromAngle(this._yAngle), { dir: 'clockwise' });\r\n         if (b < this.angleMargin && b > 0) {\r\n            a = angles.constrainAngle(this._yAngle + this.angleMargin);\r\n         }\r\n         else {\r\n            b = angles.angle(vector.fromAngle(a), vector.fromAngle(this._yAngle));\r\n            if (b < this.angleMargin && b > 0) {\r\n               a = angles.constrainAngle(this._yAngle - this.angleMargin);\r\n            }\r\n            else {\r\n               b = angles.angle(vector.fromAngle(a), vector.fromAngle(this._yAngle).mult(-1), { dir: 'clockwise' });\r\n               if (b < this.angleMargin && b > 0) {\r\n                  a = angles.constrainAngle(this._yAngle + Math.PI + this.angleMargin);\r\n               }\r\n               else {\r\n                  b = angles.angle(vector.fromAngle(a), vector.fromAngle(this._yAngle).mult(-1));\r\n                  if (b < this.angleMargin && b > 0) {\r\n                     a = angles.constrainAngle(this._yAngle + Math.PI - this.angleMargin);\r\n                  }\r\n               }\r\n            }\r\n         }\r\n      }\r\n      this._xAngle = a;\r\n   }\r\n\r\n   get yAngle() { return this._yAngle; }\r\n   set yAngle(v) {\r\n      let a = angles.constrainAngle(v);\r\n      if (angles.minAngle(vector.fromAngle(a), vector.fromAngle(this._xAngle), { type: 'lines' }) < this.angleMargin) {\r\n         let b = angles.angle(vector.fromAngle(a), vector.fromAngle(this._xAngle), { dir: 'clockwise' });\r\n         if (b < this.angleMargin && b > 0) {\r\n            a = angles.constrainAngle(this._xAngle + this.angleMargin);\r\n         }\r\n         else {\r\n            b = angles.angle(vector.fromAngle(a), vector.fromAngle(this._xAngle));\r\n            if (b < this.angleMargin && b > 0) {\r\n               a = angles.constrainAngle(this._xAngle - this.angleMargin);\r\n            }\r\n            else {\r\n               b = angles.angle(vector.fromAngle(a), vector.fromAngle(this._xAngle).mult(-1), { dir: 'clockwise' });\r\n               if (b < this.angleMargin && b > 0) {\r\n                  a = angles.constrainAngle(this._xAngle + Math.PI + this.angleMargin);\r\n               }\r\n               else {\r\n                  b = angles.angle(vector.fromAngle(a), vector.fromAngle(this._xAngle).mult(-1));\r\n                  if (b < this.angleMargin && b > 0) {\r\n                     a = angles.constrainAngle(this._xAngle + Math.PI - this.angleMargin);\r\n                  }\r\n               }\r\n            }\r\n         }\r\n      }\r\n      this._yAngle = a;\r\n   }\r\n\r\n   /**\r\n * @param {*} type, is 'deg' or 'rad'\r\n */\r\n   rotate(a, type = 'rad') {\r\n      if (!isNaN(a)) {\r\n         if (type === 'deg') {\r\n            a = a / 180 * Math.PI;\r\n         }\r\n         this.invokeOnchange = false;\r\n         this.xAngle += a;\r\n         this.yAngle += a;\r\n         this.invokeOnchange = true;\r\n         this.onchange();\r\n      }\r\n   }\r\n\r\n   /**\r\n  * @param {*} type, is 'deg' or 'rad'\r\n  */\r\n   rotateX(a, type = 'rad') {\r\n      if (!isNaN(a)) {\r\n         this.invokeOnchange = false;\r\n         if (type === 'deg') {\r\n            a = a / 180 * Math.PI;\r\n         }\r\n         this.xAngle += a;\r\n         this.invokeOnchange = true;\r\n         this.onchange();\r\n      }\r\n   }\r\n\r\n   /**\r\n    * @param {*} type, is 'deg' or 'rad'\r\n    */\r\n   rotateY(a, type = 'rad') {\r\n      if (!isNaN(a)) {\r\n         this.invokeOnchange = false;\r\n         if (type === 'deg') {\r\n            a = a / 180 * Math.PI;\r\n         }\r\n         this.yAngle += a;\r\n         this.invokeOnchange = true;\r\n         this.onchange();\r\n      }\r\n   }\r\n\r\n   //#endregion\r\n\r\n   //#region translate\r\n\r\n   translate(value) {\r\n      this.gs._center = new vector(this.gs.center.x + value.x, this.gs.center.y + value.y);\r\n      this.onchange(this.invokeOnchange, false);\r\n   }\r\n   translateX(value) {\r\n      this.gs._center = new vector(this.gs.center.x + value.x, this.gs.center.y + value.y);\r\n      this.onchange(this.invokeOnchange, false);\r\n   }\r\n   translateY(value) {\r\n      this.gs._center = new vector(this.gs.center.x + value.x, this.gs.center.y + value.y);\r\n      this.onchange(this.invokeOnchange, false);\r\n   }\r\n\r\n   //#endregion\r\n\r\n   //#region zoom\r\n\r\n   zoomIn(centerOfZoom) {\r\n\r\n      centerOfZoom = centerOfZoom || new vector(this.gs.width / 2, this.gs.height / 2);\r\n      this.transformOrigin = centerOfZoom;\r\n\r\n      this.invokeOnchange = false;\r\n      this.xZoomIn(); this.yZoomIn();\r\n      this.invokeOnchange = true;\r\n      this.onchange();\r\n\r\n   }\r\n   zoomOut(centerOfZoom) {\r\n\r\n      centerOfZoom = centerOfZoom || new vector(this.gs.width / 2, this.gs.height / 2);\r\n      this.transformOrigin = centerOfZoom;\r\n\r\n      this.invokeOnchange = false;\r\n      this.xZoomOut(); this.yZoomOut();\r\n      this.invokeOnchange = true;\r\n      this.onchange();\r\n\r\n   }\r\n   xZoomIn() {\r\n      // #region X\r\n      if (this.xSpace <= this.zoomLimits[1]) this.xSpace *= this.zoomRatio;\r\n\r\n      this.reformXspace();\r\n      this.onchange();\r\n      //#endregion\r\n   }\r\n   xZoomOut() {\r\n      // #region X\r\n      if (this.xSpace >= this.zoomLimits[0]) this.xSpace /= this.zoomRatio;\r\n\r\n      this.reformXspace();\r\n      this.onchange();\r\n      //#endregion\r\n\r\n   }\r\n   yZoomIn() {\r\n      // #region Y\r\n      if (this.ySpace <= this.zoomLimits[1]) this.ySpace *= this.zoomRatio;\r\n\r\n      this.reformYspace();\r\n      this.onchange();\r\n      //#endregion\r\n   }\r\n   yZoomOut() {\r\n      // #region Y\r\n      if (this.ySpace >= this.zoomLimits[0]) this.ySpace /= this.zoomRatio;\r\n\r\n      this.reformYspace();\r\n      this.onchange();\r\n      //#endregion\r\n   }\r\n\r\n   //#endregion\r\n\r\n   //#region viewport managment\r\n\r\n   setViewport(viewport, corner, resize) {\r\n      //#region precalculations\r\n      viewport = viewport || {};\r\n      viewport.xmin = viewport.xmin === 0 ? 0 : (viewport.xmin || this.gs.viewport.xmin);\r\n      viewport.xmax = viewport.xmax === 0 ? 0 : (viewport.xmax || this.gs.viewport.xmax);\r\n      viewport.ymin = viewport.ymin === 0 ? 0 : (viewport.ymin || this.gs.viewport.ymin);\r\n      viewport.ymax = viewport.ymax === 0 ? 0 : (viewport.ymax || this.gs.viewport.ymax);\r\n      let a = this.invokeOnchange; this.invokeOnchange = false;\r\n      let p = this.gs.pxTOcoor(this.gs.width / 2, this.gs.height / 2);\r\n      corner = corner || new vector(0, 0);\r\n      corner = this.gs.pxTOcoor(corner.x, corner.y);\r\n      //#endregion\r\n\r\n      //#region maincalculations\r\n      let xs = this.xSpace, ys = this.ySpace;\r\n\r\n      this.xSpace = this.xSpace / ((viewport.xmax - viewport.xmin) / (this.gs.viewport.xmax - this.gs.viewport.xmin));\r\n      if (resize) {\r\n         this.ySpace *= this.xSpace / xs;\r\n      }\r\n      else {\r\n         this.ySpace = this.ySpace / ((viewport.ymax - viewport.ymin) / (this.gs.viewport.ymax - this.gs.viewport.ymin));\r\n      }\r\n\r\n      if (this.ySpace <= 0 || this.xSpace <= 0 || isNaN(this.xSpace) || !isFinite(this.xSpace) || isNaN(this.ySpace) || !isFinite(this.ySpace)) {\r\n         this.xSpace = xs;\r\n         this.ySpace = ys;\r\n      }\r\n\r\n      this.reformXspace();\r\n      this.reformYspace();\r\n\r\n      //#endregion\r\n\r\n      //#region aftercalulations\r\n      this.invokeOnchange = true; this.onchange();\r\n      corner = this.gs.coorTOpx(corner.x, corner.y);\r\n      corner = new vector(corner.x, corner.y);\r\n      this.translate(corner.mult(-1));\r\n      this.onchange();\r\n      if (resize) {\r\n         let p_ = this.gs.coorTOpx(p.x, (viewport.ymax + viewport.ymin) / 2);\r\n         this.translate(new vector(0, this.gs.height / 2 - p_.y));\r\n      }\r\n      this.onchange(); this.invokeOnchange = a;\r\n      //#endregion\r\n   }\r\n\r\n   getViewport(pxViewport) {\r\n      let xStart = this.gs.xToCoor(pxViewport.xmin, Math.tan(this.yAngle) > 0 ? pxViewport.ymin : pxViewport.ymax);\r\n      let xEnd = this.gs.xToCoor(pxViewport.xmax, Math.tan(this.yAngle) <= 0 ? pxViewport.ymin : pxViewport.ymax);\r\n      let yStart = this.gs.yToCoor(Math.tan(this.xAngle) > 0 ? pxViewport.xmax : pxViewport.xmin, pxViewport.ymax);\r\n      let yEnd = this.gs.yToCoor(Math.tan(this.xAngle) <= 0 ? pxViewport.xmax : pxViewport.xmin, pxViewport.ymin);\r\n\r\n      return {\r\n         xmin: xEnd < xStart ? xEnd : xStart,\r\n         xmax: xEnd > xStart ? xEnd : xStart,\r\n         ymin: yEnd < yStart ? yEnd : yStart,\r\n         ymax: yEnd > yStart ? yEnd : yStart\r\n      };\r\n   }\r\n\r\n   //#endregion\r\n\r\n   //#region general\r\n\r\n   reformXspace() {\r\n      let done = false;\r\n      while (this.xSpace > this.zoomLimits[1]) {\r\n         if (this.xZoomingState == 5) {\r\n            this.xZoomingState = 2;\r\n            let ratio = 2 / 5;\r\n            this.xSpaceValue = this.xSpaceValue * ratio;\r\n            this.xSpace = this.xSpace * ratio;\r\n         }\r\n         else if (this.xZoomingState == 2) {\r\n            this.xZoomingState = 1;\r\n            let ratio = 1 / 2;\r\n            this.xSpaceValue = this.xSpaceValue * ratio;\r\n            this.xSpace = this.xSpace * ratio;\r\n         }\r\n         else if (this.xZoomingState == 1) {\r\n            this.xZoomingState = 5;\r\n            let ratio = 0.5 / 1;\r\n            this.xSpaceValue = this.xSpaceValue * ratio;\r\n            this.xSpace = this.xSpace * ratio;\r\n         }\r\n         done = true;\r\n      }\r\n      if (done) return;\r\n      while (this.xSpace < this.zoomLimits[0]) {\r\n         if (this.xZoomingState == 1) {\r\n            this.xZoomingState = 2;\r\n            let ratio = 2 / 1;\r\n            this.xSpaceValue = this.xSpaceValue * ratio;\r\n            this.xSpace = this.xSpace * ratio;\r\n         }\r\n         else if (this.xZoomingState == 2) {\r\n            this.xZoomingState = 5;\r\n            let ratio = 5 / 2;\r\n            this.xSpaceValue = this.xSpaceValue * ratio;\r\n            this.xSpace = this.xSpace * ratio;\r\n         }\r\n         else if (this.xZoomingState == 5) {\r\n            this.xZoomingState = 1;\r\n            let ratio = 10 / 5;\r\n            this.xSpaceValue = this.xSpaceValue * ratio;\r\n            this.xSpace = this.xSpace * ratio;\r\n         }\r\n      }\r\n   }\r\n   reformYspace() {\r\n      let done = false;\r\n      while (this.ySpace > this.zoomLimits[1]) {\r\n         if (this.yZoomingState == 5) {\r\n            this.yZoomingState = 2;\r\n            let ratio = 2 / 5;\r\n            this.ySpaceValue = this.ySpaceValue * ratio;\r\n            this.ySpace = this.ySpace * ratio;\r\n         }\r\n         else if (this.yZoomingState == 2) {\r\n            this.yZoomingState = 1;\r\n            let ratio = 1 / 2;\r\n            this.ySpaceValue = this.ySpaceValue * ratio;\r\n            this.ySpace = this.ySpace * ratio;\r\n         }\r\n         else if (this.yZoomingState == 1) {\r\n            this.yZoomingState = 5;\r\n            let ratio = 0.5 / 1;\r\n            this.ySpaceValue = this.ySpaceValue * ratio;\r\n            this.ySpace = this.ySpace * ratio;\r\n         }\r\n         done = true;\r\n      }\r\n      if (done) return;\r\n      while (this.ySpace < this.zoomLimits[0]) {\r\n         if (this.yZoomingState == 1) {\r\n            this.yZoomingState = 2;\r\n            let ratio = 2 / 1;\r\n            this.ySpaceValue = this.ySpaceValue * ratio;\r\n            this.ySpace = this.ySpace * ratio;\r\n         }\r\n         else if (this.yZoomingState == 2) {\r\n            this.yZoomingState = 5;\r\n            let ratio = 5 / 2;\r\n            this.ySpaceValue = this.ySpaceValue * ratio;\r\n            this.ySpace = this.ySpace * ratio;\r\n         }\r\n         else if (this.yZoomingState == 5) {\r\n            this.yZoomingState = 1;\r\n            let ratio = 10 / 5;\r\n            this.ySpaceValue = this.ySpaceValue * ratio;\r\n            this.ySpace = this.ySpace * ratio;\r\n         }\r\n      }\r\n   }\r\n\r\n   reset() {\r\n      this.transformOrigin = undefined;\r\n      this.invokeOnchange = false;\r\n\r\n      this.xSpace = 80;\r\n      this.xSpaceValue = 2;\r\n      this.xSpaceModifier = 1;\r\n      this.xZoomingState = 2;\r\n\r\n      this.ySpace = 80;\r\n      this.ySpaceValue = 2;\r\n      this.ySpaceModifier = 1;\r\n      this.yZoomingState = 2;\r\n\r\n      this._xAngle = 0;\r\n      this._yAngle = Math.PI / 2;\r\n\r\n      this.translate(new vector(\r\n         this.gs.width / 2 - this.gs.center.x,\r\n         this.gs.height / 2 - this.gs.center.y\r\n      ));\r\n\r\n      this.invokeOnchange = true;\r\n      this.onchange();\r\n   }\r\n\r\n   assign(src) {\r\n      Object.assign(this, src);\r\n   }\r\n\r\n   onchange(change = this.invokeOnchange, transToOrigin = true) {\r\n      /// updating\r\n      if (change) {\r\n\r\n         let ysm = this.xSpaceModifier * Math.abs(Math.cos(this.xAngle - this.yAngle)) + 1;\r\n         let xsm = this.ySpaceModifier * Math.abs(Math.cos(this.xAngle - this.yAngle)) + 1;\r\n         this.xScale = (this.xSpace * ysm / this.xSpaceValue);\r\n         this.yScale = (this.ySpace * xsm / this.ySpaceValue);\r\n\r\n         this.gs.viewport = this.getViewport({\r\n            xmin: 0, xmax: this.gs.width,\r\n            ymin: 0, ymax: this.gs.height\r\n         });\r\n\r\n         this.gs.drawingStep = (this.gs.viewport.xmax - this.gs.viewport.xmin) / 10000;\r\n\r\n         if (this.transformOrigin && transToOrigin) {\r\n            let a = this.invokeOnchange;\r\n            this.invokeOnchange = false;\r\n            let p = this.gs.coorTOpx(...this.transformOrigin.coorVector.toArray());\r\n            this.translate(this.transformOrigin.pxVector.subtract(p));\r\n            this.onchange(true, false);\r\n            this.invokeOnchange = a;\r\n         }\r\n\r\n         //#region checking if valid.\r\n         let notValid = (this.gs.viewport.xmin + this.gs.drawingStep / 2 <= this.gs.viewport.xmin) ||\r\n            this.gs.viewport.xmax - this.gs.drawingStep / 2 >= this.gs.viewport.xmax ||\r\n            !math.isNumeric(this.xScale) || !math.isNumeric(this.yScale) ||\r\n            !math.isNumeric(this.gs.viewport.xmin) || !math.isNumeric(this.gs.viewport.xmax) ||\r\n            !math.isNumeric(this.gs.viewport.ymin) || !math.isNumeric(this.gs.viewport.ymax) ||\r\n            !math.isNumeric(this.gs.drawingStep) ||\r\n            (this.gs.viewport.xmax - this.gs.viewport.xmin) > 10 ** 12 ||\r\n            (this.gs.viewport.ymax - this.gs.viewport.ymin) > 10 ** 12 ||\r\n            (this.gs.viewport.xmax - this.gs.viewport.xmin) < 10 ** -12 ||\r\n            (this.gs.viewport.ymax - this.gs.viewport.ymin) < 10 ** -12 ||\r\n            !math.isNumeric(this.gs.center.x) || !math.isNumeric(this.gs.center.y) ||\r\n            (this.transformOrigin && transToOrigin &&\r\n               (!math.isNumeric(this.transformOrigin.coorVector.x) || !math.isNumeric(this.transformOrigin.coorVector.y) ||\r\n                  !math.isNumeric(this.transformOrigin.pxVector.x) || !math.isNumeric(this.transformOrigin.pxVector.y)));\r\n         //#endregion\r\n\r\n         if (notValid && this.lastEdition) {\r\n            this.assign(this.lastEdition.transform);\r\n            this.gs.viewport = Object.assign({}, this.lastEdition.viewport);\r\n            this.gs.drawingStep = this.lastEdition.drawingStep;\r\n            this.gs._center = Object.assign(new vector(), this.lastEdition.center);\r\n            return;\r\n         }\r\n\r\n         this.lastEdition = {\r\n            transform: Object.assign(new this.constructor(), this),\r\n            viewport: Object.assign({}, this.gs.viewport),\r\n            drawingStep: this.gs.drawingStep,\r\n            center: Object.assign(new vector(), this.gs.center)\r\n         };\r\n\r\n      }\r\n   }\r\n\r\n   //#endregion\r\n\r\n};\r\n","import Transform from './Transform.js';\r\n\r\nexport default class {\r\n\r\n  constructor(sketch, width, height) {\r\n    this.sketch = sketch;\r\n    this._width = width;\r\n    this._height = height;\r\n    this._center = new vector(this.width / 2, this.height / 2);\r\n\r\n    this.transform = new Transform(this);\r\n    this.transform.onchange();\r\n\r\n    this.physicsRun = false;\r\n\r\n    this.childrenIDs = [];\r\n  \r\n  }\r\n\r\n  get coor() { return this.sketch.coor; }\r\n\r\n  get width() { return this._width || 0; }\r\n  set width(value) {\r\n    this._width = value; /** to update the boundaries */\r\n    this.transform.onchange();\r\n  }\r\n  get height() { return this._height || 0; }\r\n  set height(value) {\r\n    this._height = value; /** to update the boundaries */\r\n    this.transform.onchange();\r\n  }\r\n\r\n  /**\r\n   * @returns the i vector of the cartesian coordinates relative to (with respect to) the pixel coordinates\r\n   */\r\n  get iVector() {\r\n    return vector.fromAngle(-this.transform.xAngle).mult(this.transform.xScale);\r\n  }\r\n  /**\r\n  * @returns the j vector of the cartesian coordinates relative to (with respect to) the pixel coordinates\r\n  */\r\n  get jVector() {\r\n    return vector.fromAngle(-this.transform.yAngle).mult(this.transform.yScale);\r\n  }\r\n\r\n  get center() { return this._center; }\r\n\r\n  centrate() {\r\n    this.transform.translate(new vector(\r\n      this.width / 2 - this.center.x,\r\n      this.height / 2 - this.center.y\r\n    ));\r\n  }\r\n\r\n  reset() {\r\n    this.transform.reset();\r\n  }\r\n\r\n  //#region convert { coor, px }\r\n\r\n  coorTOpx(x, y) {\r\n    return { x: this.xToPixel(x, y), y: this.yToPixel(x, y) };\r\n  }\r\n  pxTOcoor(x, y) {\r\n    return { x: this.xToCoor(x, y), y: this.yToCoor(x, y) };\r\n  }\r\n  xToPixel(xCoorValue, yCoorValue) {\r\n    return (this.center.x + (xCoorValue * this.transform.xScale) * Math.cos(this.transform.xAngle) + (yCoorValue * this.transform.yScale) * Math.cos(this.transform.yAngle));\r\n  }\r\n  yToPixel(xCoorValue, yCoorValue) {\r\n    return (this.center.y - ((yCoorValue * this.transform.yScale) * Math.sin(this.transform.yAngle) + (xCoorValue * this.transform.xScale) * Math.sin(this.transform.xAngle)));\r\n  }\r\n  xToCoor(xPixelValue, yPixelValue) {\r\n    xPixelValue = xPixelValue - this.center.x;\r\n    yPixelValue = this.center.y - yPixelValue;\r\n    return ((Math.cos(this.transform.yAngle) * yPixelValue - Math.sin(this.transform.yAngle) * xPixelValue) / Math.sin(this.transform.xAngle - this.transform.yAngle)) / this.transform.xScale;\r\n  }\r\n  yToCoor(xPixelValue, yPixelValue) {\r\n    xPixelValue = xPixelValue - this.center.x;\r\n    yPixelValue = this.center.y - yPixelValue;\r\n    return ((Math.cos(this.transform.xAngle) * yPixelValue - Math.sin(this.transform.xAngle) * xPixelValue) / Math.sin(this.transform.yAngle - this.transform.xAngle)) / this.transform.yScale;\r\n  }\r\n\r\n  //#endregion\r\n\r\n  checkId(id) {\r\n    if (!id) throw new Error('can\\'t set a falsy value to the name of this sketch child.');\r\n    let __id = id.replace(/^\\s*([_a-zA-z\\d]+)\\s*$/, '$1');\r\n    if (!__id)\r\n      throw new Error(`\"${id}\" is not valid to use.`);\r\n    else {\r\n      if (this.childrenIDs.find(a=> a === id)) {\r\n        throw new Error(`\"${id}\" is used before.`);\r\n      }\r\n    }\r\n    return __id;\r\n  }\r\n\r\n}\r\n\r\n\r\n","\r\nexport default class {\r\n\r\n   constructor(gs, coorSettings) {\r\n      this.gs = gs;\r\n      let defaultCoorSettings = {\r\n         type: 'default',\r\n         xUnit: '',\r\n         yUnit: '',\r\n\r\n         background: new drawing.color(255, 255, 255, 255),\r\n         font: 'Georgia',\r\n\r\n         drawDecimalLines: true,\r\n         drawMainLines: true,\r\n         drawAxisesLines: true,\r\n         drawPolarCircles: false,\r\n         drawPolarLines: false,\r\n         drawPolarAngles: false,\r\n         drawNumbers: true,\r\n\r\n         decimalLinesSpace: 5,\r\n         polarCirclesSpace: 5,\r\n         polarLinesAnglesSpace: 6,\r\n\r\n         penDecimalLines: null,\r\n         penMainLines: null,\r\n         penXaxis: null,\r\n         penYaxis: null,\r\n         penPolarCircles: null,\r\n         penPolarLines: null,\r\n\r\n         autoRefiningOnZoomimg: true\r\n      };\r\n\r\n      Object.assign(defaultCoorSettings, {\r\n         color: defaultCoorSettings.background.isDark() ? new drawing.color(200, 200, 200, 255) : new drawing.color(50, 50, 50, 1),\r\n         antiBackground: defaultCoorSettings.background.isDark() ? new drawing.color(200, 200, 200, 255) : new drawing.color(50, 50, 50, 1),\r\n         drawDecimalLines: !defaultCoorSettings.background.isDark(),\r\n         penDecimalLines: new drawing.pen(defaultCoorSettings.background.isDark() ? new drawing.color(200, 200, 200, 30 / 255) : new drawing.color(50, 50, 50, 30 / 255), 1),\r\n         penMainLines: new drawing.pen(defaultCoorSettings.background.isDark() ? new drawing.color(200, 200, 200, 100 / 255) : new drawing.color(50, 50, 50, 100 / 255), 1),\r\n         penXaxis: new drawing.pen(defaultCoorSettings.background.isDark() ? new drawing.color(255, 255, 255, 150 / 255) : new drawing.color(0, 0, 0, 150 / 255), 2),\r\n         penYaxis: new drawing.pen(defaultCoorSettings.background.isDark() ? new drawing.color(255, 255, 255, 150 / 255) : new drawing.color(0, 0, 0, 150 / 255), 2),\r\n         penPolarCircles: new drawing.pen(defaultCoorSettings.background.isDark() ? new drawing.color(200, 200, 200, 100 / 255) : new drawing.color(50, 50, 50, 50 / 255), 1),\r\n         penPolarLines: new drawing.pen(defaultCoorSettings.background.isDark() ? new drawing.color(200, 200, 200, 100 / 255) : new drawing.color(50, 50, 50, 50 / 255), 1)\r\n      });\r\n\r\n      if (coorSettings) {\r\n         this.coorSettings = {};\r\n         Object.assign(this.coorSettings, defaultCoorSettings);\r\n         Object.assign(this.coorSettings, coorSettings);\r\n      } else {\r\n         this.coorSettings = defaultCoorSettings;\r\n      }\r\n\r\n   }\r\n\r\n   render(ctx) {\r\n      switch (this.coorSettings.type) {\r\n         case 'default':\r\n            this.custom(ctx);\r\n            break;\r\n         case 'rad':\r\n            this.radian(ctx);\r\n            break;\r\n      }\r\n   }\r\n\r\n   custom(canvas, a = 1) {\r\n\r\n      let start_x, start_y, end_x, end_y;\r\n      start_x = Math.floor(this.gs.viewport.xmin / this.gs.transform.xSpaceValue / a) * a * this.gs.transform.xSpaceValue;\r\n      end_x = Math.ceil(this.gs.viewport.xmax / this.gs.transform.xSpaceValue / a) * a * this.gs.transform.xSpaceValue;\r\n      start_y = Math.floor(this.gs.viewport.ymin / this.gs.transform.ySpaceValue) * this.gs.transform.ySpaceValue;\r\n      end_y = Math.ceil(this.gs.viewport.ymax / this.gs.transform.ySpaceValue) * this.gs.transform.ySpaceValue;\r\n\r\n      if (this.coorSettings.drawDecimalLines) {\r\n         canvas.ctx.beginPath();\r\n         this.coorSettings.penDecimalLines.setup(canvas);\r\n         // x\r\n         for (let i = start_x; i <= end_x; i += this.gs.transform.xSpaceValue * a / this.coorSettings.decimalLinesSpace)\r\n            canvas.line(this.gs.xToPixel(i, start_y), this.gs.yToPixel(i, start_y),\r\n               this.gs.xToPixel(i, end_y), this.gs.yToPixel(i, end_y));\r\n         // y\r\n         for (let i = start_y; i <= end_y; i += this.gs.transform.ySpaceValue / this.coorSettings.decimalLinesSpace)\r\n            canvas.line(this.gs.xToPixel(start_x, i), this.gs.yToPixel(start_x, i),\r\n               this.gs.xToPixel(end_x, i), this.gs.yToPixel(end_x, i));\r\n         canvas.ctx.stroke();\r\n      }\r\n\r\n      if (this.coorSettings.drawMainLines) {\r\n         canvas.ctx.beginPath();\r\n         this.coorSettings.penMainLines.setup(canvas);\r\n         // x\r\n         for (let i = start_x; i <= end_x; i += this.gs.transform.xSpaceValue * a)\r\n            canvas.line(this.gs.xToPixel(i, start_y), this.gs.yToPixel(i, start_y),\r\n               this.gs.xToPixel(i, end_y), this.gs.yToPixel(i, end_y));\r\n         // y\r\n         for (let i = start_y; i <= end_y; i += this.gs.transform.ySpaceValue)\r\n            canvas.line(this.gs.xToPixel(start_x, i), this.gs.yToPixel(start_x, i),\r\n               this.gs.xToPixel(end_x, i), this.gs.yToPixel(end_x, i));\r\n         canvas.ctx.stroke();\r\n      }\r\n\r\n      if (this.coorSettings.drawAxisesLines) {\r\n         canvas.ctx.beginPath();\r\n         this.coorSettings.penXaxis.setup(canvas);\r\n         canvas.line(this.gs.xToPixel(start_x, 0), this.gs.yToPixel(start_x, 0),\r\n            this.gs.xToPixel(end_x, 0), this.gs.yToPixel(end_x, 0));\r\n         canvas.ctx.stroke();\r\n         canvas.ctx.beginPath();\r\n         this.coorSettings.penYaxis.setup(canvas);\r\n         canvas.line(this.gs.xToPixel(0, start_y), this.gs.yToPixel(0, start_y),\r\n            this.gs.xToPixel(0, end_y), this.gs.yToPixel(0, end_y));\r\n         canvas.ctx.stroke();\r\n      }\r\n\r\n      start_x = Math.floor(start_x / this.gs.transform.xSpaceValue / a);\r\n      end_x = Math.ceil(end_x / this.gs.transform.xSpaceValue / a);\r\n      start_y = Math.floor(start_y / this.gs.transform.ySpaceValue);\r\n      end_y = Math.ceil(end_y / this.gs.transform.ySpaceValue);\r\n\r\n      let y, x;\r\n      let num;\r\n      if (this.coorSettings.drawNumbers) {\r\n         // label position x\r\n         canvas.ctx.fillStyle = this.coorSettings.color.toString();\r\n         canvas.ctx.strokeStyle = `rgba(${this.coorSettings.background.toArray().splice(0, 3).join(', ')}, 200)`;\r\n         canvas.ctx.lineWidth = 2;\r\n         canvas.setFont({ size: 15 }); /// setting the label style.\r\n\r\n         let xD, yD;\r\n         if (Math.abs(Math.tan(this.gs.transform.yAngle)) > Math.abs(Math.tan(this.gs.transform.xAngle))) { // && Math.tan(Math.abs(this.gs.transform._xAngle - this.gs.transform._yAngle)) >= 1\r\n            // dealing horizetally when setting x labels vetically.\r\n            xD = 'v'; yD = 'h';\r\n         }\r\n         else {\r\n            xD = 'h'; yD = 'v';\r\n         }\r\n\r\n         for (let i = start_x; i <= end_x; i += 1) {\r\n            x = i * this.gs.transform.xSpaceValue;\r\n            num = (Math.abs(x) < 0.001 || Math.abs(x) >= 999999) ?\r\n               x.toExponential(3).replace(/\\.?0+e\\+?/, '10^') :\r\n               x.toFixed(3).replace(/0+$/, \"\").replace(/\\.$/, ''); /// .toFixed(3) returns 32146.000 if you input an integer, so I want to remove all the zeros from the end, and if \".\" remians, then remove it too, other wise keep all thing such as 2343165.123 \r\n            if (x != 0) {\r\n               num += (a === Math.PI / 2 ? 'pi' : '') + this.coorSettings.xUnit;\r\n               let p = this.__getLabelPos(canvas, this.gs.coorTOpx(x, 0), num, xD, this.gs.jVector); /// position of the label of x which the line, which is parallel to yAxis, intersect xAxis;\r\n               canvas.ctx.fillText(num, p.x, p.y);\r\n               // canvas.ctx.strokeText(num, p.x + 4, p.y + 4);\r\n            }\r\n         }\r\n         // label position y\r\n         for (let i = start_y; i <= end_y; i += 1) {\r\n            y = i * this.gs.transform.ySpaceValue;\r\n            num = (Math.abs(y) < 0.001 || Math.abs(y) >= 999999) ?\r\n               y.toExponential(3).replace(/\\.?0+e\\+?/, '10^') :\r\n               y.toFixed(3).replace(/0+$/, \"\").replace(/\\.$/, '');\r\n            if (y != 0) {\r\n               num += this.coorSettings.yUnit;\r\n               let p = this.__getLabelPos(canvas, this.gs.coorTOpx(0, y), num, yD, this.gs.iVector);\r\n               canvas.ctx.fillText(num, p.x, p.y);\r\n               // canvas.ctx.strokeText(num, p.x + 4, p.y + 4);\r\n            }\r\n         }\r\n      }\r\n   }\r\n   radian(canvas) {\r\n      this.custom(canvas, Math.PI / 2);\r\n   }\r\n\r\n   /**\r\n    * \r\n    * @param {vector} pos the real position for the label on either of the two axes\r\n    * @param {string} number as string to measure its size.\r\n    * @param {string} dimension which is either 'h' or 'v', so the code will check if the label is out side the horizental view 'h', or the vertical view 'v';\r\n    */\r\n   __getLabelPos(canvas, pos, number, dimension, unitVec) {\r\n      let size = canvas.measureString(number);\r\n      size.height = 10; // as there is no properity called height in size, gotten from measureString(\"string\");\r\n      pos = new vector(pos.x, pos.y);\r\n\r\n      if (dimension === 'h') {\r\n         let bounds = [4, this.gs.width - size.width - 4];\r\n         if (pos.x < bounds[0]) {\r\n            let n = (bounds[0] - pos.x) / unitVec.x;\r\n            return pos.add(unitVec.mult(n));\r\n         } else if (pos.x > bounds[1]) {\r\n            let n = (bounds[1] - pos.x) / unitVec.x;\r\n            return pos.add(unitVec.mult(n));\r\n         } else {\r\n            return pos;\r\n         }\r\n      } else {\r\n         /// if dimension is 'v' or even anything else.\r\n         let bounds = [4, this.gs.height - size.height - 4];\r\n         if (pos.y < bounds[0]) {\r\n            let n = (bounds[0] - pos.y) / unitVec.y;\r\n            return pos.add(unitVec.mult(n));\r\n         } else if (pos.y > bounds[1]) {\r\n            let n = (bounds[1] - pos.y) / unitVec.y;\r\n            return pos.add(unitVec.mult(n));\r\n         } else {\r\n            return pos;\r\n         }\r\n      }\r\n   }\r\n\r\n}","/* eslint-disable no-unused-vars */\r\n/* eslint-disable no-undef */\r\nimport GraphSettings from './GraphSetting/GraphSettings.js';\r\nimport Coordinates from './Coordinates.js';\r\nimport Canvas from './Canvas.js';\r\nimport { Xfunction, EvalExpr, Point, Variable } from './GraphChildren/index.js';\r\nexport default class Sketch {\r\n\r\n    constructor(canvas) {\r\n        this.gs = new GraphSettings(this, canvas.clientWidth, canvas.clientHeight);\r\n        this.coor = new Coordinates(this.gs);\r\n        this.canvas = new Canvas({ canvas: canvas });\r\n        this.subcanvas = new Canvas();\r\n        this.ChildrenCanvas = new Canvas();\r\n\r\n        this.children = new Map();\r\n        this.scriptParser = new MagicalParser.CustomParsers.Math();\r\n    }\r\n\r\n    appendChild(child) {\r\n        if (!child.id) throw new Error('Your sketch child should have had an id :\\'(');\r\n        let append = (child instanceof GraphChild ? child : this.childFromScript(child));\r\n        this.children.set(child.id, child);\r\n    }\r\n\r\n    childFromScript(script, propsTOset = {}) {\r\n        let parsedString = this.getChildParser.parse(script.replace(/\\^/g, '**'));\r\n        return childFromParsed(parsedString, propsTOset);\r\n    }\r\n\r\n    childFromParsed(parsedString, propsTOset = {}) {\r\n        propsTOset.sketch = this;\r\n        if (parsedString.check({ name: '=' })) {\r\n            let left = parsedString.args[0], right = parsedString.args[1];\r\n\r\n            if (left.check({ type: 'variable', name: 'y' }) && !right.contains({ type: 'variable', name: 'y' })) {\r\n                return new Xfunction(Object.assign({ expr: right, }, propsTOset));\r\n            }\r\n\r\n            //such : area( h , b , theta ) = 0.5 * h * b * sin( theta )\r\n            //such : f(x) = x^2\r\n            else if (left.check({ type: 'functionCalling' }) && !this.gs.reservedFunction.find(name => Math.hasOwnProperty(left.name))) {\r\n                // such : f(x) = x^2\r\n                if (left.args.length == 1 && left.args[0].check({ type: 'variable', name: 'x' }) && !right.contains({ type: 'variable', name: 'y' })) {\r\n                    return new Xfunction({ sketch: this, expr: right, id: left.name });\r\n                }\r\n                /*\r\n                //such : area( h , b , theta) = 0.5 * h * b * sin( theta )\r\n                else {\r\n                    List < string > args = new List<string>();\r\n                    LNode Process = null;\r\n                    \r\n                    foreach(LNode arg in left.Args);\r\n                    {\r\n                        if (arg.IsId) {\r\n                            args.Add(arg.Name.Name);\r\n                        }\r\n                        else {\r\n                            throw new Exception($\"The argument {arg.ToString().Substring(0, arg.ToString().length - 1)} of the function \\\"{name.ToString()}\\\" is invalid\");\r\n                        }\r\n                    }\r\n                    if (MathExpression(right)) {\r\n                        Process = right;\r\n                    }\r\n                    else {\r\n                        throw new Exception($\"The process {right.ToString().Substring(0, right.ToString().length - 1)} of the function \\\"{name.ToString()}\\\" is invalid\");\r\n                    }\r\n\r\n\r\n                    MathPackage.Operations.Func func = new MathPackage.Operations.Func(name, args, MathPackage.Transformer.GetNodeFromLoycNode(Process, GraphSettings.CalculationSettings));\r\n                    return func;\r\n                }\r\n                */\r\n            }\r\n\r\n            //such : a = 2\r\n            else if (left.type === 'variable' && right.type === 'number') {\r\n                return new Variable(Object.assign({ id: left.name, value: right.value }, propsTOset));\r\n            }\r\n            //such : a = -2\r\n            else if (left.type === 'variable' && right.check({ type: 'prefixOperator', name: '-' }) && right.args[0].type === 'number') {\r\n                return new Variable(Object.assign({ id: left.name, value: -right.args[0].value }, propsTOset));\r\n            }\r\n            //such : a = 2b+c\r\n            else if (left.type === 'variable') {\r\n                return new EvalExpr(Object.assign({ id: left.name, expr: right }, propsTOset));\r\n            }\r\n\r\n        }\r\n        // /// like 2+3*x = sin(y)^2\r\n        // else if ((IsBool(parsedString)) && (ContainsSymbol(parsedString, GraphSettings.sy_x) || ContainsSymbol(parsedString, GraphSettings.sy_y))) {\r\n        //    XYFunction f = new XYFunction(GraphSettings);\r\n        //    {\r\n        //       Expression = MathPackage.Transformer.GetNodeFromLoycNode(parsedString, GraphSettings.CalculationSettings);\r\n        //    };\r\n        //    if (selectName) {\r\n        //       if (enrollName) {\r\n        //          f.SetName(GraphSettings.selectName());\r\n        //       }\r\n        //       else {\r\n        //          f.Name = GraphSettings.selectName();\r\n        //       }\r\n        //    }\r\n        //    return f;\r\n        // }\r\n\r\n        /// to add function like : x^2\r\n        else if (parsedString.contains({ type: 'variable', name: 'x' })) {\r\n            return new Xfunction(Object.assign({ expr: parsedString, }, propsTOset));\r\n        }\r\n\r\n        /// to add a point like (1, 2)\r\n        else if (parsedString.check({ type: 'block', name: '()' }) && parsedString.args.length == 1 && parsedString.args[0].check({ type: 'separator', name: ',', length: 2 })) {\r\n            /// it is a parametricFunction\r\n            if (vars.contains('t')) {\r\n                //    let func = new ParametricFunc({\r\n                //       Parameter: \"t\",\r\n                //       Start: new MathPackage.Nodes.Constant(-10),\r\n                //       End: new MathPackage.Nodes.Constant(10),\r\n                //       x_Expression: MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[0], GraphSettings.CalculationSettings),\r\n                //       y_Expression: MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[1], GraphSettings.CalculationSettings),\r\n                //    });\r\n                //   ;\r\n                //    func.Step = null;\r\n                //    if (selectName) {\r\n                //       if (enrollName)\r\n                //          func.SetName(GraphSettings.selectName());\r\n                //       else\r\n                //          func.Name = GraphSettings.selectName();\r\n                //    }\r\n                //    return func;\r\n            }\r\n            /// it is a point\r\n            else {\r\n                return new Point({ x: parsedString.args[0].args[0], y: parsedString.args[0].args[1], ...propsTOset });\r\n            }\r\n        }\r\n\r\n        {\r\n            /*\r\n\r\n        else {\r\n            //#region \"Add PointsDependant\";\r\n            if (PDsTypes().Contains(parsedString.Target.Name.ToString())) {\r\n                PointsDependant pd = GetPD(parsedString, GraphSettings, selectName, enrollName);\r\n                if (pd != null) {\r\n                    return pd;\r\n                }\r\n            }\r\n            //#endregion\r\n            else if (parsedString.Target.Name.ToString() == \"Curve\") {\r\n                if (parsedString.Args.Count == 5) {\r\n                    // Checking for problems\r\n                    if (!parsedString.Args[0].IsId || !MathExpression(parsedString.Args[1]) || !MathExpression(parsedString.Args[2]) || !MathExpression(parsedString.Args[3]) || !MathExpression(parsedString.Args[4]))\r\n                        throw new Exception($\"the arguments is not valid.\\n{parsedString.ToString().Remove(0, parsedString.ToString().length - 1)}\");\r\n                    // Getting the object\r\n                    ParametricFunc func = new ParametricFunc(GraphSettings);\r\n                    {\r\n                        Parameter = parsedString.Args[0].Name.Name,\r\n                            Start = MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[1], GraphSettings.CalculationSettings),\r\n                            End = MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[2], GraphSettings.CalculationSettings),\r\n                            x_Expression = MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[3], GraphSettings.CalculationSettings),\r\n                            y_Expression = MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[4], GraphSettings.CalculationSettings),\r\n            };\r\n                    func.Step = null;\r\n                    if (selectName) {\r\n                        if (enrollName)\r\n                            func.SetName(GraphSettings.selectName());\r\n                        else\r\n                            func.Name = GraphSettings.selectName();\r\n                    }\r\n                    return func;\r\n                }\r\n                else if (parsedString.Args.Count == 6) {\r\n                    // Checking for problems\r\n                    if (!parsedString.Args[0].IsId || !MathExpression(parsedString.Args[1]) || !MathExpression(parsedString.Args[2]) || !MathExpression(parsedString.Args[3]) || !MathExpression(parsedString.Args[4]) || !MathExpression(parsedString.Args[5]))\r\n                        throw new Exception($\"the arguments is not valid.\\n{parsedString.ToString().Remove(0, parsedString.ToString().length - 1)}\");\r\n                    // Getting the object\r\n                    ParametricFunc func = new ParametricFunc(GraphSettings);\r\n                    {\r\n                        Parameter = parsedString.Args[0].Name.Name,\r\n                            Start = MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[1], GraphSettings.CalculationSettings),\r\n                            End = MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[2], GraphSettings.CalculationSettings),\r\n                            Step = MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[3], GraphSettings.CalculationSettings),\r\n                            x_Expression = MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[4], GraphSettings.CalculationSettings),\r\n                            y_Expression = MathPackage.Transformer.GetNodeFromLoycNode(parsedString.Args[5], GraphSettings.CalculationSettings),\r\n                        };\r\n                    if (selectName) {\r\n                        if (enrollName)\r\n                            func.SetName(GraphSettings.selectName());\r\n                        else\r\n                            func.Name = GraphSettings.selectName();\r\n                    }\r\n                    return func;\r\n                }\r\n            }\r\n        }\r\n\r\n    */\r\n        }\r\n\r\n        return new EvalExpr(Object.assign({ expr: parsedString, drawable: false }, propsTOset));\r\n    }\r\n\r\n    getChildById(id) {\r\n        // for (let index = 0; index < this.children.length; index++) {\r\n        //     if (this.children[index].id === id) return { child, index };\r\n        //     continue;\r\n        // }\r\n        return this.children.get(id);\r\n    }\r\n\r\n    update(draw = true, coors = true) {\r\n        if (this.canvas) {\r\n            if (coors) {\r\n                this.subcanvas.clear();\r\n                this.coor.render(this.subcanvas);\r\n            }\r\n            this.ChildrenCanvas.clear();\r\n            for (let child of this.children.values()) {\r\n                if (child) {\r\n                    child.render(this.ChildrenCanvas);\r\n                }\r\n            }\r\n\r\n            if (draw) this.draw();\r\n        }\r\n    }\r\n\r\n    draw() {\r\n        this.canvas.clear(this.coor.coorSettings.background.toString());\r\n        this.canvas.ctx.drawImage(this.subcanvas.elt, 0, 0);\r\n        this.canvas.ctx.drawImage(this.ChildrenCanvas.elt, 0, 0);\r\n    }\r\n\r\n}","\r\n//#region canvas events\r\nimport { subTools, mouse } from '../global.js';\r\n\r\nexport default function canvasEvents() {\r\n   let mousepressed;\r\n   let lines = MathPackage.Lines;\r\n   canvas.elt.addEventListener('mousedown', (e) => {\r\n      Object.assign(subTools, {\r\n         type: subTools.type,\r\n         mouse: new vector(mouse.x, mouse.y),\r\n         iVector: new vector(...mySketch.gs.iVector.toArray()),\r\n         jVector: new vector(...mySketch.gs.iVector.toArray())\r\n      });\r\n\r\n      mousepressed = true;\r\n      if (subTools.type.search('axises') > -1) {\r\n         let xEq = lines.lineEquation(-mySketch.gs.transform.xAngle, mySketch.gs.center),\r\n            yEq = lines.lineEquation(-mySketch.gs.transform.yAngle, mySketch.gs.center);\r\n         let d = 30;\r\n         let distTo = {\r\n            x: lines.distToLine(subTools.mouse, xEq),\r\n            y: lines.distToLine(subTools.mouse, yEq)\r\n         };\r\n         if (distTo.x < d && distTo.y < d) {\r\n            subTools.axis = 'xy';\r\n            subTools.xSpace = mySketch.gs.transform.xSapce;\r\n            subTools.ySpace = mySketch.gs.transform.ySapce;\r\n            subTools.xAngle = mySketch.gs.transform.xAngle;\r\n            subTools.yAngle = mySketch.gs.transform.yAngle;\r\n            subTools.transformOrigin = new vector(mySketch.gs.center.x, mySketch.gs.center.y);\r\n            subTools.xPenColor = Object.assign(new drawing.color(), mySketch.coor.coorSettings.penXaxis.color);\r\n            subTools.yPenColor = Object.assign(new drawing.color(), mySketch.coor.coorSettings.penYaxis.color);\r\n            mySketch.coor.coorSettings.penXaxis.color = new drawing.color(255, 0, 0, 155);\r\n            mySketch.coor.coorSettings.penYaxis.color = new drawing.color(255, 0, 0, 155);\r\n         }\r\n         else if (distTo.x < d) {\r\n            subTools.axis = 'x';\r\n            subTools.space = mySketch.gs.transform.xSapce;\r\n            subTools.angle = mySketch.gs.transform.xAngle;\r\n            let o = new vector(math.constrain(mySketch.gs.center.x, 0, mySketch.gs.width), math.constrain(mySketch.gs.center.y, 0, mySketch.gs.height));\r\n            if (o.x !== mySketch.gs.center.x) {\r\n               o = subTools.mouse;\r\n            }\r\n            subTools.transformOrigin = o;\r\n            subTools.penColor = [mySketch.coor.coorSettings.penXaxis.color].slice()[0];\r\n            mySketch.coor.coorSettings.penXaxis.color = new drawing.color(255, 0, 0, 155);\r\n         }\r\n         else if (distTo.y < d) {\r\n            subTools.axis = 'y';\r\n            subTools.space = mySketch.gs.transform.ySapce;\r\n            subTools.angle = mySketch.gs.transform.yAngle;\r\n            let o = new vector(math.constrain(mySketch.gs.center.x, 0, mySketch.gs.width), math.constrain(mySketch.gs.center.y, 0, mySketch.gs.height));\r\n            if (o.y !== mySketch.gs.center.y) {\r\n               o = subTools.mouse;\r\n            }\r\n            subTools.transformOrigin = o;\r\n            subTools.penColor = [mySketch.coor.coorSettings.penYaxis.color].slice()[0];\r\n            mySketch.coor.coorSettings.penYaxis.color = new drawing.color(255, 0, 0, 155);\r\n         }\r\n         else {\r\n            subTools.axis = undefined;\r\n         }\r\n         subTools.increment = 0;\r\n         mySketch.draw();\r\n      } else if (subTools.type === 'zoom') {\r\n         subTools.pxViewport = {};\r\n      }\r\n      e.preventDefault();\r\n   });\r\n\r\n   window.addEventListener('mousemove', (e) => {\r\n      let canvasPos = getPosittion(canvas.elt);\r\n      mouse.x = e.x - canvasPos.left;\r\n      mouse.y = e.y - canvasPos.top;\r\n\r\n      if (mousepressed) {\r\n         switch (subTools.type) {\r\n            case 'move':\r\n               {\r\n                  moveCoor(e);\r\n                  break;\r\n               }\r\n            case 'scale-axises':\r\n               {\r\n                  scaleAxises(e);\r\n                  break;\r\n               }\r\n            case 'rotate-axises':\r\n               {\r\n                  rotateAxises(e);\r\n                  break;\r\n               }\r\n            case 'zoom':\r\n               {\r\n                  zoomBox(e);\r\n                  break;\r\n               }\r\n         }\r\n         e.preventDefault();\r\n      }\r\n   }, true);\r\n\r\n   function getPosittion(elt) {\r\n      let parentPos = {left: 0, top: 0};\r\n      if (elt.offsetParent) {\r\n         parentPos = getPosittion(elt.offsetParent);\r\n      }\r\n      return { left: elt.offsetLeft + parentPos.left, top: elt.offsetTop + parentPos.top};\r\n   }\r\n\r\n   window.addEventListener('mouseup', (e) => {\r\n      if (mousepressed) {\r\n         mousepressed = false;\r\n         if (subTools.type === 'move') {\r\n            mySketch.draw();\r\n         }\r\n         else if (subTools.type.search('axises') > -1) {\r\n            if (subTools.axis == 'x') {\r\n               mySketch.coor.coorSettings.penXaxis.color = subTools.penColor;\r\n               mySketch.draw();\r\n            } else if (subTools.axis == 'y') {\r\n               mySketch.coor.coorSettings.penYaxis.color = subTools.penColor;\r\n               mySketch.draw();\r\n            } else if (subTools.axis == 'xy') {\r\n               mySketch.coor.coorSettings.penXaxis.color = subTools.xPenColor;\r\n               mySketch.coor.coorSettings.penYaxis.color = subTools.yPenColor;\r\n               mySketch.draw();\r\n            }\r\n         }\r\n         else if (subTools.type === 'zoom') {\r\n            if (subTools.pxViewport.width && subTools.pxViewport.height) {\r\n               mySketch.gs.transform.transformOrigin = undefined;\r\n               mySketch.gs.transform.setViewport(mySketch.gs.transform.getViewport(subTools.pxViewport), new vector(subTools.pxViewport.xmin, subTools.pxViewport.ymin));\r\n            }\r\n            showTransDetails([\r\n               'x: {',\r\n               `  xmin: ${mySketch.gs.viewport.xmin},`,\r\n               `  xmax: ${mySketch.gs.viewport.xmax}`,\r\n               '},',\r\n               'y: {',\r\n               `  ymin: ${mySketch.gs.viewport.ymin},`,\r\n               `  ymax: ${mySketch.gs.viewport.ymax}`,\r\n               '}',\r\n            ], 'zoom');\r\n            mySketch.update();\r\n         }\r\n\r\n         e.preventDefault();\r\n         e.stopPropagation();\r\n      }\r\n   });\r\n\r\n   canvas.elt.addEventListener('mousewheel', (e) => {\r\n      {\r\n         e.preventDefault();\r\n         let center = mySketch.gs.center;\r\n         let mousePos = mouse;       \r\n         if (MathPackage.Core.dist(mouse.x, center.x, mouse.y, center.y) < 30){\r\n            mousePos = center;\r\n         }\r\n         if (e.wheelDelta > 0) {\r\n            mySketch.gs.transform.zoomIn(new vector(mousePos.x, mousePos.y));\r\n            mySketch.update();\r\n         } else {\r\n            mySketch.gs.transform.zoomOut(new vector(mousePos.x, mousePos.y));\r\n            mySketch.update();\r\n         }\r\n      }\r\n   });\r\n\r\n   //#region mouse move (tools'-subtools') functions\r\n\r\n   function moveCoor(e) {\r\n      mySketch.gs.transform.translate(new vector(mouse.x, mouse.y).subtract(subTools.mouse));\r\n      mySketch.update();\r\n      canvas.ellipse(mouse.x, mouse.y, 5);\r\n      subTools.mouse = new vector(mouse.x, mouse.y);\r\n   }\r\n\r\n   function scaleAxises(e) {\r\n      if (subTools.axis == 'x') {\r\n         let rotatedMouse = subTools.mouse;\r\n         let xEq = lines.lineEquation(-mySketch.gs.transform.xAngle, mySketch.gs.center);\r\n         let incre = (math.dist(mouse.x, mouse.y, rotatedMouse.x, rotatedMouse.y) ** 2 - lines.distToLine(new vector(mouse.x, mouse.y), xEq) ** 2) ** 0.5;\r\n\r\n         mySketch.gs.transform.transformOrigin = undefined;\r\n         if (!isNaN(incre)) {\r\n            let mina = angles.minAngle(vector.fromAngle(-mySketch.gs.transform.xAngle), new vector(mouse.x, mouse.y).subtract(rotatedMouse));\r\n            let dir = mina < Math.PI / 2 ? 1 : (mina > Math.PI / 2 ? -1 : 0);\r\n\r\n            mySketch.gs.transform.transformOrigin = subTools.transformOrigin;\r\n            mySketch.gs.transform.xSpace += (incre * dir - subTools.increment);\r\n            mySketch.gs.transform.reformXspace();\r\n            subTools.increment = incre * dir;\r\n         }\r\n\r\n         mySketch.gs.transform.onchange(true);\r\n         mySketch.update();\r\n         canvas.ellipse(rotatedMouse.x, rotatedMouse.y, 5);\r\n         canvas.ellipse(mouse.x, mouse.y, 5);\r\n\r\n         showTransDetails([\r\n            `*${(mySketch.gs.iVector.mag / subTools.iVector.mag).toFixed(2)}`\r\n         ]);\r\n\r\n      } else if (subTools.axis == 'y') {\r\n         let rotatedMouse = subTools.mouse;\r\n         let yEq = lines.lineEquation(-mySketch.gs.transform.yAngle, mySketch.gs.center);\r\n         let incre = (math.dist(mouse.x, mouse.y, rotatedMouse.x, rotatedMouse.y) ** 2 - lines.distToLine(new vector(mouse.x, mouse.y), yEq) ** 2) ** 0.5;\r\n\r\n         mySketch.gs.transform.transformOrigin = undefined;\r\n         if (!isNaN(incre)) {\r\n            let mina = angles.minAngle(vector.fromAngle(-mySketch.gs.transform.yAngle), new vector(mouse.x, mouse.y).subtract(rotatedMouse));\r\n            let dir = mina < Math.PI / 2 ? 1 : (mina > Math.PI / 2 ? -1 : 0);\r\n\r\n            mySketch.gs.transform.transformOrigin = subTools.transformOrigin;\r\n            mySketch.gs.transform.ySpace += (incre * dir - subTools.increment);\r\n            mySketch.gs.transform.reformYspace();\r\n            subTools.increment = incre * dir;\r\n         }\r\n\r\n         mySketch.gs.transform.onchange(true);\r\n         mySketch.update();\r\n         canvas.ellipse(rotatedMouse.x, rotatedMouse.y, 5);\r\n         canvas.ellipse(mouse.x, mouse.y, 5);\r\n         showTransDetails([\r\n            `*${(mySketch.gs.jVector.mag / subTools.jVector.mag).toFixed(2)}`\r\n         ]);\r\n      }\r\n      else if (subTools.axis == 'xy') {\r\n         let midEq = lines.lineEquation(-(mySketch.gs.transform.yAngle + mySketch.gs.transform.xAngle) / 2, mySketch.gs.center);\r\n         let rotatedMouse = lines.projectionToLine(subTools.mouse, midEq); // rotatedMouse here is the modified start point which sets on the line between x and y axises \r\n\r\n         let incre = (math.dist(mouse.x, mouse.y, rotatedMouse.x, rotatedMouse.y) ** 2 - lines.distToLine(new vector(mouse.x, mouse.y), midEq) ** 2) ** 0.5; // pathagorean's method \r\n\r\n         mySketch.gs.transform.transformOrigin = undefined;\r\n         if (!isNaN(incre)) {\r\n            let mina = angles.minAngle(vector.fromAngle(-mySketch.gs.transform.yAngle), new vector(mouse.x, mouse.y).subtract(rotatedMouse));\r\n            let dir = mina < Math.PI / 2 ? 1 : (mina > Math.PI / 2 ? -1 : 0);\r\n\r\n            mySketch.gs.transform.transformOrigin = subTools.transformOrigin;\r\n            let ratio = (mySketch.gs.transform.ySpace + (incre * dir - subTools.increment)) / mySketch.gs.transform.ySpace;\r\n            ratio = math.constrain(ratio, 0.9, 1.1);\r\n            mySketch.gs.transform.ySpace *= ratio;\r\n            mySketch.gs.transform.xSpace *= ratio;\r\n            mySketch.gs.transform.reformYspace();\r\n            mySketch.gs.transform.reformXspace();\r\n            subTools.increment = incre * dir;\r\n         }\r\n\r\n         mySketch.gs.transform.onchange(true);\r\n         mySketch.update();\r\n         canvas.ellipse(rotatedMouse.x, rotatedMouse.y, 5);\r\n         canvas.ellipse(mouse.x, mouse.y, 5);\r\n         showTransDetails([\r\n            `*${(mySketch.gs.jVector.mag / subTools.jVector.mag).toFixed(2)}`\r\n         ]);\r\n      }\r\n   }\r\n\r\n   function rotateAxises(e) {\r\n      if (subTools.axis == 'x') {\r\n         if (math.dist(mySketch.gs.center.x, mySketch.gs.center.y, mouse.x, mouse.y) > 10) {\r\n            let rotatedMouse = subTools.mouse;\r\n            let rotationAngle = angles.angle(subTools.mouse.subtract(new vector(mySketch.gs.center.x, mySketch.gs.center.y)), new vector(mouse.x, mouse.y).subtract(new vector(mySketch.gs.center.x, mySketch.gs.center.y)), 'vectors');\r\n            rotationAngle = angles.constrainAngle(rotationAngle);\r\n            if (!isNaN(rotationAngle)) {\r\n               // mySketch.gs.transform.xAngle = snapAngle(subTools.angle - rotationAngle);\r\n               mySketch.gs.transform.xAngle = angles.snapAngle(subTools.angle - rotationAngle, [0, Math.PI]);\r\n               let center = mySketch.gs.center;\r\n               rotatedMouse = center.add(subTools.mouse.subtract(center).rotate(rotationAngle));\r\n            }\r\n\r\n            mySketch.gs.transform.transformOrigin = undefined;\r\n            mySketch.gs.transform.invokeOnchange = true;\r\n            mySketch.gs.transform.onchange();\r\n            mySketch.update();\r\n\r\n            canvas.ellipse(rotatedMouse.x, rotatedMouse.y, 5);\r\n            canvas.ellipse(mouse.x, mouse.y, 5);\r\n            showTransDetails([\r\n               `xAngle: ${angles.stringDegAngle(mySketch.gs.transform.xAngle.toFixed(2))}`,\r\n               `rotationAngle: ${angles.stringDegAngle(-rotationAngle)}`\r\n            ]);\r\n         }\r\n      } else if (subTools.axis == 'y') {\r\n         if (math.dist(mySketch.gs.center.x, mySketch.gs.center.y, mouse.x, mouse.y) > 10) {\r\n\r\n            let rotatedMouse = subTools.mouse;\r\n            let rotationAngle = angles.angle(subTools.mouse.subtract(new vector(mySketch.gs.center.x, mySketch.gs.center.y)), new vector(mouse.x, mouse.y).subtract(new vector(mySketch.gs.center.x, mySketch.gs.center.y)), 'vectors');\r\n            rotationAngle = angles.constrainAngle(rotationAngle);\r\n            if (!isNaN(rotationAngle)) {\r\n               mySketch.gs.transform.yAngle = angles.snapAngle(subTools.angle - rotationAngle);\r\n               let center = mySketch.gs.center;\r\n               rotatedMouse = center.add(subTools.mouse.subtract(center).rotate(rotationAngle));\r\n            }\r\n\r\n            mySketch.gs.transform.invokeOnchange = true;\r\n            mySketch.gs.transform.onchange();\r\n            mySketch.update();\r\n            canvas.ellipse(rotatedMouse.x, rotatedMouse.y, 5);\r\n            canvas.ellipse(mouse.x, mouse.y, 5);\r\n            showTransDetails([\r\n               `yAngle: ${angles.stringDegAngle(mySketch.gs.transform.yAngle.toFixed(2))}`,\r\n               `rotationAngle: ${angles.stringDegAngle(-rotationAngle)}`\r\n            ]);\r\n         }\r\n      } else if (subTools.axis == 'xy') {\r\n         if (math.dist(mySketch.gs.center.x, mySketch.gs.center.y, mouse.x, mouse.y) > 10) {\r\n            let rotatedMouse = subTools.mouse;\r\n            let rotationAngle = angles.angle(subTools.mouse.subtract(new vector(mySketch.gs.center.x, mySketch.gs.center.y)), new vector(mouse.x, mouse.y).subtract(new vector(mySketch.gs.center.x, mySketch.gs.center.y)), 'vectors');\r\n            rotationAngle = angles.constrainAngle(rotationAngle);\r\n            if (!isNaN(rotationAngle)) {\r\n               mySketch.gs.transform.xAngle = subTools.xAngle - rotationAngle;\r\n               mySketch.gs.transform.yAngle = subTools.yAngle - rotationAngle;\r\n               let center = mySketch.gs.center;\r\n               rotatedMouse = center.add(subTools.mouse.subtract(center).rotate(rotationAngle));\r\n            }\r\n\r\n            mySketch.gs.transform.invokeOnchange = true;\r\n            mySketch.gs.transform.onchange();\r\n            mySketch.update();\r\n            canvas.ellipse(rotatedMouse.x, rotatedMouse.y, 5);\r\n            canvas.ellipse(mouse.x, mouse.y, 5);\r\n            showTransDetails([\r\n               `xAngle: ${angles.stringDegAngle(mySketch.gs.transform.xAngle)}`,\r\n               `yAngle: ${angles.stringDegAngle(mySketch.gs.transform.yAngle)}`,\r\n               `rotationAngle: ${angles.stringDegAngle(-rotationAngle)}`\r\n            ]);\r\n         }\r\n      }\r\n   }\r\n\r\n   function zoomBox(e) {\r\n\r\n      //#region calculating box\r\n      let s = { xmin: subTools.mouse.x, ymin: subTools.mouse.y, xmax: mouse.x, ymax: mouse.y };\r\n\r\n      subTools.pxViewport.xmin = Math.min(s.xmin, s.xmax); subTools.pxViewport.ymin = Math.min(s.ymin, s.ymax);\r\n      subTools.pxViewport.xmax = Math.max(s.xmin, s.xmax); subTools.pxViewport.ymax = Math.max(s.ymin, s.ymax);\r\n      subTools.pxViewport.width = subTools.pxViewport.xmax - subTools.pxViewport.xmin;\r\n      subTools.pxViewport.height = subTools.pxViewport.ymax - subTools.pxViewport.ymin;\r\n      s = subTools.pxViewport;\r\n      let slice;\r\n      if (s.width < 10 && s.height < 10) {\r\n         s.width = 0;\r\n         s.height = 0;\r\n      }\r\n      // reserved ratios\r\n      if (document.querySelector('#subtools-zoom-rr').checked || e.shiftKey) {\r\n         let a = angles.minAngle(vector.fromAngle(0), new vector(mySketch.gs.width, mySketch.gs.height));\r\n         let equ = lines.lineEquation(a, subTools.mouse);\r\n         let p = lines.projectionToLine(new vector(mouse.x, mouse.y), equ);\r\n         s = { xmin: subTools.mouse.x, ymin: subTools.mouse.y, xmax: Math.round(p.x), ymax: Math.round(p.y) };\r\n         subTools.pxViewport.xmin = Math.min(s.xmin, s.xmax); subTools.pxViewport.ymin = Math.min(s.ymin, s.ymax);\r\n         subTools.pxViewport.xmax = Math.max(s.xmin, s.xmax); subTools.pxViewport.ymax = Math.max(s.ymin, s.ymax);\r\n         subTools.pxViewport.width = subTools.pxViewport.xmax - subTools.pxViewport.xmin;\r\n         subTools.pxViewport.height = subTools.pxViewport.ymax - subTools.pxViewport.ymin;\r\n         s = subTools.pxViewport;\r\n      }\r\n      else {\r\n         if (s.height < 10 && s.width > 10) {\r\n            slice = { type: 'vertical' };\r\n            s.ymin = 0;\r\n            s.ymax = mySketch.gs.height;\r\n            s.height = mySketch.gs.height;\r\n         }\r\n         else if (s.height > 10 && s.width < 10) {\r\n            slice = { type: 'horizental' };\r\n            s.xmin = 0;\r\n            s.xmax = mySketch.gs.width;\r\n            s.width = mySketch.gs.width;\r\n         }\r\n      }\r\n      //#endregion\r\n\r\n      //#region drawing box\r\n      mySketch.subcanvas.resize(mySketch.gs.width, mySketch.gs.height);\r\n      mySketch.subcanvas.clear();\r\n      let c1 = mySketch.canvas.get(0, 0, mySketch.canvas.width, mySketch.canvas.height);\r\n      let c2 = mySketch.canvas.get(s.xmin, s.ymin, s.width, s.height);\r\n      mySketch.subcanvas.image(c1, 0, 0);\r\n      let fadeColor = mySketch.coor.coorSettings.background.isDark() ? [255, 155] : [0, 155];\r\n      mySketch.subcanvas.background(...fadeColor);\r\n      if (s.width && s.height) {\r\n         let size = 10,\r\n            sw = 4 + (4), r = 3;\r\n         if (!slice) {\r\n\r\n            mySketch.subcanvas.stroke(0);\r\n            mySketch.subcanvas.strokeWeight(sw);\r\n            mySketch.subcanvas.rect(s.xmin, s.ymin, size, size, r);\r\n            mySketch.subcanvas.rect(s.xmax - size, s.ymin, size, size, r);\r\n            mySketch.subcanvas.rect(s.xmin, s.ymax - size, size, size, r);\r\n            mySketch.subcanvas.rect(s.xmax - size, s.ymax - size, size, size, r);\r\n\r\n            mySketch.subcanvas.stroke(255, 200);\r\n            mySketch.subcanvas.strokeWeight(sw - 4);\r\n            mySketch.subcanvas.rect(s.xmin, s.ymin, size, size, r);\r\n            mySketch.subcanvas.rect(s.xmax - size, s.ymin, size, size, r);\r\n            mySketch.subcanvas.rect(s.xmin, s.ymax - size, size, size, r);\r\n            mySketch.subcanvas.rect(s.xmax - size, s.ymax - size, size, size, r);\r\n\r\n         } else {\r\n            let size = 20,\r\n               sw = 4 + (4), r = 3;\r\n            if (slice.type === 'vertical') {\r\n               mySketch.subcanvas.stroke(0);\r\n               mySketch.subcanvas.strokeWeight(sw);\r\n               mySketch.subcanvas.rect(s.xmin, subTools.mouse.y - size / 2, size, size, r);\r\n               mySketch.subcanvas.rect(s.xmax - size, subTools.mouse.y - size / 2, size, size, r);\r\n               mySketch.subcanvas.stroke(255, 200);\r\n               mySketch.subcanvas.strokeWeight(sw - 4);\r\n               mySketch.subcanvas.rect(s.xmin, subTools.mouse.y - size / 2, size, size, r);\r\n               mySketch.subcanvas.rect(s.xmax - size, subTools.mouse.y - size / 2, size, size, r);\r\n            } else {\r\n               mySketch.subcanvas.stroke(0);\r\n               mySketch.subcanvas.strokeWeight(8);\r\n               mySketch.subcanvas.rect(subTools.mouse.x - size / 2, s.ymin, size, size, r);\r\n               mySketch.subcanvas.rect(subTools.mouse.x - size / 2, s.ymax - size, size, size, r);\r\n               mySketch.subcanvas.stroke(255, 200);\r\n               mySketch.subcanvas.strokeWeight(4);\r\n               mySketch.subcanvas.rect(subTools.mouse.x - size / 2, s.ymin, size, size, r);\r\n               mySketch.subcanvas.rect(subTools.mouse.x - size / 2, s.ymax - size, size, size, r);\r\n            }\r\n         }\r\n\r\n         mySketch.subcanvas.image(c2, s.xmin, s.ymin);\r\n      }\r\n      image(mySketch.subcanvas, 0, 0);\r\n\r\n      //#endregion\r\n\r\n   }\r\n\r\n   /**\r\n    * @param {Array} messeges ::: Array of string which will be converted into p html element\r\n    */\r\n   function showTransDetails(messeges) {\r\n      let html = '<div class=\"subtools-details\">';\r\n      for (let msg of messeges) {\r\n         html += '<p>' + msg + '</p>';\r\n      }\r\n      html += '</div>';\r\n      subTools.details.setContent(html);\r\n      subTools.details.show();\r\n   }\r\n\r\n   //#endregion\r\n\r\n}\r\n\r\n//#endregion\r\n\r\n","import canvasEvents from \"./canvasEvents.js\";\r\nimport toolsEvents from \"./toolsEvents.js\";\r\nimport ChildControl from \"../ChildControl.js\";\r\nimport { addControl, resize, keyboardSettings } from \"../global.js\";\r\n\r\nexport default function setEvents () {\r\n\r\n   //#region window events\r\n   window.addEventListener('resize', resize);\r\n   window.addEventListener(\"mouseup\", function (event) {\r\n      //#region for backspace interval\r\n      if (keyboardSettings.mouseDownForInterval) {\r\n         keyboardSettings.mouseDownForInterval = false;\r\n         clearInterval(keyboardSettings.backspaceInterval);\r\n      }\r\n      //#endregion\r\n      keyboardSettings.hideKeyPad = true;\r\n   });\r\n   window.addEventListener('mousedown', function (e) {\r\n      //#region hide keybad\r\n      let keypadShown = /\\sshow\\s|^show\\s|\\sshow$/.test(keyboardSettings.showHideKeyBtn.className); // hasClass\r\n      if (keyboardSettings.hideKeyPad && keypadShown) {\r\n         keyboardSettings.showHideKeyBtn.click();\r\n      }\r\n      //#endregion\r\n   });\r\n   //#endregion\r\n\r\n   document.querySelector('.new-control .new-expr').addEventListener('click', (e) => {\r\n      let oc = new ChildControl();\r\n      addControl(oc);\r\n   });\r\n\r\n   canvasEvents();\r\n   toolsEvents();\r\n}","import { subTools } from '../global.js';\r\n\r\nexport default function toolsEvents() {\r\n\r\n   //#region zoom\r\n\r\n   let zoom = (direction) => {\r\n      var delay = 20;\r\n      setTimeout(() => {\r\n         if (direction == 'in') { mySketch.gs.transform.zoomIn(); mySketch.update(); } else { mySketch.gs.transform.zoomOut(); mySketch.update(); }\r\n         setTimeout(() => {\r\n            if (direction == 'in') { mySketch.gs.transform.zoomIn(); mySketch.update(); } else { mySketch.gs.transform.zoomOut(); mySketch.update(); }\r\n            setTimeout(() => {\r\n               if (direction == 'in') { mySketch.gs.transform.zoomIn(); mySketch.update(); } else { mySketch.gs.transform.zoomOut(); mySketch.update(); }\r\n               setTimeout(() => {\r\n                  if (direction == 'in') { mySketch.gs.transform.zoomIn(); mySketch.update(); } else { mySketch.gs.transform.zoomOut(); mySketch.update(); }\r\n                  setTimeout(() => {\r\n                     if (direction == 'in') { mySketch.gs.transform.zoomIn(); mySketch.update(); } else { mySketch.gs.transform.zoomOut(); mySketch.update(); }\r\n                     setTimeout(() => {\r\n                        if (direction == 'in') { mySketch.gs.transform.zoomIn(); mySketch.update(); } else { mySketch.gs.transform.zoomOut(); mySketch.update(); }\r\n                        setTimeout(() => {\r\n                           if (direction == 'in') { mySketch.gs.transform.zoomIn(); mySketch.update(); } else { mySketch.gs.transform.zoomOut(); mySketch.update(); }\r\n                           setTimeout(() => {\r\n                              if (direction == 'in') { mySketch.gs.transform.zoomIn(); mySketch.update(); } else { mySketch.gs.transform.zoomOut(); mySketch.update(); }\r\n                           }, delay);\r\n                        }, delay);\r\n                     }, delay);\r\n                  }, delay);\r\n               }, delay);\r\n            }, delay);\r\n         }, delay);\r\n      });\r\n   };\r\n\r\n   document.querySelector('#zoom-in-btn').addEventListener('click', () => {\r\n      zoom('in');\r\n   });\r\n\r\n   document.querySelector('#zoom-out-btn').addEventListener('click', () => {\r\n      zoom('out');\r\n   });\r\n\r\n   //#endregion tool - subtools events\r\n\r\n   let radios = document.querySelectorAll('.subtools-container input[type*=\"radio\"]');\r\n   radios.forEach(el => {\r\n      subTools.type = el.checked ? el.dataset.type : subTools.type;\r\n      el.addEventListener('change', () => {\r\n         subTools.type = el.checked ? el.dataset.type : subTools.type;\r\n      });\r\n   });\r\n\r\n   document.querySelector('#home').addEventListener('click', () => {\r\n      mySketch.gs.reset();\r\n      mySketch.update();\r\n   });\r\n\r\n   document.querySelector('#centrate').addEventListener('click', () => {\r\n      mySketch.gs.centrate();\r\n      mySketch.update();\r\n   });\r\n\r\n} ","import keypadEvents from './events.js';\r\nimport { keyboardSettings } from '../global.js';\r\n\r\nexport default function setupKeypad() {\r\n\r\n   keyboardSettings.showHideKeyBtn.addEventListener(\"click\", function (e) {\r\n      let parent = document.querySelector(\".keypad-container\");\r\n      let $this = $(this);\r\n      let __keypadShown = $this.hasClass(\"show\");\r\n      let from = __keypadShown ? \"show\" : \"hide\",\r\n         to = __keypadShown ? \"hide\" : \"show\";\r\n\r\n      keyboardSettings.showHideKeyBtn.classList.remove(from);\r\n      keyboardSettings.showHideKeyBtn.classList.add(to);\r\n\r\n      parent.classList.remove(from);\r\n      parent.classList.add(to);\r\n      if (__keypadShown) {\r\n         document.body.appendChild(keyboardSettings.showHideKeyBtn);\r\n      } else {\r\n         parent.insertBefore(keyboardSettings.showHideKeyBtn, parent.firstElementChild);\r\n      }\r\n   });\r\n\r\n   SUI.tabs(document.body.querySelector('.keypad-container .tabs-1'));\r\n\r\n   keypadEvents();\r\n}\r\n","import { keyboardSettings } from './../global.js';\r\n\r\nexport default function(){\r\n   //#region (keypad - showHideBtn) events\r\n   let keypad = $('.keypad-container'),\r\n      sh = $(keyboardSettings.showHideKeyBtn);\r\n\r\n   keypad\r\n      .on('mousedown', function () {\r\n         keyboardSettings.mathField.focus();\r\n      });\r\n\r\n\r\n   sh.on(\"mouseup\", function (e) {\r\n      keyboardSettings.hideKeyPad = false;\r\n   });\r\n\r\n   $(document.body).delegate(\"[cancel-hiding-keypad]\", \"mousedown touchstart\", function (e) {\r\n      keyboardSettings.hideKeyPad = false;\r\n   });\r\n\r\n   $('.control').delegate(\".main\", \"touchstart\", function (e) {\r\n      if (sh.hasClass(\"hide\")) {\r\n         sh.click();\r\n      }\r\n   });\r\n   //#endregion\r\n\r\n   //#region writing\r\n\r\n   $(\".keypad-container .rows button[mq-cmd]\").each(function (index) {\r\n      $(this).on('click', function () {\r\n         let $this = $(this);\r\n         if ($this.hasClass('double-shiftable')) {\r\n            keyboardSettings.mathField.cmd($(' > div.active > span.active', $this).attr('mq-cmd'));\r\n         } else if ($this.hasClass('shiftable')) {\r\n            keyboardSettings.mathField.cmd($(' > span.active', $this).attr('mq-cmd'));\r\n         } else {\r\n            keyboardSettings.mathField.cmd(this.getAttribute('mq-cmd'));\r\n         }\r\n         keyboardSettings.mathField.focus();\r\n      });\r\n   });\r\n\r\n   $(\".keypad-container .rows button[mq-write]\").each(function (index) {\r\n      $(this).on('click', function () {\r\n         let $this = $(this);\r\n         if ($this.hasClass('double-shiftable')) {\r\n            keyboardSettings.mathField.write($(' > div.active > span.active', $this).attr('mq-write'));\r\n         } else if ($this.hasClass('shiftable')) {\r\n            keyboardSettings.mathField.write($(' > span.active', $this).attr('mq-write'));\r\n         } else {\r\n            keyboardSettings.mathField.write(this.getAttribute('mq-write'));\r\n         }\r\n         keyboardSettings.mathField.focus();\r\n      });\r\n   });\r\n\r\n   $(\".keypad-container .rows button[mq-func]\").each(function (index) {\r\n      $(this).on(\"click\", function () {\r\n         let $this = $(this);\r\n         if ($this.hasClass(\"double-shiftable\")) {\r\n            keyboardSettings.mathField.write($(\" > div.active > span.active\", $this).attr(\"mq-func\"));\r\n         } else if ($this.hasClass(\"shiftable\")) {\r\n            keyboardSettings.mathField.write($(\" > span.active\", $this).attr(\"mq-func\"));\r\n         } else {\r\n            keyboardSettings.mathField.write(this.getAttribute(\"mq-func\"));\r\n         }\r\n         keyboardSettings.mathField.cmd(\"(\");\r\n         keyboardSettings.mathField.focus();\r\n      });\r\n   });\r\n\r\n   $(\".space\").on(\"click\", function () {\r\n      keyboardSettings.mathField.keystroke(\"Right\");\r\n   });\r\n\r\n   //keystrokes\r\n   $(\".backspace\").on(\"mousedown\", function () {\r\n      keyboardSettings.mathField.keystroke(\"Backspace\");\r\n      keyboardSettings.mouseDownForInterval = true;\r\n      setTimeout(function () {\r\n         if (keyboardSettings.mouseDownForInterval) {\r\n            keyboardSettings.backspaceInterval = setInterval(function () {\r\n               keyboardSettings.mathField.keystroke(\"Backspace\");\r\n            }, 120);\r\n         }\r\n      }, 400);\r\n   });\r\n\r\n   //#endregion\r\n\r\n   //#region direction\r\n\r\n   $(\".go-left\").on(\"click\", function () {\r\n      keyboardSettings.mathField.keystroke(\"Left\");\r\n   });\r\n\r\n   $(\".go-right\").on(\"click\", function () {\r\n      keyboardSettings.mathField.keystroke(\"Right\");\r\n   });\r\n\r\n   $(\".go-up\").on(\"click\", function () {\r\n      keyboardSettings.mathField.keystroke(\"Up\");\r\n   });\r\n\r\n   $(\".go-down\").on(\"click\", function () {\r\n      keyboardSettings.mathField.keystroke(\"Down\");\r\n   });\r\n\r\n   //#endregion\r\n\r\n   //#region shift - double-shift\r\n\r\n   var shift = $(\".shift\");\r\n   shift.on(\"click\", function () {\r\n      let $this = $(this);\r\n      let rows = $this.parents(\".rows\");\r\n      if ($this.hasClass(\"active\")) {\r\n         $this.removeClass(\"active\");\r\n         $this.addClass(\"lock\");\r\n         rows.removeClass(\"shift-active\");\r\n         rows.addClass(\"shift-lock\");\r\n      } else {\r\n         if ($this.hasClass(\"lock\")) {\r\n            let spans = $(\r\n               \".shiftable > span, .double-shiftable > div > span\",\r\n               rows\r\n            );\r\n            spans.toggleClass(\"active\");\r\n            $this.removeClass(\"lock\");\r\n            rows.removeClass(\"shift-lock\");\r\n         } else {\r\n            let spans = $(\r\n               \".shiftable > span, .double-shiftable > div > span\",\r\n               rows\r\n            );\r\n            spans.toggleClass(\"active\");\r\n            $this.addClass(\"active\");\r\n            rows.addClass(\"shift-active\");\r\n         }\r\n      }\r\n   });\r\n\r\n   // this for disabling shift if it is not .lock\r\n   $(\".keypad-container .rows button\")\r\n      .not('.shift, .double-shift')\r\n      .on(\"click\", function () {\r\n         let $this = $(this);\r\n         let rows = $this.parents(\".rows\");\r\n         if (rows.hasClass(\"shift-active\")) {\r\n            let shift = $(\"button.shift\", rows);\r\n            let spans = $(\".shiftable > span, .double-shiftable > div > span\", rows);\r\n            spans.toggleClass(\"active\");\r\n            shift.removeClass(\"active\");\r\n            rows.removeClass('shift-active');\r\n         }\r\n      });\r\n\r\n   var dShift = $(\".double-shift\");\r\n   dShift.on(\"click\", function () {\r\n      let $this = $(this);\r\n      let divs = $(\".double-shiftable > div\", $this.parents(\".rows\"));\r\n      divs.toggleClass(\"active\");\r\n      $this.toggleClass(\"active\");\r\n\r\n   });\r\n\r\n      //#endregion\r\n}","import { getContainment, updateObjsOrder, resize, canvasParent, addControl, keyboardSettings } from './global.js';\r\nimport Sketch from '../PLOTTO/Sketch.js';\r\nimport drawing from '../PLOTTO/drawing/index.js';\r\nimport setEvents from './events/index.js';\r\nimport { default as setupKeypad} from './keypad/index.js';\r\nimport ChildControl from './ChildControl.js';\r\nimport { Variable } from '../PLOTTO/GraphChildren/index.js';\r\n/**\r\n * \"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\" reminder\r\n * app folder is associated with PLOTTO folder, both of them depends upon the other.\r\n */\r\nexport default function setupAPP(canvas) {\r\n\r\n  window.MP = MathPackage;\r\n  window.angles = MP.Angles;\r\n  window.lines = MP.Lines;\r\n  window.math = MP.Core;\r\n  window.drawing = drawing;\r\n  window.vector = MP.entities.Vector;\r\n  window.MQ = MathQuill.getInterface(2);\r\n  window.mySketch = new Sketch(canvas);\r\n  window.canvas = mySketch.canvas;\r\n  // canvasParent.appendChild(window.canvas.elt);\r\n\r\n  let mathFields = $(\".math-field\");\r\n  for (let i = 0; i < mathFields.length; i++) {\r\n    MQ.StaticMath(mathFields[i]);\r\n  }\r\n\r\n  setEvents();\r\n  setupKeypad();\r\n\r\n  setupResizer();\r\n  setupSortable();\r\n\r\n  resize();\r\n  mySketch.gs.centrate();\r\n  mySketch.update();\r\n\r\n\r\n  $('#loading-layer').fadeOut(1000, () => {\r\n    let oc = new ChildControl();\r\n    addControl(oc);\r\n    keyboardSettings.mathField = oc.mathField;\r\n    // keyboardSettings.mathField.latex('a=1');\r\n  });\r\n\r\n  console.log('%cPLOTTO', 'background: black; color: white; font: 50px consolas;');\r\n\r\n  console.log('%cWe are sciCave', 'color: blue; font: 25px consolas;');\r\n\r\n}\r\n\r\nfunction setupResizer(){\r\n\r\n  //#region sidebar-resizer\r\n\r\n  var sidebar = document.querySelector(\".sidebar-container\");\r\n  var sidebarResizer = sidebar.querySelector(\".resizer\");\r\n  let srDraggingConfig = {}; // sidebarResizerDraggingConfig\r\n\r\n  $(sidebarResizer).draggable({\r\n    axis: 'x',\r\n    containment: getContainment(),\r\n\r\n    start: (e) => {\r\n      sidebarResizer.classList.add('dragging');\r\n      srDraggingConfig.intialWidth = sidebar.clientWidth;\r\n      srDraggingConfig.intialOffset = e.pageX;\r\n      srDraggingConfig.cursor = document.body.style.cursor;\r\n      document.body.style.cursor = 'e-resize';\r\n    },\r\n\r\n    stop: () => {\r\n      sidebarResizer.classList.remove('dragging');\r\n      sidebar.style.flexBasis = sidebarResizer.style.left;\r\n      document.body.style.cursor = srDraggingConfig.cursor;\r\n    },\r\n\r\n    drag: () => {\r\n      sidebar.style.flexBasis = sidebarResizer.style.left;\r\n      resize(false);\r\n    }\r\n\r\n  });\r\n\r\n  //#endregion\r\n\r\n}\r\n\r\nfunction setupSortable(){\r\n\r\n  //#region sortable-sidebar\r\n\r\n  var outer_ccc = document.querySelector('.outer-controls');\r\n  var inner_ccc = outer_ccc.querySelector('.inner-controls');\r\n\r\n  let startSorting = true;\r\n  $(\".controls.sortable\").sortable({\r\n    axis: \"y\",\r\n    cancel: '.control [cancel-move]',\r\n\r\n    start: function (e, ui) {\r\n      startSorting = true;\r\n      outer_ccc.classList.add('sorting');\r\n      if (inner_ccc.clientHeight > outer_ccc.clientHeight) {\r\n        outer_ccc.style.overflowY = 'scroll';\r\n      }\r\n\r\n      ui.item[0].classList.add('dragging');\r\n      let id = ui.item[0].getAttribute('id');\r\n      for (let child in mySketch.children) {\r\n        if (child.id === id) {\r\n          child.focus();\r\n          continue;\r\n        }\r\n      }\r\n    },\r\n\r\n    stop: function (e, ui) {\r\n      if (startSorting) {\r\n        outer_ccc.classList.remove('sorting');\r\n        outer_ccc.style.overflowY = 'auto';\r\n        ui.item[0].classList.remove('dragging');\r\n      } else {\r\n        startSorting = false;\r\n      }\r\n    },\r\n\r\n    update: function () {\r\n      updateObjsOrder();\r\n    }\r\n\r\n  });\r\n  $(\".controls.sortable\").disableSelection();\r\n\r\n  //#endregion\r\n\r\n}\r\n\r\n\r\nsetupAPP(document.querySelector('#canvas'));"],"names":["generateName","Date","now","randomNameNum","toString","mathFunc","log","x","base","Math","log10","ln","E","sec","cos","csc","sin","cot","tan","sinh","exp","cosh","tanh","asinh","acosh","atanh","gcd","values","gcd_","abs","a","NaN","gcd2","i","length","b","lcm","product","pow","mod","Object","assign","vars","pi","PI","e","getJSfunction","input","params","parse","Function","MagicalParser","Node","MathPackage","Parser","parsedTOjsFunction","maximaTOjsFunction","window","GraphChild","constructor","options","checkOptions","id","handlers","renderable","hasOwnProperty","sketch","this","gs","childrenIDs","push","propName","Error","_id","value","checkId","render","canvas","handlerOptions","onrender","remove","handlerArgs","children","delete","filter","error","onerror","Canvas","elt","document","createElement","ctx","getContext","parent","appendChild","attributes","name","setAttribut","font","width","family","resize","height","clear","fillStyle","fillRect","clientWidth","clientHeight","clearRect","setFont","size","measureString","txt","measureText","line","x1","y1","x2","y2","moveTo","lineTo","ellipse","y","radius1","radius2","rotation","startAngle","endAngle","counterClockWise","beginPath","fill","stroke","color","r","g","brightness","num","num2","num3","num4","num5","hue","num7","num6","saturation","isDark","toArray","colorPackage","Core","random","c","randomColor","weight","style","setup","canvasORctx","strokeStyle","lineWidth","Xfunction","pen","coor","coorSettings","background","drawing","randomLightColor","randomDarkColor","expression","expr","str","replace","indexOf","p","previousP","midP","continous","viewport","xmin","xmax","drawingStep","coorTOpx","isNaN","sign","Point","regex","match","strokeWeight","splice","eval","EvalExpr","check","type","__generateJS","args","evalFunc","Variable","setValue","onchange","getValue","ChildControl","graphChild","innerHTML","childNodes","genRandomName","mySketch","set","setEvents","newid","_graphChild","drawable","onremove","removeElt","control","prev","__updateElts","gc","varsNotExist","__checkVars","update","scriptELT","querySelector","removeELT","orderELT","mathField","MQ","MathField","sumStartsWithNEquals","supSubsRequireOperand","autoSubscriptNumerals","autoCommands","maxDepth","edit","handleScript","latex","enter","newChild","addControl","parseInt","textContent","focus","addEventListener","blur","disableHandling","newGC","parsed","scriptParser","latexTOmaxima","parsedScript","props","childFromParsed","__getAll","concat","find","isError","classList","addVarsElt","$","reduce","bind","alert","innerText","append","slice","setScript","script","handle","focusTheField","focusedChild","add","blurTheField","focusedObject","undefined","errorELT","balloon","html","contents","message","minLifetime","css","hide","fadeOut","delay","fadeIn","console","removeGraphChild","controls","childElementCount","newControlBtn","parentElement","setTimeout","from","to","__updateXfunction","__toXfunction","__updateEvalExpr","__toEvalExpr","__updateVariable","__toVariable","sideStatus","querySelectorAll","forEach","setAttribute","valueType","click","attr","specialProps","valueElt","getAttribute","fraction","denominator","numerator","StaticMath","quotientRemainder","quotient","sliderOuter","slider","invokeOnchange","parseFloat","on","ismousedown","scmfs","min","max","step","updateSlider","_xAngle","xSpace","xSpaceValue","xSpaceModifier","_yAngle","ySpace","ySpaceValue","ySpaceModifier","angleMargin","angles","deg","zoomLimits","zoomRatio","xZoomingState","yZoomingState","_transformOrigin","pxVector","vector","pxTOcoor","coorVector","v","constrainAngle","minAngle","fromAngle","angle","dir","mult","rotate","xAngle","yAngle","rotateX","rotateY","translate","_center","center","translateX","translateY","zoomIn","centerOfZoom","transformOrigin","xZoomIn","yZoomIn","zoomOut","xZoomOut","yZoomOut","reformXspace","reformYspace","setViewport","corner","ymin","ymax","xs","ys","isFinite","p_","getViewport","pxViewport","xStart","xToCoor","xEnd","yStart","yToCoor","yEnd","done","ratio","reset","src","change","transToOrigin","ysm","xsm","xScale","yScale","subtract","math","isNumeric","lastEdition","transform","_width","_height","Transform","physicsRun","centrate","xToPixel","yToPixel","xCoorValue","yCoorValue","xPixelValue","yPixelValue","__id","defaultCoorSettings","xUnit","yUnit","drawDecimalLines","drawMainLines","drawAxisesLines","drawPolarCircles","drawPolarLines","drawPolarAngles","drawNumbers","decimalLinesSpace","polarCirclesSpace","polarLinesAnglesSpace","penDecimalLines","penMainLines","penXaxis","penYaxis","penPolarCircles","penPolarLines","autoRefiningOnZoomimg","antiBackground","custom","radian","start_x","start_y","end_x","end_y","floor","ceil","xD","yD","join","toExponential","toFixed","__getLabelPos","jVector","fillText","iVector","pos","number","dimension","unitVec","bounds","n","Sketch","GraphSettings","Coordinates","subcanvas","ChildrenCanvas","Map","CustomParsers","child","childFromScript","propsTOset","parsedString","getChildParser","left","right","contains","reservedFunction","getChildById","get","draw","coors","drawImage","subTools","details","SUI","TempMessege","layer","toolsbar","onhoverFix","position","bottom","duration","content","mouse","updateObjsOrder","objs","order","obj","index","insertBefore","canvasParent","setContainment","vp","draggable","getContainment","sidebarStyle","getComputedStyle","minWidth","maxWidth","keyboardSettings","backspaceInterval","mouseDownForInterval","showHideKeyBtn","canvasEvents","mousepressed","lines","Lines","showTransDetails","messeges","msg","setContent","show","search","xEq","lineEquation","yEq","d","distTo","distToLine","axis","xSapce","ySapce","xPenColor","yPenColor","space","o","constrain","penColor","increment","preventDefault","canvasPos","getPosittion","parentPos","top","offsetParent","offsetLeft","offsetTop","rotatedMouse","incre","dist","mina","mag","midEq","projectionToLine","scaleAxises","rotationAngle","snapAngle","stringDegAngle","rotateAxises","s","checked","shiftKey","equ","round","c1","c2","image","fadeColor","sw","rect","zoomBox","stopPropagation","mousePos","wheelDelta","event","clearInterval","hideKeyPad","keypadShown","test","className","zoom","direction","el","dataset","toolsEvents","setupKeypad","__keypadShown","hasClass","body","firstElementChild","tabs","keypad","sh","delegate","each","$this","cmd","write","keystroke","setInterval","rows","parents","removeClass","addClass","toggleClass","not","shift","keypadEvents","setupAPP","MP","Angles","entities","Vector","MathQuill","getInterface","mathFields","sidebar","sidebarResizer","srDraggingConfig","containment","start","intialWidth","intialOffset","pageX","cursor","stop","flexBasis","drag","setupResizer","outer_ccc","inner_ccc","startSorting","sortable","cancel","ui","overflowY","item","disableSelection","setupSortable","oc"],"mappings":"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"}